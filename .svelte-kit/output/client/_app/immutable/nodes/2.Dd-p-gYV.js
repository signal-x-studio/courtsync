import{f as g,a as u,c as At,d as Dr,t as ir}from"../chunks/6L4z5Hrz.js";import"../chunks/ghclKoKz.js";import{d as vr,w as ma,o as Ia,a as Xa,g as ha}from"../chunks/BHMDx88I.js";import{a0 as zo,aj as Go,aR as qo,aS as Xo,aT as Io,K as ja,W as Qo,aU as Do,o as ro,aV as Ko,aW as Zo,aX as en,aY as tn,Y as an,aZ as rn,aP as on,b as i,X as nn,p as Ft,_ as P,a_ as de,g as e,a2 as v,e as M,a$ as Bt,k as r,s,l as t,t as N,j as jt,i as ct,a8 as _e,b0 as oo,z as pa,b1 as za,b2 as sn}from"../chunks/DbUpsjvX.js";import{s as w,e as Ra,d as Ht}from"../chunks/1c6Rvobr.js";import{p as ye,i as $,b as Ga,s as Zt,a as Pa}from"../chunks/DApip8Xv.js";import{s as ea,a as Se,e as tt,i as at,c as ln}from"../chunks/BdamqLsw.js";import{i as Rt}from"../chunks/CwzJpzwR.js";const cn=!0;function fa(l,o,a=!1){if(l.multiple){if(o==null)return;if(!Go(o))return qo();for(var n of l.options)n.selected=o.includes(sr(n));return}for(n of l.options){var c=sr(n);if(Xo(c,o)){n.selected=!0;return}}(!a||o!==void 0)&&(l.selectedIndex=-1)}function ga(l){var o=new MutationObserver(()=>{fa(l,l.__value)});o.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),zo(()=>{o.disconnect()})}function no(l,o,a=o){var n=new WeakSet,c=!0;Io(l,"change",d=>{var h=d?"[selected]":":checked",y;if(l.multiple)y=[].map.call(l.querySelectorAll(h),sr);else{var f=l.querySelector(h)??l.querySelector("option:not([disabled])");y=f&&sr(f)}a(y),ja!==null&&n.add(ja)}),Qo(()=>{var d=o();if(l===document.activeElement){var h=Do??ja;if(n.has(h))return}if(fa(l,d,c),c&&d===void 0){var y=l.querySelector(":checked");y!==null&&(d=sr(y),a(d))}l.__value=d,c=!1}),ga(l)}function sr(l){return"__value"in l?l.__value:l.value}const dn=Symbol("is custom element"),vn=Symbol("is html");function Ha(l){if(ro){var o=!1,a=()=>{if(!o){if(o=!0,l.hasAttribute("value")){var n=l.value;Tt(l,"value",null),l.value=n}if(l.hasAttribute("checked")){var c=l.checked;Tt(l,"checked",null),l.checked=c}}};l.__on_r=a,an(a),rn()}}function un(l,o){var a=so(l);a.value===(a.value=o??void 0)||l.value===o&&(o!==0||l.nodeName!=="PROGRESS")||(l.value=o??"")}function hn(l,o){var a=so(l);a.checked!==(a.checked=o??void 0)&&(l.checked=o)}function Tt(l,o,a,n){var c=so(l);ro&&(c[o]=l.getAttribute(o),o==="src"||o==="srcset"||o==="href"&&l.nodeName==="LINK")||c[o]!==(c[o]=a)&&(o==="loading"&&(l[Ko]=a),a==null?l.removeAttribute(o):typeof a!="string"&&fn(l).includes(o)?l[o]=a:l.setAttribute(o,a))}function so(l){return l.__attributes??(l.__attributes={[dn]:l.nodeName.includes("-"),[vn]:l.namespaceURI===Zo})}var vo=new Map;function fn(l){var o=l.getAttribute("is")||l.nodeName,a=vo.get(o);if(a)return a;vo.set(o,a=[]);for(var n,c=l,d=Element.prototype;d!==c;){n=tn(c);for(var h in n)n[h].set&&a.push(h);c=en(c)}return a}function ka(l,o,a=o){var n=new WeakSet;Io(l,"input",async c=>{var d=c?l.defaultValue:l.value;if(d=Wr(l)?Br(d):d,a(d),ja!==null&&n.add(ja),await on(),d!==(d=o())){var h=l.selectionStart,y=l.selectionEnd,f=l.value.length;if(l.value=d??"",y!==null){var S=l.value.length;h===y&&y===f&&S>f?(l.selectionStart=S,l.selectionEnd=S):(l.selectionStart=h,l.selectionEnd=Math.min(y,S))}}}),(ro&&l.defaultValue!==l.value||i(o)==null&&l.value)&&(a(Wr(l)?Br(l.value):l.value),ja!==null&&n.add(ja)),nn(()=>{var c=o();if(l===document.activeElement){var d=Do??ja;if(n.has(d))return}Wr(l)&&c===Br(l.value)||l.type==="date"&&!c&&!l.value||c!==l.value&&(l.value=c??"")})}function Wr(l){var o=l.type;return o==="number"||o==="range"}function Br(l){return l===""?null:+l}const mn=cn,xn=!1,gn=(async()=>({})),E0=Object.freeze(Object.defineProperty({__proto__:null,load:gn,ssr:xn},Symbol.toStringTag,{value:"Module"})),ur="https://results.advancedeventsystems.com/api",pn="https://results.advancedeventsystems.com/odata",bn=async(l,o,a)=>{const n=`${ur}/event/${l}/courts/${o}/${a}`,c=await fetch(n);if(!c.ok)throw new Error(`Failed to fetch court schedule: ${c.statusText}`);return c.json()},_n=async l=>{const o=`${ur}/event/${l}`,a=await fetch(o);if(!a.ok)throw new Error(`Failed to fetch event info: ${a.statusText}`);return a.json()},yn=async(l,o)=>{const a=`${pn}/${l}/nextassignments(dId=null,cId=${o},tIds=[])?$skip=0&$orderby=TeamName,TeamCode`,n=await fetch(a);if(!n.ok)throw new Error(`Failed to fetch team assignments: ${n.statusText}`);return n.json()},Hr=async(l,o,a,n)=>{const c=`${ur}/event/${l}/division/${o}/team/${a}/schedule/${n}`,d=await fetch(c);if(!d.ok)throw new Error(`Failed to fetch team schedule: ${d.statusText}`);return d.json()},wn=async(l,o)=>{const a=`${ur}/event/${l}/division/${o}/plays`,n=await fetch(a);if(!n.ok)throw new Error(`Failed to fetch division plays: ${n.statusText}`);return n.json()},Sn=async(l,o)=>{const a=`${ur}/event/${l}/poolsheet/${o}`,n=await fetch(a);if(!n.ok)throw new Error(`Failed to fetch pool sheet: ${n.statusText}`);return n.json()},Tr="630 Volleyball",kr="630",Tn=l=>[l.FirstTeamText,l.SecondTeamText,l.WorkTeamText].some(a=>a&&(a.includes(Tr)||a.includes(kr))),kn=l=>l.FirstTeamText&&(l.FirstTeamText.includes(Tr)||l.FirstTeamText.includes(kr))?"first":l.SecondTeamText&&(l.SecondTeamText.includes(Tr)||l.SecondTeamText.includes(kr))?"second":l.WorkTeamText&&(l.WorkTeamText.includes(Tr)||l.WorkTeamText.includes(kr))?"work":null,Mn=l=>{const o=[];return l.forEach(a=>{a.CourtMatches.forEach(n=>{if(Tn(n)){const c=kn(n);c&&c!=="work"&&o.push({...n,CourtName:a.Name,CourtId:a.CourtId,InvolvedTeam:c})}})}),o.sort((a,n)=>a.ScheduledStartDateTime-n.ScheduledStartDateTime)},cr=l=>{const o=new Map;for(let a=0;a<l.length;a++){const n=l[a],c=[];for(let d=0;d<l.length;d++){if(a===d)continue;const h=l[d],y=n.ScheduledStartDateTime<h.ScheduledEndDateTime&&n.ScheduledEndDateTime>h.ScheduledStartDateTime,f=n.CourtId!==h.CourtId;y&&f&&c.push(h.MatchId)}c.length>0&&o.set(n.MatchId,c)}return o},Eo=6048e5,Cn=864e5,uo=Symbol.for("constructDateFrom");function La(l,o){return typeof l=="function"?l(o):l&&typeof l=="object"&&uo in l?l[uo](o):l instanceof Date?new l.constructor(o):new Date(o)}function Ma(l,o){return La(o||l,l)}let $n={};function Er(){return $n}function dr(l,o){var y,f,S,p;const a=Er(),n=(o==null?void 0:o.weekStartsOn)??((f=(y=o==null?void 0:o.locale)==null?void 0:y.options)==null?void 0:f.weekStartsOn)??a.weekStartsOn??((p=(S=a.locale)==null?void 0:S.options)==null?void 0:p.weekStartsOn)??0,c=Ma(l,o==null?void 0:o.in),d=c.getDay(),h=(d<n?7:0)+d-n;return c.setDate(c.getDate()-h),c.setHours(0,0,0,0),c}function Cr(l,o){return dr(l,{...o,weekStartsOn:1})}function Po(l,o){const a=Ma(l,o==null?void 0:o.in),n=a.getFullYear(),c=La(a,0);c.setFullYear(n+1,0,4),c.setHours(0,0,0,0);const d=Cr(c),h=La(a,0);h.setFullYear(n,0,4),h.setHours(0,0,0,0);const y=Cr(h);return a.getTime()>=d.getTime()?n+1:a.getTime()>=y.getTime()?n:n-1}function ho(l){const o=Ma(l),a=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return a.setUTCFullYear(o.getFullYear()),+l-+a}function In(l,...o){const a=La.bind(null,o.find(n=>typeof n=="object"));return o.map(a)}function fo(l,o){const a=Ma(l,o==null?void 0:o.in);return a.setHours(0,0,0,0),a}function Dn(l,o,a){const[n,c]=In(a==null?void 0:a.in,l,o),d=fo(n),h=fo(c),y=+d-ho(d),f=+h-ho(h);return Math.round((y-f)/Cn)}function En(l,o){const a=Po(l,o),n=La(l,0);return n.setFullYear(a,0,4),n.setHours(0,0,0,0),Cr(n)}function Pn(l){return l instanceof Date||typeof l=="object"&&Object.prototype.toString.call(l)==="[object Date]"}function On(l){return!(!Pn(l)&&typeof l!="number"||isNaN(+Ma(l)))}function Nn(l,o){const a=Ma(l,o==null?void 0:o.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}const An={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fn=(l,o,a)=>{let n;const c=An[l];return typeof c=="string"?n=c:o===1?n=c.one:n=c.other.replace("{{count}}",o.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function Yr(l){return(o={})=>{const a=o.width?String(o.width):l.defaultWidth;return l.formats[a]||l.formats[l.defaultWidth]}}const jn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ln={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Un={date:Yr({formats:jn,defaultWidth:"full"}),time:Yr({formats:Rn,defaultWidth:"full"}),dateTime:Yr({formats:Ln,defaultWidth:"full"})},Wn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Bn=(l,o,a,n)=>Wn[l];function or(l){return(o,a)=>{const n=a!=null&&a.context?String(a.context):"standalone";let c;if(n==="formatting"&&l.formattingValues){const h=l.defaultFormattingWidth||l.defaultWidth,y=a!=null&&a.width?String(a.width):h;c=l.formattingValues[y]||l.formattingValues[h]}else{const h=l.defaultWidth,y=a!=null&&a.width?String(a.width):l.defaultWidth;c=l.values[y]||l.values[h]}const d=l.argumentCallback?l.argumentCallback(o):o;return c[d]}}const Hn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Vn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Gn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qn=(l,o)=>{const a=Number(l),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Xn={ordinalNumber:qn,era:or({values:Hn,defaultWidth:"wide"}),quarter:or({values:Yn,defaultWidth:"wide",argumentCallback:l=>l-1}),month:or({values:Vn,defaultWidth:"wide"}),day:or({values:Jn,defaultWidth:"wide"}),dayPeriod:or({values:zn,defaultWidth:"wide",formattingValues:Gn,defaultFormattingWidth:"wide"})};function nr(l){return(o,a={})=>{const n=a.width,c=n&&l.matchPatterns[n]||l.matchPatterns[l.defaultMatchWidth],d=o.match(c);if(!d)return null;const h=d[0],y=n&&l.parsePatterns[n]||l.parsePatterns[l.defaultParseWidth],f=Array.isArray(y)?Kn(y,m=>m.test(h)):Qn(y,m=>m.test(h));let S;S=l.valueCallback?l.valueCallback(f):f,S=a.valueCallback?a.valueCallback(S):S;const p=o.slice(h.length);return{value:S,rest:p}}}function Qn(l,o){for(const a in l)if(Object.prototype.hasOwnProperty.call(l,a)&&o(l[a]))return a}function Kn(l,o){for(let a=0;a<l.length;a++)if(o(l[a]))return a}function Zn(l){return(o,a={})=>{const n=o.match(l.matchPattern);if(!n)return null;const c=n[0],d=o.match(l.parsePattern);if(!d)return null;let h=l.valueCallback?l.valueCallback(d[0]):d[0];h=a.valueCallback?a.valueCallback(h):h;const y=o.slice(c.length);return{value:h,rest:y}}}const es=/^(\d+)(th|st|nd|rd)?/i,ts=/\d+/i,as={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rs={any:[/^b/i,/^(a|c)/i]},os={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ns={any:[/1/i,/2/i,/3/i,/4/i]},ss={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ls={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},is={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cs={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ds={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vs={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},us={ordinalNumber:Zn({matchPattern:es,parsePattern:ts,valueCallback:l=>parseInt(l,10)}),era:nr({matchPatterns:as,defaultMatchWidth:"wide",parsePatterns:rs,defaultParseWidth:"any"}),quarter:nr({matchPatterns:os,defaultMatchWidth:"wide",parsePatterns:ns,defaultParseWidth:"any",valueCallback:l=>l+1}),month:nr({matchPatterns:ss,defaultMatchWidth:"wide",parsePatterns:ls,defaultParseWidth:"any"}),day:nr({matchPatterns:is,defaultMatchWidth:"wide",parsePatterns:cs,defaultParseWidth:"any"}),dayPeriod:nr({matchPatterns:ds,defaultMatchWidth:"any",parsePatterns:vs,defaultParseWidth:"any"})},hs={code:"en-US",formatDistance:Fn,formatLong:Un,formatRelative:Bn,localize:Xn,match:us,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fs(l,o){const a=Ma(l,o==null?void 0:o.in);return Dn(a,Nn(a))+1}function ms(l,o){const a=Ma(l,o==null?void 0:o.in),n=+Cr(a)-+En(a);return Math.round(n/Eo)+1}function Oo(l,o){var p,m,T,E;const a=Ma(l,o==null?void 0:o.in),n=a.getFullYear(),c=Er(),d=(o==null?void 0:o.firstWeekContainsDate)??((m=(p=o==null?void 0:o.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??c.firstWeekContainsDate??((E=(T=c.locale)==null?void 0:T.options)==null?void 0:E.firstWeekContainsDate)??1,h=La((o==null?void 0:o.in)||l,0);h.setFullYear(n+1,0,d),h.setHours(0,0,0,0);const y=dr(h,o),f=La((o==null?void 0:o.in)||l,0);f.setFullYear(n,0,d),f.setHours(0,0,0,0);const S=dr(f,o);return+a>=+y?n+1:+a>=+S?n:n-1}function xs(l,o){var y,f,S,p;const a=Er(),n=(o==null?void 0:o.firstWeekContainsDate)??((f=(y=o==null?void 0:o.locale)==null?void 0:y.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(S=a.locale)==null?void 0:S.options)==null?void 0:p.firstWeekContainsDate)??1,c=Oo(l,o),d=La((o==null?void 0:o.in)||l,0);return d.setFullYear(c,0,n),d.setHours(0,0,0,0),dr(d,o)}function gs(l,o){const a=Ma(l,o==null?void 0:o.in),n=+dr(a,o)-+xs(a,o);return Math.round(n/Eo)+1}function Ut(l,o){const a=l<0?"-":"",n=Math.abs(l).toString().padStart(o,"0");return a+n}const Fa={y(l,o){const a=l.getFullYear(),n=a>0?a:1-a;return Ut(o==="yy"?n%100:n,o.length)},M(l,o){const a=l.getMonth();return o==="M"?String(a+1):Ut(a+1,2)},d(l,o){return Ut(l.getDate(),o.length)},a(l,o){const a=l.getHours()/12>=1?"pm":"am";switch(o){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(l,o){return Ut(l.getHours()%12||12,o.length)},H(l,o){return Ut(l.getHours(),o.length)},m(l,o){return Ut(l.getMinutes(),o.length)},s(l,o){return Ut(l.getSeconds(),o.length)},S(l,o){const a=o.length,n=l.getMilliseconds(),c=Math.trunc(n*Math.pow(10,a-3));return Ut(c,o.length)}},Va={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},mo={G:function(l,o,a){const n=l.getFullYear()>0?1:0;switch(o){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(l,o,a){if(o==="yo"){const n=l.getFullYear(),c=n>0?n:1-n;return a.ordinalNumber(c,{unit:"year"})}return Fa.y(l,o)},Y:function(l,o,a,n){const c=Oo(l,n),d=c>0?c:1-c;if(o==="YY"){const h=d%100;return Ut(h,2)}return o==="Yo"?a.ordinalNumber(d,{unit:"year"}):Ut(d,o.length)},R:function(l,o){const a=Po(l);return Ut(a,o.length)},u:function(l,o){const a=l.getFullYear();return Ut(a,o.length)},Q:function(l,o,a){const n=Math.ceil((l.getMonth()+1)/3);switch(o){case"Q":return String(n);case"QQ":return Ut(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(l,o,a){const n=Math.ceil((l.getMonth()+1)/3);switch(o){case"q":return String(n);case"qq":return Ut(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(l,o,a){const n=l.getMonth();switch(o){case"M":case"MM":return Fa.M(l,o);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(l,o,a){const n=l.getMonth();switch(o){case"L":return String(n+1);case"LL":return Ut(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(l,o,a,n){const c=gs(l,n);return o==="wo"?a.ordinalNumber(c,{unit:"week"}):Ut(c,o.length)},I:function(l,o,a){const n=ms(l);return o==="Io"?a.ordinalNumber(n,{unit:"week"}):Ut(n,o.length)},d:function(l,o,a){return o==="do"?a.ordinalNumber(l.getDate(),{unit:"date"}):Fa.d(l,o)},D:function(l,o,a){const n=fs(l);return o==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):Ut(n,o.length)},E:function(l,o,a){const n=l.getDay();switch(o){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(l,o,a,n){const c=l.getDay(),d=(c-n.weekStartsOn+8)%7||7;switch(o){case"e":return String(d);case"ee":return Ut(d,2);case"eo":return a.ordinalNumber(d,{unit:"day"});case"eee":return a.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(c,{width:"short",context:"formatting"});case"eeee":default:return a.day(c,{width:"wide",context:"formatting"})}},c:function(l,o,a,n){const c=l.getDay(),d=(c-n.weekStartsOn+8)%7||7;switch(o){case"c":return String(d);case"cc":return Ut(d,o.length);case"co":return a.ordinalNumber(d,{unit:"day"});case"ccc":return a.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(c,{width:"narrow",context:"standalone"});case"cccccc":return a.day(c,{width:"short",context:"standalone"});case"cccc":default:return a.day(c,{width:"wide",context:"standalone"})}},i:function(l,o,a){const n=l.getDay(),c=n===0?7:n;switch(o){case"i":return String(c);case"ii":return Ut(c,o.length);case"io":return a.ordinalNumber(c,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(l,o,a){const c=l.getHours()/12>=1?"pm":"am";switch(o){case"a":case"aa":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(c,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(l,o,a){const n=l.getHours();let c;switch(n===12?c=Va.noon:n===0?c=Va.midnight:c=n/12>=1?"pm":"am",o){case"b":case"bb":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(c,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(l,o,a){const n=l.getHours();let c;switch(n>=17?c=Va.evening:n>=12?c=Va.afternoon:n>=4?c=Va.morning:c=Va.night,o){case"B":case"BB":case"BBB":return a.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(c,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(l,o,a){if(o==="ho"){let n=l.getHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return Fa.h(l,o)},H:function(l,o,a){return o==="Ho"?a.ordinalNumber(l.getHours(),{unit:"hour"}):Fa.H(l,o)},K:function(l,o,a){const n=l.getHours()%12;return o==="Ko"?a.ordinalNumber(n,{unit:"hour"}):Ut(n,o.length)},k:function(l,o,a){let n=l.getHours();return n===0&&(n=24),o==="ko"?a.ordinalNumber(n,{unit:"hour"}):Ut(n,o.length)},m:function(l,o,a){return o==="mo"?a.ordinalNumber(l.getMinutes(),{unit:"minute"}):Fa.m(l,o)},s:function(l,o,a){return o==="so"?a.ordinalNumber(l.getSeconds(),{unit:"second"}):Fa.s(l,o)},S:function(l,o){return Fa.S(l,o)},X:function(l,o,a){const n=l.getTimezoneOffset();if(n===0)return"Z";switch(o){case"X":return go(n);case"XXXX":case"XX":return Ba(n);case"XXXXX":case"XXX":default:return Ba(n,":")}},x:function(l,o,a){const n=l.getTimezoneOffset();switch(o){case"x":return go(n);case"xxxx":case"xx":return Ba(n);case"xxxxx":case"xxx":default:return Ba(n,":")}},O:function(l,o,a){const n=l.getTimezoneOffset();switch(o){case"O":case"OO":case"OOO":return"GMT"+xo(n,":");case"OOOO":default:return"GMT"+Ba(n,":")}},z:function(l,o,a){const n=l.getTimezoneOffset();switch(o){case"z":case"zz":case"zzz":return"GMT"+xo(n,":");case"zzzz":default:return"GMT"+Ba(n,":")}},t:function(l,o,a){const n=Math.trunc(+l/1e3);return Ut(n,o.length)},T:function(l,o,a){return Ut(+l,o.length)}};function xo(l,o=""){const a=l>0?"-":"+",n=Math.abs(l),c=Math.trunc(n/60),d=n%60;return d===0?a+String(c):a+String(c)+o+Ut(d,2)}function go(l,o){return l%60===0?(l>0?"-":"+")+Ut(Math.abs(l)/60,2):Ba(l,o)}function Ba(l,o=""){const a=l>0?"-":"+",n=Math.abs(l),c=Ut(Math.trunc(n/60),2),d=Ut(n%60,2);return a+c+o+d}const po=(l,o)=>{switch(l){case"P":return o.date({width:"short"});case"PP":return o.date({width:"medium"});case"PPP":return o.date({width:"long"});case"PPPP":default:return o.date({width:"full"})}},No=(l,o)=>{switch(l){case"p":return o.time({width:"short"});case"pp":return o.time({width:"medium"});case"ppp":return o.time({width:"long"});case"pppp":default:return o.time({width:"full"})}},ps=(l,o)=>{const a=l.match(/(P+)(p+)?/)||[],n=a[1],c=a[2];if(!c)return po(l,o);let d;switch(n){case"P":d=o.dateTime({width:"short"});break;case"PP":d=o.dateTime({width:"medium"});break;case"PPP":d=o.dateTime({width:"long"});break;case"PPPP":default:d=o.dateTime({width:"full"});break}return d.replace("{{date}}",po(n,o)).replace("{{time}}",No(c,o))},bs={p:No,P:ps},_s=/^D+$/,ys=/^Y+$/,ws=["D","DD","YY","YYYY"];function Ss(l){return _s.test(l)}function Ts(l){return ys.test(l)}function ks(l,o,a){const n=Ms(l,o,a);if(console.warn(n),ws.includes(l))throw new RangeError(n)}function Ms(l,o,a){const n=l[0]==="Y"?"years":"days of the month";return`Use \`${l.toLowerCase()}\` instead of \`${l}\` (in \`${o}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Cs=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$s=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Is=/^'([^]*?)'?$/,Ds=/''/g,Es=/[a-zA-Z]/;function Ao(l,o,a){var p,m,T,E;const n=Er(),c=n.locale??hs,d=n.firstWeekContainsDate??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,h=n.weekStartsOn??((E=(T=n.locale)==null?void 0:T.options)==null?void 0:E.weekStartsOn)??0,y=Ma(l,a==null?void 0:a.in);if(!On(y))throw new RangeError("Invalid time value");let f=o.match($s).map(b=>{const x=b[0];if(x==="p"||x==="P"){const _=bs[x];return _(b,c.formatLong)}return b}).join("").match(Cs).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const x=b[0];if(x==="'")return{isToken:!1,value:Ps(b)};if(mo[x])return{isToken:!0,value:b};if(x.match(Es))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:b}});c.localize.preprocessor&&(f=c.localize.preprocessor(y,f));const S={firstWeekContainsDate:d,weekStartsOn:h,locale:c};return f.map(b=>{if(!b.isToken)return b.value;const x=b.value;(Ts(x)||Ss(x))&&ks(x,o,String(l));const _=mo[x[0]];return _(y,x,c.localize,S)}).join("")}function Ps(l){const o=l.match(Is);return o?o[1].replace(Ds,"'"):l}const lt=l=>Ao(new Date(l),"h:mm a"),Kt=l=>Ao(new Date(l),"MMM d, yyyy"),Vr="coveragePlan";function Os(){const{subscribe:l,set:o,update:a}=ma(new Set);try{const c=localStorage.getItem(Vr);if(c){const d=JSON.parse(c);o(new Set(d.selectedMatches))}}catch(c){console.error("Failed to load coverage plan:",c)}const n=c=>{try{const d={selectedMatches:Array.from(c),createdAt:Date.now(),updatedAt:Date.now()};localStorage.setItem(Vr,JSON.stringify(d))}catch(d){console.error("Failed to save coverage plan:",d)}};return{subscribe:l,toggleMatch:c=>{a(d=>{const h=new Set(d);return h.has(c)?h.delete(c):h.add(c),n(h),h})},selectMatch:c=>{a(d=>{const h=new Set(d);return h.add(c),n(h),h})},deselectMatch:c=>{a(d=>{const h=new Set(d);return h.delete(c),n(h),h})},clearPlan:()=>{o(new Set),localStorage.removeItem(Vr)}}}const Wt=Os();vr(Wt,l=>l);const Fo=vr(Wt,l=>l.size),Jr="teamCoverageStatus";function Ns(){const{subscribe:l,set:o,update:a}=ma({});try{const c=localStorage.getItem(Jr);if(c){const d=JSON.parse(c);o(d)}}catch(c){console.error("Failed to load coverage status:",c)}const n=c=>{if(Object.keys(c).length!==0)try{localStorage.setItem(Jr,JSON.stringify(c))}catch(d){console.error("Failed to save coverage status:",d)}};return{subscribe:l,setTeamStatus:(c,d)=>{a(h=>{const y={...h};return d==="not-covered"?delete y[c]:y[c]=d,n(y),y})},getTeamStatus:c=>{let d="not-covered";return l(h=>{d=h[c]||"not-covered"})(),d},clearAllStatus:()=>{o({}),localStorage.removeItem(Jr)},updateFromPlan:(c,d,h)=>{h!==0&&a(y=>{let f;if(d===0?f="not-covered":d===h?f="covered":f="partially-covered",(y[c]||"not-covered")===f)return y;const p={...y};return f==="not-covered"?delete p[c]:p[c]=f,n(p),p})},importStatuses:c=>{o(c),n(c)}}}const gt=Ns(),bo="userRole";function As(){const{subscribe:l,set:o}=ma("media");try{const n=localStorage.getItem(bo);n&&["media","spectator","coach"].includes(n)&&o(n)}catch(n){console.error("Failed to load user role:",n)}const a=n=>{try{localStorage.setItem(bo,n)}catch(c){console.error("Failed to save user role:",c)}};return{subscribe:l,setRole:n=>{o(n),a(n)}}}const Ea=As(),hr=vr(Ea,l=>l==="media"),Pr=vr(Ea,l=>l==="spectator"),jo=vr(Ea,l=>l==="coach");var Fs=g('<form data-event-input="" class="space-y-3 sm:space-y-4"><div class="flex flex-col sm:flex-row gap-2 sm:gap-3 sm:gap-4"><div class="flex-1 min-w-0"><label for="eventId" class="block text-xs text-charcoal-300 mb-1 sm:mb-1.5">Event ID</label> <input id="eventId" type="text" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm rounded-lg transition-colors min-h-[40px] sm:min-h-[44px] focus:border-gold-500 focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;" placeholder="Event ID"/></div> <div class="flex-1 sm:min-w-[140px]"><label for="date" class="block text-xs text-charcoal-300 mb-1 sm:mb-1.5">Date</label> <input id="date" type="date" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm rounded-lg transition-colors min-h-[40px] sm:min-h-[44px] focus:border-gold-500 focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;"/></div> <div class="flex-1 sm:min-w-[100px]"><label for="timeWindow" class="block text-xs text-charcoal-300 mb-1 sm:mb-1.5">Window</label> <input id="timeWindow" type="number" min="1" class="w-full px-2 sm:px-3 py-1.5 sm:py-2 text-sm rounded-lg transition-colors min-h-[40px] sm:min-h-[44px] focus:border-gold-500 focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;" placeholder="Mins"/></div> <div class="flex items-end"><button type="submit" class="px-3 sm:px-4 py-1.5 sm:py-2 text-sm font-medium rounded-lg transition-colors min-h-[40px] sm:min-h-[44px] disabled:opacity-50 disabled:cursor-not-allowed w-full sm:w-auto"> </button></div></div></form>');function js(l,o){Ft(o,!1);let a=ye(o,"eventId",8),n=ye(o,"date",8),c=ye(o,"timeWindow",8),d=ye(o,"onLoad",8),h=ye(o,"loading",8,!1),y=P(a()),f=P(n()),S=P(c());async function p(ce){ce.preventDefault(),await d()(e(y),e(f),e(S))}de(()=>(M(a()),e(y),M(n()),e(f),M(c()),e(S)),()=>{a()!==e(y)&&v(y,a()),n()!==e(f)&&v(f,n()),c()!==e(S)&&v(S,c())}),Bt(),Rt();var m=Fs(),T=r(m),E=r(T),b=s(r(E),2);Ha(b),t(E);var x=s(E,2),_=s(r(x),2);Ha(_),t(x);var O=s(x,2),k=s(r(O),2);Ha(k),t(O);var D=s(O,2),C=r(D),G=r(C,!0);t(C),t(D),t(T),t(m),N(()=>{b.disabled=h(),_.disabled=h(),k.disabled=h(),C.disabled=h(),ea(C,`background-color: ${h()?"#ca8a04":"#eab308"}; color: #18181b;`),w(G,h()?"Loading...":"Load")}),ka(b,()=>e(y),ce=>v(y,ce)),ka(_,()=>e(f),ce=>v(f,ce)),ka(k,()=>e(S),ce=>v(S,ce)),Ra("submit",m,p),u(l,m),jt()}const Ro=(l,o,a,n={})=>{const{excludeSelected:c=!0,preferNoConflicts:d=!0,preferNearSelected:h=!0,maxResults:y=10}=n;return(c?l.filter(p=>!o.has(p.MatchId)):l).map(p=>{const m=[];let T=0;const E=a.has(p.MatchId);if(!E&&d?(T+=50,m.push("No conflicts")):E&&(T-=20,m.push("Has conflicts")),h&&o.size>0){const x=p.ScheduledStartDateTime,_=p.ScheduledEndDateTime,O=l.filter(D=>o.has(D.MatchId));let k=1/0;O.forEach(D=>{const C=D.ScheduledStartDateTime,G=D.ScheduledEndDateTime,ce=Math.abs(x-G),X=Math.abs(C-_),se=Math.min(ce,X);se<k&&(k=se)}),k<7200*1e3?(T+=20,m.push("Near selected matches")):k>14400*1e3&&(T-=10,m.push("Far from selected matches"))}h&&o.size>0&&l.filter(O=>o.has(O.MatchId)).filter(O=>O.CourtName===p.CourtName).length>0&&(T+=15,m.push("Same court as selected matches"));const b=new Date(p.ScheduledStartDateTime).getHours();return b>=8&&b<12&&(T+=5,m.push("Morning match")),{match:p,score:T,reasons:m}}).sort((p,m)=>m.score-p.score).slice(0,y).filter(p=>p.score>0)},to=(l,o,a,n,c,d={})=>{const{excludeSelected:h=!0,preferUncovered:y=!0,preferNoConflicts:f=!0,preferNearSelected:S=!0,maxResults:p=10}=d,m=[];return l.forEach(T=>{if(h&&o.has(T.MatchId))return;const E=c(T);if(!E)return;const b=n.get(E)||"not-covered",x=a.has(T.MatchId);let _=0;const O=[];if(y&&b==="not-covered"&&(_+=10,O.push("Uncovered team")),f&&!x&&(_+=5,O.push("No conflicts")),S&&o.size>0){const k=T.ScheduledStartDateTime;let D=!1;l.forEach(C=>{if(o.has(C.MatchId)){const ce=Math.abs(k-C.ScheduledStartDateTime)/6e4;ce<=30&&ce>0&&(D=!0)}}),D&&(_+=3,O.push("Near selected match"))}_>0&&O.length>0&&m.push({match:T,teamId:E,reason:O.join(", "),score:_})}),m.sort((T,E)=>E.score-T.score).slice(0,p)},$r="matchScores",Rs=l=>{try{const o=localStorage.getItem($r);if(!o)return JSON.stringify({eventId:l,scores:[]},null,2);const a=JSON.parse(o),n=[];return Object.values(a).forEach(c=>{c.eventId===l&&n.push(c)}),JSON.stringify({eventId:l,scores:n,exportedAt:Date.now()},null,2)}catch(o){return console.error("Failed to export scores:",o),JSON.stringify({eventId:l,scores:[],error:"Export failed"},null,2)}},Ls=l=>{const o=[];let a=0;try{const n=JSON.parse(l);if(!n.scores||!Array.isArray(n.scores))return o.push("Invalid JSON format: missing scores array"),{success:!1,imported:0,errors:o};const c=localStorage.getItem($r),d=c?JSON.parse(c):{};return n.scores.forEach(h=>{try{if(!h.matchId||!h.eventId||!h.sets||!Array.isArray(h.sets)){o.push(`Invalid score for match ${h.matchId}: missing required fields`);return}const y=h.matchId.toString(),f=d[y];if(f&&f.lastUpdated&&h.lastUpdated)if(h.lastUpdated>f.lastUpdated)d[y]=h,a++;else return;else d[y]=h,a++}catch(y){o.push(`Failed to import score for match ${h.matchId}: ${y}`)}}),localStorage.setItem($r,JSON.stringify(d)),{success:o.length===0,imported:a,errors:o}}catch(n){return o.push(`Failed to parse JSON: ${n}`),{success:!1,imported:0,errors:o}}},Us=l=>{try{const o=localStorage.getItem($r);if(!o)return window.location.href.split("#")[0];const a=JSON.parse(o),n=[];if(Object.values(a).forEach(f=>{f.eventId===l&&n.push(f)}),n.length===0)return window.location.href.split("#")[0];const c={eventId:l,scores:n,exportedAt:Date.now()},d=JSON.stringify(c),h=btoa(unescape(encodeURIComponent(d))),y=`${window.location.href.split("#")[0]}#scores=${h}`;return y.length>2e3&&console.warn("Shareable URL exceeds 2000 characters. Consider using export/import instead."),y}catch(o){return console.error("Failed to generate shareable URL:",o),window.location.href.split("#")[0]}},Ws=()=>{try{const l=window.location.hash;if(!l||!l.startsWith("#scores="))return null;const o=l.substring(8),a=decodeURIComponent(escape(atob(o))),n=JSON.parse(a);return!n.scores||!Array.isArray(n.scores)?null:{eventId:n.eventId||"",scores:n.scores}}catch(l){return console.error("Failed to extract scores from URL:",l),null}},Bs=()=>{const l=window.location.hash;return l!==null&&l.startsWith("#scores=")},Mr={division:null,wave:"all",teams:[],timeRange:{start:null,end:null},conflictsOnly:!1,coverageStatus:"all",priority:"all",myTeamsOnly:!1},zr="matchFilters";function Hs(){const{subscribe:l,set:o,update:a}=ma(Mr);try{const c=localStorage.getItem(zr);if(c){const d=JSON.parse(c);o({...Mr,...d})}}catch(c){console.error("Failed to load filters:",c)}const n=c=>{try{localStorage.setItem(zr,JSON.stringify(c))}catch(d){console.error("Failed to save filters:",d)}};return{subscribe:l,updateFilter:(c,d)=>{a(h=>{const y={...h,[c]:d};return n(y),y})},resetFilters:()=>{o(Mr),localStorage.removeItem(zr)},setTimeRangePreset:c=>{a(d=>{let h;return c==="morning"?h={...d,timeRange:{start:"00:00",end:"14:29"}}:c==="afternoon"?h={...d,timeRange:{start:"14:30",end:"23:59"}}:h={...d,timeRange:{start:null,end:null}},n(h),h})},getTeamIdentifier:c=>{const h=(c.InvolvedTeam==="first"?c.FirstTeamText:c.SecondTeamText).match(/(\d+-\d+)/);return h?h[1]:""}}}const Oa=Hs();function nt(l){const a=(l.InvolvedTeam==="first"?l.FirstTeamText:l.SecondTeamText).match(/(\d+-\d+)/);return a?a[1]:""}function qa(l){const o=new Set(l.map(a=>a.Division.CodeAlias));return Array.from(o).sort()}function fr(l){const o=new Set;return l.forEach(a=>{const n=nt(a);n&&o.add(n)}),Array.from(o).sort()}function Lo(l){let o=Mr;return Oa.subscribe(a=>{o=a})(),l.filter(a=>{if(o.division&&a.Division.CodeAlias!==o.division)return!1;if(o.wave!=="all"){const n=new Date(a.ScheduledStartDateTime).getTime(),c=new Date(n),d=c.getHours(),h=c.getMinutes(),y=d*60+h,f=870;if(o.wave==="morning"&&y>=f||o.wave==="afternoon"&&y<f)return!1}if(o.teams.length>0){const n=nt(a);if(!n||!o.teams.includes(n))return!1}if(o.timeRange.start||o.timeRange.end){const n=new Date(a.ScheduledStartDateTime).getTime(),c=new Date(n),d=c.getHours(),h=c.getMinutes(),y=d*60+h;if(o.timeRange.start){const[f,S]=o.timeRange.start.split(":").map(Number),p=f*60+S;if(y<p)return!1}if(o.timeRange.end){const[f,S]=o.timeRange.end.split(":").map(Number),p=f*60+S;if(y>p)return!1}}return!0})}function Et(l,o){Oa.updateFilter(l,o)}function lr(){Oa.resetFilters()}const Gr="matchPriorities";function Ys(){const{subscribe:l,set:o,update:a}=ma({});try{const c=localStorage.getItem(Gr);if(c){const d=JSON.parse(c);o(d)}}catch(c){console.error("Failed to load priorities:",c)}const n=c=>{try{localStorage.setItem(Gr,JSON.stringify(c))}catch(d){console.error("Failed to save priorities:",d)}};return{subscribe:l,setPriority:(c,d)=>{a(h=>{const y={...h};return d===null?delete y[c]:y[c]=d,n(y),y})},getPriority:c=>{let d=null;return l(h=>{d=h[c]||null})(),d},clearAllPriorities:()=>{o({}),localStorage.removeItem(Gr)}}}const _a=Ys(),_o="followedTeams",yo="teamColors";function Vs(){const{subscribe:l,set:o,update:a}=ma([]),{subscribe:n,set:c,update:d}=ma(new Map);{try{const f=localStorage.getItem(_o);f&&o(JSON.parse(f))}catch(f){console.error("Failed to load followed teams:",f)}try{const f=localStorage.getItem(yo);if(f){const S=JSON.parse(f);c(new Map(Object.entries(S)))}}catch(f){console.error("Failed to load team colors:",f)}}const h=f=>{try{localStorage.setItem(_o,JSON.stringify(f))}catch(S){console.error("Failed to save followed teams:",S)}},y=f=>{try{const S={};f.forEach((p,m)=>{S[m]=p}),localStorage.setItem(yo,JSON.stringify(S))}catch(S){console.error("Failed to save team colors:",S)}};return{subscribe:l,followTeam:(f,S)=>{a(p=>{if(p.some(T=>T.teamId===f))return p;const m=[...p,{teamId:f,teamName:S,followedAt:Date.now()}];return h(m),m})},unfollowTeam:f=>{a(S=>{const p=S.filter(m=>m.teamId!==f);return h(p),p}),d(S=>{const p=new Map(S);return p.delete(f),y(p),p})},isFollowing:f=>{let S=!1;return l(p=>{S=p.some(m=>m.teamId===f)})(),S},setTeamColor:(f,S)=>{d(p=>{const m=new Map(p);return m.set(f,S),y(m),m})},getTeamColor:f=>{let S=null;return n(p=>{S=p.get(f)||null})(),S},reorderTeams:(f,S)=>{a(p=>{const m=p.findIndex(b=>b.teamId===f);if(m===-1)return p;const T=[...p],E=T[m];return S==="top"?(T.splice(m,1),T.unshift(E)):S==="up"&&m>0?[T[m-1],T[m]]=[T[m],T[m-1]]:S==="down"&&m<T.length-1&&([T[m],T[m+1]]=[T[m+1],T[m]]),h(T),T})}}}const $t=Vs(),wo="notificationPreferences",wr={upcomingMatchReminder:!0,reminderMinutes:5,scoreUpdateNotification:!0,browserNotifications:!1};function Js(){const{subscribe:l,set:o,update:a}=ma(wr),{subscribe:n,set:c}=ma("default");{try{const y=localStorage.getItem(wo);if(y){const f=JSON.parse(y);o({...wr,...f})}}catch(y){console.error("Failed to load notification preferences:",y)}"Notification"in window&&c(Notification.permission)}const d=y=>{try{localStorage.setItem(wo,JSON.stringify(y))}catch(f){console.error("Failed to save notification preferences:",f)}},h=(y,f,S=!1)=>{let p="default";n(m=>{p=m})(),S&&p==="granted"&&"Notification"in window?new Notification(y,{body:f,icon:"/favicon.ico",tag:"courtsync-notification"}):console.log(`[Notification] ${y}: ${f}`)};return{preferences:{subscribe:l},notificationPermission:{subscribe:n},requestPermission:async()=>{if("Notification"in window){let y="default";if(n(f=>{y=f})(),y==="default"){const f=await Notification.requestPermission();return c(f),f==="granted"}return y==="granted"}return!1},checkUpcomingMatches:(y,f)=>{let S=wr;if(l(T=>{S=T})(),!S.upcomingMatchReminder)return;const p=Date.now(),m=S.reminderMinutes*60*1e3;y.forEach(T=>{const E=T.ScheduledStartDateTime,b=E-p,x=T.FirstTeamText||T.SecondTeamText;if(f.includes(x)&&b>0&&b<=m){const _=`reminder-${T.MatchId}`,O=localStorage.getItem(_);if(!O||Date.now()-parseInt(O)>m){const k=Math.floor(b/6e4);h(`Match starting in ${k} minute${k!==1?"s":""}`,`${T.FirstTeamText} vs ${T.SecondTeamText}
${new Date(E).toLocaleTimeString()} - ${T.CourtName}`,S.browserNotifications),localStorage.setItem(_,Date.now().toString())}}})},notifyScoreUpdate:(y,f)=>{let S=wr;if(l(x=>{S=x})(),!S.scoreUpdateNotification)return;const p=f.sets.find(x=>x.completedAt===0)||f.sets[f.sets.length-1],m=f.sets.filter(x=>x.completedAt>0),T=m.filter(x=>x.team1Score>x.team2Score).length,E=m.filter(x=>x.team2Score>x.team1Score).length;let b=`Score: ${p.team1Score}-${p.team2Score}`;m.length>0&&(b=`Sets: ${T}-${E} | ${b}`),h(`${y.FirstTeamText} vs ${y.SecondTeamText}`,b,S.browserNotifications)},updatePreferences:y=>{a(f=>{const S={...f,...y};return d(S),S})}}}const qr=Js(),zs="courtsync-score-updates";let Sr=null;const Gs=()=>{if(!Sr)try{Sr=new BroadcastChannel(zs)}catch(l){console.error("BroadcastChannel not supported:",l),Sr={postMessage:()=>{},close:()=>{},onmessage:null}}return Sr},qs=(l,o,a)=>{const n=Gs(),c={type:a?"score-update":"score-delete",eventId:l,matchId:o,score:a||void 0,timestamp:Date.now()};try{n.postMessage(c)}catch(d){console.error("Failed to broadcast score update:",d)}},ao="scoreHistory",Xs=l=>{try{const o=localStorage.getItem(ao);return o?JSON.parse(o)[l.toString()]||[]:[]}catch(o){return console.error("Failed to load score history:",o),[]}},Qs=(l,o,a)=>{try{const n=localStorage.getItem(ao),c=n?JSON.parse(n):{};c[l.toString()]||(c[l.toString()]=[]);const d={matchId:l,timestamp:Date.now(),sets:[...o.sets],status:o.status,updatedBy:a};c[l.toString()].push(d),c[l.toString()].length>100&&(c[l.toString()]=c[l.toString()].slice(-100)),localStorage.setItem(ao,JSON.stringify(c))}catch(n){console.error("Failed to save score history:",n)}},Ks=(l,o,a,n)=>{let c=0,d=0,h=0,y=0,f=0,S=0,p=0,m=0;a.forEach(_=>{const O=_.FirstTeamText===l||_.FirstTeamText===o,k=_.SecondTeamText===l||_.SecondTeamText===o;if(!O&&!k)return;c++;const D=n.get(_.MatchId);if(!D||D.status!=="completed")return;d++;const C=D.sets.filter(ce=>ce.completedAt>0&&ce.team1Score>ce.team2Score).length,G=D.sets.filter(ce=>ce.completedAt>0&&ce.team2Score>ce.team1Score).length;O?(f+=C,S+=G,D.sets.forEach(ce=>{ce.completedAt>0&&(p+=ce.team1Score,m+=ce.team2Score)}),C>G?h++:y++):(f+=G,S+=C,D.sets.forEach(ce=>{ce.completedAt>0&&(p+=ce.team2Score,m+=ce.team1Score)}),G>C?h++:y++)});const T=d>0?h/d*100:0,E=d>0?p/d:0,b=d>0?m/d:0,x=f+S>0?`${(f/(f+S)*100).toFixed(1)}%`:"0%";return{teamId:l,teamName:o,totalMatches:c,completedMatches:d,wins:h,losses:y,winPercentage:T,setsWon:f,setsLost:S,pointsScored:p,pointsAllowed:m,avgPointsScored:E,avgPointsAllowed:b,avgSetScore:x}},Ir="claimHistory",So=1e3;function Xr(l){try{const o=localStorage.getItem(Ir),a=o?JSON.parse(o):[];a.unshift(l),a.length>So&&a.splice(So),localStorage.setItem(Ir,JSON.stringify(a))}catch(o){console.error("Failed to save claim history:",o)}}function Zs(l,o){try{const a=localStorage.getItem(Ir);return a?JSON.parse(a).filter(c=>c.matchId===l&&c.eventId===o).sort((c,d)=>d.timestamp-c.timestamp):[]}catch(a){return console.error("Failed to load claim history:",a),[]}}function To(l){try{const o=localStorage.getItem(Ir);return o?JSON.parse(o).filter(n=>n.eventId===l).sort((n,c)=>c.timestamp-n.timestamp):[]}catch(o){return console.error("Failed to load claim history:",o),[]}}const ko="matchClaims",Qr="matchScores",el=1800*1e3;function mr({eventId:l,userId:o="anonymous"}){const{subscribe:a,set:n,update:c}=ma(new Map),{subscribe:d,set:h,update:y}=ma(new Map);{try{const E=localStorage.getItem(ko);if(E){const b=JSON.parse(E),x=new Map;Object.values(b).forEach(_=>{_.eventId===l&&_.expiresAt>Date.now()&&x.set(_.matchId,_)}),n(x)}}catch(E){console.error("Failed to load claims:",E)}try{const E=localStorage.getItem(Qr);if(E){const b=JSON.parse(E),x=new Map;Object.values(b).forEach(_=>{_.eventId===l&&x.set(_.matchId,_)}),h(x)}}catch(E){console.error("Failed to load scores:",E)}}const f=E=>{try{const b={};E.forEach(x=>{b[x.matchId.toString()]=x}),localStorage.setItem(ko,JSON.stringify(b))}catch(b){console.error("Failed to save claims:",b)}},S=E=>{try{const b={};E.forEach(x=>{b[x.matchId.toString()]=x}),localStorage.setItem(Qr,JSON.stringify(b))}catch(b){console.error("Failed to save scores:",b)}};let p=null;return{claims:{subscribe:a},scores:{subscribe:d},claimMatch:(E,b)=>{const x=Date.now(),_=b+el,O={matchId:E,claimedBy:o,claimedAt:x,expiresAt:_,eventId:l};c(k=>{const D=new Map(k);return D.set(E,O),f(D),D}),Xr({matchId:E,eventId:l,action:"claimed",userId:o,timestamp:x})},releaseClaim:E=>{c(b=>{const x=b.get(E),_=new Map(b);return _.delete(E),f(_),x&&mn&&Xr({matchId:E,eventId:l,action:"released",userId:x.claimedBy,timestamp:Date.now()}),_})},transferClaim:(E,b)=>{let x=!1;if(a(O=>{const k=O.get(E);x=(k==null?void 0:k.claimedBy)===o&&k.expiresAt>Date.now()})(),!x)return!1;const _=Date.now();return c(O=>{const k=O.get(E);if(!k)return O;const D={...k,claimedBy:b,claimedAt:_},C=new Map(O);return C.set(E,D),f(C),Xr({matchId:E,eventId:l,action:"transferred",userId:o,timestamp:_,transferredTo:b}),C}),!0},isClaimed:E=>{let b=!1;return a(x=>{const _=x.get(E);b=_?_.expiresAt>Date.now():!1})(),b},getClaimStatus:E=>{let b="available";return a(x=>{const _=x.get(E);!_||_.expiresAt<Date.now()?b="available":_.claimedBy===o?b="claimed":b="locked"})(),b},getClaimer:E=>{let b=null;return a(x=>{const _=x.get(E);b=_&&_.expiresAt>Date.now()?_.claimedBy:null})(),b},isClaimOwner:E=>{let b=!1;return a(x=>{const _=x.get(E);b=(_==null?void 0:_.claimedBy)===o&&_.expiresAt>Date.now()})(),b},updateScore:(E,b,x)=>{const _={matchId:E,eventId:l,sets:b,status:x,lastUpdated:Date.now(),lastUpdatedBy:o};y(O=>{const k=new Map(O);return k.set(E,_),S(k),k}),qs(l,E,_),Qs(E,_,o)},getScore:E=>{let b=null;return d(x=>{b=x.get(E)||null})(),b},clearEventData:()=>{c(E=>{const b=new Map(E);return b.forEach((x,_)=>{x.eventId===l&&b.delete(_)}),f(b),b}),y(E=>{const b=new Map(E);return b.forEach((x,_)=>{x.eventId===l&&b.delete(_)}),S(b),b})},startPolling:()=>{p||(p=setInterval(()=>{try{const E=localStorage.getItem(Qr);if(!E)return;const b=JSON.parse(E),x=new Map;let _=!1;d(O=>{Object.values(b).forEach(k=>{if(k.eventId===l){x.set(k.matchId,k);const D=O.get(k.matchId);(!D||k.lastUpdated&&k.lastUpdated>D.lastUpdated)&&(_=!0)}}),_&&y(k=>{const D=new Map(k);return x.forEach((C,G)=>{const ce=k.get(G);(!ce||C.lastUpdated&&C.lastUpdated>ce.lastUpdated)&&D.set(G,C)}),D})})()}catch(E){console.error("Failed to poll scores:",E)}},3e3))},stopPolling:()=>{p&&(clearInterval(p),p=null)}}}const Kr="matchNotes";function tl(l){const{subscribe:o,set:a,update:n}=ma(new Map);try{const d=localStorage.getItem(Kr);if(d){const h=JSON.parse(d),y=new Map;Object.values(h).forEach(f=>{f.eventId===l&&y.set(f.matchId,f)}),a(y)}}catch(d){console.error("Failed to load match notes:",d)}const c=d=>{try{const h=localStorage.getItem(Kr),y=h?JSON.parse(h):{};d.forEach(f=>{y[`${l}-${f.matchId}`]=f}),Object.keys(y).forEach(f=>{if(f.startsWith(`${l}-`)){const S=parseInt(f.split("-").pop()||"0");d.has(S)||delete y[f]}}),localStorage.setItem(Kr,JSON.stringify(y))}catch(h){console.error("Failed to save match notes:",h)}};return{subscribe:o,setNote:(d,h)=>{const y=Date.now();n(f=>{const S=new Map(f),p=S.get(d);return h.trim()?S.set(d,{matchId:d,eventId:l,note:h.trim(),createdAt:(p==null?void 0:p.createdAt)||y,updatedAt:y}):S.delete(d),c(S),S})},getNote:d=>{let h="";return o(y=>{var f;h=((f=y.get(d))==null?void 0:f.note)||""})(),h},deleteNote:d=>{n(h=>{const y=new Map(h);return y.delete(d),c(y),y})},hasNote:d=>{let h=!1;return o(y=>{const f=y.get(d);h=f!==void 0&&f.note.trim().length>0})(),h}}}function Uo(l){return tl(l)}var al=g('<div class="px-4 py-3 rounded-lg border border-charcoal-700 bg-charcoal-800"><div class="text-sm font-semibold text-charcoal-50 mb-2">Win/Loss Breakdown</div> <div class="space-y-2"><div class="flex items-center justify-between"><span class="text-xs text-charcoal-300">Wins</span> <div class="flex items-center gap-2"><div class="w-24 h-2 bg-charcoal-700 rounded-full overflow-hidden"><div class="h-full bg-green-500"></div></div> <span class="text-sm font-semibold text-charcoal-50 w-8 text-right"> </span></div></div> <div class="flex items-center justify-between"><span class="text-xs text-charcoal-300">Losses</span> <div class="flex items-center gap-2"><div class="w-24 h-2 bg-charcoal-700 rounded-full overflow-hidden"><div class="h-full bg-red-500"></div></div> <span class="text-sm font-semibold text-charcoal-50 w-8 text-right"> </span></div></div></div></div>'),rl=g('<div class="text-center py-8 text-charcoal-300 text-sm">No completed matches yet</div>'),ol=g('<div class="space-y-4"><h3 class="text-lg font-semibold text-charcoal-50">Team Statistics</h3> <div class="grid grid-cols-2 sm:grid-cols-4 gap-3"><div class="px-4 py-3 rounded-lg border border-charcoal-700 bg-charcoal-800"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Record</div> <div class="text-lg font-bold text-charcoal-50"> </div></div> <div class="px-4 py-3 rounded-lg border border-charcoal-700 bg-charcoal-800"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Win %</div> <div class="text-lg font-bold text-[#facc15]"> </div></div> <div class="px-4 py-3 rounded-lg border border-charcoal-700 bg-charcoal-800"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Sets</div> <div class="text-lg font-bold text-charcoal-50"> </div></div> <div class="px-4 py-3 rounded-lg border border-charcoal-700 bg-charcoal-800"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Matches</div> <div class="text-lg font-bold text-charcoal-50"> </div></div></div> <div class="space-y-3"><div class="px-4 py-3 rounded-lg border border-charcoal-700 bg-charcoal-800"><div class="text-sm font-semibold text-charcoal-50 mb-2">Points</div> <div class="grid grid-cols-2 gap-4 text-sm"><div><div class="text-xs text-charcoal-300 mb-1">Scored</div> <div class="text-base font-bold text-charcoal-50"> </div></div> <div><div class="text-xs text-charcoal-300 mb-1">Allowed</div> <div class="text-base font-bold text-charcoal-50"> </div></div></div></div> <!></div> <!></div>');function nl(l,o){Ft(o,!1);const a=P(),n=P();let c=ye(o,"matches",8),d=ye(o,"eventId",8),h=ye(o,"teamId",8),y=ye(o,"teamName",8);const f=mr(d());de(()=>M(c()),()=>{v(a,(()=>{const $e=new Map;return c().forEach(Q=>{const Te=f.getScore(Q.MatchId);Te&&$e.set(Q.MatchId,Te)}),$e})())}),de(()=>(M(h()),M(y()),M(c()),e(a)),()=>{v(n,Ks(h(),y(),c(),e(a)))}),Bt(),Rt();var S=ol(),p=s(r(S),2),m=r(p),T=s(r(m),2),E=r(T);t(T),t(m);var b=s(m,2),x=s(r(b),2),_=r(x);t(x),t(b);var O=s(b,2),k=s(r(O),2),D=r(k);t(k),t(O);var C=s(O,2),G=s(r(C),2),ce=r(G);t(G),t(C),t(p);var X=s(p,2),se=r(X),oe=s(r(se),2),ve=r(oe),H=s(r(ve),2),V=r(H);t(H),t(ve);var L=s(ve,2),J=s(r(L),2),B=r(J);t(J),t(L),t(oe),t(se);var ee=s(se,2);{var R=$e=>{var Q=al(),Te=s(r(Q),2),K=r(Te),Z=s(r(K),2),ke=r(Z),U=r(ke);t(ke);var le=s(ke,2),me=r(le,!0);t(le),t(Z),t(K);var z=s(K,2),ge=s(r(z),2),fe=r(ge),Ie=r(fe);t(fe);var F=s(fe,2),ne=r(F,!0);t(F),t(ge),t(z),t(Te),t(Q),N(()=>{ea(U,`width: ${e(n),i(()=>e(n).winPercentage)??""}%`),w(me,(e(n),i(()=>e(n).wins))),ea(Ie,`width: ${e(n),i(()=>100-e(n).winPercentage)??""}%`),w(ne,(e(n),i(()=>e(n).losses)))}),u($e,Q)};$(ee,$e=>{e(n),i(()=>e(n).completedMatches>0)&&$e(R)})}t(X);var he=s(X,2);{var be=$e=>{var Q=rl();u($e,Q)};$(he,$e=>{e(n),i(()=>e(n).completedMatches===0)&&$e(be)})}t(S),N(($e,Q,Te)=>{w(E,`${e(n),i(()=>e(n).wins)??""}-${e(n),i(()=>e(n).losses)??""}`),w(_,`${$e??""}%`),w(D,`${e(n),i(()=>e(n).setsWon)??""}-${e(n),i(()=>e(n).setsLost)??""}`),w(ce,`${e(n),i(()=>e(n).completedMatches)??""}/${e(n),i(()=>e(n).totalMatches)??""}`),w(V,`${e(n),i(()=>e(n).pointsScored)??""} (${Q??""} avg)`),w(B,`${e(n),i(()=>e(n).pointsAllowed)??""} (${Te??""} avg)`)},[()=>(e(n),i(()=>e(n).winPercentage.toFixed(1))),()=>(e(n),i(()=>e(n).avgPointsScored.toFixed(1))),()=>(e(n),i(()=>e(n).avgPointsAllowed.toFixed(1)))]),u(l,S),jt()}var sl=g('<div class="text-xs text-charcoal-300 mt-1"> </div>'),ll=g('<div class="text-center py-8 text-charcoal-300 text-sm">Loading schedule...</div>'),il=g('<div class="text-center py-4 text-red-400 text-sm"> </div>'),cl=g("<button>Statistics</button>"),dl=g('<div class="text-xs text-[#808593] py-4 text-center">No schedule data available</div>'),vl=g('<div class="flex-shrink-0 w-16 text-xs font-medium text-charcoal-300"> </div>'),ul=g('<div class="flex-shrink-0 w-16"></div>'),hl=g('<div class="flex-shrink-0 w-24 text-xs text-[#facc15] font-semibold text-right"> </div>'),fl=g('<div class="text-xs space-y-0.5"><div><span class="text-[#808593] font-medium">WORK</span> <span class="text-[#808593] ml-2"> </span></div></div>'),ml=g('<div class="text-[#808593] ml-8"> </div>'),xl=g('<div class="text-xs space-y-0.5"><div><span class="text-gold-500 font-semibold">PLAY</span> <span class="text-charcoal-200 ml-2"> </span></div> <!></div>'),gl=g('<div class="text-[#808593] ml-8"> </div>'),pl=g('<div class="text-xs space-y-0.5"><div><span class="text-[#808593] font-medium">WATCH</span> <span class="text-[#808593] ml-2"> </span></div> <!></div>'),bl=g('<div class="flex-shrink-0"><span class="px-2 py-0.5 text-xs font-semibold rounded"> </span></div>'),_l=g('<div><div></div> <!> <div class="flex-shrink-0 w-24 text-base font-bold text-charcoal-50 text-left"> </div> <!> <div class="flex-1 min-w-0 pr-2 text-right"><!></div> <!></div>'),yl=g('<div class="space-y-4"><div class="flex items-center gap-2 mb-6 pb-3 border-b border-charcoal-700"><h6 class="text-sm font-semibold text-charcoal-50"> </h6> <span class="text-xs text-[#808593]"> </span></div> <div class="space-y-4"></div></div>'),wl=g('<div><div class="space-y-8"><!></div></div>'),Sl=g('<div class="text-xs text-[#808593] py-4 text-center">No pool data available for this team</div>'),Tl=g("<option> </option>"),kl=g('<div class="mb-4"><div class="text-xs text-charcoal-300 mb-1 block">Pool:</div> <select class="w-full px-3 py-2.5 sm:py-2 text-sm font-medium rounded bg-charcoal-700 text-charcoal-200 border border-charcoal-600 focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"></select></div>'),Ml=g('<tr><td class="px-2 sm:px-3 py-2 text-charcoal-50 font-medium"> </td><td class="px-2 sm:px-3 py-2"><div> </div></td><td class="px-2 sm:px-3 py-2 text-center text-charcoal-200"> </td><td class="px-2 sm:px-3 py-2 text-center text-charcoal-200"> </td><td class="px-2 sm:px-3 py-2 text-center text-charcoal-200"> </td><td class="px-2 sm:px-3 py-2 text-center text-charcoal-200"> </td></tr>'),Cl=g('<div class="border border-charcoal-700 rounded-lg bg-charcoal-800 overflow-hidden"><div class="px-3 sm:px-4 py-2 bg-charcoal-700 border-b border-charcoal-600"><h6 class="text-xs sm:text-sm font-semibold text-charcoal-50"> </h6></div> <div class="overflow-x-auto"><table class="w-full text-xs min-w-[500px]"><thead><tr class="border-b border-charcoal-700 bg-charcoal-700/50"><th class="px-2 sm:px-3 py-2 text-left text-charcoal-300 font-semibold">Rank</th><th class="px-2 sm:px-3 py-2 text-left text-charcoal-300 font-semibold">Team</th><th class="px-2 sm:px-3 py-2 text-center text-charcoal-300 font-semibold">W</th><th class="px-2 sm:px-3 py-2 text-center text-charcoal-300 font-semibold">L</th><th class="px-2 sm:px-3 py-2 text-center text-charcoal-300 font-semibold">Sets</th><th class="px-2 sm:px-3 py-2 text-center text-charcoal-300 font-semibold">Points</th></tr></thead><tbody></tbody></table></div></div>'),$l=g('<div class="flex-shrink-0 w-20 text-xs text-[#facc15] font-medium"> </div>'),Il=g('<span class="text-[#808593] mx-1">vs</span> ',1),Dl=g('<div><div class="flex-shrink-0 w-20 text-sm font-semibold text-charcoal-50"> </div> <!> <div class="flex-1 min-w-0 text-xs text-charcoal-200"> <!></div></div>'),El=g('<div class="border border-charcoal-700 rounded-lg bg-charcoal-800 overflow-hidden"><div class="px-3 sm:px-4 py-2 bg-charcoal-700 border-b border-charcoal-600"><h6 class="text-xs sm:text-sm font-semibold text-charcoal-50">Pool Schedule</h6></div> <div class="p-3 sm:p-4 space-y-2"></div></div>'),Pl=g('<div class="space-y-4"><!> <!></div>'),Ol=g('<div class="text-xs text-[#808593] py-4 text-center">Loading pool sheet...</div>'),Nl=g("<!> <!>",1),Al=g('<div><h5 class="text-xs font-semibold text-charcoal-300 uppercase tracking-wider mb-2">Pool Standings</h5> <!></div>'),Fl=g('<div class="space-y-4"><div class="flex items-center gap-2 border-b border-charcoal-700 pb-2"><button>Schedule</button> <button>Pool Sheet</button> <!></div> <!></div>'),jl=g('<div class="mt-8 border border-charcoal-700 rounded-lg bg-charcoal-800 overflow-hidden"><div class="p-4"><div class="flex items-center justify-between mb-6"><div><h4 class="text-sm sm:text-base font-semibold text-charcoal-50 truncate pr-2">Full Schedule</h4> <!></div> <button class="text-charcoal-300 hover:text-charcoal-50 transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!> <!> <!></div></div>');function lo(l,o){Ft(o,!1);const a=P(),n=P(),c=P(),d=P(),h=P();let y=ye(o,"match",8),f=ye(o,"eventId",8),S=ye(o,"clubId",8),p=ye(o,"onClose",8),m=ye(o,"matches",24,()=>[]),T=P(null),E=P([]),b=P([]),x=P([]),_=P([]),O=P(null),k=P(null),D=P("schedule"),C=P(!0),G=P(null);function ce(){return y().InvolvedTeam==="first"?y().FirstTeamText:y().InvolvedTeam==="second"?y().SecondTeamText:""}const X=nt(y()),se=ce();Ia(async()=>{v(C,!0),v(G,null);try{const Z=(await yn(f(),S())).value||[],ke=ce();if(!ke){v(G,"Could not extract team name from match"),v(C,!1);return}const U=Z.find(ne=>{if(ne.TeamText===ke||ne.TeamName===ke)return!0;const te=ke.match(/(\d+-\d+)/);if(te){const ie=te[1];return ne.TeamName.includes(ie)||ne.TeamText.includes(ie)}return!1});if(!U){v(G,`Team not found: ${ke}`),v(C,!1);return}const le=U.TeamId,me=U.TeamDivision.DivisionId;v(T,{TeamId:le,DivisionId:me,TeamName:U.TeamName,TeamText:U.TeamText});const[z,ge,fe]=await Promise.all([Hr(f(),me,le,"current").catch(()=>[]),Hr(f(),me,le,"work").catch(()=>[]),Hr(f(),me,le,"future").catch(()=>[])]),Ie=(ne,te=!1)=>Array.isArray(ne)?ne.flatMap(ie=>{var A,I;return te?ie.Match?[{...ie.Match,Court:ie.Match.Court||null,Division:{...ie.Play,PlayId:(A=ie.Play)==null?void 0:A.PlayId},FirstTeamText:((I=ie.Play)==null?void 0:I.CompleteShortName)||"Work Assignment",SecondTeamText:void 0}]:[]:!ie.Matches||!Array.isArray(ie.Matches)?[]:ie.Matches.map(j=>{var Y;return{...j,Court:j.Court||null,Division:{...ie.Play,PlayId:(Y=ie.Play)==null?void 0:Y.PlayId}}})}):[];v(E,Ie(z,!1)),v(b,Ie(ge,!0)),v(x,Ie(fe,!1));const F=await wn(f(),me).catch(()=>null);F!=null&&F.Plays&&v(_,F.Plays)}catch(K){v(G,K instanceof Error?K.message:"Failed to load team data")}finally{v(C,!1)}});function oe(K,Z=!1){var z,ge;const ke=typeof K.ScheduledStartDateTime=="string"?new Date(K.ScheduledStartDateTime).getTime():K.ScheduledStartDateTime,U=((z=K.FirstTeamText)==null?void 0:z.includes("630"))||((ge=K.SecondTeamText)==null?void 0:ge.includes("630")),le=Kt(ke),me=lt(ke);return{matchDate:le,startTimeDisplay:me,isPlaying:U,isWork:Z,scheduleMatch:K}}de(()=>e(D),()=>{e(D)==="poolsheet"&&v(k,null)}),de(()=>(e(E),e(b),e(x)),()=>{v(a,[...e(E).map(Z=>({...Z,type:"current"})),...e(b).map(Z=>({...Z,type:"work"})),...e(x).map(Z=>({...Z,type:"future"}))].filter((Z,ke,U)=>U.findIndex(le=>le.MatchId===Z.MatchId)===ke).sort((Z,ke)=>{const U=typeof Z.ScheduledStartDateTime=="string"?new Date(Z.ScheduledStartDateTime).getTime():Z.ScheduledStartDateTime||0,le=typeof ke.ScheduledStartDateTime=="string"?new Date(ke.ScheduledStartDateTime).getTime():ke.ScheduledStartDateTime||0;return U-le}))}),de(()=>e(a),()=>{v(n,(()=>{const K=new Set;return e(a).forEach(Z=>{if(Z.Division&&Z.Division.PlayId){const ke=Math.abs(Z.Division.PlayId);K.add(ke)}}),Array.from(K)})())}),de(()=>(e(_),e(n)),()=>{v(c,e(_).filter(K=>{const Z=Math.abs(K.PlayId);return e(n).includes(Z)}))}),de(()=>(e(c),e(O)),()=>{e(c).length>0&&!e(O)&&v(O,e(c)[0].PlayId)}),de(()=>(e(O),e(D),M(f())),()=>{e(O)&&e(D)==="poolsheet"&&Sn(f(),e(O)).then(K=>{v(k,K)}).catch(K=>{console.error("Failed to fetch pool sheet:",K),v(k,null)})}),de(()=>(e(a),Kt),()=>{v(d,(()=>{const K={};return e(a).forEach(Z=>{const ke=typeof Z.ScheduledStartDateTime=="string"?new Date(Z.ScheduledStartDateTime).getTime():Z.ScheduledStartDateTime||0,U=Kt(ke);K[U]||(K[U]=[]),K[U].push(Z)}),K})())}),de(()=>e(d),()=>{v(h,Object.keys(e(d)).sort((K,Z)=>{const ke=new Date(K).getTime(),U=new Date(Z).getTime();return ke-U}))}),Bt(),Rt();var ve=jl(),H=r(ve),V=r(H),L=r(V),J=s(r(L),2);{var B=K=>{var Z=sl(),ke=r(Z,!0);t(Z),N(()=>w(ke,(e(T),i(()=>{var U;return((U=e(T))==null?void 0:U.TeamText)||se})))),u(K,Z)};$(J,K=>{e(T),i(()=>{var Z;return((Z=e(T))==null?void 0:Z.TeamText)||se})&&K(B)})}t(L);var ee=s(L,2);ee.__click=function(...K){var Z;(Z=p())==null||Z.apply(this,K)},t(V);var R=s(V,2);{var he=K=>{var Z=ll();u(K,Z)};$(R,K=>{e(C)&&K(he)})}var be=s(R,2);{var $e=K=>{var Z=il(),ke=r(Z,!0);t(Z),N(()=>w(ke,e(G))),u(K,Z)};$(be,K=>{e(G)&&K($e)})}var Q=s(be,2);{var Te=K=>{var Z=Fl(),ke=r(Z),U=r(ke);U.__click=()=>v(D,"schedule");var le=s(U,2);le.__click=()=>v(D,"poolsheet");var me=s(le,2);{var z=F=>{var ne=cl();ne.__click=()=>v(D,"stats"),N(()=>Se(ne,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(D)==="stats"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`)),u(F,ne)};$(me,F=>{M(m()),i(()=>m().length>0&&X)&&F(z)})}t(ke);var ge=s(ke,2);{var fe=F=>{nl(F,{get matches(){return m()},get eventId(){return f()},get teamId(){return X},get teamName(){return se}})},Ie=F=>{var ne=At(),te=ct(ne);{var ie=I=>{var j=wl(),Y=r(j),W=r(Y);{var q=pe=>{var Ee=dl();u(pe,Ee)},re=pe=>{var Ee=At(),We=ct(Ee);tt(We,1,()=>e(h),at,(Ve,Qe)=>{const we=_e(()=>(e(d),e(Qe),i(()=>e(d)[e(Qe)])));var Me=yl(),je=r(Me),qe=r(je),pt=r(qe,!0);t(qe);var Xe=s(qe,2),Je=r(Xe);t(Xe),t(je);var dt=s(je,2);tt(dt,5,()=>e(we),at,(Mt,it,vt)=>{const Oe=_e(()=>(e(it),i(()=>oe(e(it),e(it).type==="work")))),et=_e(()=>(M(e(we)),i(()=>vt>0?oe(e(we)[vt-1],e(we)[vt-1].type==="work"):null))),ft=_e(()=>(M(e(et)),M(e(Oe)),i(()=>!e(et)||e(et).matchDate!==e(Oe).matchDate)));var mt=_l(),bt=r(mt),rt=s(bt,2);{var ut=Be=>{var Ke=vl(),Ct=r(Ke,!0);t(Ke),N(()=>w(Ct,(M(e(Oe)),i(()=>e(Oe).matchDate)))),u(Be,Ke)},Lt=Be=>{var Ke=ul();u(Be,Ke)};$(rt,Be=>{e(ft)?Be(ut):Be(Lt,!1)})}var Vt=s(rt,2),ta=r(Vt,!0);t(Vt);var Jt=s(Vt,2);{var Xt=Be=>{var Ke=hl(),Ct=r(Ke,!0);t(Ke),N(()=>w(Ct,(M(e(Oe)),i(()=>e(Oe).scheduleMatch.Court.Name)))),u(Be,Ke)};$(Jt,Be=>{M(e(Oe)),i(()=>e(Oe).scheduleMatch.Court)&&Be(Xt)})}var It=s(Jt,2),St=r(It);{var kt=Be=>{var Ke=fl(),Ct=r(Ke),De=s(r(Ct),2),Ae=r(De,!0);t(De),t(Ct),t(Ke),N(()=>w(Ae,(M(e(Oe)),i(()=>{var Ce,He;return((Ce=e(Oe).scheduleMatch.Division)==null?void 0:Ce.CompleteShortName)||((He=e(Oe).scheduleMatch.Division)==null?void 0:He.FullName)||e(Oe).scheduleMatch.FirstTeamText})))),u(Be,Ke)},oa=Be=>{var Ke=At(),Ct=ct(Ke);{var De=Ce=>{var He=xl(),Ye=r(He),ze=s(r(Ye),2),Ze=r(ze,!0);t(ze),t(Ye);var st=s(Ye,2);{var ae=xe=>{var Fe=ml(),Ge=r(Fe);t(Fe),N(()=>w(Ge,`vs ${M(e(Oe)),i(()=>e(Oe).scheduleMatch.SecondTeamText)??""}`)),u(xe,Fe)};$(st,xe=>{M(e(Oe)),i(()=>e(Oe).scheduleMatch.SecondTeamText)&&xe(ae)})}t(He),N(()=>w(Ze,(M(e(Oe)),i(()=>e(Oe).scheduleMatch.FirstTeamText)))),u(Ce,He)},Ae=Ce=>{var He=pl(),Ye=r(He),ze=s(r(Ye),2),Ze=r(ze,!0);t(ze),t(Ye);var st=s(Ye,2);{var ae=xe=>{var Fe=gl(),Ge=r(Fe);t(Fe),N(()=>w(Ge,`vs ${M(e(Oe)),i(()=>e(Oe).scheduleMatch.SecondTeamText)??""}`)),u(xe,Fe)};$(st,xe=>{M(e(Oe)),i(()=>e(Oe).scheduleMatch.SecondTeamText)&&xe(ae)})}t(He),N(()=>w(Ze,(M(e(Oe)),i(()=>e(Oe).scheduleMatch.FirstTeamText)))),u(Ce,He)};$(Ct,Ce=>{M(e(Oe)),i(()=>e(Oe).isPlaying)?Ce(De):Ce(Ae,!1)},!0)}u(Be,Ke)};$(St,Be=>{M(e(Oe)),i(()=>e(Oe).isWork)?Be(kt):Be(oa,!1)})}t(It);var aa=s(It,2);{var Ue=Be=>{var Ke=bl(),Ct=r(Ke),De=r(Ct,!0);t(Ct),t(Ke),N(()=>{ea(Ct,`background-color: ${M(e(Oe)),i(()=>e(Oe).scheduleMatch.Division.ColorHex)??""}20; color: ${M(e(Oe)),i(()=>e(Oe).scheduleMatch.Division.ColorHex)??""}; border: 1px solid ${M(e(Oe)),i(()=>e(Oe).scheduleMatch.Division.ColorHex)??""}40;`),w(De,(M(e(Oe)),i(()=>e(Oe).scheduleMatch.Division.CodeAlias)))}),u(Be,Ke)};$(aa,Be=>{M(e(Oe)),i(()=>e(Oe).scheduleMatch.Division)&&Be(Ue)})}t(mt),N(()=>{Se(mt,1,`flex items-center gap-4 px-4 py-3 rounded border ${M(e(Oe)),i(()=>e(Oe).isWork?"border-charcoal-600 bg-charcoal-700/30":e(Oe).isPlaying?"border-[#eab308]/50 bg-gold-500/5":"border-charcoal-700 bg-charcoal-800/30")??""}`),Se(bt,1,`flex-shrink-0 w-1 h-full rounded-full ${M(e(Oe)),i(()=>e(Oe).isWork?"bg-[#808593]":e(Oe).isPlaying?"bg-gold-500":"bg-[#525463]")??""}`),w(ta,(M(e(Oe)),i(()=>e(Oe).startTimeDisplay)))}),u(Mt,mt)}),t(dt),t(Me),N(()=>{w(pt,e(Qe)),w(Je,`(${M(e(we)),i(()=>e(we).length)??""} match${M(e(we)),i(()=>e(we).length!==1?"es":"")??""})`)}),u(Ve,Me)}),u(pe,Ee)};$(W,pe=>{e(h),i(()=>e(h).length===0)?pe(q):pe(re,!1)})}t(Y),t(j),u(I,j)},A=I=>{var j=Al(),Y=s(r(j),2);{var W=re=>{var pe=Sl();u(re,pe)},q=re=>{var pe=Nl(),Ee=ct(pe);{var We=Me=>{var je=kl(),qe=s(r(je),2);qe.__change=Xe=>v(O,Number(Xe.target.value)),tt(qe,5,()=>e(c),at,(Xe,Je)=>{var dt=Tl(),Mt=r(dt,!0);t(dt);var it={};N(()=>{w(Mt,(e(Je),i(()=>e(Je).CompleteFullName||e(Je).FullName||`Pool ${e(Je).PlayId}`))),it!==(it=(e(Je),i(()=>e(Je).PlayId)))&&(dt.value=(dt.__value=(e(Je),i(()=>e(Je).PlayId)))??"")}),u(Xe,dt)}),t(qe);var pt;ga(qe),t(je),N(()=>{pt!==(pt=e(O)||"")&&(qe.value=(qe.__value=e(O)||"")??"",fa(qe,e(O)||""))}),u(Me,je)};$(Ee,Me=>{e(c),i(()=>e(c).length>1)&&Me(We)})}var Ve=s(Ee,2);{var Qe=Me=>{var je=Pl(),qe=r(je);{var pt=dt=>{var Mt=Cl(),it=r(Mt),vt=r(it),Oe=r(vt);t(vt),t(it);var et=s(it,2),ft=r(et),mt=s(r(ft));tt(mt,5,()=>(e(k),i(()=>e(k).Pool.Teams)),at,(bt,rt)=>{const ut=_e(()=>(e(rt),i(()=>{var De;return(De=e(rt).TeamText)==null?void 0:De.includes("630")})));var Lt=Ml(),Vt=r(Lt),ta=r(Vt,!0);t(Vt);var Jt=s(Vt),Xt=r(Jt),It=r(Xt,!0);t(Xt),t(Jt);var St=s(Jt),kt=r(St,!0);t(St);var oa=s(St),aa=r(oa,!0);t(oa);var Ue=s(oa),Be=r(Ue);t(Ue);var Ke=s(Ue),Ct=r(Ke,!0);t(Ke),t(Lt),N(()=>{Se(Lt,1,`border-b border-charcoal-700 ${e(ut)?"bg-gold-500/10":""}`),w(ta,(e(rt),i(()=>e(rt).FinishRank||e(rt).OverallRank||"-"))),Se(Xt,1,e(ut)?"text-[#facc15] font-semibold":"text-charcoal-200"),w(It,(e(rt),i(()=>e(rt).TeamText))),w(kt,(e(rt),i(()=>e(rt).MatchesWon??"-"))),w(aa,(e(rt),i(()=>e(rt).MatchesLost??"-"))),w(Be,`${e(rt),i(()=>e(rt).SetsWon??"-")??""}-${e(rt),i(()=>e(rt).SetsLost??"-")??""}`),w(Ct,(e(rt),i(()=>e(rt).PointRatio&&e(rt).PointRatio!=="NaN"?e(rt).PointRatio:"-")))}),u(bt,Lt)}),t(mt),t(ft),t(et),t(Mt),N(()=>w(Oe,`${e(k),i(()=>e(k).Pool.CompleteFullName||e(k).Pool.FullName)??""} - Standings`)),u(dt,Mt)};$(qe,dt=>{e(k),i(()=>e(k).Pool&&e(k).Pool.Teams&&e(k).Pool.Teams.length>0)&&dt(pt)})}var Xe=s(qe,2);{var Je=dt=>{var Mt=El(),it=s(r(Mt),2);tt(it,5,()=>(e(k),i(()=>e(k).Pool.Matches)),at,(vt,Oe)=>{const et=_e(()=>(e(Oe),i(()=>typeof e(Oe).ScheduledStartDateTime=="string"?new Date(e(Oe).ScheduledStartDateTime).getTime():e(Oe).ScheduledStartDateTime))),ft=_e(()=>(e(Oe),i(()=>{var It,St;return((It=e(Oe).FirstTeamText)==null?void 0:It.includes("630"))||((St=e(Oe).SecondTeamText)==null?void 0:St.includes("630"))})));var mt=Dl(),bt=r(mt),rt=r(bt,!0);t(bt);var ut=s(bt,2);{var Lt=It=>{var St=$l(),kt=r(St,!0);t(St),N(()=>w(kt,(e(Oe),i(()=>e(Oe).Court.Name)))),u(It,St)};$(ut,It=>{e(Oe),i(()=>e(Oe).Court)&&It(Lt)})}var Vt=s(ut,2),ta=r(Vt),Jt=s(ta);{var Xt=It=>{var St=Il(),kt=s(ct(St));N(()=>w(kt,` ${e(Oe),i(()=>e(Oe).SecondTeamText)??""}`)),u(It,St)};$(Jt,It=>{e(Oe),i(()=>e(Oe).SecondTeamText)&&It(Xt)})}t(Vt),t(mt),N(It=>{Se(mt,1,`flex items-center gap-3 px-3 py-2 rounded border ${e(ft)?"border-[#eab308]/50 bg-gold-500/5":"border-charcoal-700 bg-charcoal-800/30"}`),w(rt,It),w(ta,`${e(Oe),i(()=>e(Oe).FirstTeamText)??""} `)},[()=>(M(lt),M(e(et)),i(()=>lt(e(et))))]),u(vt,mt)}),t(it),t(Mt),u(dt,Mt)};$(Xe,dt=>{e(k),i(()=>e(k).Pool&&e(k).Pool.Matches&&e(k).Pool.Matches.length>0)&&dt(Je)})}t(je),u(Me,je)},we=Me=>{var je=At(),qe=ct(je);{var pt=Xe=>{var Je=Ol();u(Xe,Je)};$(qe,Xe=>{e(O)&&Xe(pt)},!0)}u(Me,je)};$(Ve,Me=>{e(O)&&e(k)?Me(Qe):Me(we,!1)})}u(re,pe)};$(Y,re=>{e(c),i(()=>e(c).length===0)?re(W):re(q,!1)})}t(j),u(I,j)};$(te,I=>{e(D)==="schedule"?I(ie):I(A,!1)},!0)}u(F,ne)};$(ge,F=>{e(D)==="stats"&&X?F(fe):F(Ie,!1)})}t(Z),N(()=>{Se(U,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(D)==="schedule"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`),Se(le,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(D)==="poolsheet"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`)}),u(K,Z)};$(Q,K=>{!e(C)&&e(T)&&K(Te)})}t(H),t(ve),u(l,ve),jt()}Ht(["click","change"]);function Rl(l="light"){if(typeof navigator>"u"||!("vibrate"in navigator))return;const o={light:[5],medium:[10],heavy:[20],success:[5,10,5],warning:[10,5,10],error:[20,10,20]};navigator.vibrate(o[l]||o.light)}const Ll=50,Ul=.3;function Or(l,o={}){const{threshold:a=Ll,velocityThreshold:n=Ul,onStart:c,onMove:d,onCancel:h,enableHaptic:y=!0}=o;let f=null,S=!1;return{handleTouchStart:b=>{const x=b.touches[0];x&&(f={x:x.clientX,y:x.clientY,time:Date.now()},S=!1,c==null||c())},handleTouchMove:b=>{if(!f)return;const x=b.touches[0];if(!x)return;const _=x.clientX-f.x,O=x.clientY-f.y,k=Math.abs(_),D=Math.abs(O);k>D&&k>a/2?(S=!0,d==null||d(k,_>0?"right":"left")):D>k&&D>a/2&&(S=!0,d==null||d(D,O>0?"down":"up"))},handleTouchEnd:b=>{if(!f)return;const x=b.changedTouches[0];if(!x){f=null;return}const _=x.clientX-f.x,O=x.clientY-f.y,k=Math.abs(_),D=Math.abs(O),C=Date.now()-f.time,G=Math.max(k,D)/C;let ce=null,X=0;k>D&&k>a?(ce=_>0?"right":"left",X=k):D>k&&D>a&&(ce=O>0?"down":"up",X=D),ce&&G>n?(y&&Rl("light"),l({direction:ce,distance:X,velocity:G})):S&&(h==null||h()),f=null,S=!1},handleTouchCancel:()=>{f=null,S=!1,h==null||h()},destroy:()=>{f=null,S=!1}}}var Wl=g('<div role="dialog" aria-modal="true" aria-label="Match details" tabindex="-1"><div class="fixed bottom-0 left-0 right-0 top-0 bg-charcoal-950 overflow-y-auto transition-transform duration-300" role="dialog" tabindex="0"><div class="sticky top-0 bg-charcoal-950 border-b border-charcoal-700 px-4 py-3 flex items-center justify-between z-10 shadow-lg" style="padding-top: max(1rem, env(safe-area-inset-top));"><div class="absolute top-2 left-1/2 -translate-x-1/2 w-12 h-1 bg-charcoal-600 rounded-full"></div> <button type="button" class="ml-auto w-10 h-10 flex items-center justify-center rounded-lg text-charcoal-300 hover:text-charcoal-50 hover:bg-charcoal-800 transition-colors min-h-[44px]" aria-label="Close match details"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="pb-8" style="padding-bottom: max(2rem, env(safe-area-inset-bottom));"><!></div></div></div>');function Bl(l,o){Ft(o,!1);let a=ye(o,"match",8,null),n=ye(o,"eventId",8),c=ye(o,"clubId",8),d=ye(o,"matches",24,()=>[]),h=ye(o,"onClose",8),y=P(),f=null,S=P(0),p=P(!1);function m(){v(p,!1),setTimeout(()=>{h()()},300)}Ia(()=>{if(e(y))return f=Or(x=>{x.direction==="down"&&x.distance>100&&m(),v(S,0)},{onMove:(x,_)=>{_==="down"&&v(S,Math.min(x,200))},onCancel:()=>{v(S,0)}}),e(y).addEventListener("touchstart",f.handleTouchStart,{passive:!0}),e(y).addEventListener("touchmove",f.handleTouchMove,{passive:!0}),e(y).addEventListener("touchend",f.handleTouchEnd,{passive:!0}),e(y).addEventListener("touchcancel",f.handleTouchCancel,{passive:!0}),document.body.style.overflow="hidden",()=>{f&&(e(y).removeEventListener("touchstart",f.handleTouchStart),e(y).removeEventListener("touchmove",f.handleTouchMove),e(y).removeEventListener("touchend",f.handleTouchEnd),e(y).removeEventListener("touchcancel",f.handleTouchCancel),f.destroy()),document.body.style.overflow=""}}),Xa(()=>{document.body.style.overflow=""}),de(()=>M(a()),()=>{a()?setTimeout(()=>{v(p,!0)},10):v(p,!1)}),Bt(),Rt();var T=At(),E=ct(T);{var b=x=>{var _=Wl();let O;_.__click=m,_.__keydown=se=>se.key==="Escape"&&m();var k=r(_);k.__click=se=>se.stopPropagation();var D=r(k),C=s(r(D),2);C.__click=m,t(D);var G=s(D,2),ce=r(G);{var X=se=>{lo(se,{get match(){return a()},get eventId(){return n()},get clubId(){return c()},onClose:m,get matches(){return d()}})};$(ce,se=>{a()&&se(X)})}t(G),t(k),Ga(k,se=>v(y,se),()=>e(y)),t(_),N(()=>{O=Se(_,1,"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-opacity",null,O,{"opacity-0":!e(p),"opacity-100":e(p)}),ea(k,`transform: translateY(${(e(p)?e(S):"100%")??""}%);`)}),u(x,_)};$(E,x=>{a()&&x(b)})}u(l,T),jt()}Ht(["click","keydown"]);var Hl=g("<button><span> </span> <span> </span></button>"),Yl=g('<div class="bg-charcoal-800 border border-charcoal-700 rounded-lg p-2 shadow-lg min-w-[160px]"><div class="text-xs font-medium text-charcoal-300 uppercase tracking-wider mb-2 px-1">Set Priority</div> <div class="space-y-1"></div></div>');function Wo(l,o){Ft(o,!1);let a=ye(o,"matchId",8),n=ye(o,"currentPriority",8),c=ye(o,"onPriorityChange",8),d=ye(o,"onClose",8,void 0),h=P(null);const y=[{value:"must-cover",label:"Must Cover",color:"#eab308",icon:"⭐"},{value:"priority",label:"Priority",color:"#f59e0b",icon:"🔸"},{value:"optional",label:"Optional",color:"#9fa2ab",icon:"○"},{value:null,label:"Clear",color:"#9fa2ab",icon:"✕"}];function f(m){c()(a(),m),d()&&d()()}Rt();var S=Yl(),p=s(r(S),2);tt(p,5,()=>y,at,(m,T)=>{const E=_e(()=>(M(n()),e(T),i(()=>n()===e(T).value))),b=_e(()=>(e(h),e(T),i(()=>e(h)===e(T).value)));var x=Hl();x.__click=()=>f(e(T).value);var _=r(x),O=r(_,!0);t(_);var k=s(_,2),D=r(k,!0);t(k),t(x),N(()=>{Se(x,1,`w-full text-left px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-2 ${e(E)?"bg-gold-500/20 text-[#facc15] border border-[#eab308]/50":e(b)?"bg-charcoal-700 text-charcoal-50":"text-charcoal-200 hover:bg-charcoal-700"}`),w(O,(e(T),i(()=>e(T).icon))),w(D,(e(T),i(()=>e(T).label)))}),Ra("mouseenter",x,()=>v(h,e(T).value)),Ra("mouseleave",x,()=>v(h,null)),u(m,x)}),t(p),t(S),u(l,S),jt()}Ht(["click"]);var Vl=g("<button><span> </span> <span> </span></button>"),Jl=g('<div class="bg-charcoal-800 border border-charcoal-700 rounded-lg p-2 shadow-lg min-w-[180px]"><div class="text-xs font-medium text-charcoal-300 uppercase tracking-wider mb-2 px-1">Coverage Status</div> <div class="text-xs text-charcoal-200 mb-2 px-1"> </div> <div class="space-y-1"></div></div>');function io(l,o){Ft(o,!1);let a=ye(o,"teamId",8),n=ye(o,"currentStatus",8),c=ye(o,"onStatusChange",8),d=ye(o,"onClose",8,void 0),h=P(null);const y=[{value:"not-covered",label:"Not Covered",color:"#9fa2ab",icon:"○"},{value:"covered",label:"Covered",color:"#10b981",icon:"✓"},{value:"partially-covered",label:"Partially Covered",color:"#f59e0b",icon:"◐"},{value:"planned",label:"Planned",color:"#eab308",icon:"📋"}];function f(E){c()(a(),E),d()&&d()()}Rt();var S=Jl(),p=s(r(S),2),m=r(p);t(p);var T=s(p,2);tt(T,5,()=>y,at,(E,b)=>{const x=_e(()=>(M(n()),e(b),i(()=>n()===e(b).value))),_=_e(()=>(e(h),e(b),i(()=>e(h)===e(b).value)));var O=Vl();O.__click=()=>f(e(b).value);var k=r(O),D=r(k,!0);t(k);var C=s(k,2),G=r(C,!0);t(C),t(O),N(()=>{Se(O,1,`w-full text-left px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-2 ${M(e(x)),e(b),M(e(_)),i(()=>e(x)?e(b).value==="covered"?"bg-green-500/20 text-green-400 border border-green-500/50":e(b).value==="planned"?"bg-gold-500/20 text-[#facc15] border border-[#eab308]/50":e(b).value==="partially-covered"?"bg-[#f59e0b]/20 text-[#fbbf24] border border-[#f59e0b]/50":"bg-charcoal-700 text-charcoal-300 border border-charcoal-600":e(_)?"bg-charcoal-700 text-charcoal-50":"text-charcoal-200 hover:bg-charcoal-700")??""}`),w(D,(e(b),i(()=>e(b).icon))),w(G,(e(b),i(()=>e(b).label)))}),Ra("mouseenter",O,()=>v(h,e(b).value)),Ra("mouseleave",O,()=>v(h,null)),u(E,O)}),t(T),t(S),N(()=>w(m,`Team ${a()??""}`)),u(l,S),jt()}Ht(["click"]);var zl=g('<div class="px-2 py-1 text-xs font-medium rounded bg-charcoal-700 text-charcoal-300 border border-charcoal-600"> </div>'),Gl=g('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"><div class="bg-charcoal-800 rounded-lg border border-charcoal-700 shadow-xl max-w-md w-full p-4"><h3 class="text-lg font-semibold text-charcoal-50 mb-3">Transfer Claim</h3> <p class="text-sm text-charcoal-300 mb-4">Enter the name or identifier of the person who will take over scoring for this match.</p> <input type="text" placeholder="Enter scorer name or ID..." class="w-full px-3 py-2 bg-charcoal-700 border border-charcoal-600 rounded text-charcoal-200 focus:border-brand-500 focus:outline-none mb-4"/> <div class="flex items-center gap-2"><button class="flex-1 px-3 py-2 text-xs font-medium rounded bg-brand-500 text-white hover:bg-brand-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Transfer</button> <button class="px-3 py-2 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 transition-colors">Cancel</button></div></div></div>'),ql=g('<div class="flex items-center gap-1"><button class="px-2 py-1 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 transition-colors border border-charcoal-600" title="Release claim">Release</button> <button class="px-2 py-1 text-xs font-medium rounded bg-charcoal-600 text-charcoal-200 hover:bg-charcoal-700 transition-colors border border-charcoal-600" title="Transfer claim to another scorer">Transfer</button></div> <!>',1),Xl=g('<button class="px-2 py-1 text-xs font-medium rounded bg-brand-500 text-white hover:bg-brand-600 transition-colors whitespace-nowrap" title="Claim this match for scoring">Claim Match</button>');function Ql(l,o){Ft(o,!1);const a=P(),n=P(),c=P();let d=ye(o,"match",8),h=ye(o,"eventId",8),y=ye(o,"onClaim",8),f=ye(o,"onRelease",8);const S=mr(h());let p=P(!1),m=P("");function T(){e(a)==="available"?(S.claimMatch(d().MatchId,d().ScheduledEndDateTime),setTimeout(()=>{y()(d().MatchId)},100)):e(c)&&(S.releaseClaim(d().MatchId),f()())}function E(){e(m).trim()&&S.transferClaim(d().MatchId,e(m).trim())&&(v(p,!1),v(m,""),f()())}de(()=>M(d()),()=>{v(a,S.getClaimStatus(d().MatchId))}),de(()=>M(d()),()=>{v(n,S.getClaimer(d().MatchId))}),de(()=>M(d()),()=>{v(c,S.isClaimOwner(d().MatchId))}),Bt(),Rt();var b=At(),x=ct(b);{var _=k=>{var D=zl(),C=r(D);t(D),N(()=>w(C,`Claimed by ${e(n)??""}`)),u(k,D)},O=k=>{var D=At(),C=ct(D);{var G=X=>{var se=ql(),oe=ct(se),ve=r(oe);ve.__click=T;var H=s(ve,2);H.__click=()=>v(p,!0),t(oe);var V=s(oe,2);{var L=J=>{var B=Gl(),ee=r(B),R=s(r(ee),4);Ha(R),R.__keydown=Q=>{Q.key==="Enter"?E():Q.key==="Escape"&&(v(p,!1),v(m,""))};var he=s(R,2),be=r(he);be.__click=E;var $e=s(be,2);$e.__click=()=>{v(p,!1),v(m,"")},t(he),t(ee),t(B),N(Q=>be.disabled=Q,[()=>(e(m),i(()=>!e(m).trim()))]),ka(R,()=>e(m),Q=>v(m,Q)),u(J,B)};$(V,J=>{e(p)&&J(L)})}u(X,se)},ce=X=>{var se=At(),oe=ct(se);{var ve=H=>{var V=Xl();V.__click=T,u(H,V)};$(oe,H=>{e(a)==="available"&&H(ve)},!0)}u(X,se)};$(C,X=>{e(a)==="claimed"&&e(c)?X(G):X(ce,!1)},!0)}u(k,D)};$(x,k=>{e(a)==="locked"?k(_):k(O,!1)})}u(l,b),jt()}Ht(["click","keydown"]);var Kl=g('<div class="text-center py-8 text-charcoal-300 text-sm">No score history available</div>'),Zl=g('<div class="text-charcoal-200 mb-1"> </div>'),ei=g('<div class="px-3 py-2 rounded-lg border border-charcoal-700 bg-charcoal-800 text-xs"><div class="flex items-center justify-between mb-1"><div class="text-charcoal-300"> </div> <div> </div></div> <!> <div class="text-charcoal-50 font-semibold"> </div> <div class="text-[10px] text-charcoal-400 mt-1"> </div></div>'),ti=g('<div class="space-y-2"><h3 class="text-sm font-semibold text-charcoal-50 mb-3">Score History</h3> <div class="space-y-2 max-h-64 overflow-y-auto"></div></div>');function ai(l,o){Ft(o,!1);let a=ye(o,"matchId",8),n=P([]),c=null;function d(){v(n,Xs(a()))}Ia(()=>{d(),c=setInterval(d,5e3)}),Xa(()=>{c&&clearInterval(c)}),Rt();var h=At(),y=ct(h);{var f=p=>{var m=Kl();u(p,m)},S=p=>{var m=ti(),T=s(r(m),2);tt(T,5,()=>(e(n),i(()=>e(n).slice().reverse())),at,(E,b)=>{const x=_e(()=>(e(b),i(()=>e(b).sets.filter(B=>B.completedAt>0)))),_=_e(()=>(M(e(x)),i(()=>e(x).filter(B=>B.team1Score>B.team2Score).length))),O=_e(()=>(M(e(x)),i(()=>e(x).filter(B=>B.team2Score>B.team1Score).length))),k=_e(()=>(e(b),i(()=>e(b).sets.find(B=>B.completedAt===0)||e(b).sets[e(b).sets.length-1])));var D=ei(),C=r(D),G=r(C),ce=r(G,!0);t(G);var X=s(G,2),se=r(X,!0);t(X),t(C);var oe=s(C,2);{var ve=B=>{var ee=Zl(),R=r(ee);t(ee),N(()=>w(R,`Sets: ${e(_)??""}-${e(O)??""}`)),u(B,ee)};$(oe,B=>{M(e(x)),i(()=>e(x).length>0)&&B(ve)})}var H=s(oe,2),V=r(H);t(H);var L=s(H,2),J=r(L);t(L),t(D),N(B=>{w(ce,B),Se(X,1,`px-2 py-0.5 rounded text-[10px] font-medium ${e(b),i(()=>e(b).status==="completed"?"bg-green-500/20 text-green-400":e(b).status==="in-progress"?"bg-gold-500/20 text-[#facc15]":"bg-charcoal-700 text-charcoal-300")??""}`),w(se,(e(b),i(()=>e(b).status))),w(V,`Current: ${M(e(k)),i(()=>e(k).team1Score)??""}-${M(e(k)),i(()=>e(k).team2Score)??""}`),w(J,`Updated by ${e(b),i(()=>e(b).updatedBy)??""}`)},[()=>(e(b),i(()=>new Date(e(b).timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})))]),u(E,D)}),t(T),t(m),u(p,m)};$(y,p=>{e(n),i(()=>e(n).length===0)?p(f):p(S,!1)})}u(l,h),jt()}var ri=g('<button class="w-full px-4 py-2 text-sm font-medium rounded bg-gold-500 text-charcoal-950 hover:bg-gold-400 transition-colors">Start Match</button>'),oi=g('<div class="px-4 py-2 rounded-lg border border-yellow-500/50 bg-yellow-500/10 text-yellow-400 text-sm"> </div>'),ni=g('<button class="flex-1 px-4 py-2 text-sm font-medium rounded bg-[#525463] text-charcoal-200 hover:bg-charcoal-700 transition-colors">Add Set</button>'),si=g('<div class="bg-charcoal-700 rounded-lg border border-charcoal-600 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-2"> </div> <div class="grid grid-cols-2 gap-4"><div class="text-center"><div class="text-xs text-charcoal-300 mb-1"> </div> <div class="flex items-center justify-center gap-2"><button class="w-8 h-8 rounded bg-[#525463] text-charcoal-200 hover:bg-charcoal-700 transition-colors font-bold">−</button> <div class="text-3xl font-bold text-charcoal-50 w-12 text-center"> </div> <button class="w-8 h-8 rounded bg-[#525463] text-charcoal-200 hover:bg-charcoal-700 transition-colors font-bold">+</button></div></div> <div class="text-center"><div class="text-xs text-charcoal-300 mb-1"> </div> <div class="flex items-center justify-center gap-2"><button class="w-8 h-8 rounded bg-[#525463] text-charcoal-200 hover:bg-charcoal-700 transition-colors font-bold">−</button> <div class="text-3xl font-bold text-charcoal-50 w-12 text-center"> </div> <button class="w-8 h-8 rounded bg-[#525463] text-charcoal-200 hover:bg-charcoal-700 transition-colors font-bold">+</button></div></div></div> <div class="flex gap-2 mt-4"><button class="flex-1 px-4 py-2 text-sm font-medium rounded bg-[#525463] text-charcoal-200 hover:bg-charcoal-700 transition-colors">Complete Set</button> <!></div></div>'),li=g('<div class="flex items-center justify-between px-3 py-2 bg-charcoal-700 rounded border border-charcoal-600"><span class="text-sm text-charcoal-300"> </span> <div class="flex items-center gap-4"><span class="text-sm font-medium text-charcoal-50"> </span> <span class="text-sm text-charcoal-300">vs</span> <span class="text-sm font-medium text-charcoal-50"> </span></div></div>'),ii=g('<div><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-2">Completed Sets</div> <div class="space-y-2"></div></div>'),ci=g('<button class="w-full px-4 py-2 text-sm font-medium rounded bg-gold-500 text-charcoal-950 hover:bg-gold-400 transition-colors">Complete Match</button>'),di=g('<div class="text-xs text-charcoal-300 text-center"> </div>'),vi=g('<div class="border-t border-charcoal-700 pt-4"><!></div>'),ui=g('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"><div class="bg-charcoal-800 rounded-lg border border-charcoal-700 shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="sticky top-0 bg-charcoal-800 border-b border-charcoal-700 px-4 py-3 flex items-center justify-between"><div><h2 class="text-lg font-semibold text-charcoal-50">Scorekeeper</h2> <p class="text-sm text-charcoal-300"> </p></div> <button class="text-charcoal-300 hover:text-charcoal-50 transition-colors" aria-label="Close scorekeeper">✕</button></div> <div class="p-4 space-y-4"><div class="flex items-center gap-2"><span class="text-xs text-charcoal-300 uppercase tracking-wider">Status:</span> <select class="px-3 py-1 text-sm font-medium rounded bg-charcoal-700 text-charcoal-200 border border-charcoal-600 focus:border-gold-500 focus:outline-none"><option>Not Started</option><option>In Progress</option><option>Completed</option></select></div> <!> <!> <!> <!> <!> <button> </button> <!> <!></div></div></div>');function Bo(l,o){var j,Y;Ft(o,!1);const a=P(),n=P();let c=ye(o,"matchId",8),d=ye(o,"team1Name",8),h=ye(o,"team2Name",8),y=ye(o,"currentScore",8),f=ye(o,"onScoreUpdate",8),S=ye(o,"onClose",8);const p=0,m=50,T=25,E=2;function b(W,q){if(W<p||W>m)return{valid:!1,warning:`Score must be between ${p} and ${m}`};if(q<p||q>m)return{valid:!1,warning:`Score must be between ${p} and ${m}`};const re=Math.max(W,q),pe=Math.min(W,q);if(re>=T){if(re-pe<E)return{valid:!0,warning:`Set requires winning by at least ${E} points. Current: ${re-pe}`};if(re>T+5)return{valid:!0,warning:`High score (${re}). Verify this is correct.`}}return{valid:!0}}let x=P(((j=y())==null?void 0:j.sets)||[]),_=P(((Y=y())==null?void 0:Y.status)||"not-started"),O=P(null),k=P(!1),D=null;function C(){const W="in-progress";v(_,W),e(x).length===0&&v(x,[{setNumber:1,team1Score:0,team2Score:0,completedAt:0}]),v(k,!0),f()(e(x),W),setTimeout(()=>v(k,!1),500)}function G(){const W=e(x).length+1;v(x,[...e(x),{setNumber:W,team1Score:0,team2Score:0,completedAt:0}])}function ce(W,q,re){const pe=b(q,re);v(O,pe.warning||null),pe.valid&&(v(x,e(x).map(Ee=>Ee.setNumber===W?{...Ee,team1Score:q,team2Score:re}:Ee)),e(_)==="in-progress"&&(D&&clearTimeout(D),D=setTimeout(()=>{v(k,!0),f()(e(x),e(_)),setTimeout(()=>v(k,!1),300)},1e3)))}function X(W){v(x,e(x).map(q=>q.setNumber===W?{...q,completedAt:Date.now()}:q)),e(_)==="in-progress"&&(v(k,!0),f()(e(x),e(_)),setTimeout(()=>v(k,!1),500))}function se(){v(_,"completed"),f()(e(x),"completed")}function oe(){v(k,!0),f()(e(x),e(_)),setTimeout(()=>v(k,!1),500)}Xa(()=>{D&&clearTimeout(D)}),de(()=>(e(x),e(_)),()=>{e(x).length===0&&e(_)==="not-started"&&v(x,[{setNumber:1,team1Score:0,team2Score:0,completedAt:0}])}),de(()=>e(x),()=>{v(a,e(x).find(W=>W.completedAt===0)||e(x)[e(x).length-1])}),de(()=>e(x),()=>{v(n,e(x).filter(W=>W.completedAt>0))}),Bt(),Rt();var ve=ui(),H=r(ve),V=r(H),L=r(V),J=s(r(L),2),B=r(J);t(J),t(L);var ee=s(L,2);ee.__click=function(...W){var q;(q=S())==null||q.apply(this,W)},t(V);var R=s(V,2),he=r(R),be=s(r(he),2);N(()=>{e(_),oo(()=>{})});var $e=r(be);$e.value=$e.__value="not-started";var Q=s($e);Q.value=Q.__value="in-progress";var Te=s(Q);Te.value=Te.__value="completed",t(be),t(he);var K=s(he,2);{var Z=W=>{var q=ri();q.__click=C,u(W,q)};$(K,W=>{e(_)==="not-started"&&W(Z)})}var ke=s(K,2);{var U=W=>{var q=oi(),re=r(q);t(q),N(()=>w(re,`⚠️ ${e(O)??""}`)),u(W,q)};$(ke,W=>{e(O)&&W(U)})}var le=s(ke,2);{var me=W=>{var q=si(),re=r(q),pe=r(re);t(re);var Ee=s(re,2),We=r(Ee),Ve=r(We),Qe=r(Ve,!0);t(Ve);var we=s(Ve,2),Me=r(we);Me.__click=()=>{const ut=Math.max(0,e(a).team1Score-1);ce(e(a).setNumber,ut,e(a).team2Score)};var je=s(Me,2),qe=r(je,!0);t(je);var pt=s(je,2);pt.__click=()=>{const ut=e(a).team1Score+1;ce(e(a).setNumber,ut,e(a).team2Score)},t(we),t(We);var Xe=s(We,2),Je=r(Xe),dt=r(Je,!0);t(Je);var Mt=s(Je,2),it=r(Mt);it.__click=()=>{const ut=Math.max(0,e(a).team2Score-1);ce(e(a).setNumber,e(a).team1Score,ut)};var vt=s(it,2),Oe=r(vt,!0);t(vt);var et=s(vt,2);et.__click=()=>{const ut=e(a).team2Score+1;ce(e(a).setNumber,e(a).team1Score,ut)},t(Mt),t(Xe),t(Ee);var ft=s(Ee,2),mt=r(ft);mt.__click=()=>X(e(a).setNumber);var bt=s(mt,2);{var rt=ut=>{var Lt=ni();Lt.__click=G,u(ut,Lt)};$(bt,ut=>{e(x),i(()=>e(x).length<5)&&ut(rt)})}t(ft),t(q),N(()=>{w(pe,`Set ${e(a),i(()=>e(a).setNumber)??""}`),w(Qe,d()),w(qe,(e(a),i(()=>e(a).team1Score))),w(dt,h()),w(Oe,(e(a),i(()=>e(a).team2Score)))}),u(W,q)};$(le,W=>{e(_)==="in-progress"&&e(a)&&W(me)})}var z=s(le,2);{var ge=W=>{var q=ii(),re=s(r(q),2);tt(re,5,()=>e(n),at,(pe,Ee)=>{var We=li(),Ve=r(We),Qe=r(Ve);t(Ve);var we=s(Ve,2),Me=r(we),je=r(Me);t(Me);var qe=s(Me,4),pt=r(qe);t(qe),t(we),t(We),N(()=>{w(Qe,`Set ${e(Ee),i(()=>e(Ee).setNumber)??""}`),w(je,`${d()??""}: ${e(Ee),i(()=>e(Ee).team1Score)??""}`),w(pt,`${h()??""}: ${e(Ee),i(()=>e(Ee).team2Score)??""}`)}),u(pe,We)}),t(re),t(q),u(W,q)};$(z,W=>{e(n),i(()=>e(n).length>0)&&W(ge)})}var fe=s(z,2);{var Ie=W=>{var q=ci();q.__click=se,u(W,q)};$(fe,W=>{e(_),e(n),i(()=>e(_)==="in-progress"&&e(n).length>0)&&W(Ie)})}var F=s(fe,2);F.__click=oe;var ne=r(F,!0);t(F);var te=s(F,2);{var ie=W=>{var q=di(),re=r(q,!0);t(q),N(()=>w(re,e(k)?"💾 Saving...":"✓ Auto-save enabled")),u(W,q)};$(te,W=>{e(_)==="in-progress"&&W(ie)})}var A=s(te,2);{var I=W=>{var q=vi(),re=r(q);ai(re,{get matchId(){return c()}}),t(q),u(W,q)};$(A,W=>{y()&&W(I)})}t(R),t(H),t(ve),N(()=>{w(B,`${d()??""} vs ${h()??""}`),F.disabled=e(k),Se(F,1,`w-full px-4 py-2 text-sm font-medium rounded transition-colors border ${e(k)?"bg-[#525463] text-charcoal-300 cursor-not-allowed":"bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 border-charcoal-600"}`),w(ne,e(k)?"Saving...":"Save Score")}),no(be,()=>e(_),W=>v(_,W)),u(l,ve),jt()}Ht(["click"]);var hi=g('<span class="text-[9px] text-[#9fa2ab] opacity-75"> </span>'),fi=g("<div><span>LIVE</span> <!></div>");function co(l,o){Ft(o,!1);let a=ye(o,"isLive",8),n=ye(o,"lastUpdated",8,void 0),c=ye(o,"className",8,""),d=P(!1),h=P(null);Xa(()=>{e(h)&&clearTimeout(e(h))}),de(()=>(M(n()),e(h)),()=>{n()&&(v(d,!0),e(h)&&clearTimeout(e(h)),v(h,setTimeout(()=>{v(d,!1)},2e3)))}),Bt(),Rt();var y=At(),f=ct(y);{var S=p=>{var m=fi(),T=r(m),E=s(T,2);{var b=x=>{var _=hi(),O=r(_,!0);t(_),N(k=>w(O,k),[()=>(M(n()),i(()=>new Date(n()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})))]),u(x,_)};$(E,x=>{n()&&x(b)})}t(m),N(()=>{Se(m,1,`flex items-center gap-1 ${c()??""}`),Se(T,1,`px-1.5 py-0.5 text-[10px] font-medium rounded border transition-all ${e(d)?"bg-green-500/30 text-green-300 border-green-500/50 animate-pulse":"bg-green-500/20 text-green-400 border-green-500/30"}`)}),u(p,m)};$(f,p=>{a()&&p(S)})}u(l,y),jt()}var mi=g("<button></button>"),xi=g('<button class="text-charcoal-300 hover:text-charcoal-50 text-xs" title="Move up">↑</button>'),gi=g('<button class="text-gold-500 hover:text-[#facc15] text-xs" title="Pinned">📌</button>'),pi=g('<button class="text-charcoal-300 hover:text-charcoal-50 text-xs" title="Move down">↓</button>'),bi=g('<div class="flex items-center gap-2 px-3 py-2 rounded bg-charcoal-700 border border-charcoal-600"><div class="flex-shrink-0 flex items-center gap-1"></div> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-charcoal-50 truncate"> </div></div> <div class="flex-shrink-0 flex flex-col gap-0.5"><!> <!> <!></div> <button class="flex-shrink-0 text-charcoal-300 hover:text-red-400 transition-colors" title="Unfollow">✕</button></div>'),_i=g('<div class="mb-4 space-y-2"></div>'),yi=g('<button class="w-full px-3 py-2 text-left text-sm text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-700 rounded transition-colors"> </button>'),wi=g('<div class="fixed inset-0 z-40" role="button" tabindex="0"></div> <div class="absolute top-full left-0 mt-2 w-80 bg-charcoal-800 border border-charcoal-700 rounded-lg shadow-lg z-50 max-h-[500px] overflow-y-auto"><div class="p-4"><div class="flex items-center justify-between mb-3"><h3 class="text-sm font-semibold text-charcoal-50">Followed Teams</h3> <button class="text-charcoal-300 hover:text-charcoal-50 transition-colors">✕</button></div> <!> <div class="border-t border-charcoal-700 pt-3"><h4 class="text-xs font-medium text-charcoal-300 mb-2 uppercase tracking-wider">Available Teams</h4> <div class="space-y-1 max-h-48 overflow-y-auto"></div></div></div></div>',1),Si=g('<div class="relative"><button class="px-3 py-2 text-sm font-medium rounded-lg bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 border border-charcoal-600 hover:border-[#eab308] transition-colors"> </button> <!></div>');function Ti(l,o){Ft(o,!1);const a=()=>Zt($t,"$followedTeams",n),[n,c]=Pa(),d=P();let h=ye(o,"matches",8),y=P(!1);const f=["#eab308","#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4"];function S(_,O){$t.isFollowing(_)?$t.unfollowTeam(_):$t.followTeam(_,O)}function p(_,O){$t.setTeamColor(_,O)}de(()=>M(h()),()=>{v(d,(()=>{const _=new Map;return h().forEach(O=>{const k=O.FirstTeamText||O.SecondTeamText;k&&!_.has(k)&&_.set(k,k)}),Array.from(_.entries()).map(([O,k])=>({id:O,name:k}))})())}),Bt(),Rt();var m=Si(),T=r(m);T.__click=()=>v(y,!e(y));var E=r(T);t(T);var b=s(T,2);{var x=_=>{var O=wi(),k=ct(O);k.__click=()=>v(y,!1),k.__keydown=H=>{(H.key==="Enter"||H.key===" ")&&v(y,!1)};var D=s(k,2),C=r(D),G=r(C),ce=s(r(G),2);ce.__click=()=>v(y,!1),t(G);var X=s(G,2);{var se=H=>{var V=_i();tt(V,5,a,at,(L,J,B)=>{var ee=bi(),R=r(ee);tt(R,5,()=>f,at,(z,ge)=>{var fe=mi();fe.__click=()=>p(e(J).teamId,e(ge)),N(Ie=>{Se(fe,1,`w-4 h-4 rounded border-2 transition-all ${Ie??""}`),ea(fe,`background-color: ${e(ge)??""}`),Tt(fe,"title",e(ge))},[()=>(a(),e(J),e(ge),i(()=>a().getTeamColor(e(J).teamId)===e(ge)?"border-white scale-110":"border-charcoal-600 hover:border-[#9fa2ab]"))]),u(z,fe)}),t(R);var he=s(R,2),be=r(he),$e=r(be,!0);t(be),t(he);var Q=s(he,2),Te=r(Q);{var K=z=>{var ge=xi();ge.__click=()=>$t.reorderTeams(e(J).teamId,"up"),u(z,ge)};$(Te,z=>{B>0&&z(K)})}var Z=s(Te,2);{var ke=z=>{var ge=gi();ge.__click=()=>$t.reorderTeams(e(J).teamId,"top"),u(z,ge)};$(Z,z=>{B===0&&z(ke)})}var U=s(Z,2);{var le=z=>{var ge=pi();ge.__click=()=>$t.reorderTeams(e(J).teamId,"down"),u(z,ge)};$(U,z=>{a(),i(()=>{var ge;return B<(((ge=a())==null?void 0:ge.length)||0)-1})&&z(le)})}t(Q);var me=s(Q,2);me.__click=()=>S(e(J).teamId,e(J).teamName),t(ee),N(()=>w($e,(e(J),i(()=>e(J).teamName)))),u(L,ee)}),t(V),u(H,V)};$(X,H=>{a(),i(()=>a()&&a().length>0)&&H(se)})}var oe=s(X,2),ve=s(r(oe),2);tt(ve,5,()=>(e(d),M($t),i(()=>e(d).filter(H=>!$t.isFollowing(H.id)))),at,(H,V)=>{var L=yi();L.__click=()=>S(e(V).id,e(V).name);var J=r(L);t(L),N(()=>w(J,`+ ${e(V),i(()=>e(V).name)??""}`)),u(H,L)}),t(ve),t(oe),t(C),t(D),u(_,O)};$(b,_=>{e(y)&&_(x)})}t(m),N(()=>w(E,`My Teams (${a(),i(()=>{var _;return((_=a())==null?void 0:_.length)||0})??""})`)),u(l,m),jt(),c()}Ht(["click","keydown"]);var ki=g('<div class="text-xs text-charcoal-300"> </div>'),Mi=g('<div class="mt-3 pt-3 border-t border-charcoal-600"><div class="flex items-center justify-between"><!> <div class="text-lg font-bold text-[#facc15]"> </div></div></div>'),Ci=g('<div role="button" tabindex="0" class="px-4 py-3 rounded-lg border border-charcoal-600 bg-charcoal-700 hover:border-gold-500 transition-colors cursor-pointer"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-2"><span class="text-xs font-medium text-[#facc15]"> </span> <!></div> <div class="text-xs text-charcoal-300"> </div></div> <div class="space-y-1"><div class="text-sm font-semibold text-charcoal-50"> </div> <div class="text-xs text-charcoal-300">vs</div> <div class="text-sm font-semibold text-charcoal-50"> </div></div> <!></div>'),$i=g('<div class="mb-6 rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-semibold text-charcoal-50 flex items-center gap-2"><span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span> Live Now</h2> <span class="text-xs text-charcoal-300"> </span></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div></div>');function Ii(l,o){Ft(o,!1);const a=P();let n=ye(o,"matches",8),c=ye(o,"eventId",8),d=ye(o,"userId",8,void 0),h=ye(o,"onMatchClick",8,void 0);const y=mr(c(),d()||"anonymous");de(()=>M(n()),()=>{v(a,(()=>{const m=Date.now();return n().filter(T=>{const E=T.ScheduledStartDateTime,b=T.ScheduledEndDateTime||E+5400*1e3,x=y.getScore(T.MatchId);return x&&x.status==="in-progress"||m>=E&&m<=b})})())}),Bt(),Rt();var f=At(),S=ct(f);{var p=m=>{var T=$i(),E=r(T),b=s(r(E),2),x=r(b);t(b),t(E);var _=s(E,2);tt(_,5,()=>e(a),at,(O,k)=>{const D=_e(()=>(e(k),i(()=>y.getScore(e(k).MatchId)))),C=_e(()=>(M(e(D)),i(()=>{var K,Z,ke;return((K=e(D))==null?void 0:K.sets.find(U=>U.completedAt===0))||((ke=e(D))==null?void 0:ke.sets[((Z=e(D))==null?void 0:Z.sets.length)-1])}))),G=_e(()=>(M(e(D)),i(()=>{var K;return((K=e(D))==null?void 0:K.sets.filter(Z=>Z.completedAt>0))||[]}))),ce=_e(()=>(M(e(G)),i(()=>e(G).filter(K=>K.team1Score>K.team2Score).length))),X=_e(()=>(M(e(G)),i(()=>e(G).filter(K=>K.team2Score>K.team1Score).length)));var se=Ci();se.__click=()=>{var K;return(K=h())==null?void 0:K(e(k))},se.__keydown=K=>{var Z;(K.key==="Enter"||K.key===" ")&&((Z=h())==null||Z(e(k)))};var oe=r(se),ve=r(oe),H=r(ve),V=r(H,!0);t(H);var L=s(H,2);{let K=_e(()=>(M(e(D)),i(()=>{var ke;return((ke=e(D))==null?void 0:ke.status)==="in-progress"||!1}))),Z=_e(()=>(M(e(D)),i(()=>{var ke;return(ke=e(D))==null?void 0:ke.lastUpdated})));co(L,{get isLive(){return e(K)},get lastUpdated(){return e(Z)}})}t(ve);var J=s(ve,2),B=r(J,!0);t(J),t(oe);var ee=s(oe,2),R=r(ee),he=r(R,!0);t(R);var be=s(R,4),$e=r(be,!0);t(be),t(ee);var Q=s(ee,2);{var Te=K=>{var Z=Mi(),ke=r(Z),U=r(ke);{var le=ge=>{var fe=ki(),Ie=r(fe);t(fe),N(()=>w(Ie,`Sets: ${e(ce)??""}-${e(X)??""}`)),u(ge,fe)};$(U,ge=>{M(e(G)),i(()=>e(G).length>0)&&ge(le)})}var me=s(U,2),z=r(me);t(me),t(ke),t(Z),N(()=>w(z,`${M(e(C)),i(()=>e(C).team1Score)??""}-${M(e(C)),i(()=>e(C).team2Score)??""}`)),u(K,Z)};$(Q,K=>{M(e(D)),M(e(C)),i(()=>e(D)&&e(D).status!=="not-started"&&e(C))&&K(Te)})}t(se),N(K=>{w(V,(e(k),i(()=>e(k).CourtName))),w(B,K),w(he,(e(k),i(()=>e(k).FirstTeamText))),w($e,(e(k),i(()=>e(k).SecondTeamText)))},[()=>(M(lt),e(k),i(()=>lt(e(k).ScheduledStartDateTime)))]),u(O,se)}),t(_),t(T),N(()=>w(x,`${e(a),i(()=>e(a).length)??""} match${e(a),i(()=>e(a).length!==1?"es":"")??""} in progress`)),u(m,T)};$(S,m=>{e(a),i(()=>e(a).length>0)&&m(p)})}u(l,f),jt()}Ht(["click","keydown"]);var Di=g('<select class="px-2 py-1 text-xs rounded bg-charcoal-700 text-charcoal-200 border border-charcoal-600 focus:border-gold-500 focus:outline-none"><option>This Match</option><option>All Matches</option></select>'),Ei=g('<div class="text-center py-12 text-charcoal-300 text-sm">No claim history found</div>'),Pi=g('<div class="text-sm font-semibold text-charcoal-50"> </div>'),Oi=g('<div class="px-3 py-2 rounded-lg border border-charcoal-700 bg-charcoal-700/30"><div class="flex items-start justify-between mb-1"><div class="flex-1"><!> <div class="text-xs text-charcoal-300 mt-0.5"> </div></div> <div> </div></div> <div class="flex items-center justify-between mt-2 text-xs text-charcoal-400"><span> </span> <span> </span></div></div>'),Ni=g('<div class="space-y-2"></div>'),Ai=g('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"><div class="bg-charcoal-800 rounded-lg border border-charcoal-700 shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col"><div class="flex items-center justify-between p-4 border-b border-charcoal-700 bg-charcoal-700/50"><div><h3 class="text-lg font-semibold text-charcoal-50">Claim History</h3> <p class="text-xs text-charcoal-300 mt-0.5"> </p></div> <div class="flex items-center gap-2"><!> <button class="text-charcoal-300 hover:text-charcoal-50 transition-colors" aria-label="Close"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-y-auto p-4"><!></div></div></div>');function Fi(l,o){Ft(o,!1);let a=ye(o,"matchId",8,void 0),n=ye(o,"eventId",8),c=ye(o,"matches",8),d=ye(o,"onClose",8),h=P([]),y=P("match");function f(V){return c().find(L=>L.MatchId===V)}function S(V){return`${Kt(V)} ${lt(V)}`}function p(V){switch(V.action){case"claimed":return"Claimed";case"released":return"Released";case"transferred":return`Transferred to ${V.transferredTo}`;default:return V.action}}function m(V){switch(V){case"claimed":return"text-gold-500";case"released":return"text-charcoal-300";case"transferred":return"text-[#facc15]";default:return"text-charcoal-200"}}de(()=>(e(y),M(a()),M(n()),To),()=>{e(y)==="match"&&a()?v(h,Zs(a(),n())):v(h,To(n()))}),Bt(),Rt();var T=Ai(),E=r(T),b=r(E),x=r(b),_=s(r(x),2),O=r(_,!0);t(_),t(x);var k=s(x,2),D=r(k);{var C=V=>{var L=Di();N(()=>{e(y),oo(()=>{})});var J=r(L);J.value=J.__value="match";var B=s(J);B.value=B.__value="all",t(L),no(L,()=>e(y),ee=>v(y,ee)),u(V,L)};$(D,V=>{a()&&V(C)})}var G=s(D,2);G.__click=function(...V){var L;(L=d())==null||L.apply(this,V)};var ce=r(G),X=r(ce);Tt(X,"stroke-width",2),t(ce),t(G),t(k),t(b);var se=s(b,2),oe=r(se);{var ve=V=>{var L=Ei();u(V,L)},H=V=>{var L=Ni();tt(L,5,()=>e(h),at,(J,B)=>{const ee=_e(()=>(e(B),i(()=>f(e(B).matchId))));var R=Oi(),he=r(R),be=r(he),$e=r(be);{var Q=fe=>{var Ie=Pi(),F=r(Ie);t(Ie),N(ne=>w(F,`${ne??""} • ${M(e(ee)),i(()=>e(ee).CourtName)??""}`),[()=>(M(lt),M(e(ee)),i(()=>lt(e(ee).ScheduledStartDateTime)))]),u(fe,Ie)};$($e,fe=>{e(ee)&&fe(Q)})}var Te=s($e,2),K=r(Te,!0);t(Te),t(be);var Z=s(be,2),ke=r(Z,!0);t(Z),t(he);var U=s(he,2),le=r(U),me=r(le);t(le);var z=s(le,2),ge=r(z,!0);t(z),t(U),t(R),N((fe,Ie,F)=>{w(K,(M(e(ee)),e(B),i(()=>e(ee)?`${e(ee).FirstTeamText} vs ${e(ee).SecondTeamText}`:`Match ${e(B).matchId}`))),Se(Z,1,`text-xs font-medium ${fe??""}`),w(ke,Ie),w(me,`By: ${e(B),i(()=>e(B).userId)??""}`),w(ge,F)},[()=>(e(B),i(()=>m(e(B).action))),()=>(e(B),i(()=>p(e(B)))),()=>(e(B),i(()=>S(e(B).timestamp)))]),u(J,R)}),t(L),u(V,L)};$(oe,V=>{e(h),i(()=>e(h).length===0)?V(ve):V(H,!1)})}t(se),t(E),t(T),N(()=>w(O,e(y)==="match"&&a()?"Match history":"All claims for this event")),u(l,T),jt()}Ht(["click"]);var ji=g('<span class="px-2 py-1 rounded-full bg-gold-500 text-charcoal-950 text-xs font-medium"> </span>'),Ri=g("<option> </option>"),Li=g("<option> </option>"),Ui=g('<div><label for="priority-filter-sheet" class="block text-xs font-medium text-charcoal-300 uppercase tracking-wider mb-2">Priority</label> <select id="priority-filter-sheet" class="w-full px-3 py-2 rounded-lg text-sm min-h-[44px] focus:border-brand-500 focus:outline-none bg-charcoal-800 text-charcoal-50 border border-charcoal-700"><option>All Priorities</option><option>Must Cover</option><option>Priority</option><option>Optional</option></select></div>'),Wi=g('<div><label for="coverage-status-filter-sheet" class="block text-xs font-medium text-charcoal-300 uppercase tracking-wider mb-2">Coverage Status</label> <select id="coverage-status-filter-sheet" class="w-full px-3 py-2 rounded-lg text-sm min-h-[44px] focus:border-brand-500 focus:outline-none bg-charcoal-800 text-charcoal-50 border border-charcoal-700"><option>All Status</option><option>Uncovered</option><option>Planned</option><option>Covered</option></select></div>'),Bi=g('<div><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="w-5 h-5 rounded border-charcoal-600 bg-charcoal-800 text-brand-500 focus:ring-brand-500 focus:ring-offset-charcoal-950"/> <span class="text-sm text-charcoal-50">Show conflicts only</span></label></div>'),Hi=g('<div class="fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-opacity" role="dialog" aria-modal="true" aria-label="Filter matches" tabindex="0"><div class="fixed bottom-0 left-0 right-0 max-h-[80vh] bg-charcoal-950 rounded-t-lg border-t border-charcoal-900 overflow-y-auto transform transition-transform backdrop-blur-sm" role="none"><div class="sticky top-0 bg-charcoal-950 border-b border-charcoal-900 px-4 py-3 flex items-center justify-between z-10"><div class="absolute top-2 left-1/2 -translate-x-1/2 w-12 h-1 bg-charcoal-600 rounded-full"></div> <h2 class="text-lg font-semibold text-charcoal-50 ml-auto">Filters</h2> <div class="flex items-center gap-2 ml-auto"><!> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg text-charcoal-300 hover:text-charcoal-50 hover:bg-charcoal-900 transition-colors min-h-[44px]" aria-label="Close filters">×</button></div></div> <div class="p-4 space-y-4"><div><label for="wave-filter" class="block text-xs font-medium text-charcoal-300 uppercase tracking-wider mb-2">Wave</label> <div class="flex gap-2"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <div><label for="division-filter" class="block text-xs font-medium text-charcoal-300 uppercase tracking-wider mb-2">Division</label> <select id="division-filter" class="w-full px-3 py-2 rounded-lg text-sm min-h-[44px] focus:border-brand-500 focus:outline-none bg-charcoal-800 text-charcoal-50 border border-charcoal-700"><option>All Divisions</option><!></select></div> <div><label for="team-filter" class="block text-xs font-medium text-charcoal-300 uppercase tracking-wider mb-2">Team</label> <select id="team-filter" class="w-full px-3 py-2 rounded-lg text-sm min-h-[44px] focus:border-brand-500 focus:outline-none bg-charcoal-800 text-charcoal-50 border border-charcoal-700"><option>All Teams</option><!></select></div> <!> <!> <!></div> <div class="sticky bottom-0 bg-charcoal-950 border-t border-charcoal-900 px-4 py-3 flex gap-3"><button class="flex-1 px-4 py-2 rounded-lg bg-charcoal-800 text-charcoal-50 border border-charcoal-700 font-medium transition-colors hover:bg-charcoal-700 min-h-[44px]">Clear Filters</button> <button class="flex-1 px-4 py-2 rounded-lg bg-brand-500 text-white font-medium transition-colors hover:bg-brand-600 min-h-[44px]">Apply Filters</button></div></div></div>');function Ho(l,o){Ft(o,!1);const a=()=>Zt(Oa,"$filters",c),n=()=>Zt(Ea,"$userRole",c),[c,d]=Pa(),h=P();let y=ye(o,"divisions",8),f=ye(o,"teams",8),S=ye(o,"open",8,!1),p=ye(o,"onClose",8),m=P(),T=null,E=P(0);function b(){let k=0;return a().wave!=="all"&&k++,a().division&&k++,a().teams.length>0&&k++,a().priority&&a().priority!=="all"&&k++,a().coverageStatus&&a().coverageStatus!=="all"&&k++,a().conflictsOnly&&k++,a().myTeamsOnly&&k++,k}Ia(()=>{if(e(m))return T=Or(k=>{k.direction==="down"&&k.distance>100&&p()(),v(E,0)},{onMove:(k,D)=>{D==="down"&&v(E,Math.min(k,200))},onCancel:()=>{v(E,0)}}),e(m).addEventListener("touchstart",T.handleTouchStart,{passive:!0}),e(m).addEventListener("touchmove",T.handleTouchMove,{passive:!0}),e(m).addEventListener("touchend",T.handleTouchEnd,{passive:!0}),e(m).addEventListener("touchcancel",T.handleTouchCancel,{passive:!0}),()=>{T&&(e(m).removeEventListener("touchstart",T.handleTouchStart),e(m).removeEventListener("touchmove",T.handleTouchMove),e(m).removeEventListener("touchend",T.handleTouchEnd),e(m).removeEventListener("touchcancel",T.handleTouchCancel),T.destroy())}}),de(()=>{},()=>{v(h,b())}),Bt(),Rt();var x=At(),_=ct(x);{var O=k=>{var D=Hi();D.__click=function(...te){var ie;(ie=p())==null||ie.apply(this,te)},D.__keydown=te=>{(te.key==="Enter"||te.key===" ")&&p()()};var C=r(D);C.__click=te=>te.stopPropagation();var G=r(C),ce=s(r(G),4),X=r(ce);{var se=te=>{var ie=ji(),A=r(ie,!0);t(ie),N(()=>w(A,e(h))),u(te,ie)};$(X,te=>{e(h)>0&&te(se)})}var oe=s(X,2);oe.__click=function(...te){var ie;(ie=p())==null||ie.apply(this,te)},t(ce),t(G);var ve=s(G,2),H=r(ve),V=s(r(H),2),L=r(V);L.__click=()=>Et("wave","all");var J=s(L,2);J.__click=()=>Et("wave","morning");var B=s(J,2);B.__click=()=>Et("wave","afternoon"),t(V),t(H);var ee=s(H,2),R=s(r(ee),2);R.__change=te=>Et("division",te.target.value||null);var he=r(R);he.value=he.__value="";var be=s(he);tt(be,1,y,at,(te,ie)=>{var A=Ri(),I=r(A,!0);t(A);var j={};N(()=>{w(I,e(ie)),j!==(j=e(ie))&&(A.value=(A.__value=e(ie))??"")}),u(te,A)}),t(R);var $e;ga(R),t(ee);var Q=s(ee,2),Te=s(r(Q),2);Te.__change=te=>Et("teams",te.target.value?[te.target.value]:[]);var K=r(Te);K.value=K.__value="";var Z=s(K);tt(Z,1,f,at,(te,ie)=>{var A=Li(),I=r(A,!0);t(A);var j={};N(()=>{w(I,e(ie)),j!==(j=e(ie))&&(A.value=(A.__value=e(ie))??"")}),u(te,A)}),t(Te);var ke;ga(Te),t(Q);var U=s(Q,2);{var le=te=>{var ie=Ui(),A=s(r(ie),2);A.__change=re=>Et("priority",re.target.value==="all"?null:re.target.value);var I=r(A);I.value=I.__value="all";var j=s(I);j.value=j.__value="must-cover";var Y=s(j);Y.value=Y.__value="priority";var W=s(Y);W.value=W.__value="optional",t(A);var q;ga(A),t(ie),N(()=>{q!==(q=(a(),i(()=>a().priority||"all")))&&(A.value=(A.__value=(a(),i(()=>a().priority||"all")))??"",fa(A,(a(),i(()=>a().priority||"all"))))}),u(te,ie)};$(U,te=>{n()==="media"&&te(le)})}var me=s(U,2);{var z=te=>{var ie=Wi(),A=s(r(ie),2);A.__change=re=>Et("coverageStatus",re.target.value==="all"?null:re.target.value);var I=r(A);I.value=I.__value="all";var j=s(I);j.value=j.__value="uncovered";var Y=s(j);Y.value=Y.__value="planned";var W=s(Y);W.value=W.__value="covered",t(A);var q;ga(A),t(ie),N(()=>{q!==(q=(a(),i(()=>a().coverageStatus||"all")))&&(A.value=(A.__value=(a(),i(()=>a().coverageStatus||"all")))??"",fa(A,(a(),i(()=>a().coverageStatus||"all"))))}),u(te,ie)};$(me,te=>{n()==="media"&&te(z)})}var ge=s(me,2);{var fe=te=>{var ie=Bi(),A=r(ie),I=r(A);Ha(I),I.__change=j=>Et("conflictsOnly",j.currentTarget.checked),pa(2),t(A),t(ie),N(()=>hn(I,(a(),i(()=>a().conflictsOnly)))),u(te,ie)};$(ge,te=>{n()==="media"&&te(fe)})}t(ve);var Ie=s(ve,2),F=r(Ie);F.__click=()=>{lr()};var ne=s(F,2);ne.__click=function(...te){var ie;(ie=p())==null||ie.apply(this,te)},t(Ie),t(C),Ga(C,te=>v(m,te),()=>e(m)),t(D),N(()=>{ea(C,`backdrop-filter: blur(8px); transform: translateY(${e(E)??""}px);`),Se(L,1,`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors min-h-[44px] ${a(),i(()=>a().wave==="all"?"bg-gold-500 text-charcoal-950":"bg-charcoal-800 text-charcoal-300 hover:text-charcoal-50 border border-charcoal-700")??""}`),Se(J,1,`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors min-h-[44px] ${a(),i(()=>a().wave==="morning"?"bg-gold-500 text-charcoal-950":"bg-charcoal-800 text-charcoal-300 hover:text-charcoal-50 border border-charcoal-700")??""}`),Se(B,1,`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors min-h-[44px] ${a(),i(()=>a().wave==="afternoon"?"bg-gold-500 text-charcoal-950":"bg-charcoal-800 text-charcoal-300 hover:text-charcoal-50 border border-charcoal-700")??""}`),$e!==($e=(a(),i(()=>a().division||"")))&&(R.value=(R.__value=(a(),i(()=>a().division||"")))??"",fa(R,(a(),i(()=>a().division||"")))),ke!==(ke=(a(),i(()=>a().teams[0]||"")))&&(Te.value=(Te.__value=(a(),i(()=>a().teams[0]||"")))??"",fa(Te,(a(),i(()=>a().teams[0]||""))))}),u(k,D)};$(_,k=>{S()&&k(O)})}u(l,x),jt(),d()}Ht(["click","keydown","change"]);var Yi=g('<span class="text-charcoal-950 font-bold text-lg">✓</span>'),Vi=g('<span class="text-charcoal-200 font-bold text-lg">✕</span>'),Ji=g("<div><!></div>"),zi=g('<span class="text-xs text-warning-500 flex-shrink-0">⚠️</span>'),Gi=g('<span class="text-xs text-gold-500 flex-shrink-0">⭐</span>'),qi=g('<span class="text-xs text-success-500">✓ Covered</span>'),Xi=g('<span class="text-xs text-warning-500">◐ Partial</span>'),Qi=g('<span class="text-xs text-gold-500">📋 Planned</span>'),Ki=Dr('<svg class="w-4 h-4 text-gold-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Zi=g('<span class="text-xs text-charcoal-400">+</span>'),ec=g('<button type="button"><!></button>'),tc=g('<button type="button"> </button>'),ac=g('<div role="button" tabindex="0" data-match-card=""><!> <div><div class="flex items-start gap-3"><div class="flex-shrink-0"><div class="px-2 py-1 rounded-lg bg-charcoal-700 text-charcoal-200 border border-charcoal-600 text-xs font-bold"> </div></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><div class="text-base font-bold text-charcoal-50 truncate"> </div> <!> <!></div> <div class="text-sm text-charcoal-300 truncate mb-1"> </div> <div class="flex items-center gap-2 mt-1"><span class="text-xs font-semibold text-charcoal-300"> </span> <span class="text-xs text-charcoal-400">•</span> <span class="text-xs text-charcoal-400"> </span> <!></div></div> <div class="flex-shrink-0 flex flex-col items-center gap-1"><!></div></div></div></div>');function rc(l,o){Ft(o,!1);const a=()=>Zt(hr,"$isMedia",c),n=()=>Zt(Pr,"$isSpectator",c),[c,d]=Pa(),h=P(),y=P(),f=P(),S=P(),p=P(),m=P(),T=P(),E=P(),b=P(),x=P(),_=P(),O=P(),k=P();let D=ye(o,"match",8),C=ye(o,"hasConflict",8,!1),G=ye(o,"onTap",8),ce=ye(o,"onSwipeRight",8,null),X=ye(o,"onSwipeLeft",8,null),se=ye(o,"scanningMode",8,!1);ye(o,"conflicts",8);let oe=P(),ve=P(0),H=P(!1),V=P(null),L=null;function J(we){const je=(we.InvolvedTeam==="first"?we.FirstTeamText:we.SecondTeamText).match(/(\d+-\d+)/);return je?je[1]:""}function B(we){return we.InvolvedTeam==="first"?we.SecondTeamText:we.InvolvedTeam==="second"?we.FirstTeamText:`${we.FirstTeamText} vs ${we.SecondTeamText}`}Ia(()=>{if(e(oe))return L=Or(we=>{we.direction==="right"&&ce()?ce()(D()):we.direction==="left"&&X()&&X()(D()),v(ve,0),v(H,!1),v(V,null)},{onMove:(we,Me)=>{v(H,!0),v(V,Me==="left"||Me==="right"?Me:null),v(ve,Me==="left"||Me==="right"?we:0)},onCancel:()=>{v(ve,0),v(H,!1),v(V,null)}}),e(oe).addEventListener("touchstart",L.handleTouchStart,{passive:!0}),e(oe).addEventListener("touchmove",L.handleTouchMove,{passive:!0}),e(oe).addEventListener("touchend",L.handleTouchEnd,{passive:!0}),e(oe).addEventListener("touchcancel",L.handleTouchCancel,{passive:!0}),()=>{L&&(e(oe).removeEventListener("touchstart",L.handleTouchStart),e(oe).removeEventListener("touchmove",L.handleTouchMove),e(oe).removeEventListener("touchend",L.handleTouchEnd),e(oe).removeEventListener("touchcancel",L.handleTouchCancel),L.destroy())}});function ee(){e(H)||G()(D())}function R(we){we.stopPropagation(),Wt.toggleMatch(D().MatchId)}de(()=>M(D()),()=>{v(h,J(D()))}),de(()=>M(D()),()=>{v(y,B(D()))}),de(()=>M(D()),()=>{v(f,_a.getPriority(D().MatchId))}),de(()=>(e(h),gt),()=>{v(S,e(h)?gt.getTeamStatus(e(h)):"not-covered")}),de(()=>e(S),()=>{v(p,e(S)==="covered"||e(S)==="partially-covered")}),de(()=>e(S),()=>{v(m,e(S)==="planned")}),de(()=>e(S),()=>{v(T,e(S)==="not-covered")}),de(()=>(M(se()),e(p)),()=>{v(E,se()&&e(p))}),de(()=>Wt,()=>{v(b,ha(Wt))}),de(()=>(e(b),M(D())),()=>{v(x,e(b).has(D().MatchId))}),de(()=>a(),()=>{v(_,a())}),de(()=>n(),()=>{v(O,n())}),de(()=>(M(C()),e(f),e(m),e(p),e(T),e(x),e(H)),()=>{v(k,["relative rounded-xl px-4 py-3 min-h-[44px] transition-colors",C()||e(f)==="must-cover"?"border-2":"border",C()?"border-warning-500 bg-warning-500/10":"",e(f)==="must-cover"&&!C()?"border-gold-500 bg-gold-500/10":"",e(m)&&!C()&&e(f)!=="must-cover"?"border-gold-500/50 bg-gold-500/10":"",e(p)&&!C()&&!e(m)&&e(f)!=="must-cover"?"border-success-500/30 bg-success-500/5":"",e(T)&&!C()&&!e(m)&&e(f)!=="must-cover"&&e(x)?"border-gold-500 bg-gold-500/5":"",!C()&&!e(p)&&!e(m)&&!e(x)&&e(f)!=="must-cover"?"border-charcoal-700 bg-charcoal-900":"",e(H)?"":"hover:border-charcoal-600 hover:bg-charcoal-800"].filter(Boolean).join(" "))}),Bt(),Rt();var he=ac();let be;he.__click=ee,he.__keydown=we=>{(we.key==="Enter"||we.key===" ")&&ee()};var $e=r(he);{var Q=we=>{var Me=Ji();let je;var qe=r(Me);{var pt=Je=>{var dt=Yi();u(Je,dt)},Xe=Je=>{var dt=At(),Mt=ct(dt);{var it=vt=>{var Oe=Vi();u(vt,Oe)};$(Mt,vt=>{e(V)==="left"&&vt(it)},!0)}u(Je,dt)};$(qe,Je=>{e(V)==="right"?Je(pt):Je(Xe,!1)})}t(Me),N(Je=>{je=Se(Me,1,"absolute left-0 top-0 bottom-0 w-20 flex items-center justify-center rounded-l-xl transition-opacity",null,je,{"bg-gold-500":e(V)==="right","bg-charcoal-700":e(V)==="left"}),ea(Me,`opacity: ${Je??""};`)},[()=>(e(ve),i(()=>Math.min(e(ve)/100,1)))]),u(we,Me)};$($e,we=>{e(ve)>20&&we(Q)})}var Te=s($e,2),K=r(Te),Z=r(K),ke=r(Z),U=r(ke,!0);t(ke),t(Z);var le=s(Z,2),me=r(le),z=r(me),ge=r(z,!0);t(z);var fe=s(z,2);{var Ie=we=>{var Me=zi();u(we,Me)};$(fe,we=>{C()&&we(Ie)})}var F=s(fe,2);{var ne=we=>{var Me=Gi();u(we,Me)};$(F,we=>{e(f)==="must-cover"&&we(ne)})}t(me);var te=s(me,2),ie=r(te);t(te);var A=s(te,2),I=r(A),j=r(I,!0);t(I);var Y=s(I,4),W=r(Y,!0);t(Y);var q=s(Y,2);{var re=we=>{var Me=qi();u(we,Me)},pe=we=>{var Me=At(),je=ct(Me);{var qe=Xe=>{var Je=Xi();u(Xe,Je)},pt=Xe=>{var Je=At(),dt=ct(Je);{var Mt=it=>{var vt=Qi();u(it,vt)};$(dt,it=>{e(S)==="planned"&&it(Mt)},!0)}u(Xe,Je)};$(je,Xe=>{e(S)==="partially-covered"?Xe(qe):Xe(pt,!1)},!0)}u(we,Me)};$(q,we=>{e(S)==="covered"?we(re):we(pe,!1)})}t(A),t(le);var Ee=s(le,2),We=r(Ee);{var Ve=we=>{var Me=ec();Me.__click=R;var je=r(Me);{var qe=Xe=>{var Je=Ki();u(Xe,Je)},pt=Xe=>{var Je=Zi();u(Xe,Je)};$(je,Xe=>{e(x)?Xe(qe):Xe(pt,!1)})}t(Me),N(()=>{Se(Me,1,`w-6 h-6 rounded border-2 flex items-center justify-center transition-colors min-h-[44px] sm:min-h-0 ${e(x)?"border-gold-500 bg-gold-500/20":"border-charcoal-600 hover:bg-charcoal-700"}`),Tt(Me,"aria-label",e(x)?"Remove from plan":"Add to plan")}),u(we,Me)},Qe=we=>{var Me=At(),je=ct(Me);{var qe=pt=>{var Xe=At(),Je=ct(Xe);{var dt=Mt=>{var it=tc();it.__click=et=>{et.stopPropagation(),$t.isFollowing(e(h))?$t.unfollowTeam(e(h)):$t.followTeam(e(h),e(h))};let vt;var Oe=r(it,!0);t(it),N((et,ft,mt)=>{vt=Se(it,1,"px-2 py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,vt,et),Tt(it,"title",ft),w(Oe,mt)},[()=>({"bg-gold-500":$t.isFollowing(e(h)),"text-charcoal-950":$t.isFollowing(e(h)),"bg-charcoal-700":!$t.isFollowing(e(h)),"text-charcoal-200":!$t.isFollowing(e(h))}),()=>(M($t),e(h),i(()=>$t.isFollowing(e(h))?"Unfollow team":"Follow team")),()=>(M($t),e(h),i(()=>$t.isFollowing(e(h))?"✓":"+"))]),u(Mt,it)};$(Je,Mt=>{e(h)&&Mt(dt)})}u(pt,Xe)};$(je,pt=>{e(O)&&pt(qe)},!0)}u(we,Me)};$(We,we=>{e(_)?we(Ve):we(Qe,!1)})}t(Ee),t(K),t(Te),t(he),Ga(he,we=>v(oe,we),()=>e(oe)),N(we=>{be=Se(he,1,"relative w-full rounded-xl transition-all duration-200 cursor-pointer touch-pan-y svelte-xjb0a1",null,be,{"opacity-30":e(E)}),ea(he,`transform: translateX(${e(ve)*(e(V)==="left"?-1:e(V)==="right"?1:0)}px);`),Tt(he,"data-match-id",(M(D()),i(()=>D().MatchId))),Se(Te,1,ln(e(k))),w(U,we),w(ge,(e(h),M(D()),i(()=>e(h)||D().Division.CodeAlias))),w(ie,`vs ${e(y)??""}`),w(j,(M(D()),i(()=>D().CourtName))),w(W,(M(D()),i(()=>D().Division.CodeAlias)))},[()=>(M(lt),M(D()),i(()=>lt(D().ScheduledStartDateTime)))]),u(l,he),jt(),d()}Ht(["click","keydown"]);var oc=g('<div class="text-center py-12 text-charcoal-300 text-sm"> </div>'),nc=g('<div class="mt-8 pt-6 border-t border-charcoal-700"><button title="Dim covered teams to focus on uncovered"> </button></div>'),sc=g('<div class="mb-4 px-4 py-2 rounded-lg border border-charcoal-700 bg-charcoal-800 flex items-center justify-between flex-wrap gap-2"><div class="flex items-center gap-4 flex-wrap"><div class="text-xs text-charcoal-300"><span class="font-semibold text-charcoal-50"> </span> Coverage</div> <div class="flex items-center gap-2 text-xs"><span class="text-green-400"> </span> <span class="text-charcoal-300">/</span> <span class="text-[#f59e0b]"> </span> <span class="text-charcoal-300">/</span> <span class="text-gold-500"> </span> <span class="text-charcoal-300">/</span> <span class="text-charcoal-400"> </span></div></div> <!></div>'),lc=g('<div class="flex items-center justify-between px-3 py-2 rounded bg-charcoal-700 border border-charcoal-600 hover:border-gold-500/50 transition-colors"><div class="flex-1 min-w-0"><div class="text-xs font-medium text-charcoal-50 truncate"> </div> <div class="text-[10px] text-charcoal-300 mt-0.5"> </div></div> <button class="ml-3 px-3 py-1 text-xs font-medium rounded bg-brand-500 text-white hover:bg-brand-600 transition-colors flex-shrink-0">Add</button></div>'),ic=g('<div class="mb-4 rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="flex items-center justify-between mb-3"><h3 class="text-sm font-semibold text-charcoal-50">Coverage Suggestions</h3> <button class="text-charcoal-300 hover:text-charcoal-50 transition-colors" aria-label="Close suggestions">✕</button></div> <div class="space-y-2"></div></div>'),cc=g(`<div class="mb-4 px-3 py-2 rounded-lg border border-charcoal-700 bg-charcoal-800 text-xs" role="region" aria-label="Coverage status legend"><div class="font-medium text-charcoal-300 mb-2 flex items-center gap-2"><span>Coverage Status</span> <button type="button" class="w-4 h-4 rounded-full border border-charcoal-600 text-charcoal-400 hover:text-charcoal-200 hover:border-charcoal-500 transition-colors flex items-center justify-center text-[10px]" title="Coverage status indicates whether you've planned to photograph a team's matches" aria-label="Coverage status help">?</button></div> <div class="flex flex-wrap gap-4 text-charcoal-200"><div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-gold-500 bg-gold-500/5 flex items-center justify-center" aria-hidden="true"><span class="text-gold-500 text-xs">○</span></div> <span class="flex flex-col"><span class="font-medium text-charcoal-50">Uncovered</span> <span class="text-[10px] text-charcoal-400 hidden sm:inline">No matches planned</span></span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-gold-500/50 bg-gold-500/10 flex items-center justify-center" aria-hidden="true"><span class="text-gold-500 text-xs">📋</span></div> <span class="flex flex-col"><span class="font-medium text-gold-400">Planned</span> <span class="text-[10px] text-charcoal-400 hidden sm:inline">On your schedule</span></span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-green-500/30 bg-green-950/5 flex items-center justify-center" aria-hidden="true"><span class="text-success-500 text-xs">✓</span></div> <span class="flex flex-col"><span class="font-medium text-success-400">Covered</span> <span class="text-[10px] text-charcoal-400 hidden sm:inline">All matches planned</span></span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-warning-500/50 bg-warning-500/10 flex items-center justify-center" aria-hidden="true"><span class="text-warning-500 text-xs">⚠</span></div> <span class="flex flex-col"><span class="font-medium text-warning-400">Conflict</span> <span class="text-[10px] text-charcoal-400 hidden sm:inline">Overlapping times</span></span></div></div></div>`),dc=g('<span class="absolute -top-1 -right-1 w-5 h-5 rounded-full bg-error-500 text-charcoal-50 text-xs flex items-center justify-center"> </span>'),vc=g('<div class="flex items-center gap-2"><!></div>'),uc=g('<div class="text-center py-12 text-charcoal-300 text-sm">No matches found</div>'),hc=g('<span class="text-xs font-medium text-warning-500"> </span>'),fc=g('<div class="w-3 h-3 rounded-full flex-shrink-0"></div>'),mc=g('<span class="text-xs text-warning-500 flex-shrink-0">⚠️</span>'),xc=Dr('<svg class="w-3 h-3 text-[#facc15]" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),gc=g('<span class="text-xs text-charcoal-300">+</span>'),pc=g("<button><!></button>"),bc=Dr('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>'),_c=g('<div class="absolute right-0 top-8 z-50"><!></div>'),yc=g('<div class="relative"><button aria-label="Set priority"> <!></button> <!></div>'),wc=g('<div class="absolute right-0 top-8 z-50"><!></div>'),Sc=g('<div class="relative"><button aria-label="Set coverage status"> </button> <!></div>'),Tc=g("<button> </button>"),kc=g('<button class="flex-shrink-0 px-2 py-1 text-xs font-medium rounded bg-brand-500 text-white hover:bg-brand-600 transition-colors whitespace-nowrap" title="Start keeping score for this match"> </button>'),Mc=g('<!> <div class="flex-shrink-0"><!></div> <!> <!>',1),Cc=g('<div class="hidden lg:block mt-8"><!></div>'),$c=g('<div><div class="lg:hidden"><!></div> <div data-match-card="" role="button" tabindex="0"><div class="flex-shrink-0 w-16"><div class="text-base font-bold text-charcoal-50 leading-tight"> </div> <div class="text-xs text-charcoal-300 leading-tight mt-0.5"> </div></div> <div class="flex-shrink-0 w-28"><div class="text-base font-bold text-[#facc15] leading-tight"> </div></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><!> <div class="text-sm text-charcoal-200 truncate"> </div> <!></div></div> <div class="flex items-center gap-2 flex-shrink-0"><!> <!> <!> <!></div></div> <!></div>'),Ic=g('<div class="space-y-2"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-2"><h3 class="text-base font-bold text-charcoal-50"> </h3> <span class="text-xs text-charcoal-300"> </span></div> <!></div> <div class="space-y-1"></div></div>'),Dc=g('<div class="absolute bottom-full right-0 mb-2 w-64 rounded-lg border border-charcoal-700 bg-charcoal-800 shadow-lg p-2"><div class="px-3 py-2 text-xs text-charcoal-300 border-b border-charcoal-700 mb-2">Score Sharing</div> <button class="w-full px-3 py-2 text-sm text-left text-charcoal-200 hover:bg-charcoal-700 rounded transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Export Scores (JSON)</button> <button class="w-full px-3 py-2 text-sm text-left text-charcoal-200 hover:bg-charcoal-700 rounded transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg> Generate Share Link</button> <div class="border-t border-charcoal-700 my-2"></div> <div class="px-3 py-2 text-xs text-charcoal-300 border-b border-charcoal-700 mb-2">Receive Scores</div> <button class="w-full px-3 py-2 text-sm text-left text-charcoal-200 hover:bg-charcoal-700 rounded transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> Import Scores from JSON</button> <div class="px-3 py-1.5 mt-2 text-[10px] text-charcoal-400 bg-charcoal-700/30 rounded">💡 Scores sync automatically across tabs. To share with others, use Export or Share Link.</div> <div class="border-t border-charcoal-700 my-2"></div> <div class="px-3 py-2 text-xs text-charcoal-300 border-b border-charcoal-700 mb-2">Claim History</div> <button class="w-full px-3 py-2 text-sm text-left text-charcoal-200 hover:bg-charcoal-700 rounded transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> View All Claim History</button></div>'),Ec=g('<div class="px-4 py-2 rounded-lg border border-red-500/50 bg-red-500/10 text-red-400 text-sm"> </div>'),Pc=g('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"><div class="bg-charcoal-800 rounded-lg border border-charcoal-700 p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold text-charcoal-50">Import Scores</h3> <button class="text-charcoal-300 hover:text-charcoal-50 transition-colors" aria-label="Close"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="space-y-4"><div><div class="block text-sm font-medium text-charcoal-200 mb-2">Paste JSON score data:</div> <textarea class="w-full px-3 py-2 text-sm rounded bg-charcoal-700 text-charcoal-50 border border-charcoal-600 focus:border-gold-500 focus:outline-none font-mono" rows="10" placeholder="Paste JSON score data here"></textarea></div> <!> <div class="flex justify-end gap-2"><button class="px-4 py-2 text-sm font-medium rounded bg-charcoal-700 text-charcoal-200 hover:bg-[#525463] transition-colors border border-charcoal-600">Cancel</button> <button class="px-4 py-2 text-sm font-medium rounded bg-gold-500 text-charcoal-950 hover:bg-gold-400 transition-colors">Import</button></div></div></div></div>'),Oc=g('<div class="fixed bottom-4 right-4 z-50"><div class="relative"><button class="px-4 py-2 text-sm font-medium rounded-lg bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 hover:text-charcoal-50 transition-colors shadow-lg flex items-center gap-2 border border-charcoal-600" title="Score sharing &amp; sync options"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Scores</button> <!></div></div> <!>',1),Nc=g('<div><!> <!> <!> <!> <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mb-3 sm:mb-4"><button class="fixed bottom-20 right-4 w-14 h-14 rounded-full bg-brand-500 text-white shadow-lg flex items-center justify-center font-semibold z-[60] sm:hidden hover:bg-brand-600 transition-colors" aria-label="Open filters">Filters <!></button> <div class="hidden sm:flex lg:hidden flex-col sm:flex-row sm:items-center gap-2 sm:gap-4"><div class="flex items-center gap-2"><span class="text-xs text-charcoal-300 uppercase tracking-wider">Sort:</span> <div class="flex gap-1 bg-charcoal-700 rounded-lg p-1"><button>Team</button> <button>Court</button> <button>Time</button></div></div> <div class="flex items-center gap-2"><span class="text-xs text-charcoal-300 uppercase tracking-wider">Wave:</span> <div class="flex gap-1 bg-charcoal-700 rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <!></div> <div class="flex items-center gap-2 sm:hidden"><span class="text-xs text-charcoal-300 uppercase tracking-wider">Sort:</span> <div class="flex gap-1 bg-charcoal-700 rounded-lg p-1"><button>Team</button> <button>Court</button> <button>Time</button></div></div></div> <!> <div data-match-list="" class="space-y-4"><!></div> <!> <!> <!> <!></div>');function Ac(l,o){Ft(o,!1);const a=()=>Zt(Oa,"$filters",d),n=()=>Zt(Pr,"$isSpectator",d),c=()=>Zt(hr,"$isMedia",d),[d,h]=Pa(),y=P(),f=P(),S=P(),p=P(),m=P(),T=P(),E=P(),b=P(),x=P(),_=P(),O=P(),k=P(),D=P();let C=ye(o,"matches",8),G=ye(o,"eventId",8),ce=ye(o,"clubId",8),X=P("team"),se=P(null),oe=P(null),ve=P(null),H=P(null),V=P(!1),L=P(!1),J=P(null),B=P(!1),ee=P(!1),R=P(!1),he=P(void 0),be=P(""),$e=P(null),Q=P(new Set),Te=P(!1);function K(){let F=0;return a().wave!=="all"&&F++,a().division&&F++,a().teams.length>0&&F++,a().priority&&a().priority!=="all"&&F++,a().coverageStatus&&a().coverageStatus!=="all"&&F++,F}let Z=P();Uo(G());function ke(F){return F.InvolvedTeam==="first"?F.SecondTeamText:F.InvolvedTeam==="second"?F.FirstTeamText:`${F.FirstTeamText} vs ${F.SecondTeamText}`}function U(){const F=Rs(G()),ne=new Blob([F],{type:"application/json"}),te=URL.createObjectURL(ne),ie=document.createElement("a");ie.href=te,ie.download=`scores-${G()}-${Date.now()}.json`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),URL.revokeObjectURL(te),v(B,!1)}function le(){const F=Us(G());navigator.clipboard.writeText(F).then(()=>{alert("Score link copied to clipboard! Share this link with others."),v(B,!1)}).catch(()=>{prompt("Copy this link to share scores:",F)})}function me(){try{v($e,null);const F=Ls(e(be));F.success?(alert(`Successfully imported ${F.imported} score(s)!`),v(ee,!1),v(be,""),window.location.reload()):v($e,F.errors.join(", "))}catch(F){v($e,`Failed to import scores: ${F}`)}}Ia(()=>{if(Bs()){const F=Ws();if(F&&F.scores.length>0){const ne=JSON.stringify({eventId:F.eventId,scores:F.scores},null,2);v(be,ne),v(ee,!0)}}if(e(Z).startPolling(),n()){let F=[];if($t.subscribe(ne=>{F=ne.map(te=>te.teamId)})(),F.length>0){const ne=setInterval(()=>{qr.checkUpcomingMatches(C(),F)},6e4);return()=>clearInterval(ne)}}}),Xa(()=>{e(Z).stopPolling()}),de(()=>{},()=>{v(y,K())}),de(()=>(n(),M(G())),()=>{const F=n();v(Z,mr({eventId:G(),userId:F?"spectator":"anonymous"}))}),de(()=>M(C()),()=>{v(f,cr(C()))}),de(()=>(a(),M(C()),lt),()=>{v(S,(()=>{if(a().wave!=="all"){const F=a().wave==="morning"?"08:00":"14:30",ne=a().wave==="morning"?"14:30":"23:59";return qa(C()).filter(te=>C().some(ie=>{const A=lt(ie.ScheduledStartDateTime),I=A.split(" ")[1]||A;return I>=F&&I<ne&&ie.Division.Name===te}))}return qa(C())})())}),de(()=>M(C()),()=>{v(p,fr(C()))}),de(()=>(M(C()),gt),()=>{v(m,(()=>{const F=new Map;return C().forEach(ne=>{const te=nt(ne);te&&F.set(te,gt.getTeamStatus(te))}),F})())}),de(()=>(M(C()),e(f),e(m),nt),()=>{v(T,(()=>{const F=ha(Wt);return to(C(),F,e(f),e(m),nt,{excludeSelected:!0,preferUncovered:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:10})})())}),de(()=>(M(C()),a(),n(),$t),()=>{v(E,(()=>{let F=Lo(C());if(a().priority&&a().priority!=="all"&&(F=F.filter(ne=>_a.getPriority(ne.MatchId)===a().priority)),a().coverageStatus&&a().coverageStatus!=="all"&&(F=F.filter(ne=>{const te=nt(ne);if(!te)return!0;const ie=gt.getTeamStatus(te);return a().coverageStatus==="uncovered"?ie==="not-covered":a().coverageStatus==="covered"?ie==="covered"||ie==="partially-covered":a().coverageStatus==="planned"?ie==="planned":!0})),n()&&a().myTeamsOnly){let ne=[];$t.subscribe(te=>{ne=te.map(ie=>ie.teamId)})(),ne.length>0&&(F=F.filter(te=>{const ie=nt(te);return ie&&ne.includes(ie)}))}return F})())}),de(()=>(M(C()),e(f)),()=>{v(b,(()=>{const F=ha(Wt);return Ro(C(),F,e(f),{excludeSelected:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:50})})())}),de(()=>e(b),()=>{v(x,new Set(e(b).map(F=>F.match.MatchId)))}),de(()=>(M(C()),gt),()=>{v(_,(()=>{const F=new Map;C().forEach(j=>{const Y=nt(j);if(Y){const W=gt.getTeamStatus(Y);F.set(Y,W)}});const ne=F.size,te=Array.from(F.values()).filter(j=>j==="covered").length,ie=Array.from(F.values()).filter(j=>j==="partially-covered").length,A=Array.from(F.values()).filter(j=>j==="planned").length,I=Array.from(F.values()).filter(j=>j==="not-covered").length;return{totalTeams:ne,coveredTeams:te,partiallyCoveredTeams:ie,plannedTeams:A,uncoveredTeams:I,coveragePercentage:ne>0?(te+ie)/ne*100:0}})())}),de(()=>(e(E),e(X),nt),()=>{v(O,(()=>{let F=[...e(E)];return e(X)==="priority"?F.sort((ne,te)=>{const ie=_a.getPriority(ne.MatchId),A=_a.getPriority(te.MatchId),I={"must-cover":3,priority:2,optional:1,null:0},j=I[ie||"null"],Y=I[A||"null"];return j!==Y?Y-j:ne.ScheduledStartDateTime-te.ScheduledStartDateTime}):e(X)==="team"?F.sort((ne,te)=>{const ie=nt(ne),A=nt(te);return ie.localeCompare(A)}):e(X)==="court"?F.sort((ne,te)=>ne.CourtName.localeCompare(te.CourtName)):F.sort((ne,te)=>ne.ScheduledStartDateTime-te.ScheduledStartDateTime),F})())}),de(()=>(e(O),lt),()=>{v(k,(()=>{const F={};return e(O).forEach(ne=>{const te=lt(ne.ScheduledStartDateTime);F[te]||(F[te]=[]),F[te].push(ne)}),F})())}),de(()=>e(k),()=>{v(D,Object.keys(e(k)).sort((F,ne)=>{const te=new Date(`2000-01-01 ${F}`).getTime(),ie=new Date(`2000-01-01 ${ne}`).getTime();return te-ie}))}),de(()=>(n(),M(C()),e(Z),e(Q),e(J)),()=>{if(n()&&C().length>0){const F=new Set;C().forEach(ne=>{e(Z).isClaimOwner(ne.MatchId)&&(F.add(ne.MatchId),!e(Q).has(ne.MatchId)&&(!e(J)||e(J).MatchId!==ne.MatchId)&&setTimeout(()=>{v(J,ne)},200))}),v(Q,F)}}),de(()=>(n(),M(C()),e(Z),qr),()=>{if(n()&&C().length>0){let F=[];$t.subscribe(ne=>{F=ne.map(te=>te.teamId)})(),C().forEach(ne=>{const te=nt(ne);if(te&&F.includes(te)){const ie=e(Z).getScore(ne.MatchId);ie&&ie.status==="in-progress"&&qr.notifyScoreUpdate(ne,ie)}})}}),Bt(),Rt();var z=At(),ge=ct(z);{var fe=F=>{var ne=oc(),te=r(ne,!0);t(ne),N(()=>w(te,(a(),i(()=>a().division||a().wave!=="all"||a().teams.length>0?"No matches found for selected filters":"No matches found")))),u(F,ne)},Ie=F=>{var ne=Nc(),te=r(ne);{var ie=Ue=>{{let Be=_e(()=>n()?"spectator":"anonymous");Ii(Ue,{get matches(){return C()},get eventId(){return G()},get userId(){return e(Be)}})}};$(te,Ue=>{n()&&Ue(ie)})}var A=s(te,2);{var I=Ue=>{var Be=sc(),Ke=r(Be),Ct=r(Ke),De=r(Ct),Ae=r(De);t(De),pa(),t(Ct);var Ce=s(Ct,2),He=r(Ce),Ye=r(He);t(He);var ze=s(He,4),Ze=r(ze);t(ze);var st=s(ze,4),ae=r(st);t(st);var xe=s(st,4),Fe=r(xe);t(xe),t(Ce),t(Ke);var Ge=s(Ke,2);{var Re=ue=>{var Ne=nc(),Pe=r(Ne);Pe.__click=()=>v(V,!e(V));var ot=r(Pe,!0);t(Pe),t(Ne),N(()=>{Se(Pe,1,`w-full px-4 py-3 text-sm font-medium rounded-lg transition-colors min-h-[44px] ${e(V)?"bg-gold-500 text-charcoal-950":"bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 border border-charcoal-600"}`),w(ot,e(V)?"👁️ Scanning":"Scanning Mode")}),u(ue,Ne)};$(Ge,ue=>{c()&&ue(Re)})}t(Be),N(ue=>{w(Ae,`${ue??""}%`),w(Ye,`✓ ${e(_),i(()=>e(_).coveredTeams)??""}`),w(Ze,`◐ ${e(_),i(()=>e(_).partiallyCoveredTeams)??""}`),w(ae,`📋 ${e(_),i(()=>e(_).plannedTeams)??""}`),w(Fe,`○ ${e(_),i(()=>e(_).uncoveredTeams)??""}`)},[()=>(e(_),i(()=>e(_).coveragePercentage.toFixed(0)))]),u(Ue,Be)};$(A,Ue=>{c(),e(_),i(()=>c()&&e(_).totalTeams>0)&&Ue(I)})}var j=s(A,2);{var Y=Ue=>{var Be=ic(),Ke=r(Be),Ct=s(r(Ke),2);Ct.__click=()=>v(L,!1),t(Ke);var De=s(Ke,2);tt(De,5,()=>(e(T),i(()=>e(T).slice(0,5))),at,(Ae,Ce)=>{var He=lc(),Ye=r(He),ze=r(Ye),Ze=r(ze);t(ze);var st=s(ze,2),ae=r(st,!0);t(st),t(Ye);var xe=s(Ye,2);xe.__click=Fe=>{Fe.stopPropagation(),Wt.selectMatch(e(Ce).match.MatchId)},t(He),N(Fe=>{w(Ze,`${Fe??""} - ${e(Ce),i(()=>e(Ce).match.CourtName)??""} - Team ${e(Ce),i(()=>e(Ce).teamId)??""}`),w(ae,(e(Ce),i(()=>e(Ce).reason)))},[()=>(M(lt),e(Ce),i(()=>lt(e(Ce).match.ScheduledStartDateTime)))]),u(Ae,He)}),t(De),t(Be),u(Ue,Be)};$(j,Ue=>{c(),e(L),e(T),i(()=>c()&&e(L)&&e(T).length>0)&&Ue(Y)})}var W=s(j,2);{var q=Ue=>{var Be=cc();u(Ue,Be)};$(W,Ue=>{c()&&Ue(q)})}var re=s(W,2),pe=r(re);pe.__click=()=>v(Te,!0);var Ee=s(r(pe));{var We=Ue=>{var Be=dc(),Ke=r(Be,!0);t(Be),N(()=>w(Ke,e(y))),u(Ue,Be)};$(Ee,Ue=>{e(y)>0&&Ue(We)})}t(pe);var Ve=s(pe,2),Qe=r(Ve),we=s(r(Qe),2),Me=r(we);Me.__click=()=>v(X,"team");var je=s(Me,2);je.__click=()=>v(X,"court");var qe=s(je,2);qe.__click=()=>v(X,"time"),t(we),t(Qe);var pt=s(Qe,2),Xe=s(r(pt),2),Je=r(Xe);Je.__click=()=>Et("wave","all");var dt=s(Je,2);dt.__click=()=>Et("wave","morning");var Mt=s(dt,2);Mt.__click=()=>Et("wave","afternoon"),t(Xe),t(pt);var it=s(pt,2);{var vt=Ue=>{var Be=vc(),Ke=r(Be);Ti(Ke,{get matches(){return C()}}),t(Be),u(Ue,Be)};$(it,Ue=>{n()&&Ue(vt)})}t(Ve);var Oe=s(Ve,2),et=s(r(Oe),2),ft=r(et);ft.__click=()=>v(X,"team");var mt=s(ft,2);mt.__click=()=>v(X,"court");var bt=s(mt,2);bt.__click=()=>v(X,"time"),t(et),t(Oe),t(re);var rt=s(re,2);Ho(rt,{get divisions(){return e(S)},get teams(){return e(p)},get open(){return e(Te)},onClose:()=>v(Te,!1)});var ut=s(rt,2),Lt=r(ut);{var Vt=Ue=>{var Be=uc();u(Ue,Be)},ta=Ue=>{var Be=At(),Ke=ct(Be);tt(Ke,1,()=>e(D),at,(Ct,De)=>{const Ae=_e(()=>(e(k),e(De),i(()=>e(k)[e(De)]))),Ce=_e(()=>(M(e(Ae)),e(f),i(()=>e(Ae).filter(Ne=>e(f).has(Ne.MatchId)).length))),He=_e(()=>e(Ce)>0);var Ye=Ic(),ze=r(Ye),Ze=r(ze),st=r(Ze),ae=r(st,!0);t(st);var xe=s(st,2),Fe=r(xe);t(xe),t(Ze);var Ge=s(Ze,2);{var Re=Ne=>{var Pe=hc(),ot=r(Pe);t(Pe),N(()=>w(ot,`${e(Ce)??""} conflict${e(Ce)!==1?"s":""}`)),u(Ne,Pe)};$(Ge,Ne=>{e(He)&&Ne(Re)})}t(ze);var ue=s(ze,2);tt(ue,5,()=>e(Ae),at,(Ne,Pe)=>{const ot=_e(()=>(e(f),e(Pe),i(()=>e(f).has(e(Pe).MatchId)))),Le=_e(()=>(M(nt),e(Pe),i(()=>nt(e(Pe))))),yt=_e(()=>(e(Pe),i(()=>ke(e(Pe))))),Qt=_e(()=>(e(se),e(Pe),i(()=>e(se)===e(Pe).MatchId))),Pt=_e(()=>(M(_a),e(Pe),i(()=>_a.getPriority(e(Pe).MatchId)))),_t=_e(()=>(M(e(Le)),M(gt),i(()=>e(Le)?gt.getTeamStatus(e(Le)):"not-covered"))),ba=_e(()=>e(_t)==="covered"||e(_t)==="partially-covered"),Yt=_e(()=>e(V)&&e(ba)),Ca=_e(()=>(M(ha),M(Wt),i(()=>ha(Wt)))),zt=_e(()=>(M(e(Ca)),e(Pe),i(()=>e(Ca).has(e(Pe).MatchId))));var la=$c(),va=r(la),ya=r(va);{let wt=_e(()=>c()?ht=>Wt.toggleMatch(ht.MatchId):null);rc(ya,{get match(){return e(Pe)},get hasConflict(){return e(ot)},get conflicts(){return e(f)},get scanningMode(){return e(V)},onTap:ht=>v(oe,ht),get onSwipeRight(){return e(wt)},onSwipeLeft:null})}t(va);var xa=s(va,2);xa.__click=()=>v(se,e(Qt)?null:e(Pe).MatchId),xa.__keydown=wt=>{(wt.key==="Enter"||wt.key===" ")&&v(se,e(Qt)?null:e(Pe).MatchId)};var Da=r(xa),Na=r(Da),Nr=r(Na,!0);t(Na);var wa=s(Na,2),xr=r(wa,!0);t(wa),t(Da);var Qa=s(Da,2),Ka=r(Qa),Ar=r(Ka,!0);t(Ka),t(Qa);var Ya=s(Qa,2),gr=r(Ya),Sa=r(gr);{var Fr=wt=>{const ht=_e(()=>(M($t),M(e(Le)),i(()=>$t.getTeamColor(e(Le)))));var Dt=At(),qt=ct(Dt);{var ia=Gt=>{var na=fc();N(()=>{ea(na,`background-color: ${e(ht)??""};`),Tt(na,"title",`${e(Le)??""} (followed)`)}),u(Gt,na)};$(qt,Gt=>{e(ht)&&Gt(ia)})}u(wt,Dt)};$(Sa,wt=>{n()&&e(Le)&&wt(Fr)})}var Ua=s(Sa,2),jr=r(Ua);t(Ua);var Za=s(Ua,2);{var Rr=wt=>{var ht=mc();u(wt,ht)};$(Za,wt=>{e(ot)&&wt(Rr)})}t(gr),t(Ya);var er=s(Ya,2),pr=r(er);{var br=wt=>{var ht=pc();ht.__click=Gt=>{Gt.stopPropagation(),Wt.toggleMatch(e(Pe).MatchId)};var Dt=r(ht);{var qt=Gt=>{var na=xc();u(Gt,na)},ia=Gt=>{var na=gc();u(Gt,na)};$(Dt,Gt=>{e(zt)?Gt(qt):Gt(ia,!1)})}t(ht),N(()=>{Se(ht,1,`flex-shrink-0 w-5 h-5 rounded border-2 ${e(zt)?"border-gold-500 bg-gold-500/20":"border-charcoal-600 bg-transparent"} flex items-center justify-center hover:bg-charcoal-700 transition-colors`),Tt(ht,"aria-label",e(zt)?"Remove from plan":"Add to plan")}),u(wt,ht)};$(pr,wt=>{c()&&wt(br)})}var _r=s(pr,2);{var Lr=wt=>{var ht=yc(),Dt=r(ht);Dt.__click=ca=>{ca.stopPropagation(),v(ve,e(ve)===e(Pe).MatchId?null:e(Pe).MatchId)};var qt=r(Dt),ia=s(qt);{var Gt=ca=>{var $a=bc();u(ca,$a)};$(ia,ca=>{e(Pt)||ca(Gt)})}t(Dt);var na=s(Dt,2);{var Ta=ca=>{var $a=_c(),tr=r($a);Wo(tr,{get matchId(){return e(Pe),i(()=>e(Pe).MatchId)},get currentPriority(){return e(Pt)},get onPriorityChange(){return M(_a),i(()=>_a.setPriority)},onClose:()=>v(ve,null)}),t($a),u(ca,$a)};$(na,ca=>{e(ve),e(Pe),i(()=>e(ve)===e(Pe).MatchId)&&ca(Ta)})}t(ht),N(()=>{Se(Dt,1,`flex-shrink-0 w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-charcoal-700 ${e(Pt)==="must-cover"?"text-gold-500":e(Pt)==="priority"?"text-[#f59e0b]":e(Pt)==="optional"?"text-charcoal-300":"text-charcoal-400"}`),Tt(Dt,"title",e(Pt)?`Priority: ${e(Pt)}`:"Set priority"),w(qt,`${e(Pt)==="must-cover"&&"⭐"}
													${e(Pt)==="priority"&&"🔸"}
													${e(Pt)==="optional"&&"○"} `)}),u(wt,ht)};$(_r,wt=>{c()&&wt(Lr)})}var yr=s(_r,2);{var xt=wt=>{var ht=Sc(),Dt=r(ht);Dt.__click=na=>{na.stopPropagation(),v(H,e(H)===e(Le)?null:e(Le))};var qt=r(Dt);t(Dt);var ia=s(Dt,2);{var Gt=na=>{var Ta=wc(),ca=r(Ta);io(ca,{get teamId(){return e(Le)},get currentStatus(){return e(_t)},get onStatusChange(){return M(gt),i(()=>gt.setTeamStatus)},onClose:()=>v(H,null)}),t(Ta),u(na,Ta)};$(ia,na=>{e(H)===e(Le)&&na(Gt)})}t(ht),N(()=>{Se(Dt,1,`flex-shrink-0 w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-charcoal-700 ${e(_t)==="covered"?"text-green-500":e(_t)==="partially-covered"?"text-[#f59e0b]":e(_t)==="planned"?"text-gold-500":"text-charcoal-400"}`),Tt(Dt,"title",`Coverage: ${e(_t)??""}`),w(qt,`${e(_t)==="covered"&&"✓"}
													${e(_t)==="partially-covered"&&"◐"}
													${e(_t)==="planned"&&"📋"}
													${e(_t)==="not-covered"&&"○"}`)}),u(wt,ht)};$(yr,wt=>{c()&&e(Le)&&wt(xt)})}var Ot=s(yr,2);{var ra=wt=>{const ht=_e(()=>(e(Z),e(Pe),i(()=>e(Z).getScore(e(Pe).MatchId)))),Dt=_e(()=>(e(Z),e(Pe),i(()=>e(Z).getClaimStatus(e(Pe).MatchId)))),qt=_e(()=>(e(Z),e(Pe),i(()=>e(Z).isClaimOwner(e(Pe).MatchId))));var ia=Mc(),Gt=ct(ia);{var na=da=>{var ua=Tc();ua.__click=rr=>{rr.stopPropagation(),$t.isFollowing(e(Le))?$t.unfollowTeam(e(Le)):$t.followTeam(e(Le),e(Le))};var ar=r(ua,!0);t(ua),N((rr,Vo,Jo)=>{Se(ua,1,`flex-shrink-0 px-2 py-1 text-xs font-medium rounded transition-colors ${rr??""}`),Tt(ua,"title",Vo),w(ar,Jo)},[()=>(M($t),M(e(Le)),i(()=>$t.isFollowing(e(Le))?"bg-gold-500 text-charcoal-950":"bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 border border-charcoal-600")),()=>(M($t),M(e(Le)),i(()=>$t.isFollowing(e(Le))?"Unfollow team":"Follow team")),()=>(M($t),M(e(Le)),i(()=>$t.isFollowing(e(Le))?"✓":"+"))]),u(da,ua)};$(Gt,da=>{e(Le)&&da(na)})}var Ta=s(Gt,2),ca=r(Ta);Ql(ca,{get match(){return e(Pe)},get eventId(){return G()},onClaim:da=>{const ua=C().find(ar=>ar.MatchId===da);ua&&setTimeout(()=>{v(J,ua)},300)},onRelease:()=>{v(J,null)}}),t(Ta);var $a=s(Ta,2);{var tr=da=>{var ua=kc();ua.__click=rr=>{rr.stopPropagation(),v(J,e(Pe))};var ar=r(ua,!0);t(ua),N(()=>w(ar,e(ht)?"Update Score":"Start Scoring")),u(da,ua)};$($a,da=>{e(Dt)==="claimed"&&e(qt)&&da(tr)})}var Ur=s($a,2);{var sa=da=>{co(da,{get match(){return e(Pe)},get matchClaiming(){return e(Z)}})};$(Ur,da=>{M(e(ht)),i(()=>e(ht)&&e(ht).status!=="not-started")&&da(sa)})}u(wt,ia)};$(Ot,wt=>{n()&&wt(ra)})}t(er),t(xa);var Aa=s(xa,2);{var Wa=wt=>{var ht=Cc(),Dt=r(ht);lo(Dt,{get match(){return e(Pe)},get eventId(){return G()},get clubId(){return ce()},onClose:()=>v(se,null),get matches(){return C()}}),t(ht),u(wt,ht)};$(Aa,wt=>{M(e(Qt)),e(se),e(Pe),i(()=>e(Qt)&&e(se)===e(Pe).MatchId)&&wt(Wa)})}t(la),N(()=>{Se(xa,1,`hidden lg:flex lg:items-center lg:gap-4 lg:py-2 lg:px-3 lg:border-b lg:border-charcoal-700 hover:bg-[#2a2a2f]/50 transition-colors cursor-pointer ${e(Yt)?"opacity-30":""}`),w(Nr,(M(e(Le)),e(Pe),i(()=>e(Le)||e(Pe).Division.CodeAlias))),w(xr,(e(Pe),i(()=>e(Pe).Division.CodeAlias))),w(Ar,(e(Pe),i(()=>e(Pe).CourtName))),w(jr,`vs ${e(yt)??""}`)}),u(Ne,la)}),t(ue),t(Ye),N(()=>{w(ae,e(De)),w(Fe,`${M(e(Ae)),i(()=>e(Ae).length)??""} match${M(e(Ae)),i(()=>e(Ae).length!==1?"es":"")??""}`)}),u(Ct,Ye)}),u(Ue,Be)};$(Lt,Ue=>{e(D),i(()=>e(D).length===0)?Ue(Vt):Ue(ta,!1)})}t(ut);var Jt=s(ut,2);Bl(Jt,{get match(){return e(oe)},get eventId(){return G()},get clubId(){return ce()},get matches(){return C()},onClose:()=>v(oe,null)});var Xt=s(Jt,2);{var It=Ue=>{{let Be=_e(()=>(e(Z),e(J),i(()=>e(Z).getScore(e(J).MatchId))));Bo(Ue,{get matchId(){return e(J),i(()=>e(J).MatchId)},get team1Name(){return e(J),i(()=>e(J).FirstTeamText)},get team2Name(){return e(J),i(()=>e(J).SecondTeamText)},get currentScore(){return e(Be)},onScoreUpdate:(Ke,Ct)=>{e(Z).updateScore(e(J).MatchId,Ke,Ct)},onClose:()=>v(J,null)})}};$(Xt,Ue=>{e(J),e(Z),i(()=>e(J)&&e(Z).isClaimOwner(e(J).MatchId))&&Ue(It)})}var St=s(Xt,2);{var kt=Ue=>{Fi(Ue,{get matchId(){return e(he)},get eventId(){return G()},get matches(){return C()},onClose:()=>{v(R,!1),v(he,void 0)}})};$(St,Ue=>{e(R)&&Ue(kt)})}var oa=s(St,2);{var aa=Ue=>{var Be=Oc(),Ke=ct(Be),Ct=r(Ke),De=r(Ct);De.__click=()=>v(B,!e(B));var Ae=s(De,2);{var Ce=ze=>{var Ze=Dc(),st=s(r(Ze),2);st.__click=U;var ae=s(st,2);ae.__click=le;var xe=s(ae,6);xe.__click=()=>{v(ee,!0),v(B,!1)};var Fe=s(xe,8);Fe.__click=()=>{v(R,!0),v(he,void 0),v(B,!1)},t(Ze),u(ze,Ze)};$(Ae,ze=>{e(B)&&ze(Ce)})}t(Ct),t(Ke);var He=s(Ke,2);{var Ye=ze=>{var Ze=Pc(),st=r(Ze),ae=r(st),xe=s(r(ae),2);xe.__click=()=>{v(ee,!1),v(be,""),v($e,null)},t(ae);var Fe=s(ae,2),Ge=r(Fe),Re=s(r(Ge),2);za(Re),t(Ge);var ue=s(Ge,2);{var Ne=yt=>{var Qt=Ec(),Pt=r(Qt,!0);t(Qt),N(()=>w(Pt,e($e))),u(yt,Qt)};$(ue,yt=>{e($e)&&yt(Ne)})}var Pe=s(ue,2),ot=r(Pe);ot.__click=()=>{v(ee,!1),v(be,""),v($e,null)};var Le=s(ot,2);Le.__click=me,t(Pe),t(Fe),t(st),t(Ze),ka(Re,()=>e(be),yt=>v(be,yt)),u(ze,Ze)};$(He,ze=>{e(ee)&&ze(Ye)})}u(Ue,Be)};$(oa,Ue=>{n()&&Ue(aa)})}t(ne),N(()=>{Se(Me,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(X)==="team"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`),Se(je,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(X)==="court"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`),Se(qe,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(X)==="time"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`),Se(Je,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),i(()=>a().wave==="all"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50")??""}`),Se(dt,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),i(()=>a().wave==="morning"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50")??""}`),Se(Mt,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),i(()=>a().wave==="afternoon"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50")??""}`),Se(ft,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(X)==="team"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`),Se(mt,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(X)==="court"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`),Se(bt,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(X)==="time"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`)}),u(F,ne)};$(ge,F=>{e(E),i(()=>e(E).length===0)?F(fe):F(Ie,!1)})}u(l,z),jt(),h()}Ht(["click","keydown"]);var Fc=g('<button title="Previous conflict">← Prev</button>'),jc=g('<button title="Next conflict">Next →</button>'),Rc=g('<span class="ml-2 text-green-400">✓ All resolved!</span>'),Lc=g('<div class="text-xs text-charcoal-300"> <!></div>'),Uc=g('<div class="flex items-center justify-between mb-3 pb-3 border-b border-charcoal-700"><div class="flex items-center gap-2"><!> <span class="text-xs text-charcoal-300"> </span> <!></div> <!></div>'),Wc=g('<div class="text-xs text-charcoal-400 py-4 text-center">No conflicts found</div>'),Bc=g('<span class="text-charcoal-300">•</span> <span class="text-charcoal-400"> </span>',1),Hc=g('<div class="px-3 py-2.5 rounded border border-charcoal-600 bg-charcoal-700/30"><div class="flex items-center gap-2 mb-1"><span class="text-sm font-bold text-charcoal-50"> </span> <span class="text-xs text-charcoal-400">vs</span> <span class="text-sm text-charcoal-200 truncate"> </span></div> <div class="flex items-center gap-3 mt-1 text-xs flex-wrap"><span class="text-[#facc15] font-medium"> </span> <span class="text-charcoal-300"> </span> <span class="text-charcoal-300">•</span> <span class="text-charcoal-300"> </span> <!></div></div>'),Yc=g('<div class="space-y-2"></div>'),Vc=g(`<div class="mt-2 border border-charcoal-700 rounded-lg bg-charcoal-800 overflow-hidden"><div class="p-3 sm:p-4"><div class="flex items-center justify-between mb-3 sm:mb-4"><h4 class="text-xs sm:text-sm font-semibold text-charcoal-50 truncate pr-2">Conflict Details</h4> <button class="text-charcoal-300 hover:text-charcoal-50 transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!> <div class="mb-4 pb-4 border-b border-charcoal-700"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-2">Selected Match</div> <div class="px-3 py-2 rounded border border-gold-500/50 bg-gold-500/5"><div class="flex items-center gap-2 mb-1"><span class="text-sm font-bold text-[#facc15]"> </span> <span class="text-xs text-charcoal-400">vs</span> <span class="text-sm text-charcoal-200 truncate"> </span></div> <div class="flex items-center gap-3 mt-1 text-xs"><span class="text-[#facc15] font-medium"> </span> <span class="text-charcoal-300"> </span> <span class="text-charcoal-300">•</span> <span class="text-charcoal-300"> </span></div></div></div> <div><div class="flex items-center justify-between mb-2"><div class="text-xs text-charcoal-300 uppercase tracking-wider"> </div> <span class="text-xs text-red-400 font-medium">Cannot cover simultaneously</span></div> <!></div> <div class="mt-4 pt-4 border-t border-charcoal-700"><p class="text-xs text-charcoal-400">These matches overlap in time and are on different courts. You'll need to choose which match to cover.</p></div></div></div>`);function Jc(l,o){Ft(o,!1);const a=P();let n=ye(o,"match",8),c=ye(o,"conflictingMatches",8),d=ye(o,"onClose",8),h=ye(o,"onNextConflict",8,void 0),y=ye(o,"onPreviousConflict",8,void 0),f=ye(o,"currentIndex",8,void 0),S=ye(o,"totalConflicts",8,void 0),p=ye(o,"conflictProgress",8,void 0);function m(U){return U.InvolvedTeam==="first"?U.SecondTeamText:U.InvolvedTeam==="second"?U.FirstTeamText:`${U.FirstTeamText} vs ${U.SecondTeamText}`}function T(U,le){return U!==le?5:0}const E=nt(n()),b=m(n());de(()=>M(c()),()=>{v(a,[...c()].sort((U,le)=>U.ScheduledStartDateTime-le.ScheduledStartDateTime))}),Bt(),Rt();var x=Vc(),_=r(x),O=r(_),k=s(r(O),2);k.__click=function(...U){var le;(le=d())==null||le.apply(this,U)},t(O);var D=s(O,2);{var C=U=>{var le=Uc(),me=r(le),z=r(me);{var ge=A=>{var I=Fc();I.__click=function(...j){var Y;(Y=y())==null||Y.apply(this,j)},N(()=>{I.disabled=f()===0,Se(I,1,`px-2 py-1 text-xs font-medium rounded transition-colors ${f()===0?"bg-charcoal-700 text-charcoal-400 cursor-not-allowed":"bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 border border-charcoal-600"}`)}),u(A,I)};$(z,A=>{y()&&A(ge)})}var fe=s(z,2),Ie=r(fe);t(fe);var F=s(fe,2);{var ne=A=>{var I=jc();I.__click=function(...j){var Y;(Y=h())==null||Y.apply(this,j)},N(()=>{I.disabled=f()===S()-1,Se(I,1,`px-2 py-1 text-xs font-medium rounded transition-colors ${f()===S()-1?"bg-charcoal-700 text-charcoal-400 cursor-not-allowed":"bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 border border-charcoal-600"}`)}),u(A,I)};$(F,A=>{h()&&A(ne)})}t(me);var te=s(me,2);{var ie=A=>{var I=Lc(),j=r(I),Y=s(j);{var W=q=>{var re=Rc();u(q,re)};$(Y,q=>{M(p()),i(()=>p().remaining===0)&&q(W)})}t(I),N(()=>w(j,`${M(p()),i(()=>p().resolved)??""}/${M(p()),i(()=>p().total)??""} resolved `)),u(A,I)};$(te,A=>{p()&&A(ie)})}t(le),N(()=>w(Ie,`Conflict ${f()+1} of ${S()??""}`)),u(U,le)};$(D,U=>{f()!==void 0&&S()!==void 0&&S()>1&&U(C)})}var G=s(D,2),ce=s(r(G),2),X=r(ce),se=r(X),oe=r(se,!0);t(se);var ve=s(se,4),H=r(ve,!0);t(ve),t(X);var V=s(X,2),L=r(V),J=r(L,!0);t(L);var B=s(L,2),ee=r(B,!0);t(B);var R=s(B,4),he=r(R,!0);t(R),t(V),t(ce),t(G);var be=s(G,2),$e=r(be),Q=r($e),Te=r(Q);t(Q),pa(2),t($e);var K=s($e,2);{var Z=U=>{var le=Wc();u(U,le)},ke=U=>{var le=Yc();tt(le,5,()=>e(a),at,(me,z)=>{const ge=_e(()=>(M(nt),e(z),i(()=>nt(e(z))))),fe=_e(()=>(e(z),i(()=>m(e(z))))),Ie=_e(()=>(M(n()),e(z),i(()=>T(n().CourtName,e(z).CourtName))));var F=Hc(),ne=r(F),te=r(ne),ie=r(te,!0);t(te);var A=s(te,4),I=r(A,!0);t(A),t(ne);var j=s(ne,2),Y=r(j),W=r(Y,!0);t(Y);var q=s(Y,2),re=r(q,!0);t(q);var pe=s(q,4),Ee=r(pe,!0);t(pe);var We=s(pe,2);{var Ve=Qe=>{var we=Bc(),Me=s(ct(we),2),je=r(Me);t(Me),N(()=>w(je,`~${e(Ie)??""} min travel from ${M(n()),i(()=>n().CourtName)??""}`)),u(Qe,we)};$(We,Qe=>{e(Ie)>0&&Qe(Ve)})}t(j),t(F),N(Qe=>{w(ie,(M(e(ge)),e(z),i(()=>e(ge)||e(z).Division.CodeAlias))),w(I,e(fe)),w(W,(e(z),i(()=>e(z).CourtName))),w(re,Qe),w(Ee,(e(z),i(()=>e(z).Division.CodeAlias)))},[()=>(M(lt),e(z),i(()=>lt(e(z).ScheduledStartDateTime)))]),u(me,F)}),t(le),u(U,le)};$(K,U=>{e(a),i(()=>e(a).length===0)?U(Z):U(ke,!1)})}t(be),pa(2),t(_),t(x),N(U=>{w(oe,(M(n()),i(()=>E||n().Division.CodeAlias))),w(H,b),w(J,(M(n()),i(()=>n().CourtName))),w(ee,U),w(he,(M(n()),i(()=>n().Division.CodeAlias))),w(Te,`Conflicting Matches (${M(c()),i(()=>c().length)??""})`)},[()=>(M(lt),M(n()),i(()=>lt(n().ScheduledStartDateTime)))]),u(l,x),jt()}Ht(["click"]);var zc=g('<div class="text-center py-12 text-charcoal-300 text-sm"> </div>'),Gc=g("<option> </option>"),qc=g('<div class="flex items-center gap-2"><span class="text-xs text-charcoal-300 uppercase tracking-wider">Division:</span> <select class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 border border-charcoal-600 focus:border-gold-500 focus:outline-none min-h-[44px] sm:min-h-0"><option> </option><!></select></div>'),Xc=g("<option> </option>"),Qc=g('<div class="flex items-center gap-2"><span class="text-xs text-charcoal-300 uppercase tracking-wider">Team:</span> <select multiple class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 border border-charcoal-600 focus:border-gold-500 focus:outline-none min-h-[44px] sm:min-h-0 min-w-[120px]"></select></div>'),Kc=g('<div class="flex items-center gap-2"><span class="text-xs text-charcoal-300 uppercase tracking-wider">Priority:</span> <select class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 border border-charcoal-600 focus:border-gold-500 focus:outline-none min-h-[44px] sm:min-h-0"><option>All Priorities</option><option>Must Cover</option><option>Priority</option><option>Optional</option></select></div>'),Zc=g('<div class="flex items-center gap-2"><button title="Highlight all time gaps"> </button> <button title="Show only matches with gaps"> </button></div>'),ed=g('<button class="px-3 py-2 sm:py-1 text-xs font-medium rounded-lg transition-colors text-charcoal-300 hover:text-charcoal-50 hover:bg-charcoal-700 border border-charcoal-600 min-h-[44px] sm:min-h-0">Clear</button>'),td=g('<button type="button"> </button>'),ad=g('<div class="flex items-center gap-2 overflow-x-auto scrollbar-hide pb-2 lg:hidden svelte-vnglym"></div>'),rd=g('<span class="ml-2 text-gold-400"> </span>'),od=g('<span class="ml-2"> </span>'),nd=g('<span class="ml-2 text-xs"> </span>'),sd=g('<div class="flex items-center gap-2"><span class="text-xs text-charcoal-300">Showing:</span> <span class="px-2 py-1 text-xs font-semibold rounded bg-gold-500/20 text-[#facc15] border border-gold-500/50"> </span> <button type="button" class="text-xs text-charcoal-300 hover:text-charcoal-50 transition-colors min-h-[44px] sm:min-h-0" aria-label="Clear highlight">✕</button></div>'),ld=g('<button type="button"> </button>'),id=g('<div class="hidden lg:flex items-center gap-2 mb-4"><span class="text-xs text-charcoal-300 uppercase tracking-wider">Day:</span> <div class="flex gap-2"></div></div>'),cd=g("<div> </div>"),dd=g("<div><!></div>"),vd=g('<div class="absolute top-0 left-0 text-[10px]"> </div>'),ud=g('<div class="absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full border border-white" title="Easy coverage opportunity"></div>'),hd=g('<div class="absolute top-0 right-0 w-4 h-4 flex items-center justify-center"><svg class="w-3 h-3 text-[#facc15]" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),fd=g('<div class="text-[8px] text-charcoal-300"> </div>'),md=g('<div class="flex items-center gap-1 mt-0.5"><!> <div class="text-[9px] font-semibold text-white"> </div> <!></div>'),xd=Dr('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>'),gd=g('<div class="absolute left-full top-0 ml-2 z-50"><!></div>'),pd=g('<div class="relative"><button aria-label="Set priority"> <!></button> <!></div>'),bd=g('<div class="absolute left-full top-0 ml-2 z-50"><!></div>'),_d=g('<div class="relative"><button aria-label="Set coverage status"> </button> <!></div>'),yd=g('<div role="button" tabindex="0"><!> <!> <!> <div> </div> <div class="text-[9px] sm:text-[10px] opacity-90 truncate mt-0.5 leading-tight"> </div> <div class="text-[9px] sm:text-[10px] opacity-75 mt-0.5"> </div> <!> <!> <!></div>'),wd=g('<div class="border-b border-charcoal-700 pb-4 last:border-b-0 last:pb-0 min-w-[calc(100vw-2rem)] lg:min-w-0" style="scroll-snap-align: start;"><div class="flex items-center justify-between mb-2"><div class="text-base font-semibold text-charcoal-50"> </div> <div class="text-xs text-charcoal-400"> </div></div> <div class="relative h-20 sm:h-20 rounded-lg border overflow-hidden bg-charcoal-800 border-charcoal-700"><!> <!></div></div>'),Sd=g('<div class="fixed inset-0 z-40" role="button" tabindex="-1"></div>'),Td=g('<div class="fixed inset-0 z-40" role="button" tabindex="-1"></div>'),kd=g('<div data-timeline="" class="space-y-4"><div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4"><div class="flex items-center gap-2"><span class="text-xs text-charcoal-300 uppercase tracking-wider">Wave:</span> <div class="flex gap-1 bg-charcoal-700 rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <!> <!> <!> <!> <!></div> <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4"><!> <div class="flex items-center justify-between"><div class="text-xs text-charcoal-300"> <!> <!> <!></div> <!></div></div> <!> <div class="overflow-x-auto -mx-3 sm:mx-0 px-3 sm:px-0 scrollbar-hide svelte-vnglym" style="scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch;"><div class="space-y-4 min-w-max lg:min-w-0"></div></div> <!> <!> <!> <!></div>');function Md(l,o){Ft(o,!1);const a=()=>Zt(Pr,"$isSpectator",d),n=()=>Zt(Oa,"$filters",d),c=()=>Zt(hr,"$isMedia",d),[d,h]=Pa(),y=P(),f=P(),S=P(),p=P(),m=P(),T=P(),E=P(),b=P(),x=P(),_=P(),O=P(),k=P(),D=P(),C=P(),G=P(),ce=P(),X=P(),se=P(),oe=P(),ve=P(),H=P(),V=P();let L=ye(o,"matches",8),J=ye(o,"eventId",8),B=P(null),ee=P(null),R=P(null),he=P(null),be=P(null),$e=P(!1),Q=P(!1),Te=P(null),K=P(),Z=P();function ke(A){return A.InvolvedTeam==="first"?A.SecondTeamText:A.InvolvedTeam==="second"?A.FirstTeamText:`${A.FirstTeamText} vs ${A.SecondTeamText}`}function U(A){return e(ce)===0?0:(A-e(C))/e(ce)*100}function le(A,I){return e(ce)===0?0:(I-A)/e(ce)*100}function me(){e(V)>=0&&e(V)<e(oe).length-1&&v(B,e(oe)[e(V)+1])}function z(){e(V)>0&&v(B,e(oe)[e(V)-1])}function ge(A){const I=[],j=[...A].sort((Y,W)=>Y.ScheduledStartDateTime-W.ScheduledStartDateTime);for(let Y=0;Y<j.length-1;Y++){const W=j[Y],q=j[Y+1],re=Math.floor((q.ScheduledStartDateTime-W.ScheduledEndDateTime)/6e4);re>0&&I.push({before:W,after:q,gapMinutes:re})}return I}function fe(A){e(b).has(A.MatchId)?v(B,A):c()?Wt.toggleMatch(A.MatchId):v(B,A)}function Ie(A,I){I.stopPropagation(),v(ee,e(ee)===A?null:A)}de(()=>(M(L()),n(),gt),()=>{v(O,(()=>{let A=Lo(L());return n().priority&&n().priority!=="all"&&(A=A.filter(I=>_a.getPriority(I.MatchId)===n().priority)),n().coverageStatus&&n().coverageStatus!=="all"&&(A=A.filter(I=>{const j=nt(I);if(!j)return!0;const Y=gt.getTeamStatus(j);return n().coverageStatus==="uncovered"?Y==="not-covered":n().coverageStatus==="covered"?Y==="covered"||Y==="partially-covered":n().coverageStatus==="planned"?Y==="planned":!0})),A})())}),de(()=>e(O),()=>{v(y,(()=>{const A=new Set,I={};return e(O).forEach(j=>{I[j.CourtName]||(I[j.CourtName]=[]),I[j.CourtName].push(j)}),Object.values(I).forEach(j=>{ge(j).forEach(W=>{A.add(W.before.MatchId),A.add(W.after.MatchId)})}),A})())}),de(()=>(e(Q),e(O),e(y)),()=>{v(f,e(Q)?e(O).filter(A=>e(y).has(A.MatchId)):e(O))}),de(()=>(e(f),Kt),()=>{v(S,(()=>{const A={};return e(f).forEach(I=>{const j=Kt(I.ScheduledStartDateTime);A[j]||(A[j]=[]),A[j].push(I)}),A})())}),de(()=>e(S),()=>{v(p,Object.keys(e(S)).sort())}),de(()=>(e(p),e(Te)),()=>{e(p).length>0&&!e(Te)&&v(Te,e(p)[0])}),de(()=>(e(Te),e(S),e(f)),()=>{v(m,e(Te)?e(S)[e(Te)]||[]:e(f))}),de(()=>e(m),()=>{v(T,(()=>{const A={};return e(m).forEach(I=>{A[I.CourtName]||(A[I.CourtName]=[]),A[I.CourtName].push(I)}),A})())}),de(()=>e(T),()=>{v(E,Object.keys(e(T)).sort())}),de(()=>(a(),M(J())),()=>{const A=a();v(Z,mr({eventId:J(),userId:A?"spectator":"anonymous"}))}),de(()=>M(L()),()=>{v(b,cr(L()))}),de(()=>(n(),M(L()),lt),()=>{v(x,(()=>{if(n().wave!=="all"){const A=n().wave==="morning"?"08:00":"14:30",I=n().wave==="morning"?"14:30":"23:59";return qa(L()).filter(j=>L().some(Y=>{const W=lt(Y.ScheduledStartDateTime),q=W.split(" ")[1]||W;return q>=A&&q<I&&Y.Division.CodeAlias===j}))}return qa(L())})())}),de(()=>M(L()),()=>{v(_,fr(L()))}),de(()=>(e(m),e(b)),()=>{v(k,(()=>{const A=ha(Wt);return Ro(e(m),A,e(b),{excludeSelected:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:50})})())}),de(()=>e(k),()=>{v(D,new Set(e(k).map(A=>A.match.MatchId)))}),de(()=>e(m),()=>{v(C,e(m).length>0?Math.min(...e(m).map(A=>A.ScheduledStartDateTime)):0)}),de(()=>e(m),()=>{v(G,e(m).length>0?Math.max(...e(m).map(A=>A.ScheduledEndDateTime)):0)}),de(()=>(e(G),e(C)),()=>{v(ce,e(G)-e(C))}),de(()=>(e(ee),e(m),nt),()=>{v(X,(()=>{if(!e(ee))return new Set;const A=new Set;return e(m).forEach(I=>{nt(I)===e(ee)&&A.add(I.MatchId)}),A})())}),de(()=>(e(B),e(b),e(m)),()=>{v(se,(()=>{if(!e(B))return[];const A=e(b).get(e(B).MatchId);return A?A.map(I=>e(m).find(j=>j.MatchId===I)).filter(Boolean):[]})())}),de(()=>(e(m),e(b)),()=>{v(oe,(()=>{const A=[],I=new Set;return e(m).forEach(j=>{if(e(b).has(j.MatchId)&&!I.has(j.MatchId)){A.push(j),I.add(j.MatchId);const Y=e(b).get(j.MatchId);Y&&Y.forEach(W=>I.add(W))}}),A.sort((j,Y)=>j.ScheduledStartDateTime-Y.ScheduledStartDateTime)})())}),de(()=>(e(oe),e(b)),()=>{v(ve,(()=>{const A=ha(Wt);return e(oe).filter(I=>{const j=e(b).get(I.MatchId);return j?j.some(Y=>A.has(Y)):!1})})())}),de(()=>(e(oe),e(ve)),()=>{v(H,{total:e(oe).length,resolved:e(ve).length,remaining:e(oe).length-e(ve).length})}),de(()=>(e(B),e(oe)),()=>{v(V,e(B)?e(oe).findIndex(A=>A.MatchId===e(B).MatchId):-1)}),Bt(),Rt();var F=At(),ne=ct(F);{var te=A=>{var I=zc(),j=r(I,!0);t(I),N(()=>w(j,(n(),i(()=>n().division||n().wave!=="all"||n().teams.length>0?"No matches found for selected filters":"No matches found")))),u(A,I)},ie=A=>{var I=kd(),j=r(I),Y=r(j),W=s(r(Y),2),q=r(W);q.__click=()=>Et("wave","all");var re=s(q,2);re.__click=()=>Et("wave","morning");var pe=s(re,2);pe.__click=()=>Et("wave","afternoon"),t(W),t(Y);var Ee=s(Y,2);{var We=De=>{var Ae=qc(),Ce=s(r(Ae),2);Ce.__change=st=>Et("division",st.target.value||null);var He=r(Ce),Ye=r(He);t(He),He.value=He.__value="";var ze=s(He);tt(ze,1,()=>e(x),at,(st,ae)=>{var xe=Gc(),Fe=r(xe,!0);t(xe);var Ge={};N(()=>{w(Fe,e(ae)),Ge!==(Ge=e(ae))&&(xe.value=(xe.__value=e(ae))??"")}),u(st,xe)}),t(Ce);var Ze;ga(Ce),t(Ae),N(()=>{w(Ye,`All Divisions${n(),i(()=>n().wave!=="all"?` (${n().wave})`:"")??""}`),Ze!==(Ze=(n(),i(()=>n().division||"")))&&(Ce.value=(Ce.__value=(n(),i(()=>n().division||"")))??"",fa(Ce,(n(),i(()=>n().division||""))))}),u(De,Ae)};$(Ee,De=>{e(x),i(()=>e(x).length>1)&&De(We)})}var Ve=s(Ee,2);{var Qe=De=>{var Ae=Qc(),Ce=s(r(Ae),2);Ce.__change=Ye=>{const ze=Array.from(Ye.target.selectedOptions,Ze=>Ze.value);Et("teams",ze)},tt(Ce,5,()=>e(_),at,(Ye,ze)=>{var Ze=Xc(),st=r(Ze,!0);t(Ze);var ae={};N(()=>{w(st,e(ze)),ae!==(ae=e(ze))&&(Ze.value=(Ze.__value=e(ze))??"")}),u(Ye,Ze)}),t(Ce);var He;ga(Ce),t(Ae),N(Ye=>{Tt(Ce,"size",Ye),He!==(He=(n(),i(()=>n().teams)))&&(Ce.value=(Ce.__value=(n(),i(()=>n().teams)))??"",fa(Ce,(n(),i(()=>n().teams))))},[()=>(e(_),i(()=>Math.min(e(_).length,4)))]),u(De,Ae)};$(Ve,De=>{e(_),i(()=>e(_).length>0)&&De(Qe)})}var we=s(Ve,2);{var Me=De=>{var Ae=Kc(),Ce=s(r(Ae),2);Ce.__change=ae=>Et("priority",ae.target.value==="all"?"all":ae.target.value);var He=r(Ce);He.value=He.__value="all";var Ye=s(He);Ye.value=Ye.__value="must-cover";var ze=s(Ye);ze.value=ze.__value="priority";var Ze=s(ze);Ze.value=Ze.__value="optional",t(Ce);var st;ga(Ce),t(Ae),N(()=>{st!==(st=(n(),i(()=>n().priority||"all")))&&(Ce.value=(Ce.__value=(n(),i(()=>n().priority||"all")))??"",fa(Ce,(n(),i(()=>n().priority||"all"))))}),u(De,Ae)};$(we,De=>{c()&&De(Me)})}var je=s(we,2);{var qe=De=>{var Ae=Zc(),Ce=r(Ae);Ce.__click=()=>v($e,!e($e));var He=r(Ce);t(Ce);var Ye=s(Ce,2);Ye.__click=()=>v(Q,!e(Q));var ze=r(Ye);t(Ye),t(Ae),N(()=>{Se(Ce,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e($e)?"bg-gold-500 text-charcoal-950":"bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 border border-charcoal-600"}`),w(He,`${e($e)?"✓":""} Highlight Gaps`),Se(Ye,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(Q)?"bg-gold-500 text-charcoal-950":"bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 border border-charcoal-600"}`),w(ze,`${e(Q)?"✓":""} Gaps Only`)}),u(De,Ae)};$(je,De=>{c()&&De(qe)})}var pt=s(je,2);{var Xe=De=>{var Ae=ed();Ae.__click=function(...Ce){lr==null||lr.apply(this,Ce)},u(De,Ae)};$(pt,De=>{n(),i(()=>n().division||n().wave!=="all"||n().teams.length>0||n().priority&&n().priority!=="all"||n().coverageStatus&&n().coverageStatus!=="all")&&De(Xe)})}t(j);var Je=s(j,2),dt=r(Je);{var Mt=De=>{var Ae=ad();tt(Ae,5,()=>e(p),at,(Ce,He)=>{var Ye=td();Ye.__click=()=>v(Te,e(He));var ze=r(Ye,!0);t(Ye),N(()=>{Se(Ye,1,`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap min-h-[44px] flex-shrink-0 ${e(Te)===e(He)?"bg-gold-500 text-charcoal-950":"bg-charcoal-800 text-charcoal-300 hover:text-charcoal-50 border border-charcoal-700"}`),w(ze,e(He))}),u(Ce,Ye)}),t(Ae),u(De,Ae)};$(dt,De=>{e(p),i(()=>e(p).length>1)&&De(Mt)})}var it=s(dt,2),vt=r(it),Oe=r(vt),et=s(Oe);{var ft=De=>{var Ae=rd(),Ce=r(Ae);t(Ae),N(()=>w(Ce,`• ${e(Te)??""}`)),u(De,Ae)};$(et,De=>{e(Te)&&De(ft)})}var mt=s(et,2);{var bt=De=>{var Ae=od(),Ce=r(Ae);t(Ae),N(()=>w(Ce,`(${e(m),i(()=>e(m).length)??""} of ${e(O),i(()=>e(O).length)??""})`)),u(De,Ae)};$(mt,De=>{e(m),e(O),i(()=>e(m).length!==e(O).length)&&De(bt)})}var rt=s(mt,2);{var ut=De=>{var Ae=nd(),Ce=r(Ae);t(Ae),N(()=>w(Ce,`• Conflicts: ${e(H),i(()=>e(H).resolved)??""}/${e(H),i(()=>e(H).total)??""} resolved`)),u(De,Ae)};$(rt,De=>{e(H),c(),i(()=>e(H).total>0&&c())&&De(ut)})}t(vt);var Lt=s(vt,2);{var Vt=De=>{var Ae=sd(),Ce=s(r(Ae),2),He=r(Ce);t(Ce);var Ye=s(Ce,2);Ye.__click=()=>v(ee,null),t(Ae),N(()=>w(He,`Team ${e(ee)??""}`)),u(De,Ae)};$(Lt,De=>{e(ee)&&De(Vt)})}t(it),t(Je);var ta=s(Je,2);{var Jt=De=>{var Ae=id(),Ce=s(r(Ae),2);tt(Ce,5,()=>e(p),at,(He,Ye)=>{var ze=ld();ze.__click=()=>v(Te,e(Ye));var Ze=r(ze,!0);t(ze),N(()=>{Se(ze,1,`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${e(Te)===e(Ye)?"bg-gold-500 text-charcoal-950":"bg-charcoal-800 text-charcoal-300 hover:text-charcoal-50 border border-charcoal-700"}`),w(Ze,e(Ye))}),u(He,ze)}),t(Ce),t(Ae),u(De,Ae)};$(ta,De=>{e(p),i(()=>e(p).length>1)&&De(Jt)})}var Xt=s(ta,2),It=r(Xt);tt(It,5,()=>e(E),at,(De,Ae)=>{const Ce=_e(()=>(e(T),e(Ae),i(()=>e(T)[e(Ae)])));var He=wd(),Ye=r(He),ze=r(Ye),Ze=r(ze,!0);t(ze);var st=s(ze,2),ae=r(st);t(st),t(Ye);var xe=s(Ye,2),Fe=r(xe);tt(Fe,1,()=>(M(e(Ce)),i(()=>ge(e(Ce)))),at,(Re,ue)=>{const Ne=_e(()=>(e(ue),i(()=>U(e(ue).before.ScheduledEndDateTime)))),Pe=_e(()=>(e(ue),i(()=>U(e(ue).after.ScheduledStartDateTime)))),ot=_e(()=>e(Pe)-e(Ne)),Le=_e(()=>(e(ue),i(()=>e(ue).gapMinutes>=30))),yt=_e(()=>(e(ue),i(()=>e(ue).gapMinutes>=15&&e(ue).gapMinutes<30)));var Qt=At(),Pt=ct(Qt);{var _t=ba=>{var Yt=dd(),Ca=r(Yt);{var zt=la=>{var va=cd(),ya=r(va);t(va),N(()=>{Se(va,1,`text-[9px] font-medium px-1 py-0.5 rounded ${e(Le)?"bg-green-500/20 text-green-400":e(yt)?"bg-yellow-500/20 text-yellow-400":"bg-orange-500/20 text-orange-400"} ${e($e)?"ring-2 ring-[#eab308]":""}`),w(ya,`${e(ue),i(()=>e(ue).gapMinutes)??""}m`)}),u(la,va)};$(Ca,la=>{(e(ot)>3||e($e))&&la(zt)})}t(Yt),N(()=>{Se(Yt,1,`absolute top-0 bottom-0 flex items-center justify-center transition-all ${e($e)?"ring-2 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""}`),ea(Yt,`left: ${e(Ne)??""}%; width: ${e(ot)??""}%; z-index: 0;`),Tt(Yt,"title",`${e(ue),i(()=>e(ue).gapMinutes)??""} min gap between matches`)}),u(ba,Yt)};$(Pt,ba=>{e(ot)>=1&&ba(_t)})}u(Re,Qt)});var Ge=s(Fe,2);tt(Ge,1,()=>e(Ce),at,(Re,ue)=>{const Ne=_e(()=>(e(b),e(ue),i(()=>e(b).has(e(ue).MatchId)))),Pe=_e(()=>(e(B),e(ue),i(()=>{var xt;return((xt=e(B))==null?void 0:xt.MatchId)===e(ue).MatchId}))),ot=_e(()=>(M(nt),e(ue),i(()=>nt(e(ue))))),Le=_e(()=>(e(ee),e(X),e(ue),i(()=>e(ee)!==null&&e(X).has(e(ue).MatchId)))),yt=_e(()=>e(ee)!==null&&!e(Le)),Qt=_e(()=>(M(ha),M(Wt),i(()=>ha(Wt)))),Pt=_e(()=>(M(e(Qt)),e(ue),i(()=>e(Qt).has(e(ue).MatchId)))),_t=_e(()=>(M(_a),e(ue),i(()=>_a.getPriority(e(ue).MatchId)))),ba=_e(()=>(e(D),e(ue),i(()=>e(D).has(e(ue).MatchId)))),Yt=_e(()=>(M(e(ot)),M(gt),i(()=>e(ot)?gt.getTeamStatus(e(ot)):"not-covered"))),Ca=_e(()=>e(Yt)==="covered"||e(Yt)==="partially-covered"),zt=_e(()=>e(Yt)==="planned"),la=_e(()=>e(Yt)==="not-covered"),va=_e(()=>(e(ue),i(()=>U(e(ue).ScheduledStartDateTime)))),ya=_e(()=>(e(ue),i(()=>Math.max(le(e(ue).ScheduledStartDateTime,e(ue).ScheduledEndDateTime),2)))),xa=_e(()=>(e(ue),i(()=>ke(e(ue))))),Da=_e(()=>(M(e(_t)),M(e(la)),M(e(Pt)),M(e(zt)),M(e(Le)),M(e(Ne)),M(e(Ca)),M(e(ba)),e(ue),i(()=>e(_t)==="must-cover"?"#eab308":e(_t)==="priority"?"#f59e0b":e(la)&&!e(Pt)||e(zt)||e(Le)||e(Pt)&&!e(Ne)?"#eab308":e(Ca)||e(ba)&&!e(Pt)?"#10b981":e(Ne)?"#dc2626":e(ue).Division.ColorHex))),Na=_e(()=>e(_t)==="must-cover"?"#facc15":e(_t)==="priority"?"#fbbf24":e(la)&&!e(Pt)||e(zt)?"#facc15":e(Pe)?"#eab308":e(Le)||e(Pt)?"#facc15":e(Ne)?"#ef4444":"rgba(255, 255, 255, 0.2)"),Nr=_e(()=>e(Pe)?30:e(Le)?20:e(_t)==="must-cover"?18:e(Pt)?15:e(Ne)?10:1);var wa=yd();wa.__click=xt=>{xt.target instanceof HTMLElement&&xt.target.closest(".priority-button")||fe(e(ue))},wa.__keydown=xt=>{(xt.key==="Enter"||xt.key===" ")&&xt.target instanceof HTMLElement&&!xt.target.closest(".priority-button")&&fe(e(ue))};var xr=r(wa);{var Qa=xt=>{var Ot=vd(),ra=r(Ot);t(Ot),N(()=>w(ra,`${e(_t)==="must-cover"&&"⭐"}
											${e(_t)==="priority"&&"🔸"}
											${e(_t)==="optional"&&"○"}`)),u(xt,Ot)};$(xr,xt=>{c()&&e(_t)&&xt(Qa)})}var Ka=s(xr,2);{var Ar=xt=>{var Ot=ud();u(xt,Ot)};$(Ka,xt=>{c()&&e(ba)&&!e(Pt)&&xt(Ar)})}var Ya=s(Ka,2);{var gr=xt=>{var Ot=hd();u(xt,Ot)};$(Ya,xt=>{c()&&e(Pt)&&xt(gr)})}var Sa=s(Ya,2);Sa.__click=xt=>e(ot)&&Ie(e(ot),xt),Sa.__keydown=xt=>{e(ot)&&(xt.key==="Enter"||xt.key===" ")&&Ie(e(ot),xt)};var Fr=r(Sa,!0);t(Sa);var Ua=s(Sa,2),jr=r(Ua);t(Ua);var Za=s(Ua,2),Rr=r(Za,!0);t(Za);var er=s(Za,2);{var pr=xt=>{const Ot=_e(()=>(e(Z),e(ue),i(()=>e(Z).getScore(e(ue).MatchId))));var ra=At(),Aa=ct(ra);{var Wa=wt=>{const ht=_e(()=>(M(e(Ot)),i(()=>e(Ot).sets.find(sa=>sa.completedAt===0)||e(Ot).sets[e(Ot).sets.length-1]))),Dt=_e(()=>(M(e(Ot)),i(()=>e(Ot).sets.filter(sa=>sa.completedAt>0)))),qt=_e(()=>(M(e(Dt)),i(()=>e(Dt).filter(sa=>sa.team1Score>sa.team2Score).length))),ia=_e(()=>(M(e(Dt)),i(()=>e(Dt).filter(sa=>sa.team2Score>sa.team1Score).length)));var Gt=md(),na=r(Gt);{var Ta=sa=>{var da=fd(),ua=r(da);t(da),N(()=>w(ua,`(${e(qt)??""}-${e(ia)??""})`)),u(sa,da)};$(na,sa=>{M(e(Dt)),i(()=>e(Dt).length>0)&&sa(Ta)})}var ca=s(na,2),$a=r(ca);t(ca);var tr=s(ca,2);{var Ur=sa=>{co(sa,{isLive:!0,get lastUpdated(){return M(e(Ot)),i(()=>e(Ot).lastUpdated)}})};$(tr,sa=>{M(e(Ot)),i(()=>e(Ot).status==="in-progress")&&sa(Ur)})}t(Gt),N(()=>w($a,`${M(e(ht)),i(()=>e(ht).team1Score)??""}-${M(e(ht)),i(()=>e(ht).team2Score)??""}`)),u(wt,Gt)};$(Aa,wt=>{M(e(Ot)),i(()=>e(Ot)&&e(Ot).status!=="not-started")&&wt(Wa)})}u(xt,ra)};$(er,xt=>{e(Z)&&xt(pr)})}var br=s(er,2);{var _r=xt=>{var Ot=pd(),ra=r(Ot);ra.__click=qt=>{qt.stopPropagation(),v(R,e(R)===e(ue).MatchId?null:e(ue).MatchId)};var Aa=r(ra),Wa=s(Aa);{var wt=qt=>{var ia=xd();u(qt,ia)};$(Wa,qt=>{e(_t)||qt(wt)})}t(ra);var ht=s(ra,2);{var Dt=qt=>{var ia=gd(),Gt=r(ia);Wo(Gt,{get matchId(){return e(ue),i(()=>e(ue).MatchId)},get currentPriority(){return e(_t)},get onPriorityChange(){return M(_a),i(()=>_a.setPriority)},onClose:()=>v(R,null)}),t(ia),u(qt,ia)};$(ht,qt=>{e(R),e(ue),i(()=>e(R)===e(ue).MatchId)&&qt(Dt)})}t(Ot),N(()=>{Se(ra,1,`priority-button flex-shrink-0 w-5 h-5 rounded flex items-center justify-center transition-colors hover:bg-black/20 ${e(_t)==="must-cover"?"text-[#facc15]":e(_t)==="priority"?"text-[#fbbf24]":e(_t)==="optional"?"text-white/60":"text-white/40"}`),Tt(ra,"title",e(_t)?`Priority: ${e(_t)}`:"Set priority"),w(Aa,`${e(_t)==="must-cover"&&"⭐"}
												${e(_t)==="priority"&&"🔸"}
												${e(_t)==="optional"&&"○"} `)}),u(xt,Ot)};$(br,xt=>{c()&&xt(_r)})}var Lr=s(br,2);{var yr=xt=>{var Ot=_d(),ra=r(Ot);ra.__click=ht=>{ht.stopPropagation(),v(he,e(he)===e(ot)?null:e(ot))};var Aa=r(ra);t(ra);var Wa=s(ra,2);{var wt=ht=>{var Dt=bd(),qt=r(Dt);io(qt,{get teamId(){return e(ot)},get currentStatus(){return e(Yt)},get onStatusChange(){return M(gt),i(()=>gt.setTeamStatus)},onClose:()=>v(he,null)}),t(Dt),u(ht,Dt)};$(Wa,ht=>{e(he)===e(ot)&&ht(wt)})}t(Ot),N(()=>{Se(ra,1,`flex-shrink-0 w-5 h-5 rounded flex items-center justify-center transition-colors hover:bg-black/20 ${e(Yt)==="covered"?"text-green-400":e(Yt)==="partially-covered"?"text-[#fbbf24]":e(Yt)==="planned"?"text-[#facc15]":"text-white/40"}`),Tt(ra,"title",`Coverage: ${e(Yt)??""}`),w(Aa,`${e(Yt)==="covered"&&"✓"}
												${e(Yt)==="partially-covered"&&"◐"}
												${e(Yt)==="planned"&&"📋"}
												${e(Yt)==="not-covered"&&"○"}`)}),u(xt,Ot)};$(Lr,xt=>{c()&&e(ot)&&xt(yr)})}t(wa),N((xt,Ot,ra)=>{Se(wa,1,`group absolute h-16 rounded-md px-2 py-1.5 text-white shadow-sm border-2 flex flex-col justify-center transition-all active:scale-95 sm:hover:z-20 sm:hover:shadow-lg touch-manipulation cursor-pointer min-h-[44px] ${e(Pe)?"ring-2 ring-[#eab308] ring-offset-2 ring-offset-[#3b3c48]":""} ${e(Le)?"ring-2 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""} ${e(yt)?"opacity-30":""} ${e(Pt)?"ring-1 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""} ${e(Ca)?"opacity-60":""}`),ea(wa,`left: ${e(va)??""}%; width: ${e(ya)??""}%; background-color: ${e(Da)??""}; border-color: ${e(Na)??""}; min-width: 120px; z-index: ${e(Nr)??""};`),Tt(wa,"title",`${e(ue),i(()=>e(ue).CompleteShortName)??""}: ${e(ue),i(()=>e(ue).FirstTeamText)??""} vs ${e(ue),i(()=>e(ue).SecondTeamText)??""} - ${xt??""}${e(Ne)?" (Click to see conflicts)":" (Click to add to plan)"}${e(_t)?` [Priority: ${e(_t)}]`:""}${e(ba)&&!e(Pt)?" [Easy opportunity]":""}${e(Yt)!=="not-covered"?` [Coverage: ${e(Yt)}]`:""}`),Se(Sa,1,`text-xs sm:text-sm font-bold truncate leading-tight ${e(ot)?"cursor-pointer hover:underline":""}`),Tt(Sa,"role",e(ot)?"button":void 0),Tt(Sa,"tabindex",e(ot)?0:void 0),w(Fr,(M(e(ot)),e(ue),i(()=>e(ot)||e(ue).Division.CodeAlias))),w(jr,`vs ${Ot??""}`),w(Rr,ra)},[()=>(M(lt),e(ue),i(()=>lt(e(ue).ScheduledStartDateTime))),()=>(M(e(xa)),i(()=>e(xa).length>20?e(xa).substring(0,17)+"...":e(xa))),()=>(M(lt),e(ue),i(()=>lt(e(ue).ScheduledStartDateTime)))]),u(Re,wa)}),t(xe),t(He),N(()=>{w(Ze,e(Ae)),w(ae,`${M(e(Ce)),i(()=>e(Ce).length)??""} match${M(e(Ce)),i(()=>e(Ce).length!==1?"es":"")??""}`)}),u(De,He)}),t(It),t(Xt),Ga(Xt,De=>v(K,De),()=>e(K));var St=s(Xt,2);{var kt=De=>{Jc(De,{get match(){return e(B)},get conflictingMatches(){return e(se)},onClose:()=>v(B,null),onNextConflict:me,onPreviousConflict:z,get currentIndex(){return e(V)},get totalConflicts(){return e(oe),i(()=>e(oe).length)},get conflictProgress(){return e(H)}})};$(St,De=>{e(B)&&De(kt)})}var oa=s(St,2);{var aa=De=>{{let Ae=_e(()=>(e(Z),e(be),i(()=>e(Z).getScore(e(be).MatchId))));Bo(De,{get matchId(){return e(be),i(()=>e(be).MatchId)},get team1Name(){return e(be),i(()=>e(be).FirstTeamText)},get team2Name(){return e(be),i(()=>e(be).SecondTeamText)},get currentScore(){return e(Ae)},onScoreUpdate:(Ce,He)=>{e(Z).updateScore(e(be).MatchId,Ce,He)},onClose:()=>v(be,null)})}};$(oa,De=>{e(be),e(Z),i(()=>e(be)&&e(Z).isClaimOwner(e(be).MatchId))&&De(aa)})}var Ue=s(oa,2);{var Be=De=>{var Ae=Sd();Ae.__click=()=>v(R,null),Ae.__keydown=Ce=>Ce.key==="Escape"&&v(R,null),u(De,Ae)};$(Ue,De=>{e(R)!==null&&De(Be)})}var Ke=s(Ue,2);{var Ct=De=>{var Ae=Td();Ae.__click=()=>v(he,null),Ae.__keydown=Ce=>Ce.key==="Escape"&&v(he,null),u(De,Ae)};$(Ke,De=>{e(he)!==null&&De(Ct)})}t(I),N((De,Ae)=>{Se(q,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),i(()=>n().wave==="all"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50")??""}`),Se(re,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),i(()=>n().wave==="morning"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50")??""}`),Se(pe,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),i(()=>n().wave==="afternoon"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50")??""}`),w(Oe,`Timeline: ${De??""} - ${Ae??""} `)},[()=>(M(lt),e(C),i(()=>lt(e(C)))),()=>(M(lt),e(G),i(()=>lt(e(G))))]),u(A,I)};$(ne,A=>{e(O),i(()=>e(O).length===0)?A(te):A(ie,!1)})}u(l,F),jt(),h()}Ht(["click","change","keydown"]);function Ja(l){return l.replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n")}function Zr(l){const o=new Date(l),a=o.getUTCFullYear(),n=String(o.getUTCMonth()+1).padStart(2,"0"),c=String(o.getUTCDate()).padStart(2,"0"),d=String(o.getUTCHours()).padStart(2,"0"),h=String(o.getUTCMinutes()).padStart(2,"0"),y=String(o.getUTCSeconds()).padStart(2,"0");return`${a}${n}${c}T${d}${h}${y}Z`}function Cd(l,o){return`match-${l}-${o}@coursync.local`}function $d(l,o,a,n){const c=Date.now();let d=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//CourtSync//Coverage Plan//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH",`X-WR-CALNAME:${Ja(n)}`,`X-WR-CALDESC:${Ja("Volleyball Match Coverage Plan")}`,"X-WR-TIMEZONE:UTC"].join(`\r
`)+`\r
`;return l.forEach(h=>{const y=o(h),f=a(h),S=y?`${y} vs ${f}`:`${h.FirstTeamText} vs ${h.SecondTeamText}`,p=[`Court: ${h.CourtName}`,`Division: ${h.Division.CodeAlias}`,`First Team: ${h.FirstTeamText}`,`Second Team: ${h.SecondTeamText}`].join("\\n"),m=Ja(h.CourtName),T=Ja(S),E=Ja(p),b=h.ScheduledStartDateTime,x=h.ScheduledEndDateTime,O=b-5*60*1e3,k=Zr(O),D=Zr(x),C=Zr(c),G=Cd(h.MatchId,b);d+=["BEGIN:VEVENT",`UID:${G}`,`DTSTAMP:${C}`,`DTSTART:${k}`,`DTEND:${D}`,`SUMMARY:${T}`,`DESCRIPTION:${E}`,`LOCATION:${m}`,"SEQUENCE:0","STATUS:CONFIRMED","TRANSP:OPAQUE"].join(`\r
`)+`\r
`,d+=["BEGIN:VALARM","TRIGGER:-PT15M","ACTION:DISPLAY",`DESCRIPTION:${Ja(`Match starts in 15 minutes: ${S}`)}`,"END:VALARM"].join(`\r
`)+`\r
`,d+=`END:VEVENT\r
`}),d+=`END:VCALENDAR\r
`,d}const Id=(l,o,a)=>{const n=l.length,c=o.size,d=n>0?c/n*100:0,h=l.filter(b=>o.has(b.MatchId)).reduce((b,x)=>{const _=(x.ScheduledEndDateTime-x.ScheduledStartDateTime)/6e4;return b+_},0),y=b=>{const _=(b.InvolvedTeam==="first"?b.FirstTeamText:b.SecondTeamText).match(/(\d+-\d+)/);return _?_[1]:""},f=new Set,S=new Set;l.forEach(b=>{const x=y(b);x&&(f.add(x),o.has(b.MatchId)&&S.add(x))});const p=S.size,m=f.size,T=m>0?n/m:0,E=Array.from(o).filter(b=>a.has(b)).length;return{totalMatches:n,coveredMatches:c,coveragePercentage:d,totalCoverageTime:h,teamsCovered:p,totalTeams:m,averageMatchesPerTeam:T,conflictsInPlan:E}},Dd=(l,o)=>{const a=c=>{const h=(c.InvolvedTeam==="first"?c.FirstTeamText:c.SecondTeamText).match(/(\d+-\d+)/);return h?h[1]:""},n=new Map;return l.forEach(c=>{const d=a(c);if(d){const h=n.get(d)||{total:0,covered:0};h.total++,o.has(c.MatchId)&&h.covered++,n.set(d,h)}}),Array.from(n.entries()).map(([c,d])=>({teamId:c,totalMatches:d.total,coveredMatches:d.covered,coveragePercentage:d.total>0?d.covered/d.total*100:0})).sort((c,d)=>d.coveragePercentage-c.coveragePercentage)},Mo=l=>{if(l<60)return`${Math.round(l)}m`;const o=Math.floor(l/60),a=Math.round(l%60);return a===0?`${o}h`:`${o}h ${a}m`};var Ed=g('<div class="flex items-center justify-between"><div class="flex items-center gap-3 flex-1 min-w-0"><div class="text-sm font-medium text-charcoal-50 truncate"> </div> <div class="text-xs text-charcoal-300"> </div></div> <div class="flex items-center gap-2 flex-shrink-0"><div class="w-24 h-2 bg-charcoal-700 rounded-full overflow-hidden"><div class="h-full bg-gold-500 transition-all duration-300"></div></div> <div class="text-xs text-charcoal-300 w-12 text-right"> </div></div></div>'),Pd=g('<div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-sm font-medium text-charcoal-50 mb-4">Team Coverage Breakdown</div> <div class="space-y-3 max-h-[400px] overflow-y-auto"></div></div>'),Od=g('<div class="space-y-6"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"><div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Coverage</div> <div class="text-2xl font-bold text-charcoal-50 mb-1"> </div> <div class="text-xs text-charcoal-300"> </div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Teams Covered</div> <div class="text-2xl font-bold text-charcoal-50 mb-1"> </div> <div class="text-xs text-charcoal-300"> </div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Total Time</div> <div class="text-2xl font-bold text-charcoal-50 mb-1"> </div> <div class="text-xs text-charcoal-300">coverage time</div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Conflicts</div> <div> </div> <div class="text-xs text-charcoal-300">in coverage plan</div></div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="flex items-center justify-between mb-2"><div class="text-sm font-medium text-charcoal-50">Coverage Progress</div> <div class="text-xs text-charcoal-300"> </div></div> <div class="w-full h-3 bg-charcoal-700 rounded-full overflow-hidden"><div class="h-full bg-gold-500 transition-all duration-300"></div></div></div> <!> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Avg Matches/Team</div> <div class="text-xl font-bold text-charcoal-50"> </div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Coverage Efficiency</div> <div class="text-xl font-bold text-charcoal-50"> </div> <div class="text-xs text-charcoal-300 mt-1">teams covered ratio</div></div></div></div>');function Nd(l,o){Ft(o,!1);const a=P(),n=P();let c=ye(o,"matches",8);const d=cr(c()),y=ha(Wt);de(()=>M(c()),()=>{v(a,Id(c(),y,d))}),de(()=>M(c()),()=>{v(n,Dd(c(),y))}),Bt(),Rt();var f=Od(),S=r(f),p=r(S),m=s(r(p),2),T=r(m);t(m);var E=s(m,2),b=r(E);t(E),t(p);var x=s(p,2),_=s(r(x),2),O=r(_,!0);t(_);var k=s(_,2),D=r(k);t(k),t(x);var C=s(x,2),G=s(r(C),2),ce=r(G,!0);t(G),pa(2),t(C);var X=s(C,2),se=s(r(X),2),oe=r(se,!0);t(se),pa(2),t(X),t(S);var ve=s(S,2),H=r(ve),V=s(r(H),2),L=r(V);t(V),t(H);var J=s(H,2),B=r(J);t(J),t(ve);var ee=s(ve,2);{var R=ke=>{var U=Pd(),le=s(r(U),2);tt(le,5,()=>e(n),at,(me,z)=>{var ge=Ed(),fe=r(ge),Ie=r(fe),F=r(Ie);t(Ie);var ne=s(Ie,2),te=r(ne);t(ne),t(fe);var ie=s(fe,2),A=r(ie),I=r(A);t(A);var j=s(A,2),Y=r(j);t(j),t(ie),t(ge),N((W,q)=>{w(F,`Team ${e(z),i(()=>e(z).teamId)??""}`),w(te,`${e(z),i(()=>e(z).coveredMatches)??""}/${e(z),i(()=>e(z).totalMatches)??""} matches`),ea(I,`width: ${W??""}%;`),w(Y,`${q??""}%`)},[()=>(e(z),i(()=>Math.min(e(z).coveragePercentage,100))),()=>(e(z),i(()=>e(z).coveragePercentage.toFixed(0)))]),u(me,ge)}),t(le),t(U),u(ke,U)};$(ee,ke=>{e(n),i(()=>e(n).length>0)&&ke(R)})}var he=s(ee,2),be=r(he),$e=s(r(be),2),Q=r($e,!0);t($e),t(be);var Te=s(be,2),K=s(r(Te),2),Z=r(K);t(K),pa(2),t(Te),t(he),t(f),N((ke,U,le,me,z,ge)=>{w(T,`${ke??""}%`),w(b,`${e(a),i(()=>e(a).coveredMatches)??""} of ${e(a),i(()=>e(a).totalMatches)??""} matches`),w(O,(e(a),i(()=>e(a).teamsCovered))),w(D,`of ${e(a),i(()=>e(a).totalTeams)??""} teams`),w(ce,U),Se(se,1,`text-2xl font-bold mb-1 ${e(a),i(()=>e(a).conflictsInPlan>0?"text-warning-500":"text-charcoal-50")??""}`),w(oe,(e(a),i(()=>e(a).conflictsInPlan))),w(L,`${le??""}%`),ea(B,`width: ${me??""}%;`),w(Q,z),w(Z,`${ge??""}%`)},[()=>(e(a),i(()=>e(a).coveragePercentage.toFixed(1))),()=>(M(Mo),e(a),i(()=>Mo(e(a).totalCoverageTime))),()=>(e(a),i(()=>e(a).coveragePercentage.toFixed(1))),()=>(e(a),i(()=>Math.min(e(a).coveragePercentage,100))),()=>(e(a),i(()=>e(a).averageMatchesPerTeam.toFixed(1))),()=>(e(a),i(()=>e(a).totalMatches>0?(e(a).teamsCovered/e(a).totalTeams*100).toFixed(1):"0"))]),u(l,f),jt()}const Ad=(l,o,a,n)=>{const c=new Map;return l.forEach(d=>{const h=n(d);if(!h)return;const y=c.get(h)||{total:0,covered:0,planned:0};y.total++,o.has(d.MatchId)&&y.covered++,a.get(h)==="planned"&&y.planned++,c.set(h,y)}),Array.from(c.entries()).map(([d,h])=>({teamId:d,status:a.get(d)||"not-covered",totalMatches:h.total,coveredMatches:h.covered,plannedMatches:h.planned,coveragePercentage:h.total>0?h.covered/h.total*100:0})).sort((d,h)=>{const y={"not-covered":0,planned:1,"partially-covered":2,covered:3},f=y[d.status],S=y[h.status];return f!==S?f-S:d.coveragePercentage-h.coveragePercentage})},Fd=(l,o,a,n)=>{const c=new Map,d=new Map;l.forEach(b=>{const x=n(b);if(!x)return;const _=a.get(x)||"not-covered";c.has(x)||c.set(x,_);const O=d.get(x)||{total:0,covered:0,planned:0};O.total++,o.has(b.MatchId)&&O.covered++,_==="planned"&&O.planned++,d.set(x,O)});const h=c.size,y=Array.from(c.values()).filter(b=>b==="covered").length,f=Array.from(c.values()).filter(b=>b==="partially-covered").length,S=Array.from(c.values()).filter(b=>b==="planned").length,p=Array.from(c.values()).filter(b=>b==="not-covered").length,m=l.length,T=o.size,E=Array.from(d.values()).reduce((b,x)=>b+x.planned,0);return{totalTeams:h,coveredTeams:y,partiallyCoveredTeams:f,plannedTeams:S,uncoveredTeams:p,coveragePercentage:h>0?(y+f)/h*100:0,plannedPercentage:h>0?S/h*100:0,totalMatches:m,coveredMatches:T,plannedMatches:E}},jd=(l,o)=>{const a=[];return a.push("Coverage Statistics Report"),a.push(`Generated: ${new Date().toLocaleString()}`),a.push(""),a.push("Summary"),a.push(`Total Teams,${o.totalTeams}`),a.push(`Covered Teams,${o.coveredTeams}`),a.push(`Partially Covered Teams,${o.partiallyCoveredTeams}`),a.push(`Planned Teams,${o.plannedTeams}`),a.push(`Uncovered Teams,${o.uncoveredTeams}`),a.push(`Coverage Percentage,${o.coveragePercentage.toFixed(1)}%`),a.push(`Planned Percentage,${o.plannedPercentage.toFixed(1)}%`),a.push(""),a.push("Team Breakdown"),a.push("Team ID,Status,Total Matches,Covered Matches,Planned Matches,Coverage Percentage"),l.forEach(n=>{a.push(`${n.teamId},${n.status},${n.totalMatches},${n.coveredMatches},${n.plannedMatches},${n.coveragePercentage.toFixed(1)}%`)}),a.join(`
`)},Rd=(l,o)=>JSON.stringify({generated:new Date().toISOString(),summary:o,teams:l},null,2);var Ld=g('<div class="flex items-center justify-between"><div class="flex items-center gap-3 flex-1 min-w-0"><div class="flex items-center gap-2 flex-shrink-0"><div></div> <div class="text-sm font-medium text-charcoal-50"> </div></div> <div class="text-xs text-charcoal-300"> <!></div></div> <div class="flex items-center gap-2 flex-shrink-0"><div class="w-24 h-2 bg-charcoal-700 rounded-full overflow-hidden"><div></div></div> <div class="text-xs text-charcoal-300 w-12 text-right"> </div></div></div>'),Ud=g('<div class="space-y-6"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"><div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Coverage</div> <div class="text-2xl font-bold text-charcoal-50 mb-1"> </div> <div class="text-xs text-charcoal-300"> </div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Covered</div> <div class="text-2xl font-bold text-green-400 mb-1"> </div> <div class="text-xs text-charcoal-300"> </div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Planned</div> <div class="text-2xl font-bold text-gold-500 mb-1"> </div> <div class="text-xs text-charcoal-300"> </div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Uncovered</div> <div class="text-2xl font-bold text-charcoal-400 mb-1"> </div> <div class="text-xs text-charcoal-300"> </div></div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="flex items-center justify-between mb-2"><div class="text-sm font-medium text-charcoal-50">Overall Coverage Progress</div> <div class="text-xs text-charcoal-300"> </div></div> <div class="w-full h-3 bg-charcoal-700 rounded-full overflow-hidden"><div class="h-full bg-gold-500 transition-all duration-300"></div></div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="flex items-center justify-between mb-4"><div class="text-sm font-medium text-charcoal-50">Team Coverage Breakdown</div> <div class="flex gap-2"><button class="px-3 py-1.5 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600 transition-colors">Export CSV</button> <button class="px-3 py-1.5 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600 transition-colors">Export JSON</button></div></div> <div class="space-y-3 max-h-[400px] overflow-y-auto"></div></div></div>');function Wd(l,o){Ft(o,!1);const a=P(),n=P(),c=P();let d=ye(o,"matches",8);const y=ha(Wt);function f(){const me=jd(e(n),e(c)),z=new Blob([me],{type:"text/csv"}),ge=URL.createObjectURL(z),fe=document.createElement("a");fe.href=ge,fe.download=`coverage-stats-${new Date().toISOString().split("T")[0]}.csv`,fe.click(),URL.revokeObjectURL(ge)}function S(){const me=Rd(e(n),e(c)),z=new Blob([me],{type:"application/json"}),ge=URL.createObjectURL(z),fe=document.createElement("a");fe.href=ge,fe.download=`coverage-stats-${new Date().toISOString().split("T")[0]}.json`,fe.click(),URL.revokeObjectURL(ge)}de(()=>(M(d()),gt),()=>{v(a,(()=>{const me=new Map;return d().forEach(z=>{const ge=nt(z);ge&&me.set(ge,gt.getTeamStatus(ge))}),me})())}),de(()=>(M(d()),e(a),nt),()=>{v(n,Ad(d(),y,e(a),nt))}),de(()=>(M(d()),e(a),nt),()=>{v(c,Fd(d(),y,e(a),nt))}),Bt(),Rt();var p=Ud(),m=r(p),T=r(m),E=s(r(T),2),b=r(E);t(E);var x=s(E,2),_=r(x);t(x),t(T);var O=s(T,2),k=s(r(O),2),D=r(k,!0);t(k);var C=s(k,2),G=r(C);t(C),t(O);var ce=s(O,2),X=s(r(ce),2),se=r(X,!0);t(X);var oe=s(X,2),ve=r(oe);t(oe),t(ce);var H=s(ce,2),V=s(r(H),2),L=r(V,!0);t(V);var J=s(V,2),B=r(J);t(J),t(H),t(m);var ee=s(m,2),R=r(ee),he=s(r(R),2),be=r(he);t(he),t(R);var $e=s(R,2),Q=r($e);t($e),t(ee);var Te=s(ee,2),K=r(Te),Z=s(r(K),2),ke=r(Z);ke.__click=f;var U=s(ke,2);U.__click=S,t(Z),t(K);var le=s(K,2);tt(le,5,()=>e(n),at,(me,z)=>{var ge=Ld(),fe=r(ge),Ie=r(fe),F=r(Ie),ne=s(F,2),te=r(ne);t(ne),t(Ie);var ie=s(Ie,2),A=r(ie),I=s(A);{var j=Ee=>{var We=ir();N(()=>w(We,`• ${e(z),i(()=>e(z).plannedMatches)??""} planned`)),u(Ee,We)};$(I,Ee=>{e(z),i(()=>e(z).plannedMatches>0)&&Ee(j)})}t(ie),t(fe);var Y=s(fe,2),W=r(Y),q=r(W);t(W);var re=s(W,2),pe=r(re);t(re),t(Y),t(ge),N((Ee,We)=>{Se(F,1,`w-3 h-3 rounded ${e(z),i(()=>e(z).status==="covered"?"bg-green-500":e(z).status==="partially-covered"?"bg-[#f59e0b]":e(z).status==="planned"?"bg-gold-500":"bg-[#808593]")??""}`),w(te,`Team ${e(z),i(()=>e(z).teamId)??""}`),w(A,`${e(z),i(()=>e(z).coveredMatches)??""}/${e(z),i(()=>e(z).totalMatches)??""} matches `),Se(q,1,`h-full transition-all duration-300 ${e(z),i(()=>e(z).status==="covered"?"bg-green-500":e(z).status==="partially-covered"?"bg-[#f59e0b]":e(z).status==="planned"?"bg-gold-500":"bg-[#808593]")??""}`),ea(q,`width: ${Ee??""}%;`),w(pe,`${We??""}%`)},[()=>(e(z),i(()=>Math.min(e(z).coveragePercentage,100))),()=>(e(z),i(()=>e(z).coveragePercentage.toFixed(0)))]),u(me,ge)}),t(le),t(Te),t(p),N((me,z,ge,fe,Ie)=>{w(b,`${me??""}%`),w(_,`${e(c),i(()=>e(c).coveredTeams+e(c).partiallyCoveredTeams)??""} of ${e(c),i(()=>e(c).totalTeams)??""} teams`),w(D,(e(c),i(()=>e(c).coveredTeams))),w(G,`${e(c),i(()=>e(c).partiallyCoveredTeams)??""} partially covered`),w(se,(e(c),i(()=>e(c).plannedTeams))),w(ve,`${z??""}% of teams`),w(L,(e(c),i(()=>e(c).uncoveredTeams))),w(B,`${ge??""}% remaining`),w(be,`${fe??""}%`),ea(Q,`width: ${Ie??""}%;`)},[()=>(e(c),i(()=>e(c).coveragePercentage.toFixed(1))),()=>(e(c),i(()=>e(c).plannedPercentage.toFixed(1))),()=>(e(c),i(()=>e(c).totalTeams>0?(e(c).uncoveredTeams/e(c).totalTeams*100).toFixed(1):0)),()=>(e(c),i(()=>e(c).coveragePercentage.toFixed(1))),()=>(e(c),i(()=>Math.min(e(c).coveragePercentage,100)))]),u(l,p),jt()}Ht(["click"]);const Co="teamMembers",$o="teamAssignments",eo=["#eab308","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#f97316"];function Bd(){const{subscribe:l,set:o,update:a}=ma([]),{subscribe:n,set:c,update:d}=ma(new Map),{subscribe:h,set:y}=ma(null);{try{const p=localStorage.getItem(Co);if(p){const m=JSON.parse(p);o(m),m.length>0&&y(m[0].id)}else{const m={id:"you",name:"You",color:eo[0],createdAt:Date.now()};o([m]),y("you")}}catch(p){console.error("Failed to load team coordination data:",p)}try{const p=localStorage.getItem($o);if(p){const m=JSON.parse(p);c(new Map(Object.entries(m)))}}catch(p){console.error("Failed to load team assignments:",p)}}const f=p=>{try{localStorage.setItem(Co,JSON.stringify(p))}catch(m){console.error("Failed to save team members:",m)}},S=p=>{try{const m=Object.fromEntries(p);localStorage.setItem($o,JSON.stringify(m))}catch(m){console.error("Failed to save team assignments:",m)}};return{members:{subscribe:l},assignments:{subscribe:n},currentMemberId:{subscribe:h},setCurrentMemberId:p=>{y(p)},addMember:p=>{let m=new Set;l(b=>{m=new Set(b.map(x=>x.color))})();const T=eo.find(b=>!m.has(b))||eo[0],E={id:`member-${Date.now()}`,name:p,color:T,createdAt:Date.now()};return a(b=>{const x=[...b,E];return f(x),x}),y(E.id),E.id},removeMember:p=>{a(m=>{const T=m.filter(E=>E.id!==p);return f(T),T}),d(m=>{const T=new Map(m);return Array.from(T.entries()).forEach(([E,b])=>{b===p&&T.delete(E)}),S(T),T}),l(m=>{m.length>0&&y(m[0].id)})()},updateMember:(p,m)=>{a(T=>{const E=T.map(b=>b.id===p?{...b,...m}:b);return f(E),E})},assignTeam:(p,m)=>{d(T=>{const E=new Map(T);return E.set(p,m),S(E),E})},unassignTeam:p=>{d(m=>{const T=new Map(m);return T.delete(p),S(T),T})},getTeamAssignment:p=>{let m=null;return n(T=>{m=T.get(p)||null})(),m},getMember:p=>{let m=null;return l(T=>{m=T.find(E=>E.id===p)||null})(),m},getCurrentMember:()=>{let p=null;if(h(T=>{p=T})(),!p)return null;let m=null;return l(T=>{m=T.find(E=>E.id===p)||null})(),m},exportCoverageStatus:(p,m)=>{let T=null;h(D=>{T=D})();const E=m||T;if(!E)return JSON.stringify({});let b=null;l(D=>{b=D.find(C=>C.id===E)||null})();let x=new Map;n(D=>{x=D})();const _=Array.from(x.entries()).filter(([D,C])=>C===E).map(([D])=>D),O={};Array.from(p.entries()).forEach(([D,C])=>{_.includes(D)&&(O[D]=C)});const k={memberId:E,memberName:(b==null?void 0:b.name)||"Unknown",exportedAt:new Date().toISOString(),assignments:_.map(D=>({teamId:D})),coverageStatus:O};return JSON.stringify(k,null,2)},importCoverageStatus:(p,m="merge")=>{try{const T=JSON.parse(p);return!T.coverageStatus||!T.memberId?{success:!1,error:"Invalid data format: missing coverageStatus or memberId"}:(m==="merge"&&T.assignments&&d(E=>{const b=new Map(E);return T.assignments.forEach(x=>{b.set(x.teamId,T.memberId)}),S(b),b}),{success:!0})}catch(T){return{success:!1,error:T instanceof Error?T.message:"Unknown error"}}},mergeCoverageStatuses:p=>{const m=new Map;return p.forEach(({coverageStatus:T})=>{Object.entries(T).forEach(([E,b])=>{const x=m.get(E);if(!x)m.set(E,b);else{const _={covered:3,"partially-covered":2,planned:1,"not-covered":0};_[b]>_[x]&&m.set(E,b)}})}),m}}}const Nt=Bd();var Hd=g('<div class="mb-4 p-3 rounded bg-charcoal-700 border border-charcoal-600"><div class="flex gap-2"><input type="text" placeholder="Member name" class="flex-1 px-3 py-2 text-sm rounded bg-charcoal-800 text-charcoal-50 border border-charcoal-600 focus:border-[#eab308] focus:outline-none"/> <button class="px-3 py-2 text-xs font-medium rounded bg-gold-500 text-charcoal-950 hover:bg-[#facc15] transition-colors">Add</button></div></div>'),Yd=g('<input type="text" class="flex-1 px-2 py-1 text-sm rounded bg-charcoal-700 text-charcoal-50 border border-charcoal-600 focus:border-[#eab308] focus:outline-none"/>'),Vd=g('<span class="text-[10px] text-charcoal-300">(Active)</span>'),Jd=g('<span class="text-[10px] text-charcoal-300"> </span>'),zd=g('<div class="flex items-center gap-2 flex-1 min-w-0"><button> </button> <!> <!></div>'),Gd=g('<button class="px-2 py-1 text-xs text-charcoal-300 hover:text-charcoal-50 transition-colors" title="Edit name">✏️</button>'),qd=g('<button class="px-2 py-1 text-xs text-charcoal-300 hover:text-red-400 transition-colors" title="Remove member">✕</button>'),Xd=g('<div><div class="flex items-center gap-3 flex-1 min-w-0"><div class="w-4 h-4 rounded-full flex-shrink-0"></div> <!></div> <div class="flex items-center gap-2 flex-shrink-0"><!> <!></div></div>'),Qd=g('<div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="flex items-center justify-between mb-4"><h3 class="text-sm font-semibold text-charcoal-50">Team Members</h3> <button class="px-3 py-1 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600 transition-colors"> </button></div> <!> <div class="space-y-2"></div></div>');function Kd(l,o){Ft(o,!1);const a=P();let n=P(!1),c=P(""),d=P(null);function h(){e(c).trim()&&(Nt.addMember(e(c).trim()),v(c,""),v(n,!1))}function y(x){if(Nt.members.length>1){const _=Nt.getMember(x);confirm(`Remove ${_==null?void 0:_.name}?`)&&Nt.removeMember(x)}else alert("Cannot remove the last team member")}de(()=>Nt,()=>{v(a,(()=>{const x=new Map;return Array.from(Nt.assignments.values()).forEach(_=>{x.set(_,(x.get(_)||0)+1)}),x})())}),Bt(),Rt();var f=Qd(),S=r(f),p=s(r(S),2);p.__click=()=>v(n,!e(n));var m=r(p,!0);t(p),t(S);var T=s(S,2);{var E=x=>{var _=Hd(),O=r(_),k=r(O);Ha(k);var D=s(k,2);D.__click=h,t(O),t(_),Ra("keypress",k,C=>C.key==="Enter"&&h()),ka(k,()=>e(c),C=>v(c,C)),u(x,_)};$(T,x=>{e(n)&&x(E)})}var b=s(T,2);tt(b,5,()=>(M(Nt),i(()=>Nt.members)),at,(x,_)=>{const O=_e(()=>(M(Nt),e(_),i(()=>Nt.currentMemberId===e(_).id))),k=_e(()=>(e(d),e(_),i(()=>e(d)===e(_).id))),D=_e(()=>(e(a),e(_),i(()=>e(a).get(e(_).id)||0)));var C=Xd(),G=r(C),ce=r(G),X=s(ce,2);{var se=B=>{var ee=Yd();Ha(ee),N(()=>un(ee,(e(_),i(()=>e(_).name)))),Ra("blur",ee,R=>{R.target.value.trim()&&R.target.value!==e(_).name&&Nt.updateMember(e(_).id,{name:R.target.value.trim()}),v(d,null)}),Ra("keypress",ee,R=>{R.key==="Enter"&&R.currentTarget.blur()}),u(B,ee)},oe=B=>{var ee=zd(),R=r(ee);R.__click=()=>Nt.setCurrentMemberId(e(_).id);var he=r(R,!0);t(R);var be=s(R,2);{var $e=K=>{var Z=Vd();u(K,Z)};$(be,K=>{e(O)&&K($e)})}var Q=s(be,2);{var Te=K=>{var Z=Jd(),ke=r(Z);t(Z),N(()=>w(ke,`(${e(D)??""} team${e(D)!==1?"s":""})`)),u(K,Z)};$(Q,K=>{e(D)>0&&K(Te)})}t(ee),N(()=>{Se(R,1,`text-sm font-medium truncate ${e(O)?"text-[#facc15]":"text-charcoal-50 hover:text-[#facc15]"} transition-colors`),w(he,(e(_),i(()=>e(_).name)))}),u(B,ee)};$(X,B=>{e(k)?B(se):B(oe,!1)})}t(G);var ve=s(G,2),H=r(ve);{var V=B=>{var ee=Gd();ee.__click=()=>v(d,e(_).id),u(B,ee)};$(H,B=>{e(k)||B(V)})}var L=s(H,2);{var J=B=>{var ee=qd();ee.__click=()=>y(e(_).id),u(B,ee)};$(L,B=>{M(Nt),i(()=>Nt.members.length>1)&&B(J)})}t(ve),t(C),N(()=>{Se(C,1,`flex items-center justify-between p-3 rounded border transition-colors ${e(O)?"border-[#eab308] bg-gold-500/10":"border-charcoal-700 bg-charcoal-800"}`),ea(ce,`background-color: ${e(_),i(()=>e(_).color)??""}`)}),u(x,C)}),t(b),t(f),N(()=>w(m,e(n)?"Cancel":"+ Add Member")),u(l,f),jt()}Ht(["click"]);const Zd=l=>{try{const o=JSON.stringify(l);return btoa(encodeURIComponent(o))}catch(o){throw console.error("Failed to encode coverage data:",o),new Error("Failed to encode coverage data")}},ev=l=>{try{const o=l.startsWith("#")?l.slice(1):l,a=decodeURIComponent(atob(o)),n=JSON.parse(a);return!n.memberId||!n.coverageStatus?null:n}catch(o){return console.error("Failed to decode coverage data:",o),null}},tv=l=>{const o=Zd(l),n=`${window.location.origin+window.location.pathname}#coverage=${o}`;return n.length>2e3&&console.warn("Shareable URL exceeds 2000 characters. Consider using compression or export/import instead."),n},Yo=()=>{const l=window.location.hash;if(!l||!l.includes("coverage="))return null;const o=l.match(/coverage=([^&]+)/);return o?ev(o[1]):null},av=()=>Yo()!==null;var rv=g("<option> </option>"),ov=g('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div class="bg-charcoal-800 border border-charcoal-700 rounded-lg p-6 max-w-md w-full"><div class="flex items-center justify-between mb-4"><h3 class="text-sm font-semibold text-charcoal-50">Transfer Coverage</h3> <button class="text-charcoal-300 hover:text-charcoal-50 transition-colors">✕</button></div> <div class="space-y-4"><div><div class="text-xs text-charcoal-300 mb-1 block">Team</div> <div class="text-sm text-charcoal-50"> </div></div> <div><div class="text-xs text-charcoal-300 mb-1 block">From</div> <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full"></div> <span class="text-sm text-charcoal-50"> </span></div></div> <div><div class="text-xs text-charcoal-300 mb-1 block">Transfer To</div> <select class="w-full px-3 py-2 text-sm rounded bg-charcoal-700 text-charcoal-50 border border-charcoal-600 focus:border-gold-500 focus:outline-none"><option>Select team member...</option><!></select></div> <div><div class="text-xs text-charcoal-300 mb-1 block">Notes (optional)</div> <textarea placeholder="Add any notes about this handoff..." class="w-full px-3 py-2 text-sm rounded bg-charcoal-700 text-charcoal-50 border border-charcoal-600 focus:border-gold-500 focus:outline-none resize-none"></textarea></div></div> <div class="flex gap-2 mt-6"><button class="flex-1 px-3 py-2 text-xs font-medium rounded bg-gold-500 text-charcoal-950 hover:bg-gold-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Transfer</button> <button class="px-3 py-2 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600 transition-colors">Cancel</button></div></div></div>');function nv(l,o){Ft(o,!1);const a=P();let n=ye(o,"teamId",8),c=ye(o,"fromMemberId",8),d=ye(o,"onClose",8),h=ye(o,"onHandoff",8),y=P(""),f=P("");const S=Nt.getMember(c());function p(){e(y)&&(h()(e(y),e(f)),d()())}de(()=>M(c()),()=>{v(a,Nt.members.filter(R=>R.id!==c()))}),Bt(),Rt();var m=ov(),T=r(m),E=r(T),b=s(r(E),2);b.__click=function(...R){var he;(he=d())==null||he.apply(this,R)},t(E);var x=s(E,2),_=r(x),O=s(r(_),2),k=r(O);t(O),t(_);var D=s(_,2),C=s(r(D),2),G=r(C),ce=s(G,2),X=r(ce,!0);t(ce),t(C),t(D);var se=s(D,2),oe=s(r(se),2);N(()=>{e(y),oo(()=>{e(a)})});var ve=r(oe);ve.value=ve.__value="";var H=s(ve);tt(H,1,()=>e(a),at,(R,he)=>{var be=rv(),$e=r(be,!0);t(be);var Q={};N(()=>{w($e,(e(he),i(()=>e(he).name))),Q!==(Q=(e(he),i(()=>e(he).id)))&&(be.value=(be.__value=(e(he),i(()=>e(he).id)))??"")}),u(R,be)}),t(oe),t(se);var V=s(se,2),L=s(r(V),2);za(L),Tt(L,"rows",3),t(V),t(x);var J=s(x,2),B=r(J);B.__click=p;var ee=s(B,2);ee.__click=function(...R){var he;(he=d())==null||he.apply(this,R)},t(J),t(T),t(m),N(()=>{w(k,`Team ${n()??""}`),ea(G,`background-color: ${i(()=>S==null?void 0:S.color)??""}`),w(X,i(()=>(S==null?void 0:S.name)||"Unknown")),B.disabled=!e(y)}),no(oe,()=>e(y),R=>v(y,R)),ka(L,()=>e(f),R=>v(f,R)),u(l,m),jt()}Ht(["click"]);var sv=g('<div class="mt-2 text-xs text-red-400"> </div>'),lv=g('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div class="bg-charcoal-800 border border-charcoal-700 rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto"><div class="flex items-center justify-between mb-4"><h3 class="text-sm font-semibold text-charcoal-50">Import Coverage Status</h3> <button class="text-charcoal-300 hover:text-charcoal-50 transition-colors">✕</button></div> <textarea placeholder="Paste JSON data here..." class="w-full h-64 px-3 py-2 text-sm rounded bg-charcoal-700 text-charcoal-50 border border-charcoal-600 focus:border-gold-500 focus:outline-none font-mono"></textarea> <!> <div class="flex gap-2 mt-4"><button class="px-3 py-1.5 text-xs font-medium rounded bg-gold-500 text-charcoal-950 hover:bg-gold-400 transition-colors">Import</button> <button class="px-3 py-1.5 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600 transition-colors">Cancel</button></div></div></div>'),iv=g('<div class="flex items-center gap-3"><div class="w-4 h-4 rounded-full flex-shrink-0"></div> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-charcoal-50"> </div> <div class="text-xs text-charcoal-300"> </div></div></div>'),cv=g('<div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><h3 class="text-sm font-semibold text-charcoal-50 mb-4">Coverage by Team Member</h3> <div class="space-y-3"></div></div>'),dv=g("<option> </option>"),vv=g('<div class="flex items-center justify-between p-2 rounded bg-charcoal-700 border border-charcoal-600"><div class="flex items-center gap-2"><div></div> <span class="text-sm text-charcoal-50"> </span> <span class="text-xs text-charcoal-300"> </span></div> <select class="px-2 py-1 text-xs rounded bg-charcoal-800 text-charcoal-200 border border-charcoal-600 focus:border-gold-500 focus:outline-none"><option>Assign...</option><!></select></div>'),uv=g('<div class="mb-6"><h4 class="text-xs font-medium text-charcoal-400 uppercase tracking-wider mb-2"> </h4> <div class="space-y-1"></div></div>'),hv=g('<div class="flex items-center justify-between p-2 rounded bg-charcoal-700 border border-charcoal-600"><div class="flex items-center gap-2"><div></div> <span class="text-sm text-charcoal-50"> </span> <span class="text-xs text-charcoal-300"> </span></div> <div class="flex items-center gap-2"><button class="px-2 py-1 text-xs text-charcoal-300 hover:text-gold-500 transition-colors" title="Transfer to another member">↪</button> <button class="px-2 py-1 text-xs text-charcoal-300 hover:text-red-400 transition-colors" title="Unassign">✕</button></div></div>'),fv=g('<div class="mb-6"><div class="flex items-center gap-2 mb-2"><div class="w-3 h-3 rounded-full"></div> <h4 class="text-xs font-medium text-charcoal-50 uppercase tracking-wider"> </h4></div> <div class="space-y-1"></div></div>'),mv=g('<div class="space-y-6"><div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="flex items-center justify-between mb-4"><h3 class="text-sm font-semibold text-charcoal-50">Share Coverage Status</h3> <div class="flex gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600 transition-colors">Export JSON</button> <button class="px-3 py-1.5 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600 transition-colors">Generate Link</button> <button class="px-3 py-1.5 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600 transition-colors">Import JSON</button></div></div> <p class="text-xs text-charcoal-300">Export your coverage status to share with team members, generate a shareable link, or import coverage status from others.</p></div> <!> <div class="grid grid-cols-1 sm:grid-cols-3 gap-4"><div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Total Teams</div> <div class="text-2xl font-bold text-charcoal-50"> </div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Assigned</div> <div class="text-2xl font-bold text-green-400"> </div></div> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><div class="text-xs text-charcoal-300 uppercase tracking-wider mb-1">Unassigned</div> <div class="text-2xl font-bold text-charcoal-400"> </div></div></div> <!> <div class="rounded-lg border border-charcoal-700 bg-charcoal-800 p-4"><h3 class="text-sm font-semibold text-charcoal-50 mb-4">Team Assignments</h3> <!> <!></div> <!></div>');function xv(l,o){Ft(o,!1);const a=P(),n=P(),c=P(),d=P();let h=ye(o,"matches",8),y=P(!1),f=P(""),S=P(null),p=P(null);Ia(()=>{if(av()){const U=Yo();U&&(v(f,JSON.stringify(U,null,2)),v(y,!0),window.history.replaceState(null,"",window.location.pathname))}});function m(){const U=Nt.exportCoverageStatus(e(a)),le=new Blob([U],{type:"application/json"}),me=URL.createObjectURL(le),z=document.createElement("a");z.href=me,z.download=`coverage-status-${new Date().toISOString().split("T")[0]}.json`,z.click(),URL.revokeObjectURL(me)}function T(){const U=Nt.getCurrentMember();if(!U){alert("Please select a team member first");return}const le={memberId:U.id,memberName:U.name,exportedAt:new Date().toISOString(),assignments:[],coverageStatus:{}},me=new Map;h().forEach(ge=>{const fe=nt(ge);fe&&(me.has(fe)||me.set(fe,{teamId:fe,status:gt.getTeamStatus(fe),assignment:Nt.getTeamAssignment(fe)}))}),Array.from(me.entries()).forEach(([ge,fe])=>{fe.assignment===U.id&&(le.assignments.push({teamId:ge}),le.coverageStatus[ge]=fe.status)});const z=tv(le);navigator.clipboard.writeText(z).then(()=>{alert("Shareable link copied to clipboard!")}).catch(()=>{prompt("Shareable link (copy this):",z)})}function E(U,le,me,z){Nt.assignTeam(U,me),console.log(`Handoff: Team ${U} from ${le} to ${me}`,z),v(p,null)}function b(){try{v(S,null);const U=Nt.importCoverageStatus(e(f),"merge");if(U.success){try{const le=JSON.parse(e(f));le.coverageStatus&&Object.entries(le.coverageStatus).forEach(([me,z])=>{gt.setTeamStatus(me,z)})}catch(le){console.error("Failed to import coverage status:",le)}v(y,!1),v(f,""),alert("Coverage status imported successfully!")}else v(S,U.error||"Import failed")}catch(U){v(S,U instanceof Error?U.message:"Unknown error")}}de(()=>(M(h()),gt),()=>{v(a,(()=>{const U=new Map;return h().forEach(le=>{const me=nt(le);me&&U.set(me,gt.getTeamStatus(me))}),U})())}),de(()=>(M(h()),Nt),()=>{v(n,(()=>{const U=new Map;return h().forEach(le=>{const me=nt(le);me&&(U.has(me)||U.set(me,{teamId:me,status:gt.getTeamStatus(me),assignment:Nt.getTeamAssignment(me),matches:[]}),U.get(me).matches.push(le))}),U})())}),de(()=>e(n),()=>{v(c,(()=>{const U=e(n).size,le=Array.from(e(n).values()).filter(fe=>fe.assignment!==null).length,me=U-le,z=new Map;Array.from(e(n).values()).forEach(fe=>{fe.assignment&&(z.has(fe.teamId)||z.set(fe.teamId,[]),z.get(fe.teamId).push(fe.assignment))});const ge=new Map;return Array.from(e(n).values()).forEach(fe=>{if(fe.assignment){const Ie=ge.get(fe.assignment)||{covered:0,partiallyCovered:0,planned:0,uncovered:0};fe.status==="covered"?Ie.covered++:fe.status==="partially-covered"?Ie.partiallyCovered++:fe.status==="planned"?Ie.planned++:Ie.uncovered++,ge.set(fe.assignment,Ie)}}),{totalTeams:U,assignedTeams:le,unassignedTeams:me,coverageByMember:ge,assignmentConflicts:z}})())}),de(()=>e(n),()=>{v(d,(()=>{const U=new Map;return Array.from(e(n).values()).forEach(le=>{const me=le.assignment||"unassigned";U.has(me)||U.set(me,[]),U.get(me).push(le)}),U})())}),Bt(),Rt();var x=mv(),_=r(x),O=r(_),k=s(r(O),2),D=r(k);D.__click=m;var C=s(D,2);C.__click=T;var G=s(C,2);G.__click=()=>v(y,!0),t(k),t(O),pa(2),t(_);var ce=s(_,2);{var X=U=>{var le=lv(),me=r(le),z=r(me),ge=s(r(z),2);ge.__click=()=>{v(y,!1),v(f,""),v(S,null)},t(z);var fe=s(z,2);za(fe);var Ie=s(fe,2);{var F=A=>{var I=sv(),j=r(I,!0);t(I),N(()=>w(j,e(S))),u(A,I)};$(Ie,A=>{e(S)&&A(F)})}var ne=s(Ie,2),te=r(ne);te.__click=b;var ie=s(te,2);ie.__click=()=>{v(y,!1),v(f,""),v(S,null)},t(ne),t(me),t(le),ka(fe,()=>e(f),A=>v(f,A)),u(U,le)};$(ce,U=>{e(y)&&U(X)})}var se=s(ce,2),oe=r(se),ve=s(r(oe),2),H=r(ve,!0);t(ve),t(oe);var V=s(oe,2),L=s(r(V),2),J=r(L,!0);t(L),t(V);var B=s(V,2),ee=s(r(B),2),R=r(ee,!0);t(ee),t(B),t(se);var he=s(se,2);{var be=U=>{var le=cv(),me=s(r(le),2);tt(me,5,()=>(M(Nt),i(()=>Nt.members)),at,(z,ge)=>{const fe=_e(()=>(e(c),e(ge),i(()=>e(c).coverageByMember.get(e(ge).id)||{covered:0,partiallyCovered:0,planned:0,uncovered:0}))),Ie=_e(()=>(M(e(fe)),i(()=>e(fe).covered+e(fe).partiallyCovered+e(fe).planned+e(fe).uncovered)));var F=iv(),ne=r(F),te=s(ne,2),ie=r(te),A=r(ie,!0);t(ie);var I=s(ie,2),j=r(I);t(I),t(te),t(F),N(()=>{ea(ne,`background-color: ${e(ge),i(()=>e(ge).color)??""}`),w(A,(e(ge),i(()=>e(ge).name))),w(j,`${e(Ie)??""} team${e(Ie)!==1?"s":""} • ${M(e(fe)),i(()=>e(fe).covered)??""} covered • ${M(e(fe)),i(()=>e(fe).planned)??""} planned`)}),u(z,F)}),t(me),t(le),u(U,le)};$(he,U=>{M(Nt),i(()=>Nt.members.length>0)&&U(be)})}var $e=s(he,2),Q=s(r($e),2);{var Te=U=>{var le=uv(),me=r(le),z=r(me);t(me);var ge=s(me,2);tt(ge,5,()=>(e(d),i(()=>e(d).get("unassigned"))),at,(fe,Ie)=>{var F=vv(),ne=r(F),te=r(ne),ie=s(te,2),A=r(ie);t(ie);var I=s(ie,2),j=r(I);t(I),t(ne);var Y=s(ne,2);Y.__change=re=>{re.target.value&&Nt.assignTeam(e(Ie).teamId,re.target.value)};var W=r(Y);W.value=W.__value="";var q=s(W);tt(q,1,()=>(M(Nt),i(()=>Nt.members)),at,(re,pe)=>{var Ee=dv(),We=r(Ee,!0);t(Ee);var Ve={};N(()=>{w(We,(e(pe),i(()=>e(pe).name))),Ve!==(Ve=(e(pe),i(()=>e(pe).id)))&&(Ee.value=(Ee.__value=(e(pe),i(()=>e(pe).id)))??"")}),u(re,Ee)}),t(Y),Y.value=Y.__value="",t(F),N(()=>{Se(te,1,`w-2 h-2 rounded ${e(Ie),i(()=>e(Ie).status==="covered"?"bg-green-500":e(Ie).status==="partially-covered"?"bg-[#f59e0b]":e(Ie).status==="planned"?"bg-gold-500":"bg-[#808593]")??""}`),w(A,`Team ${e(Ie),i(()=>e(Ie).teamId)??""}`),w(j,`(${e(Ie),i(()=>e(Ie).matches.length)??""} matches)`)}),u(fe,F)}),t(ge),t(le),N(fe=>w(z,`Unassigned (${fe??""})`),[()=>(e(d),i(()=>e(d).get("unassigned").length))]),u(U,le)};$(Q,U=>{e(d),i(()=>e(d).has("unassigned"))&&U(Te)})}var K=s(Q,2);tt(K,1,()=>(M(Nt),i(()=>Nt.members)),at,(U,le)=>{const me=_e(()=>(e(d),e(le),i(()=>e(d).get(e(le).id)||[])));var z=At(),ge=ct(z);{var fe=Ie=>{var F=fv(),ne=r(F),te=r(ne),ie=s(te,2),A=r(ie);t(ie),t(ne);var I=s(ne,2);tt(I,5,()=>e(me),at,(j,Y)=>{var W=hv(),q=r(W),re=r(q),pe=s(re,2),Ee=r(pe);t(pe);var We=s(pe,2),Ve=r(We);t(We),t(q);var Qe=s(q,2),we=r(Qe);we.__click=()=>v(p,{teamId:e(Y).teamId,fromMemberId:e(le).id});var Me=s(we,2);Me.__click=()=>Nt.unassignTeam(e(Y).teamId),t(Qe),t(W),N(()=>{Se(re,1,`w-2 h-2 rounded ${e(Y),i(()=>e(Y).status==="covered"?"bg-green-500":e(Y).status==="partially-covered"?"bg-[#f59e0b]":e(Y).status==="planned"?"bg-gold-500":"bg-[#808593]")??""}`),w(Ee,`Team ${e(Y),i(()=>e(Y).teamId)??""}`),w(Ve,`(${e(Y),i(()=>e(Y).matches.length)??""} matches)`)}),u(j,W)}),t(I),t(F),N(()=>{ea(te,`background-color: ${e(le),i(()=>e(le).color)??""}`),w(A,`${e(le),i(()=>e(le).name)??""} (${M(e(me)),i(()=>e(me).length)??""})`)}),u(Ie,F)};$(ge,Ie=>{M(e(me)),i(()=>e(me).length>0)&&Ie(fe)})}u(U,z)}),t($e);var Z=s($e,2);{var ke=U=>{nv(U,{get teamId(){return e(p),i(()=>e(p).teamId)},get fromMemberId(){return e(p),i(()=>e(p).fromMemberId)},onClose:()=>v(p,null),onHandoff:(le,me)=>E(e(p).teamId,e(p).fromMemberId,le,me)})};$(Z,U=>{e(p)&&U(ke)})}t(x),N(()=>{w(H,(e(c),i(()=>e(c).totalTeams))),w(J,(e(c),i(()=>e(c).assignedTeams))),w(R,(e(c),i(()=>e(c).unassignedTeams)))}),u(l,x),jt()}Ht(["click","change"]);var gv=g('<span class="ml-2 text-red-400"> </span>'),pv=g('<div class="flex items-center gap-1 bg-charcoal-800 rounded-lg p-1 border border-charcoal-700 mx-4 overflow-x-auto scrollbar-hide svelte-1r7fm91"><button type="button">Plan</button> <button type="button">Analytics</button> <button type="button">Stats</button> <button type="button">Team</button></div>'),bv=g('<div class="text-center py-12 text-charcoal-300 text-sm"><p>No matches selected yet</p> <p class="text-xs text-charcoal-400 mt-2">Click matches in the timeline or list to add them to your coverage plan</p></div>'),_v=g('<span class="ml-2 text-gold-500"> </span>'),yv=g('<button class="px-2 py-1 text-xs font-medium rounded-lg bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 transition-colors border border-charcoal-600" title="Previous conflict">← Prev</button> <button class="px-2 py-1 text-xs font-medium rounded-lg bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 transition-colors border border-charcoal-600" title="Next conflict">Next →</button>',1),wv=g('<div class="text-[10px] font-semibold text-gold-500 px-1.5 py-0.5 rounded bg-gold-500/20">ACTIVE</div>'),Sv=g('<div class="flex-shrink-0 text-[10px] font-semibold text-gold-500 px-1.5 py-0.5 rounded bg-gold-500/20">KEEP</div>'),Tv=g('<div class="text-[10px] text-charcoal-400 mt-0.5"> </div>'),kv=g('<button class="px-2 py-1 text-[10px] font-medium rounded bg-warning-500/20 text-warning-500 border border-warning-500/50 hover:bg-warning-500/30 transition-colors">Remove</button>'),Mv=g('<div><!> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="text-xs font-semibold text-charcoal-50"> </span> <span class="text-xs text-[#facc15] font-medium"> </span> <span class="text-xs text-charcoal-200"> </span></div> <!></div> <!></div>'),Cv=g('<div><div class="flex items-center gap-2 mb-2"><div class="text-xs font-medium text-warning-500"> </div> <!></div> <div class="space-y-2"></div></div>'),$v=g('<div class="border border-warning-500/50 rounded-lg bg-warning-500/10 p-4"><div class="flex items-center justify-between mb-3"><div><h4 class="text-sm font-semibold text-warning-500">⚠️ Conflicts Detected</h4> <p class="text-xs text-charcoal-300 mt-0.5"> <!></p></div> <div class="flex items-center gap-2"><!> <button class="px-3 py-1.5 text-xs font-medium rounded-lg bg-warning-500/20 text-warning-500 border border-warning-500/50 hover:bg-warning-500/30 transition-colors">Auto-Resolve</button></div></div> <div class="space-y-3"></div></div>'),Iv=g('<span class="text-[10px] px-1.5 py-0.5 rounded bg-gold-500/20 text-gold-500 border border-gold-500/50">Uncovered</span>'),Dv=g('<div class="flex items-center gap-2 px-2 py-1.5 rounded bg-green-950/20 border border-green-500/30"><div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="text-xs font-semibold text-charcoal-50"> </span> <span class="text-xs text-green-400 font-medium"> </span> <span class="text-xs text-charcoal-200"> </span> <!></div> <div class="text-[10px] text-charcoal-400 mt-0.5"> </div></div> <button class="px-2 py-1 text-xs font-medium rounded transition-colors bg-green-500/20 text-green-400 border border-green-500/50 hover:bg-green-500/30">Add</button></div>'),Ev=g('<div class="border border-green-500/50 rounded-lg bg-green-950/10 p-4"><div class="flex items-center justify-between mb-3"><div><h4 class="text-sm font-semibold text-green-400">💡 Coverage Opportunities</h4> <p class="text-xs text-charcoal-300 mt-0.5"> </p></div></div> <div class="space-y-2"></div></div>'),Pv=g('<div class="flex-shrink-0 text-[10px] font-semibold text-warning-500 px-1.5 py-0.5 rounded bg-warning-500/20">CONFLICT</div>'),Ov=g("<div></div>"),Nv=g('<div class="fixed inset-0 z-40" role="button" tabindex="0"></div> <div class="absolute right-0 top-full mt-1 z-50"><!></div>',1),Av=g('<div class="relative flex-shrink-0"><button title="Set coverage status"> </button> <!></div>'),Fv=g('<div><button aria-label="Remove from plan"><svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></button> <!> <div class="flex-shrink-0 w-20 text-sm font-semibold text-charcoal-50"> </div> <div class="flex-shrink-0 w-24 text-sm font-bold text-[#facc15]"> </div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><div class="text-sm font-bold text-charcoal-50"> </div> <!></div> <div class="text-xs text-charcoal-200 truncate"> </div></div> <!> <div class="flex-shrink-0"><span class="px-2 py-0.5 text-[10px] font-semibold rounded"> </span></div></div>'),jv=g('<div class="space-y-2"><div class="flex items-center gap-2 pb-2 border-b border-charcoal-700"><h4 class="text-sm font-semibold text-charcoal-50"> </h4> <span class="text-xs text-charcoal-400"> </span></div> <!></div>'),Rv=g('<div class="space-y-4"><!> <!> <div class="space-y-4"></div></div>'),Lv=g('<div class="space-y-4"><!> <!></div>'),Uv=g('<div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 p-4 border-t border-charcoal-700 bg-charcoal-700/50"><div class="flex items-center gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600">Mark All as Planned</button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600">Mark All as Covered</button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors text-charcoal-300 hover:text-charcoal-50 hover:bg-charcoal-700">Clear Plan</button></div> <div class="flex items-center gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600" title="Copy plan to clipboard">Copy</button> <div class="flex items-center gap-1 bg-charcoal-800 rounded-lg p-1 border border-charcoal-700"><button class="px-2 py-1 text-xs font-medium rounded transition-colors text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-700" title="Export as JSON">JSON</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-700" title="Export as CSV">CSV</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-700" title="Export as Text">TXT</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-700" title="Export as Calendar (ICS)">📅 ICS</button></div></div></div>'),Wv=g('<div class="fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-opacity lg:flex lg:items-center lg:justify-center lg:p-4" role="dialog" aria-modal="true" aria-label="Coverage plan" tabindex="-1"><div class="fixed bottom-0 left-0 right-0 max-h-[90vh] lg:relative lg:max-w-3xl lg:max-h-[90vh] lg:rounded-lg border border-charcoal-700 lg:border-t bg-charcoal-800 lg:bg-charcoal-800 overflow-hidden flex flex-col transform transition-transform lg:transform-none" role="dialog" tabindex="-1"><div class="sticky top-0 bg-charcoal-700/50 lg:bg-charcoal-700/50 border-b border-charcoal-700 px-4 py-3 flex items-center justify-between z-10"><div class="absolute top-2 left-1/2 -translate-x-1/2 w-12 h-1 bg-charcoal-600 rounded-full lg:hidden"></div> <div class="flex-1 ml-auto lg:ml-0"><h3 class="text-base sm:text-lg font-semibold text-charcoal-50">My Coverage Plan</h3> <div class="flex items-center gap-3 mt-1 flex-wrap"><p class="text-xs text-charcoal-300"> <!> <!></p> <select id="coverage-status-filter-panel" class="px-2 py-1 text-xs rounded bg-charcoal-700 text-charcoal-200 border border-charcoal-600 focus:border-brand-500 focus:outline-none"><option>All Status</option><option>Uncovered</option><option>Planned</option><option>Covered</option></select></div></div> <!> <button type="button" class="text-charcoal-300 hover:text-charcoal-50 transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] lg:min-w-0 lg:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 lg:w-4 lg:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-4"><!></div> <!></div></div>');function Bv(l,o){Ft(o,!1);const a=P(),n=P(),c=P(),d=P(),h=P(),y=P(),f=P();let S=ye(o,"matches",8),p=ye(o,"onClose",8),m=P(),T=null,E=P(0),b=P("plan"),x=P("all"),_=P(null),O=P(0),k=P([]);function D(I){return(e(n).get(I)||[]).map(Y=>e(a).find(W=>W.MatchId===Y)).filter(Boolean)}Ia(()=>{if(e(m))return T=Or(I=>{I.direction==="down"&&I.distance>100&&p()(),v(E,0)},{onMove:(I,j)=>{j==="down"&&v(E,Math.min(I,200))},onCancel:()=>{v(E,0)}}),e(m).addEventListener("touchstart",T.handleTouchStart,{passive:!0}),e(m).addEventListener("touchmove",T.handleTouchMove,{passive:!0}),e(m).addEventListener("touchend",T.handleTouchEnd,{passive:!0}),e(m).addEventListener("touchcancel",T.handleTouchCancel,{passive:!0}),document.body.style.overflow="hidden",()=>{T&&(e(m).removeEventListener("touchstart",T.handleTouchStart),e(m).removeEventListener("touchmove",T.handleTouchMove),e(m).removeEventListener("touchend",T.handleTouchEnd),e(m).removeEventListener("touchcancel",T.handleTouchCancel),T.destroy()),document.body.style.overflow=""}}),Xa(()=>{document.body.style.overflow=""});function C(){e(d).length>0&&v(O,(e(O)+1)%e(d).length)}function G(){e(d).length>0&&v(O,(e(O)-1+e(d).length)%e(d).length)}function ce(I){return I.InvolvedTeam==="first"?I.SecondTeamText:I.InvolvedTeam==="second"?I.FirstTeamText:`${I.FirstTeamText} vs ${I.SecondTeamText}`}function X(){var re;const I={plan:{createdAt:new Date().toISOString(),totalMatches:e(a).length,totalCoverageTime:e(h),conflicts:e(d).length},matches:e(a).map(pe=>({MatchId:pe.MatchId,Date:Kt(pe.ScheduledStartDateTime),Time:lt(pe.ScheduledStartDateTime),Court:pe.CourtName,Team:nt(pe)||pe.Division.CodeAlias,Opponent:ce(pe),Division:pe.Division.CodeAlias,FirstTeam:pe.FirstTeamText,SecondTeam:pe.SecondTeamText,StartTime:new Date(pe.ScheduledStartDateTime).toISOString(),EndTime:new Date(pe.ScheduledEndDateTime).toISOString()}))},j=JSON.stringify(I,null,2),Y=new Blob([j],{type:"application/json"}),W=URL.createObjectURL(Y),q=document.createElement("a");q.href=W,q.download=`coverage-plan-${Kt(((re=e(a)[0])==null?void 0:re.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.json`,q.click(),URL.revokeObjectURL(W)}function se(){var pe;const I=["Date","Time","Court","Team","Opponent","Division","First Team","Second Team","Start Time","End Time"],j=e(a).map(Ee=>[Kt(Ee.ScheduledStartDateTime),lt(Ee.ScheduledStartDateTime),Ee.CourtName,nt(Ee)||Ee.Division.CodeAlias,ce(Ee),Ee.Division.CodeAlias,Ee.FirstTeamText,Ee.SecondTeamText,new Date(Ee.ScheduledStartDateTime).toISOString(),new Date(Ee.ScheduledEndDateTime).toISOString()]),Y=[I.join(","),...j.map(Ee=>Ee.map(We=>`"${We}"`).join(","))].join(`
`),W=new Blob([Y],{type:"text/csv"}),q=URL.createObjectURL(W),re=document.createElement("a");re.href=q,re.download=`coverage-plan-${Kt(((pe=e(a)[0])==null?void 0:pe.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.csv`,re.click(),URL.revokeObjectURL(q)}function oe(){var q;let I=`COVERAGE PLAN
`;I+=`${"=".repeat(50)}

`,I+=`Total Matches: ${e(a).length}
`,I+=`Total Coverage Time: ${Math.floor(e(h)/60)}h ${e(h)%60}m
`,e(d).length>0&&(I+=`Conflicts: ${e(d).length}
`),I+=`
`,e(f).forEach(re=>{const pe=e(y)[re];I+=`${re}
`,I+=`${"-".repeat(50)}
`,pe.forEach(Ee=>{const We=nt(Ee),Ve=ce(Ee);I+=`${lt(Ee.ScheduledStartDateTime)} | ${Ee.CourtName} | ${We||Ee.Division.CodeAlias} vs ${Ve}
`}),I+=`
`});const j=new Blob([I],{type:"text/plain"}),Y=URL.createObjectURL(j),W=document.createElement("a");W.href=Y,W.download=`coverage-plan-${Kt(((q=e(a)[0])==null?void 0:q.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.txt`,W.click(),URL.revokeObjectURL(Y)}function ve(){var q;const I=$d(e(a),nt,ce,"Coverage Plan"),j=new Blob([I],{type:"text/calendar;charset=utf-8"}),Y=URL.createObjectURL(j),W=document.createElement("a");W.href=Y,W.download=`coverage-plan-${Kt(((q=e(a)[0])==null?void 0:q.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.ics`,W.click(),URL.revokeObjectURL(Y)}async function H(){let I=`COVERAGE PLAN
`;I+=`${"=".repeat(50)}

`,I+=`Total Matches: ${e(a).length}
`,I+=`Total Coverage Time: ${Math.floor(e(h)/60)}h ${e(h)%60}m
`,e(d).length>0&&(I+=`Conflicts: ${e(d).length}
`),I+=`
`,e(f).forEach(j=>{const Y=e(y)[j];I+=`${j}
`,I+=`${"-".repeat(50)}
`,Y.forEach(W=>{const q=nt(W),re=ce(W);I+=`${lt(W.ScheduledStartDateTime)} | ${W.CourtName} | ${q||W.Division.CodeAlias} vs ${re}
`}),I+=`
`});try{await navigator.clipboard.writeText(I),alert("Coverage plan copied to clipboard!")}catch(j){console.error("Failed to copy to clipboard:",j),alert("Failed to copy to clipboard. Please try exporting instead.")}}de(()=>(M(S()),gt),()=>{if(S().length>0){const I=new Map,j=ha(Wt);S().forEach(Y=>{const W=nt(Y);if(!W)return;const q=I.get(W)||{total:0,inPlan:0};q.total++,j.has(Y.MatchId)&&q.inPlan++,I.set(W,q)}),I.forEach((Y,W)=>{gt.updateFromPlan(W,Y.inPlan,Y.total)})}}),de(()=>(M(S()),e(x),gt),()=>{v(a,(()=>{const I=ha(Wt);let j=S().filter(Y=>I.has(Y.MatchId)).sort((Y,W)=>Y.ScheduledStartDateTime-W.ScheduledStartDateTime);return e(x)!=="all"&&(j=j.filter(Y=>{const W=nt(Y);return W?gt.getTeamStatus(W)===e(x):!1})),j})())}),de(()=>e(a),()=>{v(n,cr(e(a)))}),de(()=>(M(S()),to),()=>{v(c,(()=>{const I=cr(S()),Y=ha(Wt),W=new Map;return S().forEach(q=>{const re=nt(q);re&&W.set(re,gt.getTeamStatus(re))}),to(S(),Y,I,W,nt,{preferUncovered:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:5})})())}),de(()=>(e(n),e(a)),()=>{v(d,(()=>{if(e(n).size===0)return[];const I=[],j=new Set;return e(a).forEach(Y=>{if(j.has(Y.MatchId))return;const W=e(n).get(Y.MatchId);if(!W||W.length===0)return;const q=[Y,...W.map(re=>e(a).find(pe=>pe.MatchId===re)).filter(Boolean)];q.forEach(re=>j.add(re.MatchId)),I.push({matches:q.sort((re,pe)=>re.ScheduledStartDateTime-pe.ScheduledStartDateTime),conflictCount:q.length})}),I})())}),de(()=>(e(d),e(O)),()=>{e(d).length>0&&e(O)>=e(d).length?v(O,0):e(d).length===0&&v(O,0)}),de(()=>(e(d),e(k),e(O)),()=>{e(d).length>0&&e(k)[e(O)]&&setTimeout(()=>{var I;(I=e(k)[e(O)])==null||I.scrollIntoView({behavior:"smooth",block:"center"})},100)}),de(()=>e(a),()=>{v(h,(()=>{if(e(a).length===0)return 0;const I=Math.min(...e(a).map(Y=>Y.ScheduledStartDateTime)),j=Math.max(...e(a).map(Y=>Y.ScheduledEndDateTime));return Math.floor((j-I)/6e4)})())}),de(()=>(e(a),Kt),()=>{v(y,(()=>{const I={};return e(a).forEach(j=>{const Y=Kt(j.ScheduledStartDateTime);I[Y]||(I[Y]=[]),I[Y].push(j)}),I})())}),de(()=>e(y),()=>{v(f,Object.keys(e(y)).sort((I,j)=>{const Y=new Date(I).getTime(),W=new Date(j).getTime();return Y-W}))}),Bt(),Rt();var V=Wv();V.__click=function(...I){var j;(j=p())==null||j.apply(this,I)},V.__keydown=I=>I.key==="Escape"&&p()();var L=r(V);L.__click=I=>I.stopPropagation(),L.__keydown=I=>I.stopPropagation();var J=r(L),B=s(r(J),2),ee=s(r(B),2),R=r(ee),he=r(R),be=s(he);{var $e=I=>{var j=ir();N(Y=>w(j,`• ${Y??""}h ${e(h)%60}m coverage`),[()=>(e(h),i(()=>Math.floor(e(h)/60)))]),u(I,j)};$(be,I=>{e(h)>0&&I($e)})}var Q=s(be,2);{var Te=I=>{var j=gv(),Y=r(j);t(j),N(()=>w(Y,`• ${e(d),i(()=>e(d).length)??""} conflict${e(d),i(()=>e(d).length!==1?"s":"")??""}`)),u(I,j)};$(Q,I=>{e(d),i(()=>e(d).length>0)&&I(Te)})}t(R);var K=s(R,2);K.__change=I=>v(x,I.target.value);var Z=r(K);Z.value=Z.__value="all";var ke=s(Z);ke.value=ke.__value="not-covered";var U=s(ke);U.value=U.__value="planned";var le=s(U);le.value=le.__value="covered",t(K);var me;ga(K),t(ee),t(B);var z=s(B,2);{var ge=I=>{var j=pv(),Y=r(j);Y.__click=()=>v(b,"plan");var W=s(Y,2);W.__click=()=>v(b,"analytics");var q=s(W,2);q.__click=()=>v(b,"stats");var re=s(q,2);re.__click=()=>v(b,"coordination"),t(j),N(()=>{Se(Y,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors whitespace-nowrap flex-shrink-0 min-h-[44px] lg:min-h-0 ${e(b)==="plan"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`),Se(W,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors whitespace-nowrap flex-shrink-0 min-h-[44px] lg:min-h-0 ${e(b)==="analytics"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`),Se(q,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors whitespace-nowrap flex-shrink-0 min-h-[44px] lg:min-h-0 ${e(b)==="stats"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`),Se(re,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors whitespace-nowrap flex-shrink-0 min-h-[44px] lg:min-h-0 ${e(b)==="coordination"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`)}),u(I,j)};$(z,I=>{e(a),i(()=>e(a).length>0)&&I(ge)})}var fe=s(z,2);fe.__click=function(...I){var j;(j=p())==null||j.apply(this,I)},t(J);var Ie=s(J,2),F=r(Ie);{var ne=I=>{var j=At(),Y=ct(j);{var W=re=>{var pe=bv();u(re,pe)},q=re=>{var pe=Rv(),Ee=r(pe);{var We=Me=>{var je=$v(),qe=r(je),pt=r(qe),Xe=s(r(pt),2),Je=r(Xe),dt=s(Je);{var Mt=mt=>{var bt=_v(),rt=r(bt);t(bt),N(()=>w(rt,`• Conflict ${e(O)+1} of ${e(d),i(()=>e(d).length)??""}`)),u(mt,bt)};$(dt,mt=>{e(d),i(()=>e(d).length>0)&&mt(Mt)})}t(Xe),t(pt);var it=s(pt,2),vt=r(it);{var Oe=mt=>{var bt=yv(),rt=ct(bt);rt.__click=G;var ut=s(rt,2);ut.__click=C,u(mt,bt)};$(vt,mt=>{e(d),i(()=>e(d).length>1)&&mt(Oe)})}var et=s(vt,2);et.__click=()=>{e(d).forEach(mt=>{mt.matches.slice(1).forEach(bt=>{Wt.deselectMatch(bt.MatchId)})})},t(it),t(qe);var ft=s(qe,2);tt(ft,5,()=>e(d),at,(mt,bt,rt)=>{var ut=Cv(),Lt=r(ut),Vt=r(Lt),ta=r(Vt);t(Vt);var Jt=s(Vt,2);{var Xt=St=>{var kt=wv();u(St,kt)};$(Jt,St=>{rt===e(O)&&St(Xt)})}t(Lt);var It=s(Lt,2);tt(It,5,()=>(e(bt),i(()=>e(bt).matches)),at,(St,kt,oa)=>{const aa=_e(()=>(M(nt),e(kt),i(()=>nt(e(kt))))),Ue=_e(()=>(e(kt),i(()=>D(e(kt).MatchId)))),Be=_e(()=>oa===0);var Ke=Mv(),Ct=r(Ke);{var De=ue=>{var Ne=Sv();u(ue,Ne)};$(Ct,ue=>{e(Be)&&ue(De)})}var Ae=s(Ct,2),Ce=r(Ae),He=r(Ce),Ye=r(He,!0);t(He);var ze=s(He,2),Ze=r(ze,!0);t(ze);var st=s(ze,2),ae=r(st,!0);t(st),t(Ce);var xe=s(Ce,2);{var Fe=ue=>{var Ne=Tv(),Pe=r(Ne);t(Ne),N(()=>w(Pe,`Conflicts with ${M(e(Ue)),i(()=>e(Ue).length)??""} other match${M(e(Ue)),i(()=>e(Ue).length!==1?"es":"")??""}`)),u(ue,Ne)};$(xe,ue=>{M(e(Ue)),i(()=>e(Ue).length>0)&&ue(Fe)})}t(Ae);var Ge=s(Ae,2);{var Re=ue=>{var Ne=kv();Ne.__click=()=>Wt.deselectMatch(e(kt).MatchId),u(ue,Ne)};$(Ge,ue=>{e(Be)||ue(Re)})}t(Ke),N(ue=>{Se(Ke,1,`flex items-center gap-2 px-2 py-1.5 rounded ${e(Be)?"bg-gold-500/10 border border-gold-500/30":"bg-charcoal-700/50"}`),w(Ye,ue),w(Ze,(e(kt),i(()=>e(kt).CourtName))),w(ae,(M(e(aa)),e(kt),i(()=>e(aa)||e(kt).Division.CodeAlias)))},[()=>(M(lt),e(kt),i(()=>lt(e(kt).ScheduledStartDateTime)))]),u(St,Ke)}),t(It),t(ut),Ga(ut,(St,kt)=>sn(k,e(k)[kt]=St),St=>{var kt;return(kt=e(k))==null?void 0:kt[St]},()=>[rt]),N(()=>{Se(ut,1,`border rounded p-3 transition-all ${rt===e(O)?"border-gold-500 bg-gold-500/5":"border-warning-500/30 bg-charcoal-800/50"}`),w(ta,`Conflict Group ${rt+1}: ${e(bt),i(()=>e(bt).conflictCount)??""} overlapping match${e(bt),i(()=>e(bt).conflictCount!==1?"es":"")??""}`)}),u(mt,ut)}),t(ft),t(je),N(()=>w(Je,`${e(d),i(()=>e(d).length)??""} conflict group${e(d),i(()=>e(d).length!==1?"s":"")??""} in your plan `)),u(Me,je)};$(Ee,Me=>{e(d),i(()=>e(d).length>0)&&Me(We)})}var Ve=s(Ee,2);{var Qe=Me=>{var je=Ev(),qe=r(je),pt=r(qe),Xe=s(r(pt),2),Je=r(Xe);t(Xe),t(pt),t(qe);var dt=s(qe,2);tt(dt,5,()=>e(c),at,(Mt,it)=>{const vt=_e(()=>(e(it),i(()=>e(it).match))),Oe=_e(()=>(M(nt),M(e(vt)),i(()=>nt(e(vt))))),et=_e(()=>(M(e(Oe)),M(gt),i(()=>e(Oe)?gt.getTeamStatus(e(Oe)):"not-covered")));var ft=Dv(),mt=r(ft),bt=r(mt),rt=r(bt),ut=r(rt,!0);t(rt);var Lt=s(rt,2),Vt=r(Lt,!0);t(Lt);var ta=s(Lt,2),Jt=r(ta,!0);t(ta);var Xt=s(ta,2);{var It=aa=>{var Ue=Iv();u(aa,Ue)};$(Xt,aa=>{e(et)==="not-covered"&&aa(It)})}t(bt);var St=s(bt,2),kt=r(St,!0);t(St),t(mt);var oa=s(mt,2);oa.__click=()=>Wt.selectMatch(e(vt).MatchId),t(ft),N(aa=>{w(ut,aa),w(Vt,(M(e(vt)),i(()=>e(vt).CourtName))),w(Jt,(M(e(Oe)),M(e(vt)),i(()=>e(Oe)||e(vt).Division.CodeAlias))),w(kt,(e(it),i(()=>e(it).reason)))},[()=>(M(lt),M(e(vt)),i(()=>lt(e(vt).ScheduledStartDateTime)))]),u(Mt,ft)}),t(dt),t(je),N(()=>w(Je,`${e(c),i(()=>e(c).length)??""} suggestion${e(c),i(()=>e(c).length!==1?"s":"")??""} (prioritizing uncovered teams)`)),u(Me,je)};$(Ve,Me=>{e(c),i(()=>e(c).length>0)&&Me(Qe)})}var we=s(Ve,2);tt(we,5,()=>e(f),at,(Me,je)=>{const qe=_e(()=>(e(y),e(je),i(()=>e(y)[e(je)])));var pt=jv(),Xe=r(pt),Je=r(Xe),dt=r(Je,!0);t(Je);var Mt=s(Je,2),it=r(Mt);t(Mt),t(Xe);var vt=s(Xe,2);tt(vt,1,()=>e(qe),at,(Oe,et)=>{const ft=_e(()=>(M(nt),e(et),i(()=>nt(e(et))))),mt=_e(()=>(e(et),i(()=>ce(e(et))))),bt=_e(()=>(e(n),e(et),i(()=>e(n).has(e(et).MatchId))));var rt=Fv(),ut=r(rt);ut.__click=()=>Wt.toggleMatch(e(et).MatchId);var Lt=r(ut);t(ut);var Vt=s(ut,2);{var ta=Ze=>{var st=Pv();u(Ze,st)};$(Vt,Ze=>{e(bt)&&Ze(ta)})}var Jt=s(Vt,2),Xt=r(Jt,!0);t(Jt);var It=s(Jt,2),St=r(It,!0);t(It);var kt=s(It,2),oa=r(kt),aa=r(oa),Ue=r(aa,!0);t(aa);var Be=s(aa,2);{var Ke=Ze=>{const st=_e(()=>(M(gt),M(e(ft)),i(()=>gt.getTeamStatus(e(ft)))));var ae=Ov();N(()=>{Se(ae,1,`w-2 h-2 rounded ${e(st)==="covered"?"bg-green-500":e(st)==="partially-covered"?"bg-[#f59e0b]":e(st)==="planned"?"bg-gold-500":"bg-[#808593]"}`),Tt(ae,"title",`Status: ${e(st)??""}`)}),u(Ze,ae)};$(Be,Ze=>{e(ft)&&Ze(Ke)})}t(oa);var Ct=s(oa,2),De=r(Ct);t(Ct),t(kt);var Ae=s(kt,2);{var Ce=Ze=>{var st=Av(),ae=r(st);ae.__click=Re=>{Re.stopPropagation(),v(_,e(_)===e(ft)?null:e(ft))};var xe=r(ae,!0);t(ae);var Fe=s(ae,2);{var Ge=Re=>{var ue=Nv(),Ne=ct(ue);Ne.__click=()=>v(_,null),Ne.__keydown=Le=>{(Le.key==="Enter"||Le.key===" ")&&v(_,null)};var Pe=s(Ne,2),ot=r(Pe);{let Le=_e(()=>(M(gt),M(e(ft)),i(()=>gt.getTeamStatus(e(ft)))));io(ot,{get teamId(){return e(ft)},get currentStatus(){return e(Le)},onStatusChange:yt=>{gt.setTeamStatus(e(ft),yt),v(_,null)},onClose:()=>v(_,null)})}t(Pe),u(Re,ue)};$(Fe,Re=>{e(_)===e(ft)&&Re(Ge)})}t(st),N(Re=>{Se(ae,1,`px-2 py-1 text-xs rounded transition-colors ${e(_)===e(ft)?"bg-gold-500 text-charcoal-950":"bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 hover:bg-charcoal-600 border border-charcoal-600"}`),w(xe,Re)},[()=>(M(gt),M(e(ft)),i(()=>(()=>{const Re=gt.getTeamStatus(e(ft));return Re==="covered"?"✓":Re==="partially-covered"?"◐":Re==="planned"?"📋":"○"})()))]),u(Ze,st)};$(Ae,Ze=>{e(ft)&&Ze(Ce)})}var He=s(Ae,2),Ye=r(He),ze=r(Ye,!0);t(Ye),t(He),t(rt),N(Ze=>{Se(rt,1,`flex items-center gap-3 px-3 py-2.5 rounded border ${e(bt)?"border-warning-500/50 bg-warning-500/10":"border-gold-500/50 bg-gold-500/5"}`),Se(ut,1,`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center hover:opacity-80 transition-colors ${e(bt)?"border-warning-500/50 bg-warning-500/20":"border-gold-500 bg-gold-500/20"}`),Se(Lt,0,`w-3 h-3 ${e(bt)?"text-warning-500":"text-[#facc15]"}`),w(Xt,Ze),w(St,(e(et),i(()=>e(et).CourtName))),w(Ue,(M(e(ft)),e(et),i(()=>e(ft)||e(et).Division.CodeAlias))),w(De,`vs ${e(mt)??""}`),ea(Ye,`background-color: ${e(et),i(()=>e(et).Division.ColorHex)??""}20; color: ${e(et),i(()=>e(et).Division.ColorHex)??""}; border: 1px solid ${e(et),i(()=>e(et).Division.ColorHex)??""}40;`),w(ze,(e(et),i(()=>e(et).Division.CodeAlias)))},[()=>(M(lt),e(et),i(()=>lt(e(et).ScheduledStartDateTime)))]),u(Oe,rt)}),t(pt),N(()=>{w(dt,e(je)),w(it,`(${M(e(qe)),i(()=>e(qe).length)??""} match${M(e(qe)),i(()=>e(qe).length!==1?"es":"")??""})`)}),u(Me,pt)}),t(we),t(pe),u(re,pe)};$(Y,re=>{e(a),i(()=>e(a).length===0)?re(W):re(q,!1)})}u(I,j)},te=I=>{var j=At(),Y=ct(j);{var W=re=>{Nd(re,{get matches(){return S()}})},q=re=>{var pe=At(),Ee=ct(pe);{var We=Qe=>{Wd(Qe,{get matches(){return S()}})},Ve=Qe=>{var we=Lv(),Me=r(we);Kd(Me,{});var je=s(Me,2);xv(je,{get matches(){return S()}}),t(we),u(Qe,we)};$(Ee,Qe=>{e(b)==="stats"?Qe(We):Qe(Ve,!1)},!0)}u(re,pe)};$(Y,re=>{e(b)==="analytics"?re(W):re(q,!1)},!0)}u(I,j)};$(F,I=>{e(b)==="plan"?I(ne):I(te,!1)})}t(Ie);var ie=s(Ie,2);{var A=I=>{var j=Uv(),Y=r(j),W=r(Y);W.__click=()=>{e(a).forEach(je=>{const qe=nt(je);qe&&gt.setTeamStatus(qe,"planned")}),alert("All matches marked as Planned")};var q=s(W,2);q.__click=()=>{e(a).forEach(je=>{const qe=nt(je);qe&&gt.setTeamStatus(qe,"covered")}),alert("All matches marked as Covered")};var re=s(q,2);re.__click=()=>Wt.clearPlan(),t(Y);var pe=s(Y,2),Ee=r(pe);Ee.__click=H;var We=s(Ee,2),Ve=r(We);Ve.__click=X;var Qe=s(Ve,2);Qe.__click=se;var we=s(Qe,2);we.__click=oe;var Me=s(we,2);Me.__click=ve,t(We),t(pe),t(j),u(I,j)};$(ie,I=>{e(a),e(b),i(()=>e(a).length>0&&e(b)==="plan")&&I(A)})}t(L),Ga(L,I=>v(m,I),()=>e(m)),t(V),N(()=>{ea(L,`transform: translateY(${e(E)??""}px); padding-bottom: env(safe-area-inset-bottom);`),w(he,`${e(a),i(()=>e(a).length)??""} match${e(a),i(()=>e(a).length!==1?"es":"")??""} selected `),me!==(me=e(x))&&(K.value=(K.__value=e(x))??"",fa(K,e(x)))}),u(l,V),jt()}Ht(["click","keydown","change"]);var Hv=g('<button class="px-3 py-1 text-xs font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Delete</button>'),Yv=g('<div class="mt-3 pt-3 border-t border-charcoal-700"><textarea placeholder="Add notes about this match..." class="w-full px-3 py-2 text-sm bg-charcoal-700 border border-charcoal-600 rounded text-charcoal-200 focus:border-[#eab308] focus:outline-none resize-none"></textarea> <div class="flex items-center gap-2 mt-2"><button class="px-3 py-1 text-xs font-medium rounded bg-gold-500 text-charcoal-950 hover:bg-[#facc15] transition-colors">Save</button> <!> <button class="px-3 py-1 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 transition-colors">Cancel</button></div></div>'),Vv=g('<div class="mt-3 pt-3 border-t border-charcoal-700"><div class="text-xs text-charcoal-300 mb-1">Note:</div> <div class="text-sm text-charcoal-200 whitespace-pre-wrap"> </div></div>'),Jv=g('<div class="px-4 py-3 rounded-lg border-2 border-[#eab308] bg-gold-500/10 transition-colors"><div class="flex items-start justify-between mb-2"><div class="flex-1"><div class="flex items-center justify-between mb-2"><div class="text-sm font-semibold text-charcoal-50"> </div> <div class="text-xs font-medium text-[#facc15]"> </div></div> <div class="text-base font-bold text-charcoal-50"> </div> <div class="text-xs text-charcoal-300 mt-1"> </div></div> <button> </button></div> <!></div>'),zv=g('<div><h3 class="text-sm font-semibold text-[#facc15] mb-3 uppercase tracking-wider">Live Now</h3> <div class="space-y-2"></div></div>'),Gv=g('<button class="px-3 py-1 text-xs font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Delete</button>'),qv=g('<div class="mt-3 pt-3 border-t border-charcoal-700"><textarea placeholder="Add notes about this match..." class="w-full px-3 py-2 text-sm bg-charcoal-700 border border-charcoal-600 rounded text-charcoal-200 focus:border-[#eab308] focus:outline-none resize-none"></textarea> <div class="flex items-center gap-2 mt-2"><button class="px-3 py-1 text-xs font-medium rounded bg-gold-500 text-charcoal-950 hover:bg-[#facc15] transition-colors">Save</button> <!> <button class="px-3 py-1 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 transition-colors">Cancel</button></div></div>'),Xv=g('<div class="mt-3 pt-3 border-t border-charcoal-700"><div class="text-xs text-charcoal-300 mb-1">Note:</div> <div class="text-sm text-charcoal-200 whitespace-pre-wrap"> </div></div>'),Qv=g('<div class="px-4 py-3 rounded-lg border border-charcoal-700 bg-charcoal-800 hover:border-charcoal-600 transition-colors"><div class="flex items-start justify-between mb-2"><div class="flex-1"><div class="flex items-center justify-between mb-2"><div class="text-sm font-semibold text-charcoal-50"> </div> <div class="text-xs font-medium text-[#facc15]"> </div></div> <div class="text-base font-bold text-charcoal-50"> </div> <div class="text-xs text-charcoal-300 mt-1"> </div></div> <button> </button></div> <!></div>'),Kv=g('<div><h3 class="text-sm font-semibold text-charcoal-50 mb-3 uppercase tracking-wider">Upcoming Matches</h3> <div class="space-y-2"></div></div>'),Zv=g('<button class="px-3 py-1 text-xs font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Delete</button>'),eu=g('<div class="mt-3 pt-3 border-t border-charcoal-700"><textarea placeholder="Add notes about this match..." class="w-full px-3 py-2 text-sm bg-charcoal-700 border border-charcoal-600 rounded text-charcoal-200 focus:border-[#eab308] focus:outline-none resize-none"></textarea> <div class="flex items-center gap-2 mt-2"><button class="px-3 py-1 text-xs font-medium rounded bg-gold-500 text-charcoal-950 hover:bg-[#facc15] transition-colors">Save</button> <!> <button class="px-3 py-1 text-xs font-medium rounded bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 transition-colors">Cancel</button></div></div>'),tu=g('<div class="mt-3 pt-3 border-t border-charcoal-700"><div class="text-xs text-charcoal-300 mb-1">Note:</div> <div class="text-sm text-charcoal-200 whitespace-pre-wrap"> </div></div>'),au=g('<div class="px-4 py-3 rounded-lg border border-charcoal-700 bg-charcoal-800/50 opacity-75 transition-colors"><div class="flex items-start justify-between mb-2"><div class="flex-1"><div class="flex items-center justify-between mb-2"><div class="text-xs font-semibold text-charcoal-50"> </div> <div class="text-xs font-medium text-[#facc15]"> </div></div> <div class="text-sm font-bold text-charcoal-50"> </div> <div class="text-xs text-charcoal-300 mt-1"> </div></div> <button> </button></div> <!></div>'),ru=g('<div><h3 class="text-sm font-semibold text-charcoal-300 mb-3 uppercase tracking-wider">Match History</h3> <div class="space-y-2"></div></div>'),ou=g('<div class="text-center py-12 text-charcoal-300 text-sm"> </div>'),nu=g('<div class="space-y-6"><div class="border-b border-charcoal-700 pb-4"><h2 class="text-xl font-bold text-charcoal-50"> </h2> <div class="text-sm text-charcoal-300 mt-1"> </div></div> <!> <!> <!> <!></div>');function su(l,o){Ft(o,!1);const a=P(),n=P(),c=P(),d=P();let h=ye(o,"matches",8),y=ye(o,"teamId",8),f=ye(o,"teamName",8),S=ye(o,"eventId",8,"");const p=Uo(S());let m=P(null),T=P("");const E=Date.now();function b(R){return R.InvolvedTeam==="first"?R.SecondTeamText:R.InvolvedTeam==="second"?R.FirstTeamText:`${R.FirstTeamText} vs ${R.SecondTeamText}`}function x(R){v(m,R),v(T,p.getNote(R))}function _(R){p.setNote(R,e(T)),v(m,null),v(T,"")}function O(){v(m,null),v(T,"")}function k(R){p.deleteNote(R),v(m,null)}de(()=>(M(h()),M(y())),()=>{v(a,h().filter(R=>nt(R)===y()).sort((R,he)=>R.ScheduledStartDateTime-he.ScheduledStartDateTime))}),de(()=>e(a),()=>{v(n,e(a).filter(R=>R.ScheduledEndDateTime<E))}),de(()=>e(a),()=>{v(c,e(a).filter(R=>R.ScheduledStartDateTime<=E&&R.ScheduledEndDateTime>=E))}),de(()=>e(a),()=>{v(d,e(a).filter(R=>R.ScheduledStartDateTime>E))}),Bt(),Rt();var D=nu(),C=r(D),G=r(C),ce=r(G,!0);t(G);var X=s(G,2),se=r(X);t(X),t(C);var oe=s(C,2);{var ve=R=>{var he=zv(),be=s(r(he),2);tt(be,5,()=>e(c),at,($e,Q)=>{const Te=_e(()=>(e(Q),i(()=>p.hasNote(e(Q).MatchId)))),K=_e(()=>(e(m),e(Q),i(()=>e(m)===e(Q).MatchId))),Z=_e(()=>(e(Q),i(()=>p.getNote(e(Q).MatchId))));var ke=Jv(),U=r(ke),le=r(U),me=r(le),z=r(me),ge=r(z,!0);t(z);var fe=s(z,2),Ie=r(fe,!0);t(fe),t(me);var F=s(me,2),ne=r(F);t(F);var te=s(F,2),ie=r(te,!0);t(te),t(le);var A=s(le,2);A.__click=()=>e(K)?O():x(e(Q).MatchId);var I=r(A,!0);t(A),t(U);var j=s(U,2);{var Y=q=>{var re=Yv(),pe=r(re);za(pe),Tt(pe,"rows",3);var Ee=s(pe,2),We=r(Ee);We.__click=()=>_(e(Q).MatchId);var Ve=s(We,2);{var Qe=Me=>{var je=Hv();je.__click=()=>k(e(Q).MatchId),u(Me,je)};$(Ve,Me=>{e(Te)&&Me(Qe)})}var we=s(Ve,2);we.__click=O,t(Ee),t(re),ka(pe,()=>e(T),Me=>v(T,Me)),u(q,re)},W=q=>{var re=At(),pe=ct(re);{var Ee=We=>{var Ve=Vv(),Qe=s(r(Ve),2),we=r(Qe,!0);t(Qe),t(Ve),N(()=>w(we,e(Z))),u(We,Ve)};$(pe,We=>{e(Te)&&We(Ee)},!0)}u(q,re)};$(j,q=>{e(K)?q(Y):q(W,!1)})}t(ke),N((q,re)=>{w(ge,q),w(Ie,(e(Q),i(()=>e(Q).CourtName))),w(ne,`vs ${re??""}`),w(ie,(e(Q),i(()=>e(Q).Division.CodeAlias))),Se(A,1,`ml-2 px-2 py-1 text-xs rounded transition-colors flex-shrink-0 ${e(Te)||e(K)?"bg-gold-500 text-charcoal-950 hover:bg-[#facc15]":"bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 border border-charcoal-600"}`),Tt(A,"title",e(Te)?"Edit note":"Add note"),w(I,e(Te)?"📝":"📄")},[()=>(M(lt),e(Q),i(()=>lt(e(Q).ScheduledStartDateTime))),()=>(e(Q),i(()=>b(e(Q))))]),u($e,ke)}),t(be),t(he),u(R,he)};$(oe,R=>{e(c),i(()=>e(c).length>0)&&R(ve)})}var H=s(oe,2);{var V=R=>{var he=Kv(),be=s(r(he),2);tt(be,5,()=>e(d),at,($e,Q)=>{const Te=_e(()=>(e(Q),i(()=>p.hasNote(e(Q).MatchId)))),K=_e(()=>(e(m),e(Q),i(()=>e(m)===e(Q).MatchId))),Z=_e(()=>(e(Q),i(()=>p.getNote(e(Q).MatchId))));var ke=Qv(),U=r(ke),le=r(U),me=r(le),z=r(me),ge=r(z,!0);t(z);var fe=s(z,2),Ie=r(fe,!0);t(fe),t(me);var F=s(me,2),ne=r(F);t(F);var te=s(F,2),ie=r(te,!0);t(te),t(le);var A=s(le,2);A.__click=()=>e(K)?O():x(e(Q).MatchId);var I=r(A,!0);t(A),t(U);var j=s(U,2);{var Y=q=>{var re=qv(),pe=r(re);za(pe),Tt(pe,"rows",3);var Ee=s(pe,2),We=r(Ee);We.__click=()=>_(e(Q).MatchId);var Ve=s(We,2);{var Qe=Me=>{var je=Gv();je.__click=()=>k(e(Q).MatchId),u(Me,je)};$(Ve,Me=>{e(Te)&&Me(Qe)})}var we=s(Ve,2);we.__click=O,t(Ee),t(re),ka(pe,()=>e(T),Me=>v(T,Me)),u(q,re)},W=q=>{var re=At(),pe=ct(re);{var Ee=We=>{var Ve=Xv(),Qe=s(r(Ve),2),we=r(Qe,!0);t(Qe),t(Ve),N(()=>w(we,e(Z))),u(We,Ve)};$(pe,We=>{e(Te)&&We(Ee)},!0)}u(q,re)};$(j,q=>{e(K)?q(Y):q(W,!1)})}t(ke),N((q,re)=>{w(ge,q),w(Ie,(e(Q),i(()=>e(Q).CourtName))),w(ne,`vs ${re??""}`),w(ie,(e(Q),i(()=>e(Q).Division.CodeAlias))),Se(A,1,`ml-2 px-2 py-1 text-xs rounded transition-colors flex-shrink-0 ${e(Te)||e(K)?"bg-gold-500 text-charcoal-950 hover:bg-[#facc15]":"bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 border border-charcoal-600"}`),Tt(A,"title",e(Te)?"Edit note":"Add note"),w(I,e(Te)?"📝":"📄")},[()=>(M(lt),e(Q),i(()=>lt(e(Q).ScheduledStartDateTime))),()=>(e(Q),i(()=>b(e(Q))))]),u($e,ke)}),t(be),t(he),u(R,he)};$(H,R=>{e(d),i(()=>e(d).length>0)&&R(V)})}var L=s(H,2);{var J=R=>{var he=ru(),be=s(r(he),2);tt(be,5,()=>e(n),at,($e,Q)=>{const Te=_e(()=>(e(Q),i(()=>p.hasNote(e(Q).MatchId)))),K=_e(()=>(e(m),e(Q),i(()=>e(m)===e(Q).MatchId))),Z=_e(()=>(e(Q),i(()=>p.getNote(e(Q).MatchId))));var ke=au(),U=r(ke),le=r(U),me=r(le),z=r(me),ge=r(z);t(z);var fe=s(z,2),Ie=r(fe,!0);t(fe),t(me);var F=s(me,2),ne=r(F);t(F);var te=s(F,2),ie=r(te,!0);t(te),t(le);var A=s(le,2);A.__click=()=>e(K)?O():x(e(Q).MatchId);var I=r(A,!0);t(A),t(U);var j=s(U,2);{var Y=q=>{var re=eu(),pe=r(re);za(pe),Tt(pe,"rows",3);var Ee=s(pe,2),We=r(Ee);We.__click=()=>_(e(Q).MatchId);var Ve=s(We,2);{var Qe=Me=>{var je=Zv();je.__click=()=>k(e(Q).MatchId),u(Me,je)};$(Ve,Me=>{e(Te)&&Me(Qe)})}var we=s(Ve,2);we.__click=O,t(Ee),t(re),ka(pe,()=>e(T),Me=>v(T,Me)),u(q,re)},W=q=>{var re=At(),pe=ct(re);{var Ee=We=>{var Ve=tu(),Qe=s(r(Ve),2),we=r(Qe,!0);t(Qe),t(Ve),N(()=>w(we,e(Z))),u(We,Ve)};$(pe,We=>{e(Te)&&We(Ee)},!0)}u(q,re)};$(j,q=>{e(K)?q(Y):q(W,!1)})}t(ke),N((q,re,pe)=>{w(ge,`${q??""} • ${re??""}`),w(Ie,(e(Q),i(()=>e(Q).CourtName))),w(ne,`vs ${pe??""}`),w(ie,(e(Q),i(()=>e(Q).Division.CodeAlias))),Se(A,1,`ml-2 px-2 py-1 text-xs rounded transition-colors flex-shrink-0 ${e(Te)||e(K)?"bg-gold-500 text-charcoal-950 hover:bg-[#facc15]":"bg-charcoal-700 text-charcoal-200 hover:bg-charcoal-600 border border-charcoal-600"}`),Tt(A,"title",e(Te)?"Edit note":"Add note"),w(I,e(Te)?"📝":"📄")},[()=>(M(Kt),e(Q),i(()=>Kt(e(Q).ScheduledStartDateTime))),()=>(M(lt),e(Q),i(()=>lt(e(Q).ScheduledStartDateTime))),()=>(e(Q),i(()=>b(e(Q))))]),u($e,ke)}),t(be),t(he),u(R,he)};$(L,R=>{e(n),i(()=>e(n).length>0)&&R(J)})}var B=s(L,2);{var ee=R=>{var he=ou(),be=r(he);t(he),N(()=>w(be,`No matches found for ${f()??""}`)),u(R,he)};$(B,R=>{e(a),i(()=>e(a).length===0)&&R(ee)})}t(D),N(()=>{w(ce,f()),w(se,`${e(a),i(()=>e(a).length)??""} total match${e(a),i(()=>e(a).length!==1?"es":"")??""}`)}),u(l,D),jt()}Ht(["click"]);var lu=g('<div class="px-4 py-3 rounded-lg border border-charcoal-600 bg-charcoal-700/30"><div class="flex items-center justify-between mb-2"><div class="text-sm font-semibold text-charcoal-50"> </div> <div class="text-xs font-medium text-charcoal-300"> </div></div> <div class="text-sm text-charcoal-200"> </div> <div class="text-xs text-charcoal-300 mt-1"> </div></div>'),iu=g('<div><h3 class="text-sm font-semibold text-charcoal-300 mb-2 uppercase tracking-wider"> </h3> <div class="space-y-2"></div></div>'),cu=g('<div class="space-y-4"></div>'),du=g('<div class="text-center py-12 text-charcoal-300 text-sm"> <div class="text-xs text-charcoal-400 mt-2">Work assignments will appear here when assigned by tournament officials.</div></div>'),vu=g('<div class="space-y-6"><div class="border-b border-charcoal-700 pb-4"><h2 class="text-xl font-bold text-charcoal-50">Work Assignments</h2> <div class="text-sm text-charcoal-300 mt-1"> </div></div> <!></div>');function uu(l,o){Ft(o,!1);const a=P(),n=P(),c=P();let d=ye(o,"matches",8),h=ye(o,"teamId",8),y=ye(o,"teamName",8);de(()=>(M(d()),M(h())),()=>{v(a,d().filter(x=>(nt(x)===h(),!1)).sort((x,_)=>x.ScheduledStartDateTime-_.ScheduledStartDateTime))}),de(()=>(e(a),Kt),()=>{v(n,(()=>{const x={};return e(a).forEach(_=>{const O=Kt(_.ScheduledStartDateTime);x[O]||(x[O]=[]),x[O].push(_)}),x})())}),de(()=>e(n),()=>{v(c,Object.keys(e(n)).sort())}),Bt(),Rt();var f=vu(),S=r(f),p=s(r(S),2),m=r(p);t(p),t(S);var T=s(S,2);{var E=x=>{var _=cu();tt(_,5,()=>e(c),at,(O,k)=>{var D=iu(),C=r(D),G=r(C,!0);t(C);var ce=s(C,2);tt(ce,5,()=>(e(n),e(k),i(()=>e(n)[e(k)])),at,(X,se)=>{var oe=lu(),ve=r(oe),H=r(ve),V=r(H,!0);t(H);var L=s(H,2),J=r(L,!0);t(L),t(ve);var B=s(ve,2),ee=r(B);t(B);var R=s(B,2),he=r(R);t(R),t(oe),N(be=>{w(V,be),w(J,(e(se),i(()=>e(se).CourtName))),w(ee,`${e(se),i(()=>e(se).FirstTeamText)??""} vs ${e(se),i(()=>e(se).SecondTeamText)??""}`),w(he,`${e(se),i(()=>e(se).Division.CodeAlias)??""} • Work Assignment`)},[()=>(M(lt),e(se),i(()=>lt(e(se).ScheduledStartDateTime)))]),u(X,oe)}),t(ce),t(D),N(()=>w(G,e(k))),u(O,D)}),t(_),u(x,_)},b=x=>{var _=du(),O=r(_);pa(),t(_),N(()=>w(O,`No work assignments found for ${y()??""} `)),u(x,_)};$(T,x=>{e(a),i(()=>e(a).length>0)?x(E):x(b,!1)})}t(f),N(()=>w(m,`${y()??""} • ${e(a),i(()=>e(a).length)??""} assignment${e(a),i(()=>e(a).length!==1?"s":"")??""}`)),u(l,f),jt()}var hu=g('<span class="ml-2 text-[10px] opacity-75"> </span>'),fu=g("<button> <!></button>"),mu=g('<div class="border-b border-charcoal-700 pb-4"><div class="flex items-center gap-2 flex-wrap"><span class="text-xs text-charcoal-300 uppercase tracking-wider">Select Team:</span> <!></div></div>'),xu=g('<div class="text-center py-12 text-charcoal-300 text-sm">Select a team to view matches and work assignments</div>'),gu=g('<div class="space-y-4"><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-xl font-bold text-charcoal-50">Coach View</h1> <p class="text-sm text-charcoal-300 mt-1">View matches and work assignments by team</p></div> <div class="flex items-center gap-2 bg-charcoal-700 rounded-lg p-1"><button>Matches</button> <button>Work Assignments</button></div></div> <!> <!> <!></div>');function pu(l,o){Ft(o,!1);const a=P(),n=P(),c=P(),d=P();let h=ye(o,"matches",8),y=ye(o,"eventId",8),f=ye(o,"clubId",8),S=P(null),p=P(null),m=P("matches");function T(oe){var H;v(S,oe);const ve=(H=e(n)[oe])==null?void 0:H[0];ve&&v(p,ve)}de(()=>M(h()),()=>{v(a,fr(h()))}),de(()=>(M(h()),nt),()=>{v(n,(()=>{const oe={};return h().forEach(ve=>{const H=nt(ve);H&&(oe[H]||(oe[H]=[]),oe[H].push(ve))}),oe})())}),de(()=>(e(S),e(n)),()=>{v(c,e(S)?e(n)[e(S)]||[]:[])}),de(()=>(e(a),e(n)),()=>{v(d,[...e(a)].sort((oe,ve)=>{var L,J;const H=((L=e(n)[oe])==null?void 0:L.length)||0;return(((J=e(n)[ve])==null?void 0:J.length)||0)-H}))}),Bt(),Rt();var E=gu(),b=r(E),x=s(r(b),2),_=r(x);_.__click=()=>v(m,"matches");var O=s(_,2);O.__click=()=>v(m,"work"),t(x),t(b);var k=s(b,2);{var D=oe=>{var ve=mu(),H=r(ve),V=s(r(H),2);tt(V,1,()=>e(d),at,(L,J)=>{var B=fu();B.__click=()=>T(e(J));var ee=r(B),R=s(ee);{var he=be=>{var $e=hu(),Q=r($e);t($e),N(()=>w(Q,`(${e(n),e(J),i(()=>e(n)[e(J)].length)??""})`)),u(be,$e)};$(R,be=>{e(n),e(J),i(()=>e(n)[e(J)])&&be(he)})}t(B),N(()=>{Se(B,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(S)===e(J)?"bg-gold-500 text-charcoal-950":"bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 border border-charcoal-600"}`),w(ee,`${e(J)??""} `)}),u(L,B)}),t(H),t(ve),u(oe,ve)};$(k,oe=>{e(a),i(()=>e(a).length>0)&&oe(D)})}var C=s(k,2);{var G=oe=>{var ve=At(),H=ct(ve);{var V=J=>{su(J,{get matches(){return h()},teamId,get teamName(){return e(S)},get eventId(){return y()}})},L=J=>{uu(J,{get matches(){return h()},teamId,get teamName(){return e(S)}})};$(H,J=>{e(m)==="matches"?J(V):J(L,!1)})}u(oe,ve)},ce=oe=>{var ve=xu();u(oe,ve)};$(C,oe=>{e(S)?oe(G):oe(ce,!1)})}var X=s(C,2);{var se=oe=>{lo(oe,{get match(){return e(p)},get eventId(){return y()},get clubId(){return f()},onClose:()=>v(p,null),get matches(){return h()}})};$(X,oe=>{e(p)&&oe(se)})}t(E),N(()=>{Se(_,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(m)==="matches"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`),Se(O,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(m)==="work"?"bg-gold-500 text-charcoal-950":"text-charcoal-200 hover:text-charcoal-50"}`)}),u(l,E),jt()}Ht(["click"]);var bu=g('<h2 class="text-sm font-semibold text-charcoal-50">Filters</h2>'),_u=g('<div class="w-6 h-6 flex items-center justify-center"><span class="text-lg" role="img" aria-label="Filters">🎯</span></div>'),yu=g("<option> </option>"),wu=g("<option> </option>"),Su=g('<button class="w-full px-3 py-2 rounded-lg text-sm font-medium transition-colors" style="background-color: #252529; color: #a1a1a6; border: 1px solid #2a2a2f;"> </button>'),Tu=g('<div class="flex-1 overflow-y-auto p-4 space-y-3"><div class="pb-3 border-b border-charcoal-900"><label for="wave-filter-sidebar" class="block text-xs font-medium mb-2 text-left text-charcoal-300">Session Time <span class="block text-[10px] font-normal text-charcoal-400 mt-0.5">Filter by morning or afternoon matches</span></label> <div class="flex gap-2"><button aria-label="Show all matches">All</button> <button aria-label="Show morning matches only">AM</button> <button aria-label="Show afternoon matches only">PM</button></div></div> <div class="pb-3 border-b border-charcoal-900"><label for="sidebar-division" class="block text-xs font-medium mb-2 text-left text-charcoal-300">Division</label> <select id="sidebar-division" class="w-full px-3 py-2 rounded-lg text-sm focus:border-gold-500 focus:outline-none text-left bg-surface-200 text-charcoal-50 border border-charcoal-900" aria-label="Filter matches by division"><option>All Divisions</option><!></select></div> <div class="pb-3 border-b border-charcoal-900"><label for="sidebar-team" class="block text-xs font-medium mb-2 text-left text-charcoal-300">Team</label> <select id="sidebar-team" class="w-full px-3 py-2 rounded-lg text-sm focus:border-gold-500 focus:outline-none text-left bg-surface-200 text-charcoal-50 border border-charcoal-900" aria-label="Filter matches by team"><option>All Teams</option><!></select></div> <!></div>'),ku=g('<div class="w-12 h-12 flex items-center justify-center rounded-lg" style="background-color: #252529;"><span class="text-xs font-medium" style="color: #eab308;"> </span></div>'),Mu=g('<div class="flex-1 overflow-y-auto p-2 space-y-2"><button class="w-12 h-12 flex items-center justify-center rounded-lg transition-colors" style="background-color: #252529; color: #a1a1a6;" title="Toggle Wave">🌊</button> <!></div>'),Cu=g('<div class="p-3 rounded-lg border" style="background-color: #252529; border-color: #2a2a2f;"><div class="text-xs mb-1" style="color: #6e6e73;">Conflicts</div> <div class="text-xl font-bold text-warning-500"> </div></div>'),$u=g('<h3 class="text-xs font-semibold mb-3" style="color: #a1a1a6;">Quick Stats</h3> <div class="space-y-3"><div class="p-3 rounded-lg border" style="background-color: #252529; border-color: #2a2a2f;"><div class="text-xs mb-1" style="color: #6e6e73;">Total Matches</div> <div class="text-xl font-bold" style="color: #f5f5f7;"> </div></div> <!></div>',1),Iu=g('<div class="w-12 h-12 flex flex-col items-center justify-center rounded-lg" style="background-color: #252529;"><span class="text-xs font-medium text-warning-500"> </span> <span class="text-xs" style="color: #6e6e73;">⚠️</span></div>'),Du=g('<div class="space-y-2"><div class="w-12 h-12 flex flex-col items-center justify-center rounded-lg" style="background-color: #252529;"><span class="text-xs font-medium" style="color: #f5f5f7;"> </span> <span class="text-xs" style="color: #6e6e73;">📊</span></div> <!></div>'),Eu=g('<aside style="max-width: 250px;"><div class="flex items-center justify-between p-4 border-b border-charcoal-900"><!> <button class="w-8 h-8 flex items-center justify-center rounded-lg transition-colors text-charcoal-300 bg-surface-200"><!></button></div> <!> <div class="p-4 border-t" style="border-color: #2a2a2f;"><!></div></aside>');function Pu(l,o){Ft(o,!1);const a=()=>Zt(Oa,"$filters",n),[n,c]=Pa(),d=P(),h=P(),y=P(),f=P();let S=ye(o,"matches",8),p=ye(o,"collapsed",8,!1),m=ye(o,"onToggle",8);de(()=>M(S()),()=>{v(d,qa(S()))}),de(()=>M(S()),()=>{v(h,fr(S()))}),de(()=>M(S()),()=>{v(y,(()=>{const L=new Map;return S().forEach((J,B)=>{S().slice(B+1).forEach(ee=>{J.ScheduledStartDateTime<ee.ScheduledEndDateTime&&J.ScheduledEndDateTime>ee.ScheduledStartDateTime&&(L.has(J.MatchId)||L.set(J.MatchId,[]),L.get(J.MatchId).push(ee.MatchId))})}),S().filter(J=>L.has(J.MatchId)).length})())}),de(()=>a(),()=>{v(f,(()=>{let L=0;return a().wave!=="all"&&L++,a().division&&L++,a().teams.length>0&&L++,a().priority&&a().priority!=="all"&&L++,a().coverageStatus&&a().coverageStatus!=="all"&&L++,L})())}),Bt(),Rt();var T=Eu();let E;var b=r(T),x=r(b);{var _=L=>{var J=bu();u(L,J)},O=L=>{var J=_u();u(L,J)};$(x,L=>{p()?L(O,!1):L(_)})}var k=s(x,2);k.__click=function(...L){var J;(J=m())==null||J.apply(this,L)};var D=r(k);{var C=L=>{var J=ir("→");u(L,J)},G=L=>{var J=ir("←");u(L,J)};$(D,L=>{p()?L(C):L(G,!1)})}t(k),t(b);var ce=s(b,2);{var X=L=>{var J=Tu(),B=r(J),ee=s(r(B),2),R=r(ee);R.__click=()=>Et("wave","all");var he=s(R,2);he.__click=()=>Et("wave","morning");var be=s(he,2);be.__click=()=>Et("wave","afternoon"),t(ee),t(B);var $e=s(B,2),Q=s(r($e),2);Q.__change=Ie=>Et("division",Ie.target.value||null);var Te=r(Q);Te.value=Te.__value="";var K=s(Te);tt(K,1,()=>e(d),at,(Ie,F)=>{var ne=yu(),te=r(ne,!0);t(ne);var ie={};N(()=>{w(te,e(F)),ie!==(ie=e(F))&&(ne.value=(ne.__value=e(F))??"")}),u(Ie,ne)}),t(Q);var Z;ga(Q),t($e);var ke=s($e,2),U=s(r(ke),2);U.__change=Ie=>Et("teams",Ie.target.value?[Ie.target.value]:[]);var le=r(U);le.value=le.__value="";var me=s(le);tt(me,1,()=>e(h),at,(Ie,F)=>{var ne=wu(),te=r(ne,!0);t(ne);var ie={};N(()=>{w(te,e(F)),ie!==(ie=e(F))&&(ne.value=(ne.__value=e(F))??"")}),u(Ie,ne)}),t(U);var z;ga(U),t(ke);var ge=s(ke,2);{var fe=Ie=>{var F=Su();F.__click=()=>lr();var ne=r(F);t(F),N(()=>w(ne,`Clear Filters (${e(f)??""})`)),u(Ie,F)};$(ge,Ie=>{e(f)>0&&Ie(fe)})}t(J),N(()=>{Se(R,1,`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a(),i(()=>a().wave==="all"?"bg-gold-500 text-charcoal-950":"bg-surface-200 text-charcoal-300 hover:text-charcoal-50 border border-charcoal-900")??""}`),Se(he,1,`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a(),i(()=>a().wave==="morning"?"bg-gold-500 text-charcoal-950":"bg-surface-200 text-charcoal-300 hover:text-charcoal-50 border border-charcoal-900")??""}`),Se(be,1,`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a(),i(()=>a().wave==="afternoon"?"bg-gold-500 text-charcoal-950":"bg-surface-200 text-charcoal-300 hover:text-charcoal-50 border border-charcoal-900")??""}`),Z!==(Z=(a(),i(()=>a().division||"")))&&(Q.value=(Q.__value=(a(),i(()=>a().division||"")))??"",fa(Q,(a(),i(()=>a().division||"")))),z!==(z=(a(),i(()=>a().teams[0]||"")))&&(U.value=(U.__value=(a(),i(()=>a().teams[0]||"")))??"",fa(U,(a(),i(()=>a().teams[0]||""))))}),u(L,J)},se=L=>{var J=Mu(),B=r(J);B.__click=()=>Et("wave",a().wave==="morning"?"afternoon":"morning");var ee=s(B,2);{var R=he=>{var be=ku(),$e=r(be),Q=r($e,!0);t($e),t(be),N(()=>w(Q,e(f))),u(he,be)};$(ee,he=>{e(f)>0&&he(R)})}t(J),u(L,J)};$(ce,L=>{p()?L(se,!1):L(X)})}var oe=s(ce,2),ve=r(oe);{var H=L=>{var J=$u(),B=s(ct(J),2),ee=r(B),R=s(r(ee),2),he=r(R,!0);t(R),t(ee);var be=s(ee,2);{var $e=Q=>{var Te=Cu(),K=s(r(Te),2),Z=r(K,!0);t(K),t(Te),N(()=>w(Z,e(y))),u(Q,Te)};$(be,Q=>{e(y)>0&&Q($e)})}t(B),N(()=>w(he,(M(S()),i(()=>S().length)))),u(L,J)},V=L=>{var J=Du(),B=r(J),ee=r(B),R=r(ee,!0);t(ee),pa(2),t(B);var he=s(B,2);{var be=$e=>{var Q=Iu(),Te=r(Q),K=r(Te,!0);t(Te),pa(2),t(Q),N(()=>w(K,e(y))),u($e,Q)};$(he,$e=>{e(y)>0&&$e(be)})}t(J),N(()=>w(R,(M(S()),i(()=>S().length)))),u(L,J)};$(ve,L=>{p()?L(V,!1):L(H)})}t(oe),t(T),N(()=>{E=Se(T,1,"hidden lg:flex flex-col h-[calc(100vh-64px)] border-r transition-all duration-300 overflow-hidden bg-surface-100 border-charcoal-900",null,E,{"w-64":!p(),"w-16":p()}),Tt(k,"aria-label",p()?"Expand sidebar":"Collapse sidebar"),Tt(k,"title",p()?"Expand sidebar":"Collapse sidebar")}),u(l,T),jt(),c()}Ht(["click","change"]);var Ou=g('<span class="ml-1 text-warning-500"> </span>'),Nu=g('<span class="text-xs whitespace-nowrap text-charcoal-300"> <!></span>'),Au=g('<span class="ml-2 text-warning-500"> </span>'),Fu=g('<span class="text-xs whitespace-nowrap text-charcoal-300"> <!></span>'),ju=g('<div class="text-xs text-charcoal-300 truncate"> </div>'),Ru=g('<header style="backdrop-filter: blur(10px); background-color: rgba(24, 24, 27, 0.95);"><div class="px-4 py-3"><div><div class="flex items-center gap-2 min-w-0 flex-1"><h1 class="text-base font-semibold truncate text-charcoal-50">630 Volleyball</h1> <!></div> <button type="button" class="w-10 h-10 flex items-center justify-center rounded-lg transition-colors text-charcoal-300 bg-charcoal-900 hover:bg-charcoal-800 min-h-[44px]"><span class="text-lg"> </span></button></div> <div><div class="flex items-center justify-between gap-2"><div class="flex items-center gap-2 min-w-0 flex-1"><h1 class="text-base font-semibold truncate text-charcoal-50">630 Volleyball Coverage</h1> <!></div> <button type="button" class="w-10 h-10 flex items-center justify-center rounded-lg transition-colors text-charcoal-300 bg-charcoal-900 hover:bg-charcoal-800 min-h-[44px]" aria-label="Collapse header"><span class="text-lg">▲</span></button></div> <!></div></div></header>');function Lu(l,o){let a=ye(o,"eventName",8,null),n=ye(o,"matchCount",8,0),c=ye(o,"conflictCount",8,0),d=ye(o,"collapsed",8,!0),h=ye(o,"onToggle",8);var y=Ru();let f;var S=r(y),p=r(S);let m;var T=r(p),E=s(r(T),2);{var b=H=>{var V=Nu(),L=r(V),J=s(L);{var B=ee=>{var R=Ou(),he=r(R);t(R),N(()=>w(he,`• ${c()??""}`)),u(ee,R)};$(J,ee=>{c()>0&&ee(B)})}t(V),N(()=>w(L,`${n()??""} `)),u(H,V)};$(E,H=>{n()>0&&H(b)})}t(T);var x=s(T,2);x.__click=function(...H){var V;(V=h())==null||V.apply(this,H)};var _=r(x),O=r(_,!0);t(_),t(x),t(p);var k=s(p,2);let D;var C=r(k),G=r(C),ce=s(r(G),2);{var X=H=>{var V=Fu(),L=r(V),J=s(L);{var B=ee=>{var R=Au(),he=r(R);t(R),N(()=>w(he,`• ${c()??""} conflicts`)),u(ee,R)};$(J,ee=>{c()>0&&ee(B)})}t(V),N(()=>w(L,`${n()??""} matches `)),u(H,V)};$(ce,H=>{n()>0&&H(X)})}t(G);var se=s(G,2);se.__click=function(...H){var V;(V=h())==null||V.apply(this,H)},t(C);var oe=s(C,2);{var ve=H=>{var V=ju(),L=r(V,!0);t(V),N(()=>w(L,a())),u(H,V)};$(oe,H=>{a()&&H(ve)})}t(k),t(S),t(y),N(()=>{f=Se(y,1,"sticky top-0 z-40 border-b border-charcoal-700 bg-charcoal-950 transition-all duration-300 svelte-54pqel",null,f,{collapsed:d()}),m=Se(p,1,"flex items-center justify-between gap-2",null,m,{hidden:!d()}),Tt(x,"aria-label",d()?"Expand header":"Collapse header"),w(O,d()?"▼":"▲"),D=Se(k,1,"flex flex-col gap-2",null,D,{hidden:d()})}),u(l,y)}Ht(["click"]);var Uu=g('<div class="absolute top-0 left-1/2 -translate-x-1/2 w-12 h-1 bg-gold-500 rounded-b-full"></div>'),Wu=g('<span class="absolute -top-1 -right-1 flex items-center justify-center min-w-[18px] h-[18px] px-1 bg-gold-500 text-charcoal-950 text-[10px] font-bold rounded-full"> </span>'),Bu=g('<button type="button" role="tab"><!> <div class="flex items-center justify-center relative"><span class="text-xl"> </span> <!></div> <span class="text-[10px] font-medium mt-0.5"> </span></button>'),Hu=g('<nav class="fixed bottom-0 left-0 right-0 z-50 bg-charcoal-900 border-t border-charcoal-700 svelte-2rf3uy" style="padding-bottom: env(safe-area-inset-bottom);" aria-label="Main navigation"><div class="flex items-center justify-around h-16" role="tablist"></div></nav>');function Yu(l,o){Ft(o,!1);const a=()=>Zt(Oa,"$filters",h),n=()=>Zt(hr,"$isMedia",h),c=()=>Zt(jo,"$isCoach",h),d=()=>Zt(Fo,"$selectedCount",h),[h,y]=Pa(),f=P(),S=P(),p=P(),m=P();let T=ye(o,"activeTab",8,"matches"),E=ye(o,"onTabChange",8),b=P(0);function x(){let k=0;return a().wave!=="all"&&k++,a().division&&k++,a().teams.length>0&&k++,(a().timeRange.start||a().timeRange.end)&&k++,a().priority&&a().priority!=="all"&&k++,a().coverageStatus&&a().coverageStatus!=="all"&&k++,a().conflictsOnly&&k++,a().myTeamsOnly&&k++,k}de(()=>{},()=>{v(b,x())}),de(()=>n(),()=>{v(f,n())}),de(()=>c(),()=>{v(S,c())}),de(()=>d(),()=>{v(p,d())}),de(()=>(e(f),e(p),e(b),e(S)),()=>{v(m,e(f)?[{id:"matches",label:"Matches",icon:"📋"},{id:"plan",label:"Schedule",icon:"📝",badge:e(p)>0?e(p):void 0},{id:"filters",label:"Filters",icon:"🔍",badge:e(b)>0?e(b):void 0},{id:"more",label:"More",icon:"⚙️"}]:e(S)?[{id:"matches",label:"Schedule",icon:"📅"},{id:"more",label:"More",icon:"⚙️"}]:[{id:"matches",label:"Matches",icon:"📋"},{id:"filters",label:"Filters",icon:"🔍",badge:e(b)>0?e(b):void 0},{id:"more",label:"More",icon:"⚙️"}])}),Bt(),Rt();var _=Hu(),O=r(_);tt(O,5,()=>e(m),at,(k,D)=>{var C=Bu();C.__click=()=>E()(e(D).id);let G;var ce=r(C);{var X=B=>{var ee=Uu();u(B,ee)};$(ce,B=>{M(T()),e(D),i(()=>T()===e(D).id)&&B(X)})}var se=s(ce,2),oe=r(se),ve=r(oe,!0);t(oe);var H=s(oe,2);{var V=B=>{var ee=Wu(),R=r(ee,!0);t(ee),N(()=>w(R,(e(D),i(()=>e(D).badge>99?"99+":e(D).badge)))),u(B,ee)};$(H,B=>{e(D),i(()=>e(D).badge&&e(D).badge>0)&&B(V)})}t(se);var L=s(se,2),J=r(L,!0);t(L),t(C),N(()=>{Tt(C,"aria-selected",(M(T()),e(D),i(()=>T()===e(D).id))),Tt(C,"aria-label",(e(D),i(()=>e(D).label))),G=Se(C,1,"flex flex-col items-center justify-center flex-1 h-full min-h-[44px] relative transition-colors svelte-2rf3uy",null,G,{"text-gold-500":T()===e(D).id,"text-charcoal-400":T()!==e(D).id}),w(ve,(e(D),i(()=>e(D).icon))),w(J,(e(D),i(()=>e(D).label)))}),u(k,C)}),t(O),t(_),u(l,_),jt(),y()}Ht(["click"]);var Vu=g('<button type="button">⭐ Must Cover</button> <button type="button">⚠️ Conflicts</button>',1),Ju=g('<button type="button" class="group px-3 py-1.5 rounded-full text-xs font-medium transition-colors whitespace-nowrap min-h-[32px] flex items-center gap-1.5 bg-gold-500/20 text-gold-400 border border-gold-500/50 hover:bg-gold-500/30"><span> </span> <span class="text-gold-500 group-hover:text-gold-300">×</span></button>'),zu=g('<div class="flex items-center gap-2 flex-shrink-0"></div>'),Gu=g('<div class="sticky top-0 z-30 bg-charcoal-950 border-b border-charcoal-700 py-2 px-3"><div class="flex items-center gap-2 overflow-x-auto scrollbar-hide svelte-szaik9"><div class="flex items-center gap-2 flex-shrink-0"><button type="button">AM</button> <button type="button">PM</button> <!></div> <!> <button type="button" class="ml-auto px-3 py-1.5 rounded-full text-xs font-medium transition-colors whitespace-nowrap min-h-[32px] flex items-center gap-1.5 flex-shrink-0 bg-charcoal-800 text-charcoal-300 border border-charcoal-700 hover:bg-charcoal-700 hover:text-charcoal-200">🔍 More</button></div></div>');function qu(l,o){Ft(o,!1);const a=()=>Zt(Oa,"$filters",c),n=()=>Zt(Ea,"$userRole",c),[c,d]=Pa(),h=P(),y=P();let f=ye(o,"onOpenFullFilters",8);function S(){const X=[];return a().wave!=="all"&&X.push({key:"wave",label:"Wave",value:a().wave==="morning"?"Morning":"Afternoon"}),a().division&&X.push({key:"division",label:"Division",value:a().division}),a().teams.length>0&&a().teams.forEach(se=>{X.push({key:"team",label:"Team",value:se})}),a().priority&&a().priority!=="all"&&X.push({key:"priority",label:"Priority",value:a().priority==="must-cover"?"Must Cover":a().priority==="priority"?"Priority":"Optional"}),a().coverageStatus&&a().coverageStatus!=="all"&&X.push({key:"coverageStatus",label:"Status",value:a().coverageStatus==="uncovered"?"Uncovered":a().coverageStatus==="planned"?"Planned":"Covered"}),a().conflictsOnly&&X.push({key:"conflictsOnly",label:"Conflicts",value:"Only"}),X}function p(X,se){if(X==="wave")Et("wave","all");else if(X==="division")Et("division",null);else if(X==="team")if(se){const oe=a().teams.filter(ve=>ve!==se);Et("teams",oe)}else Et("teams",[]);else X==="priority"?Et("priority",null):X==="coverageStatus"?Et("coverageStatus","all"):X==="conflictsOnly"&&Et("conflictsOnly",!1)}de(()=>{},()=>{v(h,S())}),de(()=>n(),()=>{v(y,n()==="media")}),Bt(),Rt();var m=Gu(),T=r(m),E=r(T),b=r(E);b.__click=()=>Et("wave",a().wave==="morning"?"all":"morning");let x;var _=s(b,2);_.__click=()=>Et("wave",a().wave==="afternoon"?"all":"afternoon");let O;var k=s(_,2);{var D=X=>{var se=Vu(),oe=ct(se);oe.__click=()=>Et("priority",a().priority==="must-cover"?null:"must-cover");let ve;var H=s(oe,2);H.__click=()=>Et("conflictsOnly",!a().conflictsOnly);let V;N(()=>{ve=Se(oe,1,"px-3 py-1.5 rounded-full text-xs font-medium transition-colors whitespace-nowrap min-h-[32px] flex items-center gap-1",null,ve,{"bg-gold-500":a().priority==="must-cover","text-charcoal-950":a().priority==="must-cover","bg-charcoal-800":a().priority!=="must-cover","text-charcoal-300":a().priority!=="must-cover","hover:bg-charcoal-700":a().priority!=="must-cover"}),V=Se(H,1,"px-3 py-1.5 rounded-full text-xs font-medium transition-colors whitespace-nowrap min-h-[32px] flex items-center gap-1",null,V,{"bg-warning-500":a().conflictsOnly,"text-charcoal-950":a().conflictsOnly,"bg-charcoal-800":!a().conflictsOnly,"text-charcoal-300":!a().conflictsOnly,"hover:bg-charcoal-700":!a().conflictsOnly})}),u(X,se)};$(k,X=>{e(y)&&X(D)})}t(E);var C=s(E,2);{var G=X=>{var se=zu();tt(se,5,()=>e(h),at,(oe,ve)=>{var H=Ju();H.__click=()=>p(e(ve).key,e(ve).key==="team"?e(ve).value:void 0);var V=r(H),L=r(V);t(V),pa(2),t(H),N(()=>w(L,`${e(ve),i(()=>e(ve).label)??""}: ${e(ve),i(()=>e(ve).value)??""}`)),u(oe,H)}),t(se),u(X,se)};$(C,X=>{e(h),i(()=>e(h).length>0)&&X(G)})}var ce=s(C,2);ce.__click=function(...X){var se;(se=f())==null||se.apply(this,X)},t(T),t(m),N(()=>{x=Se(b,1,"px-3 py-1.5 rounded-full text-xs font-medium transition-colors whitespace-nowrap min-h-[32px] flex items-center",null,x,{"bg-gold-500":a().wave==="morning","text-charcoal-950":a().wave==="morning","bg-charcoal-800":a().wave!=="morning","text-charcoal-300":a().wave!=="morning","hover:bg-charcoal-700":a().wave!=="morning"}),O=Se(_,1,"px-3 py-1.5 rounded-full text-xs font-medium transition-colors whitespace-nowrap min-h-[32px] flex items-center",null,O,{"bg-gold-500":a().wave==="afternoon","text-charcoal-950":a().wave==="afternoon","bg-charcoal-800":a().wave!=="afternoon","text-charcoal-300":a().wave!=="afternoon","hover:bg-charcoal-700":a().wave!=="afternoon"})}),u(l,m),jt(),d()}Ht(["click"]);var Xu=g('<div class="absolute top-3 right-3 w-6 h-6 rounded-full bg-gold-500 flex items-center justify-center"><svg class="w-4 h-4 text-charcoal-950" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),Qu=g('<li class="flex items-start gap-2"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></li>'),Ku=g('<button type="button"><!> <div class="text-4xl mb-3" role="img"> </div> <h3> </h3> <p class="text-sm text-charcoal-300 mb-4"> </p> <ul class="space-y-2 text-xs text-charcoal-400"></ul></button>'),Zu=g('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 svelte-wss6ba" role="dialog" aria-modal="true" aria-labelledby="onboarding-title"><div class="bg-charcoal-900 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-charcoal-700 shadow-2xl"><div class="sticky top-0 bg-charcoal-900 border-b border-charcoal-700 px-6 py-4 z-10"><div class="flex items-center justify-between"><div><h2 id="onboarding-title" class="text-2xl font-bold text-charcoal-50">Welcome to CourtSync</h2> <p class="text-sm text-charcoal-300 mt-1">Choose your role to get started with tournament scheduling</p></div> <button type="button" class="text-charcoal-400 hover:text-charcoal-200 transition-colors text-sm px-3 py-1.5 rounded-lg hover:bg-charcoal-800 svelte-wss6ba" aria-label="Skip onboarding">Skip</button></div></div> <div class="px-6 py-6"><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"></div> <div class="flex items-center justify-between pt-4 border-t border-charcoal-700"><p class="text-xs text-charcoal-400">You can change your role anytime from the settings menu</p> <button type="button" aria-label="Continue with selected role">Continue <!></button></div></div></div></div>');function e0(l,o){Ft(o,!1);let a=ye(o,"onComplete",8),n=P(null);const c=[{id:"media",icon:"📸",title:"Photographer",description:"Plan your tournament coverage and avoid scheduling conflicts",features:["Track which teams need photos","Avoid double-booking with conflict detection","Export your coverage schedule"]},{id:"spectator",icon:"📊",title:"Scorekeeper",description:"Track scores for your favorite teams",features:["Claim matches to keep score","Follow teams you care about","See live match updates"]},{id:"coach",icon:"📋",title:"Coach",description:"View your team's match schedule",features:["See all your team's matches","Check court assignments","Track match times and locations"]}];function d(C){v(n,C)}function h(){e(n)&&(Ea.setRole(e(n)),localStorage.setItem("courtSync_hasSeenOnboarding","true"),a()())}function y(){localStorage.setItem("courtSync_hasSeenOnboarding","true"),a()()}Rt();var f=Zu(),S=r(f),p=r(S),m=r(p),T=s(r(m),2);T.__click=y,t(m),t(p);var E=s(p,2),b=r(E);tt(b,5,()=>c,at,(C,G)=>{var ce=Ku();ce.__click=()=>d(e(G).id);var X=r(ce);{var se=R=>{var he=Xu();u(R,he)};$(X,R=>{e(n),e(G),i(()=>e(n)===e(G).id)&&R(se)})}var oe=s(X,2),ve=r(oe,!0);t(oe);var H=s(oe,2);let V;var L=r(H,!0);t(H);var J=s(H,2),B=r(J,!0);t(J);var ee=s(J,2);tt(ee,5,()=>(e(G),i(()=>e(G).features)),at,(R,he)=>{var be=Qu(),$e=r(be);let Q;var Te=s($e,2),K=r(Te,!0);t(Te),t(be),N(()=>{Q=Se($e,0,"w-4 h-4 mt-0.5 flex-shrink-0",null,Q,{"text-gold-500":e(n)===e(G).id,"text-charcoal-600":e(n)!==e(G).id}),w(K,e(he))}),u(R,be)}),t(ee),t(ce),N(()=>{Se(ce,1,`group relative flex flex-col p-6 rounded-lg border-2 transition-all text-left ${e(n),e(G),i(()=>e(n)===e(G).id?"border-gold-500 bg-gold-500/10":"border-charcoal-700 bg-charcoal-800")??""} ${e(n),e(G),i(()=>e(n)!==e(G).id?"hover:border-charcoal-600 hover:bg-charcoal-900":"")??""}`,"svelte-wss6ba"),Tt(ce,"aria-pressed",(e(n),e(G),i(()=>e(n)===e(G).id))),Tt(oe,"aria-label",(e(G),i(()=>`${e(G).title} icon`))),w(ve,(e(G),i(()=>e(G).icon))),V=Se(H,1,"text-lg font-semibold mb-2",null,V,{"text-gold-400":e(n)===e(G).id,"text-charcoal-50":e(n)!==e(G).id}),w(L,(e(G),i(()=>e(G).title))),w(B,(e(G),i(()=>e(G).description)))}),u(C,ce)}),t(b);var x=s(b,2),_=s(r(x),2);_.__click=h;let O;var k=s(r(_));{var D=C=>{var G=ir();N(()=>w(G,`as ${e(n)==="media"?"Photographer":e(n)==="spectator"?"Scorekeeper":"Coach"}`)),u(C,G)};$(k,C=>{e(n)&&C(D)})}t(_),t(x),t(E),t(S),t(f),N(()=>{_.disabled=!e(n),O=Se(_,1,"px-6 py-3 rounded-lg font-medium transition-all min-h-[44px] svelte-wss6ba",null,O,{"bg-gold-500":e(n),"text-charcoal-950":e(n),"hover:bg-gold-400":e(n),"bg-charcoal-700":!e(n),"text-charcoal-500":!e(n),"cursor-not-allowed":!e(n)})}),u(l,f),jt()}Ht(["click"]);var t0=g('<span class="ml-1 text-warning-500"> </span>'),a0=g('<span class="text-xs whitespace-nowrap text-charcoal-300"> <!></span>'),r0=g('<h1 class="text-base sm:text-lg font-semibold truncate text-charcoal-50"> </h1>'),o0=g('<h1 class="text-base sm:text-lg font-semibold truncate text-charcoal-50">630 Volleyball</h1>'),n0=g('<span class="ml-2 text-warning-500"> </span>'),s0=g('<span class="text-xs whitespace-nowrap hidden sm:inline text-charcoal-300"> <!></span>'),l0=g('<span class="text-charcoal-400">630 Volleyball</span> <span class="text-charcoal-600">•</span>',1),i0=g('<span class="hidden sm:inline"> </span>'),c0=g('<div class="flex items-center gap-2 text-xs text-charcoal-300"><!> <!></div>'),d0=g('<span class="ml-2 text-warning-500"> </span>'),v0=g('<span class="text-xs sm:hidden text-charcoal-300"> <!></span>'),u0=g('<div class="flex items-center gap-1 rounded-lg p-1 bg-charcoal-700"><button>List</button> <button>Timeline</button></div>'),h0=g('<button title="View and manage your photography coverage schedule"><svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> </button>'),f0=g('<!> <!> <button class="px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 min-h-[44px] sm:min-h-0" title="Export match data as JSON" aria-label="Export data as JSON"><svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path></svg> JSON</button> <button class="px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors bg-charcoal-700 text-charcoal-200 hover:text-charcoal-50 min-h-[44px] sm:min-h-0" title="Export to Excel (CSV format)" aria-label="Export to Excel"><svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path></svg> CSV</button>',1),m0=g('<div class="border-b border-charcoal-700 bg-charcoal-800/30"><div class="container mx-auto px-3 sm:px-4 py-3 sm:py-4"><!></div></div>'),x0=g('<div class="text-center py-12"><div class="inline-block animate-pulse text-charcoal-300">Loading matches...</div></div>'),g0=g('<div class="rounded-lg mb-6 px-4 py-3 border" style="background-color: rgba(127, 29, 29, 0.5); border-color: #991b1b; color: #fca5a5;"><div class="text-xs font-medium mb-1">Error</div> <div class="text-sm"> </div></div>'),p0=g('<div class="text-center py-12 px-4 max-w-md mx-auto"><div class="w-16 h-16 mx-auto mb-4 rounded-full bg-charcoal-800 flex items-center justify-center"><svg class="w-8 h-8 text-charcoal-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div> <h2 class="text-lg font-semibold text-charcoal-50 mb-2">Ready to Load Your Tournament</h2> <p class="text-sm text-charcoal-300 mb-4">Enter your event details to see the 630 Volleyball match schedule and plan your coverage</p> <button class="px-6 py-3 bg-gold-500 text-charcoal-950 rounded-lg font-medium hover:bg-gold-400 transition-colors min-h-[44px]" aria-label="Open event settings to get started">Get Started</button></div>'),b0=g('<button type="button" class="w-full px-4 py-3 text-left rounded-lg bg-charcoal-800 text-charcoal-50 hover:bg-charcoal-700 transition-colors min-h-[44px]"><div class="font-medium">Export JSON</div> <div class="text-xs text-charcoal-400 mt-0.5">Download matches as JSON</div></button> <button type="button" class="w-full px-4 py-3 text-left rounded-lg bg-charcoal-800 text-charcoal-50 hover:bg-charcoal-700 transition-colors min-h-[44px]"><div class="font-medium">Export CSV</div> <div class="text-xs text-charcoal-400 mt-0.5">Download matches as CSV</div></button>',1),_0=g('<div class="pt-2 border-t border-charcoal-700"><label for="view-mode-selector-menu" class="block text-xs font-medium text-charcoal-300 uppercase tracking-wider mb-2">View Mode</label> <div class="flex gap-2" role="group" aria-labelledby="view-mode-selector-menu"><button type="button" id="view-mode-list">List</button> <button type="button" id="view-mode-timeline">Timeline</button></div></div>'),y0=g('<div class="fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-opacity" role="dialog" aria-modal="true" aria-label="More options" tabindex="-1"><div class="fixed bottom-0 left-0 right-0 max-h-[60vh] bg-charcoal-950 rounded-t-lg border-t border-charcoal-900 overflow-y-auto" style="padding-bottom: env(safe-area-inset-bottom);" role="dialog" tabindex="-1"><div class="sticky top-0 bg-charcoal-950 border-b border-charcoal-900 px-4 py-3 flex items-center justify-between z-10"><h2 class="text-lg font-semibold text-charcoal-50">More</h2> <button type="button" class="w-8 h-8 flex items-center justify-center rounded-lg text-charcoal-300 hover:text-charcoal-50 hover:bg-charcoal-900 transition-colors min-h-[44px]" aria-label="Close menu">×</button></div> <div class="p-4 space-y-2"><button type="button" class="w-full px-4 py-3 text-left rounded-lg bg-charcoal-800 text-charcoal-50 hover:bg-charcoal-700 transition-colors min-h-[44px]" aria-label="Open event settings"><div class="font-medium">Event Settings</div> <div class="text-xs text-charcoal-400 mt-0.5">Change tournament parameters and load schedule</div></button> <!> <div class="pt-2 border-t border-charcoal-700"><label for="role-selector-menu" class="block text-sm font-medium text-charcoal-300 mb-2">I am a:</label> <select id="role-selector-menu" class="w-full px-3 py-2 rounded-lg text-sm min-h-[44px] focus:border-gold-500 focus:outline-none bg-charcoal-700 text-charcoal-200 border border-charcoal-600" aria-label="Select your role to customize features"><option>📸 Photographer</option><option>📊 Scorekeeper</option><option>📋 Coach</option></select></div> <!></div></div></div>'),w0=g(`<div class="min-h-screen bg-charcoal-950 pb-20"><!> <header data-header=""><style>/* Mobile: Lighter glassmorphism */
			@media (max-width: 639px) {
				header.glassmorphism {
					backdrop-filter: blur(10px);
					background-color: rgba(37, 37, 41, 0.85);
					border-bottom-color: rgba(58, 58, 63, 0.4);
				}
			}
			/* Desktop: Stronger glassmorphism */
			@media (min-width: 640px) {
				header.glassmorphism {
					backdrop-filter: blur(20px);
					background-color: rgba(37, 37, 41, 0.8);
					border-bottom-color: rgba(58, 58, 63, 0.5);
					box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
				}
			}</style> <div class="container mx-auto px-3 sm:px-4 py-2 sm:py-3"><div class="flex items-center justify-between gap-2 sm:hidden"><div class="flex items-center gap-2 min-w-0 flex-1"><h1 class="text-base font-semibold truncate text-charcoal-50">630 Volleyball</h1> <!></div> <button class="w-10 h-10 flex items-center justify-center rounded-lg transition-colors text-charcoal-300 bg-charcoal-900"> </button></div> <div><div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 sm:gap-4 min-w-0 flex-1"><div class="flex flex-col gap-1 min-w-0"><div class="text-[10px] sm:text-xs text-charcoal-400 uppercase tracking-wider">Event Schedule</div> <div class="flex items-center gap-2 min-w-0"><!> <!></div> <!></div> <!></div> <div class="flex items-center gap-1.5 sm:gap-2 flex-wrap"><div class="flex items-center gap-1"><label for="role-selector-header" class="text-xs hidden sm:inline text-charcoal-300">I am a:</label> <select id="role-selector-header" class="px-2 py-2 sm:py-1.5 text-xs rounded-lg transition-colors min-h-[44px] sm:min-h-0 bg-charcoal-700 text-charcoal-200 border border-charcoal-600" title="Select your role to customize the app features for your needs" aria-describedby="role-help"><option>📸 Photographer</option><option>📊 Scorekeeper</option><option>📋 Coach</option></select> <span id="role-help" class="sr-only">Select your role to customize the app features for your needs</span></div> <!> <button title="Change event parameters and tournament settings"><svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> </button></div></div></div></header> <!> <style>header.collapsed {
			max-height: 56px;
			overflow: hidden;
		}
		
		@media (max-width: 767px) {
			header.collapsed {
				max-height: 56px;
			}
			header:not(.collapsed) {
				max-height: 500px; /* Allow expansion */
			}
		}</style> <div class="flex flex-col lg:flex-row"><div class="hidden lg:block"><!></div> <main class="flex-1 w-full lg:container lg:mx-auto lg:px-6 lg:py-6"><div class="lg:hidden"><!></div> <div class="px-4 py-4 pb-24 lg:px-0 lg:py-0"><!> <!> <!> <!> <!></div></main></div> <!> <!> <!> <!></div>`);function P0(l,o){Ft(o,!1);const a=()=>Zt(Fo,"$selectedCount",y),n=()=>Zt(hr,"$isMedia",y),c=()=>Zt(Pr,"$isSpectator",y),d=()=>Zt(jo,"$isCoach",y),h=()=>Zt(Ea,"$userRole",y),[y,f]=Pa(),S=P(),p=P(),m=P(),T=P(),E=P(),b=P(),x=P(),_=P();let O=P("PTAwMDAwNDEzMTQ90"),k=P("2025-11-01"),D=P(300),C=P([]),G=P(!1),ce=P(null),X=P("list"),se=P(!1),oe=P(24426),ve=P(!1),H=P(null),V=P(!0),L=0,J=P(!1),B=P("matches"),ee=P(!1),R=P(!1),he=P(!1);function be(ae){e(B)===ae?(ae==="filters"?v(ee,!1):ae==="plan"?v(ve,!1):ae==="more"&&v(R,!1),v(B,"matches")):(v(B,ae),ae==="filters"?(v(ee,!0),v(ve,!1),v(R,!1)):ae==="plan"?(v(ve,!0),v(ee,!1),v(R,!1)):ae==="more"?(v(R,!0),v(ee,!1),v(ve,!1)):(v(ee,!1),v(R,!1),v(ve,!1)))}function $e(){v(ee,!1),v(B,"matches")}function Q(){v(ve,!1),v(B,"matches")}function Te(){v(R,!1),v(B,"matches")}function K(){if(typeof window>"u")return;const ae=window.scrollY;window.innerWidth<768&&ae>L&&ae>100&&v(V,!0),L=ae}Ia(()=>(typeof window<"u"&&window.addEventListener("scroll",K,{passive:!0}),()=>{typeof window<"u"&&window.removeEventListener("scroll",K)})),Ia(()=>{typeof window<"u"&&(localStorage.getItem("courtSync_hasSeenOnboarding")||v(he,!0)),Z(e(O),e(k),e(D))});async function Z(ae,xe,Fe){var Ge;v(G,!0),v(ce,null),v(O,ae),v(k,xe),v(D,Fe);try{const Re=await _n(ae),ue=(Ge=Re.Clubs)==null?void 0:Ge.find(ot=>ot.Name==="630 Volleyball");ue&&v(oe,ue.ClubId),v(H,{name:Re.Name||Re.EventName||Re.FullName||Re.Title||"Event",startDate:Re.StartDate||Re.StartDateTime||Re.Start||Re.StartTime,endDate:Re.EndDate||Re.EndDateTime||Re.End||Re.EndTime});const Ne=await bn(ae,xe,Fe),Pe=Mn(Ne.CourtSchedules);v(C,Pe)}catch(Re){console.error("Error loading schedule:",Re),v(ce,Re instanceof Error?Re.message:"Failed to load schedule"),v(C,[])}finally{v(G,!1)}}function ke(){const ae=JSON.stringify(e(C),null,2),xe=new Blob([ae],{type:"application/json"}),Fe=URL.createObjectURL(xe),Ge=document.createElement("a");Ge.href=Fe,Ge.download=`630-volleyball-matches-${e(k)}.json`,Ge.click(),URL.revokeObjectURL(Fe)}function U(){const ae=["Match ID","Division","Short Name","First Team","Second Team","Work Team","Court","Start Time","End Time","Duration","Involved Team"],xe=e(C).map(Ne=>[Ne.MatchId.toString(),Ne.Division.Name,Ne.CompleteShortName,Ne.FirstTeamText,Ne.SecondTeamText,Ne.WorkTeamText,Ne.CourtName,new Date(Ne.ScheduledStartDateTime).toISOString(),new Date(Ne.ScheduledEndDateTime).toISOString(),((Ne.ScheduledEndDateTime-Ne.ScheduledStartDateTime)/6e4).toString(),Ne.InvolvedTeam]),Fe=[ae.join(","),...xe.map(Ne=>Ne.map(Pe=>`"${Pe}"`).join(","))].join(`
`),Ge=new Blob([Fe],{type:"text/csv"}),Re=URL.createObjectURL(Ge),ue=document.createElement("a");ue.href=Re,ue.download=`630-volleyball-matches-${e(k)}.csv`,ue.click(),URL.revokeObjectURL(Re)}de(()=>e(C),()=>{v(S,qa(e(C)))}),de(()=>e(C),()=>{v(p,fr(e(C)))}),de(()=>(e(C),gt),()=>{if(e(C).length>0){const ae=new Map;e(C).forEach(xe=>{const Ge=(xe.InvolvedTeam==="first"?xe.FirstTeamText:xe.SecondTeamText).match(/(\d+-\d+)/),Re=Ge?Ge[1]:"";if(!Re)return;const ue=ae.get(Re)||{total:0,inPlan:0};ue.total++;let Ne=!1;Wt.subscribe(Pe=>{Ne=Pe.has(xe.MatchId)})(),Ne&&ue.inPlan++,ae.set(Re,ue)}),ae.forEach((xe,Fe)=>{gt.updateFromPlan(Fe,xe.inPlan,xe.total)})}}),de(()=>e(C),()=>{v(m,(()=>{const ae=new Map;return e(C).forEach((xe,Fe)=>{e(C).slice(Fe+1).forEach(Ge=>{xe.ScheduledStartDateTime<Ge.ScheduledEndDateTime&&xe.ScheduledEndDateTime>Ge.ScheduledStartDateTime&&(ae.has(xe.MatchId)||ae.set(xe.MatchId,[]),ae.get(xe.MatchId).push(Ge.MatchId))})}),e(C).filter(xe=>ae.has(xe.MatchId)).length})())}),de(()=>a(),()=>{v(T,a())}),de(()=>n(),()=>{v(E,n())}),de(()=>c(),()=>{v(b,c())}),de(()=>d(),()=>{v(x,d())}),de(()=>h(),()=>{v(_,h())}),de(()=>(e(C),e(T),gt),()=>{if(e(C).length>0&&e(T)!==void 0){const ae=new Map,xe=ha(Wt);e(C).forEach(Fe=>{const Re=(Fe.InvolvedTeam==="first"?Fe.FirstTeamText:Fe.SecondTeamText).match(/(\d+-\d+)/),ue=Re?Re[1]:"";if(!ue)return;const Ne=ae.get(ue)||{total:0,inPlan:0};Ne.total++,xe.has(Fe.MatchId)&&Ne.inPlan++,ae.set(ue,Ne)}),ae.forEach((Fe,Ge)=>{gt.updateFromPlan(Ge,Fe.inPlan,Fe.total)})}}),Bt(),Rt();var le=w0(),me=r(le);{let ae=_e(()=>(e(H),i(()=>{var xe;return((xe=e(H))==null?void 0:xe.name)||null})));Lu(me,{get eventName(){return e(ae)},get matchCount(){return e(C),i(()=>e(C).length)},get conflictCount(){return e(m)},get collapsed(){return e(V)},onToggle:()=>v(V,!e(V))})}var z=s(me,2);let ge;var fe=s(r(z),2),Ie=r(fe),F=r(Ie),ne=s(r(F),2);{var te=ae=>{var xe=a0(),Fe=r(xe),Ge=s(Fe);{var Re=ue=>{var Ne=t0(),Pe=r(Ne);t(Ne),N(()=>w(Pe,`• ${e(m)??""}`)),u(ue,Ne)};$(Ge,ue=>{e(m)>0&&ue(Re)})}t(xe),N(()=>w(Fe,`${e(C),i(()=>e(C).length)??""} `)),u(ae,xe)};$(ne,ae=>{e(C),i(()=>e(C).length>0)&&ae(te)})}t(F);var ie=s(F,2);ie.__click=()=>v(V,!e(V));var A=r(ie,!0);t(ie),t(Ie);var I=s(Ie,2);let j;var Y=r(I),W=r(Y),q=s(r(W),2),re=r(q);{var pe=ae=>{var xe=r0(),Fe=r(xe,!0);t(xe),N(()=>w(Fe,(e(H),i(()=>e(H).name)))),u(ae,xe)},Ee=ae=>{var xe=o0();u(ae,xe)};$(re,ae=>{e(H),i(()=>e(H)&&e(H).name)?ae(pe):ae(Ee,!1)})}var We=s(re,2);{var Ve=ae=>{var xe=s0(),Fe=r(xe),Ge=s(Fe);{var Re=ue=>{var Ne=n0(),Pe=r(Ne);t(Ne),N(()=>w(Pe,`• ${e(m)??""} ${e(m)===1?"conflict":"conflicts"}`)),u(ue,Ne)};$(Ge,ue=>{e(m)>0&&ue(Re)})}t(xe),N(()=>w(Fe,`${e(C),i(()=>e(C).length)??""} ${e(C),i(()=>e(C).length===1?"match":"matches")??""} `)),u(ae,xe)};$(We,ae=>{e(C),i(()=>e(C).length>0)&&ae(Ve)})}t(q);var Qe=s(q,2);{var we=ae=>{var xe=c0(),Fe=r(xe);{var Ge=Ne=>{var Pe=l0();pa(2),u(Ne,Pe)};$(Fe,Ne=>{e(H),i(()=>e(H).name)&&Ne(Ge)})}var Re=s(Fe,2);{var ue=Ne=>{var Pe=i0(),ot=r(Pe,!0);t(Pe),N(Le=>w(ot,Le),[()=>(e(H),M(Kt),i(()=>(()=>{try{const Le=e(H).startDate?new Date(e(H).startDate).getTime():null,yt=e(H).endDate?new Date(e(H).endDate).getTime():null;return Le&&yt&&Math.abs(Le-yt)>864e5?`${Kt(Le)} - ${Kt(yt)}`:Le?Kt(Le):yt?Kt(yt):null}catch{return null}})()))]),u(Ne,Pe)};$(Re,Ne=>{e(H),i(()=>(e(H).startDate||e(H).endDate)&&(()=>{try{const Pe=e(H).startDate?new Date(e(H).startDate).getTime():null,ot=e(H).endDate?new Date(e(H).endDate).getTime():null;return Pe&&ot&&Math.abs(Pe-ot)>864e5}catch{return!1}})())&&Ne(ue)})}t(xe),u(ae,xe)};$(Qe,ae=>{e(H),i(()=>e(H)&&(e(H).startDate||e(H).endDate))&&ae(we)})}t(W);var Me=s(W,2);{var je=ae=>{var xe=v0(),Fe=r(xe),Ge=s(Fe);{var Re=ue=>{var Ne=d0(),Pe=r(Ne);t(Ne),N(()=>w(Pe,`• ${e(m)??""} ${e(m)===1?"conflict":"conflicts"}`)),u(ue,Ne)};$(Ge,ue=>{e(m)>0&&ue(Re)})}t(xe),N(()=>w(Fe,`${e(C),i(()=>e(C).length)??""} ${e(C),i(()=>e(C).length===1?"match":"matches")??""} `)),u(ae,xe)};$(Me,ae=>{e(C),i(()=>e(C).length>0)&&ae(je)})}t(Y);var qe=s(Y,2),pt=r(qe),Xe=s(r(pt),2);Xe.__change=ae=>Ea.setRole(ae.target.value);var Je=r(Xe);Je.value=Je.__value="media";var dt=s(Je);dt.value=dt.__value="spectator";var Mt=s(dt);Mt.value=Mt.__value="coach",t(Xe);var it;ga(Xe),pa(2),t(pt);var vt=s(pt,2);{var Oe=ae=>{var xe=f0(),Fe=ct(xe);{var Ge=ot=>{var Le=u0(),yt=r(Le);yt.__click=()=>v(X,"list");let Qt;var Pt=s(yt,2);Pt.__click=()=>v(X,"timeline");let _t;t(Le),N(()=>{Qt=Se(yt,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,Qt,{"bg-gold-500":e(X)==="list","text-charcoal-950":e(X)==="list","text-charcoal-300":e(X)!=="list","hover:text-charcoal-50":e(X)!=="list"}),_t=Se(Pt,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,_t,{"bg-gold-500":e(X)==="timeline","text-charcoal-950":e(X)==="timeline","text-charcoal-300":e(X)!=="timeline","hover:text-charcoal-50":e(X)!=="timeline"})}),u(ot,Le)};$(Fe,ot=>{e(x)||ot(Ge)})}var Re=s(Fe,2);{var ue=ot=>{var Le=h0();Le.__click=()=>v(ve,!e(ve));let yt;var Qt=s(r(Le));t(Le),N(()=>{yt=Se(Le,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0 border",null,yt,{"bg-gold-500":e(ve),"text-charcoal-950":e(ve),"text-gold-500":!e(ve)}),ea(Le,e(ve)?"":"background-color: rgba(234, 179, 8, 0.1); border-color: rgba(234, 179, 8, 0.2);"),Tt(Le,"aria-label",`My schedule with ${e(T)} ${e(T)===1?"match":"matches"}`),w(Qt,` My Schedule (${e(T)??""})`)}),u(ot,Le)};$(Re,ot=>{e(E)&&e(T)>0&&ot(ue)})}var Ne=s(Re,2);Ne.__click=ke;var Pe=s(Ne,2);Pe.__click=U,u(ae,xe)};$(vt,ae=>{e(C),i(()=>e(C).length>0)&&ae(Oe)})}var et=s(vt,2);et.__click=()=>v(se,!e(se));let ft;var mt=s(r(et));t(et),t(qe),t(I),t(fe),t(z);var bt=s(z,2);{var rt=ae=>{var xe=m0(),Fe=r(xe),Ge=r(Fe);js(Ge,{get eventId(){return e(O)},get date(){return e(k)},get timeWindow(){return e(D)},onLoad:Z,get loading(){return e(G)}}),t(Fe),t(xe),u(ae,xe)};$(bt,ae=>{e(se)&&ae(rt)})}var ut=s(bt,4),Lt=r(ut),Vt=r(Lt);Pu(Vt,{get matches(){return e(C)},get collapsed(){return e(J)},onToggle:()=>v(J,!e(J))}),t(Lt);var ta=s(Lt,2),Jt=r(ta),Xt=r(Jt);qu(Xt,{onOpenFullFilters:()=>{v(ee,!0),v(B,"filters")}}),t(Jt);var It=s(Jt,2),St=r(It);{var kt=ae=>{var xe=x0();u(ae,xe)};$(St,ae=>{e(G)&&ae(kt)})}var oa=s(St,2);{var aa=ae=>{var xe=g0(),Fe=s(r(xe),2),Ge=r(Fe,!0);t(Fe),t(xe),N(()=>w(Ge,e(ce))),u(ae,xe)};$(oa,ae=>{e(ce)&&ae(aa)})}var Ue=s(oa,2);{var Be=ae=>{var xe=p0(),Fe=s(r(xe),6);Fe.__click=()=>v(se,!0),t(xe),u(ae,xe)};$(Ue,ae=>{e(G),e(C),e(ce),i(()=>!e(G)&&e(C).length===0&&!e(ce))&&ae(Be)})}var Ke=s(Ue,2);{var Ct=ae=>{var xe=At(),Fe=ct(xe);{var Ge=ue=>{pu(ue,{get matches(){return e(C)},get eventId(){return e(O)},get clubId(){return e(oe)}})},Re=ue=>{var Ne=At(),Pe=ct(Ne);{var ot=yt=>{Ac(yt,{get matches(){return e(C)},get eventId(){return e(O)},get clubId(){return e(oe)}})},Le=yt=>{Md(yt,{get matches(){return e(C)},get eventId(){return e(O)}})};$(Pe,yt=>{e(X)==="list"?yt(ot):yt(Le,!1)},!0)}u(ue,Ne)};$(Fe,ue=>{e(x)?ue(Ge):ue(Re,!1)})}u(ae,xe)};$(Ke,ae=>{e(C),i(()=>e(C).length>0)&&ae(Ct)})}var De=s(Ke,2);{var Ae=ae=>{Bv(ae,{get matches(){return e(C)},onClose:Q})};$(De,ae=>{e(ve)&&ae(Ae)})}t(It),t(ta),t(ut);var Ce=s(ut,2);Yu(Ce,{get activeTab(){return e(B)},onTabChange:be});var He=s(Ce,2);Ho(He,{get matches(){return e(C)},get divisions(){return e(S)},get teams(){return e(p)},get open(){return e(ee)},onClose:$e});var Ye=s(He,2);{var ze=ae=>{var xe=y0();xe.__click=Te,xe.__keydown=zt=>zt.key==="Escape"&&Te();var Fe=r(xe);Fe.__click=zt=>zt.stopPropagation(),Fe.__keydown=zt=>zt.stopPropagation();var Ge=r(Fe),Re=s(r(Ge),2);Re.__click=Te,t(Ge);var ue=s(Ge,2),Ne=r(ue);Ne.__click=()=>{v(se,!e(se)),Te()};var Pe=s(Ne,2);{var ot=zt=>{var la=b0(),va=ct(la);va.__click=()=>{ke(),Te()};var ya=s(va,2);ya.__click=()=>{U(),Te()},u(zt,la)};$(Pe,zt=>{e(C),i(()=>e(C).length>0)&&zt(ot)})}var Le=s(Pe,2),yt=s(r(Le),2);yt.__change=zt=>{Ea.setRole(zt.target.value)};var Qt=r(yt);Qt.value=Qt.__value="media";var Pt=s(Qt);Pt.value=Pt.__value="spectator";var _t=s(Pt);_t.value=_t.__value="coach",t(yt);var ba;ga(yt),t(Le);var Yt=s(Le,2);{var Ca=zt=>{var la=_0(),va=s(r(la),2),ya=r(va);ya.__click=()=>{v(X,"list")};let xa;var Da=s(ya,2);Da.__click=()=>{v(X,"timeline")};let Na;t(va),t(la),N(()=>{xa=Se(ya,1,"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors min-h-[44px]",null,xa,{"bg-gold-500":e(X)==="list","text-charcoal-950":e(X)==="list","text-charcoal-300":e(X)!=="list","hover:text-charcoal-50":e(X)!=="list","bg-charcoal-700":e(X)!=="list"}),Tt(ya,"aria-pressed",e(X)==="list"),Na=Se(Da,1,"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors min-h-[44px]",null,Na,{"bg-gold-500":e(X)==="timeline","text-charcoal-950":e(X)==="timeline","text-charcoal-300":e(X)!=="timeline","hover:text-charcoal-50":e(X)!=="timeline","bg-charcoal-700":e(X)!=="timeline"}),Tt(Da,"aria-pressed",e(X)==="timeline")}),u(zt,la)};$(Yt,zt=>{e(x)||zt(Ca)})}t(ue),t(Fe),t(xe),N(()=>{ba!==(ba=e(_))&&(yt.value=(yt.__value=e(_))??"",fa(yt,e(_)))}),u(ae,xe)};$(Ye,ae=>{e(R)&&ae(ze)})}var Ze=s(Ye,2);{var st=ae=>{e0(ae,{onComplete:()=>v(he,!1)})};$(Ze,ae=>{e(he)&&ae(st)})}t(le),N(()=>{ge=Se(z,1,"hidden md:block border-b sticky top-0 z-10 transition-all duration-300 border-charcoal-700 glass-medium",null,ge,{collapsed:e(V),glassmorphism:!e(V)}),Tt(ie,"aria-label",e(V)?"Expand header":"Collapse header"),w(A,e(V)?"▼":"▲"),j=Se(I,1,"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",null,j,{hidden:e(V)}),it!==(it=e(_))&&(Xe.value=(Xe.__value=e(_))??"",fa(Xe,e(_))),ft=Se(et,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0",null,ft,{"bg-gold-500":e(se),"text-charcoal-950":e(se),"bg-charcoal-700":!e(se),"text-charcoal-200":!e(se)}),Tt(et,"aria-label",e(se)?"Hide event settings":"Show event settings"),w(mt,` ${e(se)?"Hide Settings":"Event Settings"}`)}),u(l,le),jt(),f()}Ht(["click","change","keydown"]);export{P0 as component,E0 as universal};
