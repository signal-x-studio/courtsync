import{f as w,a as g,c as Dt,d as ya,t as Qa}from"../chunks/BVP2IYXq.js";import"../chunks/CplIWc7m.js";import{d as Nr,w as Jt,o as Sa,a as Mn,g as Ut}from"../chunks/CPr2jWSk.js";import{D as Qr,y as At,q as Cn,B as Ka,A as $n,L as Dn,g as e,a1 as X,N as kn,O as In,P as ka,Q as Kr,z as Cr,ad as Pn,aA as En,I as pa,K as Nn,E as _r,ay as Za,aG as en,Y as R,ab as Ia,ak as Pa,F as tn,H as On,aH as Vr,aI as Zr,G as rn,aJ as Gr,aK as An,au as Fn,aL as Rn,ax as Ln,aM as Wn,x as jn,U as an,aN as nn,aO as Un,W as Bn,aP as Yn,aQ as Hn,aR as Vn,aS as Gn,aT as Jn,aU as zn,aV as qn,aW as Xn,aE as Qn,b as c,S as Kn,aX as Zn,p as Ft,aY as ie,Z as S,e as y,aZ as zt,k as i,s as l,l as o,t as B,j as Rt,i as ft,al as ur,a_ as eo,a$ as ea,b0 as ta}from"../chunks/CAX-FWec.js";import{s as _,e as kr,d as Kt}from"../chunks/mRf8aGA8.js";import{p as qe,i as E,s as Qt,a as Ta,b as to}from"../chunks/5yCCTwAM.js";import{i as Lt}from"../chunks/9cGwFRh_.js";const ro=!0;function mt(r,a){return a}function ao(r,a,t){for(var n=r.items,s=[],d=a.length,v=0;v<d;v++)Rn(a[v].e,s,!0);var u=d>0&&s.length===0&&t!==null;if(u){var b=t.parentNode;Ln(b),b.append(t),n.clear(),tr(r,a[0].prev,a[d-1].next)}Wn(s,()=>{for(var p=0;p<d;p++){var h=a[p];u||(n.delete(h.k),tr(r,h.prev,h.next)),rn(h.e,!u)}})}function xt(r,a,t,n,s,d=null){var v=r,u={flags:a,items:new Map,first:null},b=(a&nn)!==0;if(b){var p=r;v=At?Qr(Cn(p)):p.appendChild(Ka())}At&&$n();var h=null,M=!1,D=new Map,$=X(()=>{var N=t();return en(N)?N:N==null?[]:Za(N)}),f,m;function T(){no(m,f,u,D,v,s,a,n,t),d!==null&&(f.length===0?h?tn(h):h=pa(()=>d(v)):h!==null&&On(h,()=>{h=null}))}Dn(()=>{m??(m=jn),f=e($);var N=f.length;if(M&&N===0)return;M=N===0;let C=!1;if(At){var F=kn(v)===In;F!==(N===0)&&(v=ka(),Qr(v),Kr(!1),C=!0)}if(At){for(var H=null,ce,W=0;W<N;W++){if(Cr.nodeType===Pn&&Cr.data===En){v=Cr,C=!0,Kr(!1);break}var le=f[W],me=n(le,W);ce=ha(Cr,u,H,null,le,me,W,s,a,t),u.items.set(me,ce),H=ce}N>0&&Qr(ka())}if(At)N===0&&d&&(h=pa(()=>d(v)));else if(Nn()){var G=new Set,De=_r;for(W=0;W<N;W+=1){le=f[W],me=n(le,W);var _e=u.items.get(me)??D.get(me);_e?(a&(Gr|Vr))!==0&&on(_e,le,W,a):(ce=ha(null,u,null,null,le,me,W,s,a,t,!0),D.set(me,ce)),G.add(me)}for(const[Fe,Be]of u.items)G.has(Fe)||De.skipped_effects.add(Be.e);De.oncommit(T)}else T();C&&Kr(!0),e($)}),At&&(v=Cr)}function no(r,a,t,n,s,d,v,u,b){var Ce,A,k,x;var p=(v&Un)!==0,h=(v&(Gr|Vr))!==0,M=a.length,D=t.items,$=t.first,f=$,m,T=null,N,C=[],F=[],H,ce,W,le;if(p)for(le=0;le<M;le+=1)H=a[le],ce=u(H,le),W=D.get(ce),W!==void 0&&((Ce=W.a)==null||Ce.measure(),(N??(N=new Set)).add(W));for(le=0;le<M;le+=1){if(H=a[le],ce=u(H,le),W=D.get(ce),W===void 0){var me=n.get(ce);if(me!==void 0){n.delete(ce),D.set(ce,me);var G=T?T.next:f;tr(t,T,me),tr(t,me,G),ra(me,G,s),T=me}else{var De=f?f.e.nodes_start:s;T=ha(De,t,T,T===null?t.first:T.next,H,ce,le,d,v,b)}D.set(ce,T),C=[],F=[],f=T.next;continue}if(h&&on(W,H,le,v),(W.e.f&Zr)!==0&&(tn(W.e),p&&((A=W.a)==null||A.unfix(),(N??(N=new Set)).delete(W))),W!==f){if(m!==void 0&&m.has(W)){if(C.length<F.length){var _e=F[0],Fe;T=_e.prev;var Be=C[0],Ee=C[C.length-1];for(Fe=0;Fe<C.length;Fe+=1)ra(C[Fe],_e,s);for(Fe=0;Fe<F.length;Fe+=1)m.delete(F[Fe]);tr(t,Be.prev,Ee.next),tr(t,T,Be),tr(t,Ee,_e),f=_e,T=Ee,le-=1,C=[],F=[]}else m.delete(W),ra(W,f,s),tr(t,W.prev,W.next),tr(t,W,T===null?t.first:T.next),tr(t,T,W),T=W;continue}for(C=[],F=[];f!==null&&f.k!==ce;)(f.e.f&Zr)===0&&(m??(m=new Set)).add(f),F.push(f),f=f.next;if(f===null)continue;W=f}C.push(W),T=W,f=W.next}if(f!==null||m!==void 0){for(var at=m===void 0?[]:Za(m);f!==null;)(f.e.f&Zr)===0&&at.push(f),f=f.next;var ot=at.length;if(ot>0){var xe=(v&nn)!==0&&M===0?s:null;if(p){for(le=0;le<ot;le+=1)(k=at[le].a)==null||k.measure();for(le=0;le<ot;le+=1)(x=at[le].a)==null||x.fix()}ao(t,at,xe)}}p&&an(()=>{var I;if(N!==void 0)for(W of N)(I=W.a)==null||I.apply()}),r.first=t.first&&t.first.e,r.last=T&&T.e;for(var Le of n.values())rn(Le.e);n.clear()}function on(r,a,t,n){(n&Gr)!==0&&Pa(r.v,a),(n&Vr)!==0?Pa(r.i,t):r.i=t}function ha(r,a,t,n,s,d,v,u,b,p,h){var M=(b&Gr)!==0,D=(b&An)===0,$=M?D?R(s,!1,!1):Ia(s):s,f=(b&Vr)===0?v:Ia(v),m={i:f,v:$,k:d,a:null,e:null,prev:t,next:n};try{if(r===null){var T=document.createDocumentFragment();T.append(r=Ka())}return m.e=pa(()=>u(r,$,f,p),At),m.e.prev=t&&t.e,m.e.next=n&&n.e,t===null?h||(a.first=m):(t.next=m,t.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function ra(r,a,t){for(var n=r.next?r.next.e.nodes_start:t,s=a?a.e.nodes_start:t,d=r.e.nodes_start;d!==null&&d!==n;){var v=Fn(d);s.before(d),d=v}}function tr(r,a,t){a===null?r.first=t:(a.next=t,a.e.next=t&&t.e),t!==null&&(t.prev=a,t.e.prev=a&&a.e)}const Ea=[...` 	
\r\fÂ \v\uFEFF`];function oo(r,a,t){var n=r==null?"":""+r;if(a&&(n=n?n+" "+a:a),t){for(var s in t)if(t[s])n=n?n+" "+s:s;else if(n.length)for(var d=s.length,v=0;(v=n.indexOf(s,v))>=0;){var u=v+d;(v===0||Ea.includes(n[v-1]))&&(u===n.length||Ea.includes(n[u]))?n=(v===0?"":n.substring(0,v))+n.substring(u+1):v=u}}return n===""?null:n}function so(r,a){return r==null?null:String(r)}function we(r,a,t,n,s,d){var v=r.__className;if(At||v!==t||v===void 0){var u=oo(t,n,d);(!At||u!==r.getAttribute("class"))&&(u==null?r.removeAttribute("class"):a?r.className=u:r.setAttribute("class",u)),r.__className=t}else if(d&&s!==d)for(var b in d){var p=!!d[b];(s==null||p!==!!s[b])&&r.classList.toggle(b,p)}return d}function Bt(r,a,t,n){var s=r.__style;if(At||s!==a){var d=so(a);(!At||d!==r.getAttribute("style"))&&(d==null?r.removeAttribute("style"):r.style.cssText=d),r.__style=a}return n}function fr(r,a,t=!1){if(r.multiple){if(a==null)return;if(!en(a))return Yn();for(var n of r.options)n.selected=a.includes(Na(n));return}for(n of r.options){var s=Na(n);if(Hn(s,a)){n.selected=!0;return}}(!t||a!==void 0)&&(r.selectedIndex=-1)}function yr(r){var a=new MutationObserver(()=>{fr(r,r.__value)});a.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Bn(()=>{a.disconnect()})}function Na(r){return"__value"in r?r.__value:r.value}const io=Symbol("is custom element"),co=Symbol("is html");function aa(r){if(At){var a=!1,t=()=>{if(!a){if(a=!0,r.hasAttribute("value")){var n=r.value;$t(r,"value",null),r.value=n}if(r.hasAttribute("checked")){var s=r.checked;$t(r,"checked",null),r.checked=s}}};r.__on_r=t,an(t),Vn()}}function $t(r,a,t,n){var s=lo(r);At&&(s[a]=r.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&r.nodeName==="LINK")||s[a]!==(s[a]=t)&&(a==="loading"&&(r[Gn]=t),t==null?r.removeAttribute(a):typeof t!="string"&&vo(r).includes(a)?r[a]=t:r.setAttribute(a,t))}function lo(r){return r.__attributes??(r.__attributes={[io]:r.nodeName.includes("-"),[co]:r.namespaceURI===Jn})}var Oa=new Map;function vo(r){var a=r.getAttribute("is")||r.nodeName,t=Oa.get(a);if(t)return t;Oa.set(a,t=[]);for(var n,s=r,d=Element.prototype;d!==s;){n=qn(s);for(var v in n)n[v].set&&t.push(v);s=zn(s)}return t}function Sr(r,a,t=a){var n=new WeakSet;Xn(r,"input",async s=>{var d=s?r.defaultValue:r.value;if(d=na(r)?oa(d):d,t(d),_r!==null&&n.add(_r),await Qn(),d!==(d=a())){var v=r.selectionStart,u=r.selectionEnd,b=r.value.length;if(r.value=d??"",u!==null){var p=r.value.length;v===u&&u===b&&p>b?(r.selectionStart=p,r.selectionEnd=p):(r.selectionStart=v,r.selectionEnd=Math.min(u,p))}}}),(At&&r.defaultValue!==r.value||c(a)==null&&r.value)&&(t(na(r)?oa(r.value):r.value),_r!==null&&n.add(_r)),Kn(()=>{var s=a();if(r===document.activeElement){var d=Zn??_r;if(n.has(d))return}na(r)&&s===oa(r.value)||r.type==="date"&&!s&&!r.value||s!==r.value&&(r.value=s??"")})}function na(r){var a=r.type;return a==="number"||a==="range"}function oa(r){return r===""?null:+r}const uo=ro,fo=!1,mo=(async()=>({})),bd=Object.freeze(Object.defineProperty({__proto__:null,load:mo,ssr:fo},Symbol.toStringTag,{value:"Module"})),Or="https://results.advancedeventsystems.com/api",xo="https://results.advancedeventsystems.com/odata",bo=async(r,a,t)=>{const n=`${Or}/event/${r}/courts/${a}/${t}`,s=await fetch(n);if(!s.ok)throw new Error(`Failed to fetch court schedule: ${s.statusText}`);return s.json()},go=async r=>{const a=`${Or}/event/${r}`,t=await fetch(a);if(!t.ok)throw new Error(`Failed to fetch event info: ${t.statusText}`);return t.json()},po=async(r,a)=>{const t=`${xo}/${r}/nextassignments(dId=null,cId=${a},tIds=[])?$skip=0&$orderby=TeamName,TeamCode`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch team assignments: ${n.statusText}`);return n.json()},sa=async(r,a,t,n)=>{const s=`${Or}/event/${r}/division/${a}/team/${t}/schedule/${n}`,d=await fetch(s);if(!d.ok)throw new Error(`Failed to fetch team schedule: ${d.statusText}`);return d.json()},ho=async(r,a)=>{const t=`${Or}/event/${r}/division/${a}/plays`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch division plays: ${n.statusText}`);return n.json()},_o=async(r,a)=>{const t=`${Or}/event/${r}/poolsheet/${a}`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch pool sheet: ${n.statusText}`);return n.json()},jr="630 Volleyball",Ur="630",yo=r=>[r.FirstTeamText,r.SecondTeamText,r.WorkTeamText].some(t=>t&&(t.includes(jr)||t.includes(Ur))),So=r=>r.FirstTeamText&&(r.FirstTeamText.includes(jr)||r.FirstTeamText.includes(Ur))?"first":r.SecondTeamText&&(r.SecondTeamText.includes(jr)||r.SecondTeamText.includes(Ur))?"second":r.WorkTeamText&&(r.WorkTeamText.includes(jr)||r.WorkTeamText.includes(Ur))?"work":null,To=r=>{const a=[];return r.forEach(t=>{t.CourtMatches.forEach(n=>{if(yo(n)){const s=So(n);s&&s!=="work"&&a.push({...n,CourtName:t.Name,CourtId:t.CourtId,InvolvedTeam:s})}})}),a.sort((t,n)=>t.ScheduledStartDateTime-n.ScheduledStartDateTime)},Ir=r=>{const a=new Map;for(let t=0;t<r.length;t++){const n=r[t],s=[];for(let d=0;d<r.length;d++){if(t===d)continue;const v=r[d],u=n.ScheduledStartDateTime<v.ScheduledEndDateTime&&n.ScheduledEndDateTime>v.ScheduledStartDateTime,b=n.CourtId!==v.CourtId;u&&b&&s.push(v.MatchId)}s.length>0&&a.set(n.MatchId,s)}return a},sn=6048e5,wo=864e5,Aa=Symbol.for("constructDateFrom");function cr(r,a){return typeof r=="function"?r(a):r&&typeof r=="object"&&Aa in r?r[Aa](a):r instanceof Date?new r.constructor(a):new Date(a)}function Zt(r,a){return cr(a||r,r)}let Mo={};function Jr(){return Mo}function Pr(r,a){var u,b,p,h;const t=Jr(),n=(a==null?void 0:a.weekStartsOn)??((b=(u=a==null?void 0:a.locale)==null?void 0:u.options)==null?void 0:b.weekStartsOn)??t.weekStartsOn??((h=(p=t.locale)==null?void 0:p.options)==null?void 0:h.weekStartsOn)??0,s=Zt(r,a==null?void 0:a.in),d=s.getDay(),v=(d<n?7:0)+d-n;return s.setDate(s.getDate()-v),s.setHours(0,0,0,0),s}function Yr(r,a){return Pr(r,{...a,weekStartsOn:1})}function cn(r,a){const t=Zt(r,a==null?void 0:a.in),n=t.getFullYear(),s=cr(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const d=Yr(s),v=cr(t,0);v.setFullYear(n,0,4),v.setHours(0,0,0,0);const u=Yr(v);return t.getTime()>=d.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}function Fa(r){const a=Zt(r),t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),+r-+t}function Co(r,...a){const t=cr.bind(null,a.find(n=>typeof n=="object"));return a.map(t)}function Ra(r,a){const t=Zt(r,a==null?void 0:a.in);return t.setHours(0,0,0,0),t}function $o(r,a,t){const[n,s]=Co(t==null?void 0:t.in,r,a),d=Ra(n),v=Ra(s),u=+d-Fa(d),b=+v-Fa(v);return Math.round((u-b)/wo)}function Do(r,a){const t=cn(r,a),n=cr(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Yr(n)}function ko(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Io(r){return!(!ko(r)&&typeof r!="number"||isNaN(+Zt(r)))}function Po(r,a){const t=Zt(r,a==null?void 0:a.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Eo={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},No=(r,a,t)=>{let n;const s=Eo[r];return typeof s=="string"?n=s:a===1?n=s.one:n=s.other.replace("{{count}}",a.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function ia(r){return(a={})=>{const t=a.width?String(a.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const Oo={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ao={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Fo={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ro={date:ia({formats:Oo,defaultWidth:"full"}),time:ia({formats:Ao,defaultWidth:"full"}),dateTime:ia({formats:Fo,defaultWidth:"full"})},Lo={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Wo=(r,a,t,n)=>Lo[r];function $r(r){return(a,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const v=r.defaultFormattingWidth||r.defaultWidth,u=t!=null&&t.width?String(t.width):v;s=r.formattingValues[u]||r.formattingValues[v]}else{const v=r.defaultWidth,u=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[u]||r.values[v]}const d=r.argumentCallback?r.argumentCallback(a):a;return s[d]}}const jo={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Uo={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bo={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yo={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ho={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Vo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Go=(r,a)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Jo={ordinalNumber:Go,era:$r({values:jo,defaultWidth:"wide"}),quarter:$r({values:Uo,defaultWidth:"wide",argumentCallback:r=>r-1}),month:$r({values:Bo,defaultWidth:"wide"}),day:$r({values:Yo,defaultWidth:"wide"}),dayPeriod:$r({values:Ho,defaultWidth:"wide",formattingValues:Vo,defaultFormattingWidth:"wide"})};function Dr(r){return(a,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],d=a.match(s);if(!d)return null;const v=d[0],u=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],b=Array.isArray(u)?qo(u,M=>M.test(v)):zo(u,M=>M.test(v));let p;p=r.valueCallback?r.valueCallback(b):b,p=t.valueCallback?t.valueCallback(p):p;const h=a.slice(v.length);return{value:p,rest:h}}}function zo(r,a){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&a(r[t]))return t}function qo(r,a){for(let t=0;t<r.length;t++)if(a(r[t]))return t}function Xo(r){return(a,t={})=>{const n=a.match(r.matchPattern);if(!n)return null;const s=n[0],d=a.match(r.parsePattern);if(!d)return null;let v=r.valueCallback?r.valueCallback(d[0]):d[0];v=t.valueCallback?t.valueCallback(v):v;const u=a.slice(s.length);return{value:v,rest:u}}}const Qo=/^(\d+)(th|st|nd|rd)?/i,Ko=/\d+/i,Zo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},es={any:[/^b/i,/^(a|c)/i]},ts={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rs={any:[/1/i,/2/i,/3/i,/4/i]},as={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},os={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ss={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},is={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cs={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ls={ordinalNumber:Xo({matchPattern:Qo,parsePattern:Ko,valueCallback:r=>parseInt(r,10)}),era:Dr({matchPatterns:Zo,defaultMatchWidth:"wide",parsePatterns:es,defaultParseWidth:"any"}),quarter:Dr({matchPatterns:ts,defaultMatchWidth:"wide",parsePatterns:rs,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Dr({matchPatterns:as,defaultMatchWidth:"wide",parsePatterns:ns,defaultParseWidth:"any"}),day:Dr({matchPatterns:os,defaultMatchWidth:"wide",parsePatterns:ss,defaultParseWidth:"any"}),dayPeriod:Dr({matchPatterns:is,defaultMatchWidth:"any",parsePatterns:cs,defaultParseWidth:"any"})},ds={code:"en-US",formatDistance:No,formatLong:Ro,formatRelative:Wo,localize:Jo,match:ls,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vs(r,a){const t=Zt(r,a==null?void 0:a.in);return $o(t,Po(t))+1}function us(r,a){const t=Zt(r,a==null?void 0:a.in),n=+Yr(t)-+Do(t);return Math.round(n/sn)+1}function ln(r,a){var h,M,D,$;const t=Zt(r,a==null?void 0:a.in),n=t.getFullYear(),s=Jr(),d=(a==null?void 0:a.firstWeekContainsDate)??((M=(h=a==null?void 0:a.locale)==null?void 0:h.options)==null?void 0:M.firstWeekContainsDate)??s.firstWeekContainsDate??(($=(D=s.locale)==null?void 0:D.options)==null?void 0:$.firstWeekContainsDate)??1,v=cr((a==null?void 0:a.in)||r,0);v.setFullYear(n+1,0,d),v.setHours(0,0,0,0);const u=Pr(v,a),b=cr((a==null?void 0:a.in)||r,0);b.setFullYear(n,0,d),b.setHours(0,0,0,0);const p=Pr(b,a);return+t>=+u?n+1:+t>=+p?n:n-1}function fs(r,a){var u,b,p,h;const t=Jr(),n=(a==null?void 0:a.firstWeekContainsDate)??((b=(u=a==null?void 0:a.locale)==null?void 0:u.options)==null?void 0:b.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(p=t.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,s=ln(r,a),d=cr((a==null?void 0:a.in)||r,0);return d.setFullYear(s,0,n),d.setHours(0,0,0,0),Pr(d,a)}function ms(r,a){const t=Zt(r,a==null?void 0:a.in),n=+Pr(t,a)-+fs(t,a);return Math.round(n/sn)+1}function ut(r,a){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(a,"0");return t+n}const ir={y(r,a){const t=r.getFullYear(),n=t>0?t:1-t;return ut(a==="yy"?n%100:n,a.length)},M(r,a){const t=r.getMonth();return a==="M"?String(t+1):ut(t+1,2)},d(r,a){return ut(r.getDate(),a.length)},a(r,a){const t=r.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,a){return ut(r.getHours()%12||12,a.length)},H(r,a){return ut(r.getHours(),a.length)},m(r,a){return ut(r.getMinutes(),a.length)},s(r,a){return ut(r.getSeconds(),a.length)},S(r,a){const t=a.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return ut(s,a.length)}},pr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},La={G:function(r,a,t){const n=r.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,a,t){if(a==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return ir.y(r,a)},Y:function(r,a,t,n){const s=ln(r,n),d=s>0?s:1-s;if(a==="YY"){const v=d%100;return ut(v,2)}return a==="Yo"?t.ordinalNumber(d,{unit:"year"}):ut(d,a.length)},R:function(r,a){const t=cn(r);return ut(t,a.length)},u:function(r,a){const t=r.getFullYear();return ut(t,a.length)},Q:function(r,a,t){const n=Math.ceil((r.getMonth()+1)/3);switch(a){case"Q":return String(n);case"QQ":return ut(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,a,t){const n=Math.ceil((r.getMonth()+1)/3);switch(a){case"q":return String(n);case"qq":return ut(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,a,t){const n=r.getMonth();switch(a){case"M":case"MM":return ir.M(r,a);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,a,t){const n=r.getMonth();switch(a){case"L":return String(n+1);case"LL":return ut(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,a,t,n){const s=ms(r,n);return a==="wo"?t.ordinalNumber(s,{unit:"week"}):ut(s,a.length)},I:function(r,a,t){const n=us(r);return a==="Io"?t.ordinalNumber(n,{unit:"week"}):ut(n,a.length)},d:function(r,a,t){return a==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):ir.d(r,a)},D:function(r,a,t){const n=vs(r);return a==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):ut(n,a.length)},E:function(r,a,t){const n=r.getDay();switch(a){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,a,t,n){const s=r.getDay(),d=(s-n.weekStartsOn+8)%7||7;switch(a){case"e":return String(d);case"ee":return ut(d,2);case"eo":return t.ordinalNumber(d,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,a,t,n){const s=r.getDay(),d=(s-n.weekStartsOn+8)%7||7;switch(a){case"c":return String(d);case"cc":return ut(d,a.length);case"co":return t.ordinalNumber(d,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,a,t){const n=r.getDay(),s=n===0?7:n;switch(a){case"i":return String(s);case"ii":return ut(s,a.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,a,t){const s=r.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,a,t){const n=r.getHours();let s;switch(n===12?s=pr.noon:n===0?s=pr.midnight:s=n/12>=1?"pm":"am",a){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,a,t){const n=r.getHours();let s;switch(n>=17?s=pr.evening:n>=12?s=pr.afternoon:n>=4?s=pr.morning:s=pr.night,a){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,a,t){if(a==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return ir.h(r,a)},H:function(r,a,t){return a==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):ir.H(r,a)},K:function(r,a,t){const n=r.getHours()%12;return a==="Ko"?t.ordinalNumber(n,{unit:"hour"}):ut(n,a.length)},k:function(r,a,t){let n=r.getHours();return n===0&&(n=24),a==="ko"?t.ordinalNumber(n,{unit:"hour"}):ut(n,a.length)},m:function(r,a,t){return a==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):ir.m(r,a)},s:function(r,a,t){return a==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):ir.s(r,a)},S:function(r,a){return ir.S(r,a)},X:function(r,a,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(a){case"X":return ja(n);case"XXXX":case"XX":return vr(n);case"XXXXX":case"XXX":default:return vr(n,":")}},x:function(r,a,t){const n=r.getTimezoneOffset();switch(a){case"x":return ja(n);case"xxxx":case"xx":return vr(n);case"xxxxx":case"xxx":default:return vr(n,":")}},O:function(r,a,t){const n=r.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+Wa(n,":");case"OOOO":default:return"GMT"+vr(n,":")}},z:function(r,a,t){const n=r.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+Wa(n,":");case"zzzz":default:return"GMT"+vr(n,":")}},t:function(r,a,t){const n=Math.trunc(+r/1e3);return ut(n,a.length)},T:function(r,a,t){return ut(+r,a.length)}};function Wa(r,a=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),d=n%60;return d===0?t+String(s):t+String(s)+a+ut(d,2)}function ja(r,a){return r%60===0?(r>0?"-":"+")+ut(Math.abs(r)/60,2):vr(r,a)}function vr(r,a=""){const t=r>0?"-":"+",n=Math.abs(r),s=ut(Math.trunc(n/60),2),d=ut(n%60,2);return t+s+a+d}const Ua=(r,a)=>{switch(r){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},dn=(r,a)=>{switch(r){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},xs=(r,a)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return Ua(r,a);let d;switch(n){case"P":d=a.dateTime({width:"short"});break;case"PP":d=a.dateTime({width:"medium"});break;case"PPP":d=a.dateTime({width:"long"});break;case"PPPP":default:d=a.dateTime({width:"full"});break}return d.replace("{{date}}",Ua(n,a)).replace("{{time}}",dn(s,a))},bs={p:dn,P:xs},gs=/^D+$/,ps=/^Y+$/,hs=["D","DD","YY","YYYY"];function _s(r){return gs.test(r)}function ys(r){return ps.test(r)}function Ss(r,a,t){const n=Ts(r,a,t);if(console.warn(n),hs.includes(r))throw new RangeError(n)}function Ts(r,a,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${a}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ws=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ms=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cs=/^'([^]*?)'?$/,$s=/''/g,Ds=/[a-zA-Z]/;function vn(r,a,t){var h,M,D,$;const n=Jr(),s=n.locale??ds,d=n.firstWeekContainsDate??((M=(h=n.locale)==null?void 0:h.options)==null?void 0:M.firstWeekContainsDate)??1,v=n.weekStartsOn??(($=(D=n.locale)==null?void 0:D.options)==null?void 0:$.weekStartsOn)??0,u=Zt(r,t==null?void 0:t.in);if(!Io(u))throw new RangeError("Invalid time value");let b=a.match(Ms).map(f=>{const m=f[0];if(m==="p"||m==="P"){const T=bs[m];return T(f,s.formatLong)}return f}).join("").match(ws).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const m=f[0];if(m==="'")return{isToken:!1,value:ks(f)};if(La[m])return{isToken:!0,value:f};if(m.match(Ds))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:f}});s.localize.preprocessor&&(b=s.localize.preprocessor(u,b));const p={firstWeekContainsDate:d,weekStartsOn:v,locale:s};return b.map(f=>{if(!f.isToken)return f.value;const m=f.value;(ys(m)||_s(m))&&Ss(m,a,String(r));const T=La[m[0]];return T(u,m,s.localize,p)}).join("")}function ks(r){const a=r.match(Cs);return a?a[1].replace($s,"'"):r}const Ve=r=>vn(new Date(r),"h:mm a"),wt=r=>vn(new Date(r),"MMM d, yyyy"),ca="coveragePlan";function Is(){const{subscribe:r,set:a,update:t}=Jt(new Set);try{const s=localStorage.getItem(ca);if(s){const d=JSON.parse(s);a(new Set(d.selectedMatches))}}catch(s){console.error("Failed to load coverage plan:",s)}const n=s=>{try{const d={selectedMatches:Array.from(s),createdAt:Date.now(),updatedAt:Date.now()};localStorage.setItem(ca,JSON.stringify(d))}catch(d){console.error("Failed to save coverage plan:",d)}};return{subscribe:r,toggleMatch:s=>{t(d=>{const v=new Set(d);return v.has(s)?v.delete(s):v.add(s),n(v),v})},selectMatch:s=>{t(d=>{const v=new Set(d);return v.add(s),n(v),v})},deselectMatch:s=>{t(d=>{const v=new Set(d);return v.delete(s),n(v),v})},clearPlan:()=>{a(new Set),localStorage.removeItem(ca)}}}const _t=Is();Nr(_t,r=>r);const Ps=Nr(_t,r=>r.size),la="teamCoverageStatus";function Es(){const{subscribe:r,set:a,update:t}=Jt({});try{const s=localStorage.getItem(la);if(s){const d=JSON.parse(s);a(d)}}catch(s){console.error("Failed to load coverage status:",s)}const n=s=>{if(Object.keys(s).length!==0)try{localStorage.setItem(la,JSON.stringify(s))}catch(d){console.error("Failed to save coverage status:",d)}};return{subscribe:r,setTeamStatus:(s,d)=>{t(v=>{const u={...v};return d==="not-covered"?delete u[s]:u[s]=d,n(u),u})},getTeamStatus:s=>{let d="not-covered";return r(v=>{d=v[s]||"not-covered"})(),d},clearAllStatus:()=>{a({}),localStorage.removeItem(la)},updateFromPlan:(s,d,v)=>{v!==0&&t(u=>{let b;if(d===0?b="not-covered":d===v?b="covered":b="partially-covered",(u[s]||"not-covered")===b)return u;const h={...u};return b==="not-covered"?delete h[s]:h[s]=b,n(h),h})},importStatuses:s=>{a(s),n(s)}}}const et=Es(),Ba="userRole";function Ns(){const{subscribe:r,set:a}=Jt("media");try{const n=localStorage.getItem(Ba);n&&["media","spectator","coach"].includes(n)&&a(n)}catch(n){console.error("Failed to load user role:",n)}const t=n=>{try{localStorage.setItem(Ba,n)}catch(s){console.error("Failed to save user role:",s)}};return{subscribe:r,setRole:n=>{a(n),t(n)}}}const Er=Ns(),wa=Nr(Er,r=>r==="media"),Ma=Nr(Er,r=>r==="spectator"),Os=Nr(Er,r=>r==="coach");var As=w('<form class="space-y-4"><div class="flex flex-col sm:flex-row gap-3 sm:gap-4"><div class="flex-1"><label for="eventId" class="block text-xs text-[#9fa2ab] mb-1.5">Event ID</label> <input id="eventId" type="text" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;" placeholder="Enter Event ID"/></div> <div class="flex-1 sm:min-w-[160px]"><label for="date" class="block text-xs text-[#9fa2ab] mb-1.5">Date</label> <input id="date" type="date" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;"/></div> <div class="flex-1 sm:min-w-[120px]"><label for="timeWindow" class="block text-xs text-[#9fa2ab] mb-1.5">Window (min)</label> <input id="timeWindow" type="number" min="1" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;"/></div> <div class="flex items-end"><button type="submit" class="px-4 py-2 sm:py-2 text-sm font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0 disabled:opacity-50 disabled:cursor-not-allowed"> </button></div></div></form>');function Fs(r,a){Ft(a,!1);let t=qe(a,"eventId",8),n=qe(a,"date",8),s=qe(a,"timeWindow",8),d=qe(a,"onLoad",8),v=qe(a,"loading",8,!1),u=R(t()),b=R(n()),p=R(s());async function h(W){W.preventDefault(),await d()(e(u),e(b),e(p))}ie(()=>(y(t()),e(u),y(n()),e(b),y(s()),e(p)),()=>{t()!==e(u)&&S(u,t()),n()!==e(b)&&S(b,n()),s()!==e(p)&&S(p,s())}),zt(),Lt();var M=As(),D=i(M),$=i(D),f=l(i($),2);aa(f),o($);var m=l($,2),T=l(i(m),2);aa(T),o(m);var N=l(m,2),C=l(i(N),2);aa(C),o(N);var F=l(N,2),H=i(F),ce=i(H,!0);o(H),o(F),o(D),o(M),B(()=>{f.disabled=v(),T.disabled=v(),C.disabled=v(),H.disabled=v(),Bt(H,`background-color: ${v()?"#ca8a04":"#eab308"}; color: #18181b;`),_(ce,v()?"Loading...":"Load")}),Sr(f,()=>e(u),W=>S(u,W)),Sr(T,()=>e(b),W=>S(b,W)),Sr(C,()=>e(p),W=>S(p,W)),kr("submit",M,h),g(r,M),Rt()}const un=(r,a,t,n={})=>{const{excludeSelected:s=!0,preferNoConflicts:d=!0,preferNearSelected:v=!0,maxResults:u=10}=n;return(s?r.filter(h=>!a.has(h.MatchId)):r).map(h=>{const M=[];let D=0;const $=t.has(h.MatchId);if(!$&&d?(D+=50,M.push("No conflicts")):$&&(D-=20,M.push("Has conflicts")),v&&a.size>0){const m=h.ScheduledStartDateTime,T=h.ScheduledEndDateTime,N=r.filter(F=>a.has(F.MatchId));let C=1/0;N.forEach(F=>{const H=F.ScheduledStartDateTime,ce=F.ScheduledEndDateTime,W=Math.abs(m-ce),le=Math.abs(H-T),me=Math.min(W,le);me<C&&(C=me)}),C<7200*1e3?(D+=20,M.push("Near selected matches")):C>14400*1e3&&(D-=10,M.push("Far from selected matches"))}v&&a.size>0&&r.filter(N=>a.has(N.MatchId)).filter(N=>N.CourtName===h.CourtName).length>0&&(D+=15,M.push("Same court as selected matches"));const f=new Date(h.ScheduledStartDateTime).getHours();return f>=8&&f<12&&(D+=5,M.push("Morning match")),{match:h,score:D,reasons:M}}).sort((h,M)=>M.score-h.score).slice(0,u).filter(h=>h.score>0)},_a=(r,a,t,n,s,d={})=>{const{excludeSelected:v=!0,preferUncovered:u=!0,preferNoConflicts:b=!0,preferNearSelected:p=!0,maxResults:h=10}=d,M=[];return r.forEach(D=>{if(v&&a.has(D.MatchId))return;const $=s(D);if(!$)return;const f=n.get($)||"not-covered",m=t.has(D.MatchId);let T=0;const N=[];if(u&&f==="not-covered"&&(T+=10,N.push("Uncovered team")),b&&!m&&(T+=5,N.push("No conflicts")),p&&a.size>0){const C=D.ScheduledStartDateTime;let F=!1;r.forEach(H=>{if(a.has(H.MatchId)){const W=Math.abs(C-H.ScheduledStartDateTime)/6e4;W<=30&&W>0&&(F=!0)}}),F&&(T+=3,N.push("Near selected match"))}T>0&&N.length>0&&M.push({match:D,teamId:$,reason:N.join(", "),score:T})}),M.sort((D,$)=>$.score-D.score).slice(0,h)},Rs=()=>{try{const r=window.location.hash;if(!r||!r.startsWith("#scores="))return null;const a=r.substring(8),t=decodeURIComponent(escape(atob(a))),n=JSON.parse(t);return!n.scores||!Array.isArray(n.scores)?null:{eventId:n.eventId||"",scores:n.scores}}catch(r){return console.error("Failed to extract scores from URL:",r),null}},Ls=()=>{const r=window.location.hash;return r!==null&&r.startsWith("#scores=")},Br={division:null,wave:"all",teams:[],timeRange:{start:null,end:null},conflictsOnly:!1,coverageStatus:"all",priority:"all"},da="matchFilters";function Ws(){const{subscribe:r,set:a,update:t}=Jt(Br);try{const s=localStorage.getItem(da);if(s){const d=JSON.parse(s);a({...Br,...d})}}catch(s){console.error("Failed to load filters:",s)}const n=s=>{try{localStorage.setItem(da,JSON.stringify(s))}catch(d){console.error("Failed to save filters:",d)}};return{subscribe:r,updateFilter:(s,d)=>{t(v=>{const u={...v,[s]:d};return n(u),u})},resetFilters:()=>{a(Br),localStorage.removeItem(da)},setTimeRangePreset:s=>{t(d=>{let v;return s==="morning"?v={...d,timeRange:{start:"00:00",end:"14:29"}}:s==="afternoon"?v={...d,timeRange:{start:"14:30",end:"23:59"}}:v={...d,timeRange:{start:null,end:null}},n(v),v})},getTeamIdentifier:s=>{const v=(s.InvolvedTeam==="first"?s.FirstTeamText:s.SecondTeamText).match(/(\d+-\d+)/);return v?v[1]:""}}}const Ar=Ws();function Ae(r){const t=(r.InvolvedTeam==="first"?r.FirstTeamText:r.SecondTeamText).match(/(\d+-\d+)/);return t?t[1]:""}function Hr(r){const a=new Set(r.map(t=>t.Division.CodeAlias));return Array.from(a).sort()}function Ca(r){const a=new Set;return r.forEach(t=>{const n=Ae(t);n&&a.add(n)}),Array.from(a).sort()}function fn(r){let a=Br;return Ar.subscribe(t=>{a=t})(),r.filter(t=>{if(a.division&&t.Division.CodeAlias!==a.division)return!1;if(a.wave!=="all"){const n=new Date(t.ScheduledStartDateTime).getTime(),s=new Date(n),d=s.getHours(),v=s.getMinutes(),u=d*60+v,b=870;if(a.wave==="morning"&&u>=b||a.wave==="afternoon"&&u<b)return!1}if(a.teams.length>0){const n=Ae(t);if(!n||!a.teams.includes(n))return!1}if(a.timeRange.start||a.timeRange.end){const n=new Date(t.ScheduledStartDateTime).getTime(),s=new Date(n),d=s.getHours(),v=s.getMinutes(),u=d*60+v;if(a.timeRange.start){const[b,p]=a.timeRange.start.split(":").map(Number),h=b*60+p;if(u<h)return!1}if(a.timeRange.end){const[b,p]=a.timeRange.end.split(":").map(Number),h=b*60+p;if(u>h)return!1}}return!0})}function Vt(r,a){Ar.updateFilter(r,a)}function va(){Ar.resetFilters()}const ua="matchPriorities";function js(){const{subscribe:r,set:a,update:t}=Jt({});try{const s=localStorage.getItem(ua);if(s){const d=JSON.parse(s);a(d)}}catch(s){console.error("Failed to load priorities:",s)}const n=s=>{try{localStorage.setItem(ua,JSON.stringify(s))}catch(d){console.error("Failed to save priorities:",d)}};return{subscribe:r,setPriority:(s,d)=>{t(v=>{const u={...v};return d===null?delete u[s]:u[s]=d,n(u),u})},getPriority:s=>{let d=null;return r(v=>{d=v[s]||null})(),d},clearAllPriorities:()=>{a({}),localStorage.removeItem(ua)}}}const Gt=js(),Ya="followedTeams",Ha="teamColors";function Us(){const{subscribe:r,set:a,update:t}=Jt([]),{subscribe:n,set:s,update:d}=Jt(new Map);{try{const b=localStorage.getItem(Ya);b&&a(JSON.parse(b))}catch(b){console.error("Failed to load followed teams:",b)}try{const b=localStorage.getItem(Ha);if(b){const p=JSON.parse(b);s(new Map(Object.entries(p)))}}catch(b){console.error("Failed to load team colors:",b)}}const v=b=>{try{localStorage.setItem(Ya,JSON.stringify(b))}catch(p){console.error("Failed to save followed teams:",p)}},u=b=>{try{const p={};b.forEach((h,M)=>{p[M]=h}),localStorage.setItem(Ha,JSON.stringify(p))}catch(p){console.error("Failed to save team colors:",p)}};return{subscribe:r,followTeam:(b,p)=>{t(h=>{if(h.some(D=>D.teamId===b))return h;const M=[...h,{teamId:b,teamName:p,followedAt:Date.now()}];return v(M),M})},unfollowTeam:b=>{t(p=>{const h=p.filter(M=>M.teamId!==b);return v(h),h}),d(p=>{const h=new Map(p);return h.delete(b),u(h),h})},isFollowing:b=>{let p=!1;return r(h=>{p=h.some(M=>M.teamId===b)})(),p},setTeamColor:(b,p)=>{d(h=>{const M=new Map(h);return M.set(b,p),u(M),M})},getTeamColor:b=>{let p=null;return n(h=>{p=h.get(b)||null})(),p},reorderTeams:(b,p)=>{t(h=>{const M=h.findIndex(f=>f.teamId===b);if(M===-1)return h;const D=[...h],$=D[M];return p==="top"?(D.splice(M,1),D.unshift($)):p==="up"&&M>0?[D[M-1],D[M]]=[D[M],D[M-1]]:p==="down"&&M<D.length-1&&([D[M],D[M+1]]=[D[M+1],D[M]]),v(D),D})}}}const Rr=Us(),Va="notificationPreferences",Lr={upcomingMatchReminder:!0,reminderMinutes:5,scoreUpdateNotification:!0,browserNotifications:!1};function Bs(){const{subscribe:r,set:a,update:t}=Jt(Lr),{subscribe:n,set:s}=Jt("default");{try{const u=localStorage.getItem(Va);if(u){const b=JSON.parse(u);a({...Lr,...b})}}catch(u){console.error("Failed to load notification preferences:",u)}"Notification"in window&&s(Notification.permission)}const d=u=>{try{localStorage.setItem(Va,JSON.stringify(u))}catch(b){console.error("Failed to save notification preferences:",b)}},v=(u,b,p=!1)=>{let h="default";n(M=>{h=M})(),p&&h==="granted"&&"Notification"in window?new Notification(u,{body:b,icon:"/favicon.ico",tag:"courtsync-notification"}):console.log(`[Notification] ${u}: ${b}`)};return{preferences:{subscribe:r},notificationPermission:{subscribe:n},requestPermission:async()=>{if("Notification"in window){let u="default";if(n(b=>{u=b})(),u==="default"){const b=await Notification.requestPermission();return s(b),b==="granted"}return u==="granted"}return!1},checkUpcomingMatches:(u,b)=>{let p=Lr;if(r(D=>{p=D})(),!p.upcomingMatchReminder)return;const h=Date.now(),M=p.reminderMinutes*60*1e3;u.forEach(D=>{const $=D.ScheduledStartDateTime,f=$-h,m=D.FirstTeamText||D.SecondTeamText;if(b.includes(m)&&f>0&&f<=M){const T=`reminder-${D.MatchId}`,N=localStorage.getItem(T);if(!N||Date.now()-parseInt(N)>M){const C=Math.floor(f/6e4);v(`Match starting in ${C} minute${C!==1?"s":""}`,`${D.FirstTeamText} vs ${D.SecondTeamText}
${new Date($).toLocaleTimeString()} - ${D.CourtName}`,p.browserNotifications),localStorage.setItem(T,Date.now().toString())}}})},notifyScoreUpdate:(u,b)=>{let p=Lr;if(r(m=>{p=m})(),!p.scoreUpdateNotification)return;const h=b.sets.find(m=>m.completedAt===0)||b.sets[b.sets.length-1],M=b.sets.filter(m=>m.completedAt>0),D=M.filter(m=>m.team1Score>m.team2Score).length,$=M.filter(m=>m.team2Score>m.team1Score).length;let f=`Score: ${h.team1Score}-${h.team2Score}`;M.length>0&&(f=`Sets: ${D}-${$} | ${f}`),v(`${u.FirstTeamText} vs ${u.SecondTeamText}`,f,p.browserNotifications)},updatePreferences:u=>{t(b=>{const p={...b,...u};return d(p),p})}}}const fa=Bs(),Ys="courtsync-score-updates";let Wr=null;const Hs=()=>{if(!Wr)try{Wr=new BroadcastChannel(Ys)}catch(r){console.error("BroadcastChannel not supported:",r),Wr={postMessage:()=>{},close:()=>{},onmessage:null}}return Wr},Vs=(r,a,t)=>{const n=Hs(),s={type:t?"score-update":"score-delete",eventId:r,matchId:a,score:t||void 0,timestamp:Date.now()};try{n.postMessage(s)}catch(d){console.error("Failed to broadcast score update:",d)}},Ga="scoreHistory",Gs=(r,a,t)=>{try{const n=localStorage.getItem(Ga),s=n?JSON.parse(n):{};s[r.toString()]||(s[r.toString()]=[]);const d={matchId:r,timestamp:Date.now(),sets:[...a.sets],status:a.status,updatedBy:t};s[r.toString()].push(d),s[r.toString()].length>100&&(s[r.toString()]=s[r.toString()].slice(-100)),localStorage.setItem(Ga,JSON.stringify(s))}catch(n){console.error("Failed to save score history:",n)}},Ja="claimHistory",za=1e3;function ma(r){try{const a=localStorage.getItem(Ja),t=a?JSON.parse(a):[];t.unshift(r),t.length>za&&t.splice(za),localStorage.setItem(Ja,JSON.stringify(t))}catch(a){console.error("Failed to save claim history:",a)}}const qa="matchClaims",xa="matchScores",Js=1800*1e3;function mn({eventId:r,userId:a="anonymous"}){const{subscribe:t,set:n,update:s}=Jt(new Map),{subscribe:d,set:v,update:u}=Jt(new Map);{try{const $=localStorage.getItem(qa);if($){const f=JSON.parse($),m=new Map;Object.values(f).forEach(T=>{T.eventId===r&&T.expiresAt>Date.now()&&m.set(T.matchId,T)}),n(m)}}catch($){console.error("Failed to load claims:",$)}try{const $=localStorage.getItem(xa);if($){const f=JSON.parse($),m=new Map;Object.values(f).forEach(T=>{T.eventId===r&&m.set(T.matchId,T)}),v(m)}}catch($){console.error("Failed to load scores:",$)}}const b=$=>{try{const f={};$.forEach(m=>{f[m.matchId.toString()]=m}),localStorage.setItem(qa,JSON.stringify(f))}catch(f){console.error("Failed to save claims:",f)}},p=$=>{try{const f={};$.forEach(m=>{f[m.matchId.toString()]=m}),localStorage.setItem(xa,JSON.stringify(f))}catch(f){console.error("Failed to save scores:",f)}};let h=null;return{claims:{subscribe:t},scores:{subscribe:d},claimMatch:($,f)=>{const m=Date.now(),T=f+Js,N={matchId:$,claimedBy:a,claimedAt:m,expiresAt:T,eventId:r};s(C=>{const F=new Map(C);return F.set($,N),b(F),F}),ma({matchId:$,eventId:r,action:"claimed",userId:a,timestamp:m})},releaseClaim:$=>{s(f=>{const m=f.get($),T=new Map(f);return T.delete($),b(T),m&&uo&&ma({matchId:$,eventId:r,action:"released",userId:m.claimedBy,timestamp:Date.now()}),T})},transferClaim:($,f)=>{let m=!1;if(t(N=>{const C=N.get($);m=(C==null?void 0:C.claimedBy)===a&&C.expiresAt>Date.now()})(),!m)return!1;const T=Date.now();return s(N=>{const C=N.get($);if(!C)return N;const F={...C,claimedBy:f,claimedAt:T},H=new Map(N);return H.set($,F),b(H),ma({matchId:$,eventId:r,action:"transferred",userId:a,timestamp:T,transferredTo:f}),H}),!0},isClaimed:$=>{let f=!1;return t(m=>{const T=m.get($);f=T?T.expiresAt>Date.now():!1})(),f},getClaimStatus:$=>{let f="available";return t(m=>{const T=m.get($);!T||T.expiresAt<Date.now()?f="available":T.claimedBy===a?f="claimed":f="locked"})(),f},getClaimer:$=>{let f=null;return t(m=>{const T=m.get($);f=T&&T.expiresAt>Date.now()?T.claimedBy:null})(),f},isClaimOwner:$=>{let f=!1;return t(m=>{const T=m.get($);f=(T==null?void 0:T.claimedBy)===a&&T.expiresAt>Date.now()})(),f},updateScore:($,f,m)=>{const T={matchId:$,eventId:r,sets:f,status:m,lastUpdated:Date.now(),lastUpdatedBy:a};u(N=>{const C=new Map(N);return C.set($,T),p(C),C}),Vs(r,$,T),Gs($,T,a)},getScore:$=>{let f=null;return d(m=>{f=m.get($)||null})(),f},clearEventData:()=>{s($=>{const f=new Map($);return f.forEach((m,T)=>{m.eventId===r&&f.delete(T)}),b(f),f}),u($=>{const f=new Map($);return f.forEach((m,T)=>{m.eventId===r&&f.delete(T)}),p(f),f})},startPolling:()=>{h||(h=setInterval(()=>{try{const $=localStorage.getItem(xa);if(!$)return;const f=JSON.parse($),m=new Map;let T=!1;d(N=>{Object.values(f).forEach(C=>{if(C.eventId===r){m.set(C.matchId,C);const F=N.get(C.matchId);(!F||C.lastUpdated&&C.lastUpdated>F.lastUpdated)&&(T=!0)}}),T&&u(C=>{const F=new Map(C);return m.forEach((H,ce)=>{const W=C.get(ce);(!W||H.lastUpdated&&H.lastUpdated>W.lastUpdated)&&F.set(ce,H)}),F})})()}catch($){console.error("Failed to poll scores:",$)}},3e3))},stopPolling:()=>{h&&(clearInterval(h),h=null)}}}const ba="matchNotes";function zs(r){const{subscribe:a,set:t,update:n}=Jt(new Map);try{const d=localStorage.getItem(ba);if(d){const v=JSON.parse(d),u=new Map;Object.values(v).forEach(b=>{b.eventId===r&&u.set(b.matchId,b)}),t(u)}}catch(d){console.error("Failed to load match notes:",d)}const s=d=>{try{const v=localStorage.getItem(ba),u=v?JSON.parse(v):{};d.forEach(b=>{u[`${r}-${b.matchId}`]=b}),Object.keys(u).forEach(b=>{if(b.startsWith(`${r}-`)){const p=parseInt(b.split("-").pop()||"0");d.has(p)||delete u[b]}}),localStorage.setItem(ba,JSON.stringify(u))}catch(v){console.error("Failed to save match notes:",v)}};return{subscribe:a,setNote:(d,v)=>{const u=Date.now();n(b=>{const p=new Map(b),h=p.get(d);return v.trim()?p.set(d,{matchId:d,eventId:r,note:v.trim(),createdAt:(h==null?void 0:h.createdAt)||u,updatedAt:u}):p.delete(d),s(p),p})},getNote:d=>{let v="";return a(u=>{var b;v=((b=u.get(d))==null?void 0:b.note)||""})(),v},deleteNote:d=>{n(v=>{const u=new Map(v);return u.delete(d),s(u),u})},hasNote:d=>{let v=!1;return a(u=>{const b=u.get(d);v=b!==void 0&&b.note.trim().length>0})(),v}}}function xn(r){return zs(r)}var qs=w('<div class="text-center py-8 text-[#9fa2ab] text-sm">Loading schedule...</div>'),Xs=w('<div class="text-center py-4 text-red-400 text-sm"> </div>'),Qs=w("<button>Statistics</button>"),Ks=w('<div class="text-[#9fa2ab]">TeamStatsView - To be migrated</div>'),Zs=w('<div class="text-xs text-[#808593] py-4 text-center">No schedule data available</div>'),ei=w('<div class="flex-shrink-0 w-20 text-xs text-[#facc15] font-medium"> </div>'),ti=w('<span class="text-[#808593] font-medium">WORK</span> <span class="text-[#808593] ml-2"> </span>',1),ri=w('<span class="text-[#808593] mx-1">vs</span> ',1),ai=w('<span class="text-[#eab308] font-semibold">PLAY</span> <span class="text-[#c0c2c8] ml-2"> <!></span>',1),ni=w('<span class="mx-1">vs</span> ',1),oi=w('<span class="text-[#808593] font-medium">WATCH</span> <span class="text-[#808593] ml-2"> <!></span>',1),si=w('<div class="flex-shrink-0"><span class="px-2 py-0.5 text-[10px] font-semibold rounded"> </span></div>'),ii=w('<div><div></div> <div class="flex-shrink-0 w-16 text-xs font-medium text-[#9fa2ab]"> </div> <div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <!> <div class="flex-1 min-w-0"><div class="text-xs"><!></div></div> <!></div>'),ci=w('<div class="space-y-1"><div class="flex items-center gap-2 mb-2 pb-1 border-b border-[#454654]"><h6 class="text-xs font-semibold text-[#f8f8f9]"> </h6> <span class="text-[10px] text-[#808593]"> </span></div> <!></div>'),li=w('<div><h5 class="text-xs font-semibold text-[#9fa2ab] uppercase tracking-wider mb-2">Complete Schedule</h5> <div class="space-y-4"><!></div></div>'),di=w('<div class="text-xs text-[#808593] py-4 text-center">No pool data available for this team</div>'),vi=w("<option> </option>"),ui=w('<div class="mb-4"><label class="text-xs text-[#9fa2ab] mb-1 block">Pool:</label> <select class="w-full px-3 py-2.5 sm:py-2 text-sm font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"></select></div>'),fi=w('<tr><td class="px-2 sm:px-3 py-2 text-[#f8f8f9] font-medium"> </td><td class="px-2 sm:px-3 py-2"><div> </div></td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td></tr>'),mi=w('<div class="border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="px-3 sm:px-4 py-2 bg-[#454654] border-b border-[#525463]"><h6 class="text-xs sm:text-sm font-semibold text-[#f8f8f9]"> </h6></div> <div class="overflow-x-auto"><table class="w-full text-xs min-w-[500px]"><thead><tr class="border-b border-[#454654] bg-[#454654]/50"><th class="px-2 sm:px-3 py-2 text-left text-[#9fa2ab] font-semibold">Rank</th><th class="px-2 sm:px-3 py-2 text-left text-[#9fa2ab] font-semibold">Team</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">W</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">L</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">Sets</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">Points</th></tr></thead><tbody></tbody></table></div></div>'),xi=w('<div class="flex-shrink-0 w-20 text-xs text-[#facc15] font-medium"> </div>'),bi=w('<span class="text-[#808593] mx-1">vs</span> ',1),gi=w('<div><div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <!> <div class="flex-1 min-w-0 text-xs text-[#c0c2c8]"> <!></div></div>'),pi=w('<div class="border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="px-3 sm:px-4 py-2 bg-[#454654] border-b border-[#525463]"><h6 class="text-xs sm:text-sm font-semibold text-[#f8f8f9]">Pool Schedule</h6></div> <div class="p-3 sm:p-4 space-y-2"></div></div>'),hi=w('<div class="space-y-4"><!> <!></div>'),_i=w('<div class="text-xs text-[#808593] py-4 text-center">Loading pool sheet...</div>'),yi=w("<!> <!>",1),Si=w('<div><h5 class="text-xs font-semibold text-[#9fa2ab] uppercase tracking-wider mb-2">Pool Standings</h5> <!></div>'),Ti=w('<div class="space-y-4"><div class="flex items-center gap-2 border-b border-[#454654] pb-2"><button>Schedule</button> <button>Pool Sheet</button> <!></div> <!></div>'),wi=w('<div class="mt-2 border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="p-3 sm:p-4"><div class="flex items-center justify-between mb-3 sm:mb-4"><h4 class="text-xs sm:text-sm font-semibold text-[#f8f8f9] truncate pr-2"> </h4> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!> <!> <!></div></div>');function bn(r,a){Ft(a,!1);const t=R(),n=R(),s=R(),d=R(),v=R();let u=qe(a,"match",8),b=qe(a,"eventId",8),p=qe(a,"clubId",8),h=qe(a,"onClose",8),M=qe(a,"matches",24,()=>[]),D=R(null),$=R([]),f=R([]),m=R([]),T=R([]),N=R(null),C=R(null),F=R("schedule"),H=R(!0),ce=R(null);function W(){return u().InvolvedTeam==="first"?u().FirstTeamText:u().InvolvedTeam==="second"?u().SecondTeamText:""}const le=Ae(u()),me=W();Sa(async()=>{S(H,!0),S(ce,null);try{const I=(await po(b(),p())).value||[],ae=W();if(!ae){S(ce,"Could not extract team name from match"),S(H,!1);return}const K=I.find(Re=>{if(Re.TeamText===ae||Re.TeamName===ae)return!0;const tt=ae.match(/(\d+-\d+)/);if(tt){const P=tt[1];return Re.TeamName.includes(P)||Re.TeamText.includes(P)}return!1});if(!K){S(ce,`Team not found: ${ae}`),S(H,!1);return}const de=K.TeamId,ye=K.TeamDivision.DivisionId;S(D,{TeamId:de,DivisionId:ye,TeamName:K.TeamName,TeamText:K.TeamText});const[ke,re,We]=await Promise.all([sa(b(),ye,de,"current").catch(()=>[]),sa(b(),ye,de,"work").catch(()=>[]),sa(b(),ye,de,"future").catch(()=>[])]),je=(Re,tt=!1)=>Array.isArray(Re)?Re.flatMap(P=>{var q,j;return tt?P.Match?[{...P.Match,Court:P.Match.Court||null,Division:{...P.Play,PlayId:(q=P.Play)==null?void 0:q.PlayId},FirstTeamText:((j=P.Play)==null?void 0:j.CompleteShortName)||"Work Assignment",SecondTeamText:void 0}]:[]:!P.Matches||!Array.isArray(P.Matches)?[]:P.Matches.map(z=>{var be;return{...z,Court:z.Court||null,Division:{...P.Play,PlayId:(be=P.Play)==null?void 0:be.PlayId}}})}):[];S($,je(ke,!1)),S(f,je(re,!0)),S(m,je(We,!1));const Ue=await ho(b(),ye).catch(()=>null);Ue!=null&&Ue.Plays&&S(T,Ue.Plays)}catch(x){S(ce,x instanceof Error?x.message:"Failed to load team data")}finally{S(H,!1)}});function G(x,I=!1){var ke,re;const ae=typeof x.ScheduledStartDateTime=="string"?new Date(x.ScheduledStartDateTime).getTime():x.ScheduledStartDateTime,K=((ke=x.FirstTeamText)==null?void 0:ke.includes("630"))||((re=x.SecondTeamText)==null?void 0:re.includes("630")),de=wt(ae),ye=Ve(ae);return{matchDate:de,startTimeDisplay:ye,isPlaying:K,isWork:I,scheduleMatch:x}}ie(()=>e(F),()=>{e(F)==="poolsheet"&&S(C,null)}),ie(()=>(e($),e(f),e(m)),()=>{S(t,[...e($).map(I=>({...I,type:"current"})),...e(f).map(I=>({...I,type:"work"})),...e(m).map(I=>({...I,type:"future"}))].filter((I,ae,K)=>K.findIndex(de=>de.MatchId===I.MatchId)===ae).sort((I,ae)=>{const K=typeof I.ScheduledStartDateTime=="string"?new Date(I.ScheduledStartDateTime).getTime():I.ScheduledStartDateTime||0,de=typeof ae.ScheduledStartDateTime=="string"?new Date(ae.ScheduledStartDateTime).getTime():ae.ScheduledStartDateTime||0;return K-de}))}),ie(()=>e(t),()=>{S(n,(()=>{const x=new Set;return e(t).forEach(I=>{if(I.Division&&I.Division.PlayId){const ae=Math.abs(I.Division.PlayId);x.add(ae)}}),Array.from(x)})())}),ie(()=>(e(T),e(n)),()=>{S(s,e(T).filter(x=>{const I=Math.abs(x.PlayId);return e(n).includes(I)}))}),ie(()=>(e(s),e(N)),()=>{e(s).length>0&&!e(N)&&S(N,e(s)[0].PlayId)}),ie(()=>(e(N),e(F),y(b())),()=>{e(N)&&e(F)==="poolsheet"&&_o(b(),e(N)).then(x=>{S(C,x)}).catch(x=>{console.error("Failed to fetch pool sheet:",x),S(C,null)})}),ie(()=>(e(t),wt),()=>{S(d,(()=>{const x={};return e(t).forEach(I=>{const ae=typeof I.ScheduledStartDateTime=="string"?new Date(I.ScheduledStartDateTime).getTime():I.ScheduledStartDateTime||0,K=wt(ae);x[K]||(x[K]=[]),x[K].push(I)}),x})())}),ie(()=>e(d),()=>{S(v,Object.keys(e(d)).sort((x,I)=>{const ae=new Date(x).getTime(),K=new Date(I).getTime();return ae-K}))}),zt(),Lt();var De=wi(),_e=i(De),Fe=i(_e),Be=i(Fe),Ee=i(Be);o(Be);var at=l(Be,2);at.__click=function(...x){var I;(I=h())==null||I.apply(this,x)},o(Fe);var ot=l(Fe,2);{var xe=x=>{var I=qs();g(x,I)};E(ot,x=>{e(H)&&x(xe)})}var Le=l(ot,2);{var Ce=x=>{var I=Xs(),ae=i(I,!0);o(I),B(()=>_(ae,e(ce))),g(x,I)};E(Le,x=>{e(ce)&&x(Ce)})}var A=l(Le,2);{var k=x=>{var I=Ti(),ae=i(I),K=i(ae);K.__click=()=>S(F,"schedule");var de=l(K,2);de.__click=()=>S(F,"poolsheet");var ye=l(de,2);{var ke=Ue=>{var Re=Qs();Re.__click=()=>S(F,"stats"),B(()=>we(Re,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(F)==="stats"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)),g(Ue,Re)};E(ye,Ue=>{y(M()),c(()=>M().length>0&&le)&&Ue(ke)})}o(ae);var re=l(ae,2);{var We=Ue=>{var Re=Ks();g(Ue,Re)},je=Ue=>{var Re=Dt(),tt=ft(Re);{var P=j=>{var z=li(),be=l(i(z),2),ge=i(be);{var pe=he=>{var $e=Zs();g(he,$e)},ee=he=>{var $e=Dt(),He=ft($e);xt(He,1,()=>e(v),mt,(Ye,fe)=>{const Se=X(()=>(e(d),e(fe),c(()=>e(d)[e(fe)])));var Te=ci(),O=i(Te),U=i(O),ne=i(U,!0);o(U);var se=l(U,2),oe=i(se);o(se),o(O);var ue=l(O,2);xt(ue,1,()=>e(Se),mt,(V,Me)=>{const L=X(()=>(e(Me),c(()=>G(e(Me),e(Me).type==="work"))));var Z=ii(),Y=i(Z),J=l(Y,2),te=i(J,!0);o(J);var Ie=l(J,2),Pe=i(Ie,!0);o(Ie);var Ke=l(Ie,2);{var Ge=Ne=>{var it=ei(),Je=i(it,!0);o(it),B(()=>_(Je,(y(e(L)),c(()=>e(L).scheduleMatch.Court.Name)))),g(Ne,it)};E(Ke,Ne=>{y(e(L)),c(()=>e(L).scheduleMatch.Court)&&Ne(Ge)})}var ve=l(Ke,2),rt=i(ve),Qe=i(rt);{var ct=Ne=>{var it=ti(),Je=l(ft(it),2),pt=i(Je,!0);o(Je),B(()=>_(pt,(y(e(L)),c(()=>{var kt,gt;return((kt=e(L).scheduleMatch.Division)==null?void 0:kt.CompleteShortName)||((gt=e(L).scheduleMatch.Division)==null?void 0:gt.FullName)||e(L).scheduleMatch.FirstTeamText})))),g(Ne,it)},Oe=Ne=>{var it=Dt(),Je=ft(it);{var pt=gt=>{var nt=ai(),Xe=l(ft(nt),2),ht=i(Xe),Ze=l(ht);{var bt=lt=>{var dt=ri(),Ct=l(ft(dt));B(()=>_(Ct,` ${y(e(L)),c(()=>e(L).scheduleMatch.SecondTeamText)??""}`)),g(lt,dt)};E(Ze,lt=>{y(e(L)),c(()=>e(L).scheduleMatch.SecondTeamText)&&lt(bt)})}o(Xe),B(()=>_(ht,`${y(e(L)),c(()=>e(L).scheduleMatch.FirstTeamText)??""} `)),g(gt,nt)},kt=gt=>{var nt=oi(),Xe=l(ft(nt),2),ht=i(Xe),Ze=l(ht);{var bt=lt=>{var dt=ni(),Ct=l(ft(dt));B(()=>_(Ct,` ${y(e(L)),c(()=>e(L).scheduleMatch.SecondTeamText)??""}`)),g(lt,dt)};E(Ze,lt=>{y(e(L)),c(()=>e(L).scheduleMatch.SecondTeamText)&&lt(bt)})}o(Xe),B(()=>_(ht,`${y(e(L)),c(()=>e(L).scheduleMatch.FirstTeamText)??""} `)),g(gt,nt)};E(Je,gt=>{y(e(L)),c(()=>e(L).isPlaying)?gt(pt):gt(kt,!1)},!0)}g(Ne,it)};E(Qe,Ne=>{y(e(L)),c(()=>e(L).isWork)?Ne(ct):Ne(Oe,!1)})}o(rt),o(ve);var ze=l(ve,2);{var Q=Ne=>{var it=si(),Je=i(it),pt=i(Je,!0);o(Je),o(it),B(()=>{Bt(Je,`background-color: ${y(e(L)),c(()=>e(L).scheduleMatch.Division.ColorHex)??""}20; color: ${y(e(L)),c(()=>e(L).scheduleMatch.Division.ColorHex)??""}; border: 1px solid ${y(e(L)),c(()=>e(L).scheduleMatch.Division.ColorHex)??""}40;`),_(pt,(y(e(L)),c(()=>e(L).scheduleMatch.Division.CodeAlias)))}),g(Ne,it)};E(ze,Ne=>{y(e(L)),c(()=>e(L).scheduleMatch.Division)&&Ne(Q)})}o(Z),B(()=>{we(Z,1,`flex items-center gap-3 px-3 py-2 rounded border ${y(e(L)),c(()=>e(L).isWork?"border-[#525463] bg-[#454654]/30":e(L).isPlaying?"border-[#eab308]/50 bg-[#eab308]/5":"border-[#454654] bg-[#3b3c48]/30")??""}`),we(Y,1,`flex-shrink-0 w-1 h-full rounded-full ${y(e(L)),c(()=>e(L).isWork?"bg-[#808593]":e(L).isPlaying?"bg-[#eab308]":"bg-[#525463]")??""}`),_(te,(y(e(L)),c(()=>e(L).matchDate))),_(Pe,(y(e(L)),c(()=>e(L).startTimeDisplay)))}),g(V,Z)}),o(Te),B(()=>{_(ne,e(fe)),_(oe,`(${y(e(Se)),c(()=>e(Se).length)??""} match${y(e(Se)),c(()=>e(Se).length!==1?"es":"")??""})`)}),g(Ye,Te)}),g(he,$e)};E(ge,he=>{e(v),c(()=>e(v).length===0)?he(pe):he(ee,!1)})}o(be),o(z),g(j,z)},q=j=>{var z=Si(),be=l(i(z),2);{var ge=ee=>{var he=di();g(ee,he)},pe=ee=>{var he=yi(),$e=ft(he);{var He=Te=>{var O=ui(),U=l(i(O),2);U.__change=se=>S(N,Number(se.target.value)),xt(U,5,()=>e(s),mt,(se,oe)=>{var ue=vi(),V=i(ue,!0);o(ue);var Me={};B(()=>{_(V,(e(oe),c(()=>e(oe).CompleteFullName||e(oe).FullName||`Pool ${e(oe).PlayId}`))),Me!==(Me=(e(oe),c(()=>e(oe).PlayId)))&&(ue.value=(ue.__value=(e(oe),c(()=>e(oe).PlayId)))??"")}),g(se,ue)}),o(U);var ne;yr(U),o(O),B(()=>{ne!==(ne=e(N)||"")&&(U.value=(U.__value=e(N)||"")??"",fr(U,e(N)||""))}),g(Te,O)};E($e,Te=>{e(s),c(()=>e(s).length>1)&&Te(He)})}var Ye=l($e,2);{var fe=Te=>{var O=hi(),U=i(O);{var ne=ue=>{var V=mi(),Me=i(V),L=i(Me),Z=i(L);o(L),o(Me);var Y=l(Me,2),J=i(Y),te=l(i(J));xt(te,5,()=>(e(C),c(()=>e(C).Pool.Teams)),mt,(Ie,Pe)=>{const Ke=X(()=>(e(Pe),c(()=>{var nt;return(nt=e(Pe).TeamText)==null?void 0:nt.includes("630")})));var Ge=fi(),ve=i(Ge),rt=i(ve,!0);o(ve);var Qe=l(ve),ct=i(Qe),Oe=i(ct,!0);o(ct),o(Qe);var ze=l(Qe),Q=i(ze,!0);o(ze);var Ne=l(ze),it=i(Ne,!0);o(Ne);var Je=l(Ne),pt=i(Je);o(Je);var kt=l(Je),gt=i(kt,!0);o(kt),o(Ge),B(()=>{we(Ge,1,`border-b border-[#454654] ${e(Ke)?"bg-[#eab308]/10":""}`),_(rt,(e(Pe),c(()=>e(Pe).FinishRank||e(Pe).OverallRank||"-"))),we(ct,1,e(Ke)?"text-[#facc15] font-semibold":"text-[#c0c2c8]"),_(Oe,(e(Pe),c(()=>e(Pe).TeamText))),_(Q,(e(Pe),c(()=>e(Pe).MatchesWon??"-"))),_(it,(e(Pe),c(()=>e(Pe).MatchesLost??"-"))),_(pt,`${e(Pe),c(()=>e(Pe).SetsWon??"-")??""}-${e(Pe),c(()=>e(Pe).SetsLost??"-")??""}`),_(gt,(e(Pe),c(()=>e(Pe).PointRatio&&e(Pe).PointRatio!=="NaN"?e(Pe).PointRatio:"-")))}),g(Ie,Ge)}),o(te),o(J),o(Y),o(V),B(()=>_(Z,`${e(C),c(()=>e(C).Pool.CompleteFullName||e(C).Pool.FullName)??""} - Standings`)),g(ue,V)};E(U,ue=>{e(C),c(()=>e(C).Pool&&e(C).Pool.Teams&&e(C).Pool.Teams.length>0)&&ue(ne)})}var se=l(U,2);{var oe=ue=>{var V=pi(),Me=l(i(V),2);xt(Me,5,()=>(e(C),c(()=>e(C).Pool.Matches)),mt,(L,Z)=>{const Y=X(()=>(e(Z),c(()=>typeof e(Z).ScheduledStartDateTime=="string"?new Date(e(Z).ScheduledStartDateTime).getTime():e(Z).ScheduledStartDateTime))),J=X(()=>(e(Z),c(()=>{var Oe,ze;return((Oe=e(Z).FirstTeamText)==null?void 0:Oe.includes("630"))||((ze=e(Z).SecondTeamText)==null?void 0:ze.includes("630"))})));var te=gi(),Ie=i(te),Pe=i(Ie,!0);o(Ie);var Ke=l(Ie,2);{var Ge=Oe=>{var ze=xi(),Q=i(ze,!0);o(ze),B(()=>_(Q,(e(Z),c(()=>e(Z).Court.Name)))),g(Oe,ze)};E(Ke,Oe=>{e(Z),c(()=>e(Z).Court)&&Oe(Ge)})}var ve=l(Ke,2),rt=i(ve),Qe=l(rt);{var ct=Oe=>{var ze=bi(),Q=l(ft(ze));B(()=>_(Q,` ${e(Z),c(()=>e(Z).SecondTeamText)??""}`)),g(Oe,ze)};E(Qe,Oe=>{e(Z),c(()=>e(Z).SecondTeamText)&&Oe(ct)})}o(ve),o(te),B(Oe=>{we(te,1,`flex items-center gap-3 px-3 py-2 rounded border ${e(J)?"border-[#eab308]/50 bg-[#eab308]/5":"border-[#454654] bg-[#3b3c48]/30"}`),_(Pe,Oe),_(rt,`${e(Z),c(()=>e(Z).FirstTeamText)??""} `)},[()=>(y(Ve),y(e(Y)),c(()=>Ve(e(Y))))]),g(L,te)}),o(Me),o(V),g(ue,V)};E(se,ue=>{e(C),c(()=>e(C).Pool&&e(C).Pool.Matches&&e(C).Pool.Matches.length>0)&&ue(oe)})}o(O),g(Te,O)},Se=Te=>{var O=Dt(),U=ft(O);{var ne=se=>{var oe=_i();g(se,oe)};E(U,se=>{e(N)&&se(ne)},!0)}g(Te,O)};E(Ye,Te=>{e(N)&&e(C)?Te(fe):Te(Se,!1)})}g(ee,he)};E(be,ee=>{e(s),c(()=>e(s).length===0)?ee(ge):ee(pe,!1)})}o(z),g(j,z)};E(tt,j=>{e(F)==="schedule"?j(P):j(q,!1)},!0)}g(Ue,Re)};E(re,Ue=>{e(F)==="stats"&&le?Ue(We):Ue(je,!1)})}o(I),B(()=>{we(K,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(F)==="schedule"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),we(de,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(F)==="poolsheet"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),g(x,I)};E(A,x=>{!e(H)&&e(D)&&x(k)})}o(_e),o(De),B(()=>_(Ee,`${e(D),c(()=>{var x;return((x=e(D))==null?void 0:x.TeamText)||me})??""} - Full Schedule`)),g(r,De),Rt()}Kt(["click","change"]);var Mi=w("<button><span> </span> <span> </span></button>"),Ci=w('<div class="bg-[#3b3c48] border border-[#454654] rounded-lg p-2 shadow-lg min-w-[160px]"><div class="text-xs font-medium text-[#9fa2ab] uppercase tracking-wider mb-2 px-1">Set Priority</div> <div class="space-y-1"></div></div>');function gn(r,a){Ft(a,!1);let t=qe(a,"matchId",8),n=qe(a,"currentPriority",8),s=qe(a,"onPriorityChange",8),d=qe(a,"onClose",8,void 0),v=R(null);const u=[{value:"must-cover",label:"Must Cover",color:"#eab308",icon:"â­"},{value:"priority",label:"Priority",color:"#f59e0b",icon:"ð¸"},{value:"optional",label:"Optional",color:"#9fa2ab",icon:"â"},{value:null,label:"Clear",color:"#9fa2ab",icon:"â"}];function b(M){s()(t(),M),d()&&d()()}Lt();var p=Ci(),h=l(i(p),2);xt(h,5,()=>u,mt,(M,D)=>{const $=X(()=>(y(n()),e(D),c(()=>n()===e(D).value))),f=X(()=>(e(v),e(D),c(()=>e(v)===e(D).value)));var m=Mi();m.__click=()=>b(e(D).value);var T=i(m),N=i(T,!0);o(T);var C=l(T,2),F=i(C,!0);o(C),o(m),B(()=>{we(m,1,`w-full text-left px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-2 ${e($)?"bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50":e(f)?"bg-[#454654] text-[#f8f8f9]":"text-[#c0c2c8] hover:bg-[#454654]"}`),_(N,(e(D),c(()=>e(D).icon))),_(F,(e(D),c(()=>e(D).label)))}),kr("mouseenter",m,()=>S(v,e(D).value)),kr("mouseleave",m,()=>S(v,null)),g(M,m)}),o(h),o(p),g(r,p),Rt()}Kt(["click"]);var $i=w("<button><span> </span> <span> </span></button>"),Di=w('<div class="bg-[#3b3c48] border border-[#454654] rounded-lg p-2 shadow-lg min-w-[180px]"><div class="text-xs font-medium text-[#9fa2ab] uppercase tracking-wider mb-2 px-1">Coverage Status</div> <div class="text-xs text-[#c0c2c8] mb-2 px-1"> </div> <div class="space-y-1"></div></div>');function $a(r,a){Ft(a,!1);let t=qe(a,"teamId",8),n=qe(a,"currentStatus",8),s=qe(a,"onStatusChange",8),d=qe(a,"onClose",8,void 0),v=R(null);const u=[{value:"not-covered",label:"Not Covered",color:"#9fa2ab",icon:"â"},{value:"covered",label:"Covered",color:"#10b981",icon:"â"},{value:"partially-covered",label:"Partially Covered",color:"#f59e0b",icon:"â"},{value:"planned",label:"Planned",color:"#eab308",icon:"ð"}];function b($){s()(t(),$),d()&&d()()}Lt();var p=Di(),h=l(i(p),2),M=i(h);o(h);var D=l(h,2);xt(D,5,()=>u,mt,($,f)=>{const m=X(()=>(y(n()),e(f),c(()=>n()===e(f).value))),T=X(()=>(e(v),e(f),c(()=>e(v)===e(f).value)));var N=$i();N.__click=()=>b(e(f).value);var C=i(N),F=i(C,!0);o(C);var H=l(C,2),ce=i(H,!0);o(H),o(N),B(()=>{we(N,1,`w-full text-left px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-2 ${y(e(m)),e(f),y(e(T)),c(()=>e(m)?e(f).value==="covered"?"bg-green-500/20 text-green-400 border border-green-500/50":e(f).value==="planned"?"bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50":e(f).value==="partially-covered"?"bg-[#f59e0b]/20 text-[#fbbf24] border border-[#f59e0b]/50":"bg-[#454654] text-[#9fa2ab] border border-[#525463]":e(T)?"bg-[#454654] text-[#f8f8f9]":"text-[#c0c2c8] hover:bg-[#454654]")??""}`),_(F,(e(f),c(()=>e(f).icon))),_(ce,(e(f),c(()=>e(f).label)))}),kr("mouseenter",N,()=>S(v,e(f).value)),kr("mouseleave",N,()=>S(v,null)),g($,N)}),o(D),o(p),B(()=>_(M,`Team ${t()??""}`)),g(r,p),Rt()}Kt(["click"]);var ki=w('<div class="text-center py-12 text-[#9fa2ab] text-sm"> </div>'),Ii=w('<div class="text-[#9fa2ab] mb-4">LiveMatchDashboard - To be migrated</div>'),Pi=w("<button> </button>"),Ei=w('<div class="mb-4 px-4 py-2 rounded-lg border border-[#454654] bg-[#3b3c48] flex items-center justify-between flex-wrap gap-2"><div class="flex items-center gap-4 flex-wrap"><div class="text-xs text-[#9fa2ab]"><span class="font-semibold text-[#f8f8f9]"> </span> Coverage</div> <div class="flex items-center gap-2 text-xs"><span class="text-green-400"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#f59e0b]"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#eab308]"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#808593]"> </span></div></div> <div class="flex items-center gap-2 flex-wrap"><button title="Dim covered teams to focus on uncovered"> </button> <!></div></div>'),Ni=w('<div class="flex items-center justify-between px-3 py-2 rounded bg-[#454654] border border-[#525463] hover:border-[#eab308]/50 transition-colors"><div class="flex-1 min-w-0"><div class="text-xs font-medium text-[#f8f8f9] truncate"> </div> <div class="text-[10px] text-[#9fa2ab] mt-0.5"> </div></div> <button class="ml-3 px-3 py-1 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors flex-shrink-0">Add</button></div>'),Oi=w('<div class="mb-4 rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-3"><h3 class="text-sm font-semibold text-[#f8f8f9]">Coverage Suggestions</h3> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors" aria-label="Close suggestions">â</button></div> <div class="space-y-2"></div></div>'),Ai=w('<div class="mb-4 px-3 py-2 rounded-lg border border-[#454654] bg-[#3b3c48] text-xs"><div class="font-medium text-[#9fa2ab] uppercase tracking-wider mb-2">Coverage Status Legend</div> <div class="flex flex-wrap gap-4 text-[#c0c2c8]"><div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-[#eab308] bg-[#eab308]/5"></div> <span>Uncovered</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-[#eab308]/50 bg-[#eab308]/10"></div> <span>Planned</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-green-500/30 bg-green-950/5"></div> <span>Covered</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-red-800/50 bg-red-950/10"></div> <span>Conflict</span></div></div></div>'),Fi=w('<div class="text-center py-12 text-[#9fa2ab] text-sm">No matches found</div>'),Ri=w("<span> </span>"),Li=ya('<svg class="w-3 h-3 text-[#facc15]" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Wi=w("<button><!></button>"),ji=ya('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>'),Ui=w('<div class="absolute left-0 top-8 z-50"><!></div>'),Bi=w('<div class="relative"><button aria-label="Set priority"> <!></button> <!></div>'),Yi=w('<div class="absolute left-0 top-8 z-50"><!></div>'),Hi=w('<div class="relative"><button aria-label="Set coverage status"> </button> <!></div>'),Vi=w('<div><div><!> <div class="flex-1 min-w-0"><div class="text-sm font-semibold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <!> <!> <div class="flex-shrink-0 w-4"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div></div> <!></div>'),Gi=w('<div class="space-y-1.5"><div class="flex items-center justify-between mb-2 pb-1 border-b border-[#454654]"><div class="flex items-center gap-2"><h3 class="text-base font-semibold text-[#f8f8f9]"> </h3> <span class="text-xs text-[#9fa2ab]"> </span></div> <!></div> <!></div>'),Ji=w('<div class="text-[#9fa2ab]">Scorekeeper - To be migrated</div>'),zi=w('<div><!> <!> <!> <!> <div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4"><div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Sort:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>Team</button> <button>Court</button> <button>Time</button></div></div> <div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Wave:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div></div> <div class="space-y-4"><!></div> <!></div>');function qi(r,a){Ft(a,!1);const t=()=>Qt(Ma,"$isSpectator",d),n=()=>Qt(Ar,"$filters",d),s=()=>Qt(wa,"$isMedia",d),[d,v]=Ta(),u=R(),b=R(),p=R(),h=R(),M=R(),D=R(),$=R(),f=R(),m=R(),T=R(),N=R(),C=R();let F=qe(a,"matches",8),H=qe(a,"eventId",8),ce=qe(a,"clubId",8),W=R("team"),le=R(null),me=R(null),G=R(null),De=R(!1),_e=R(!1),Fe=R(null),Be=R(new Set),Ee=R();xn(H());function at(A){return A.InvolvedTeam==="first"?A.SecondTeamText:A.InvolvedTeam==="second"?A.FirstTeamText:`${A.FirstTeamText} vs ${A.SecondTeamText}`}Sa(()=>{if(Ls()){const A=Rs();A&&A.scores.length>0&&JSON.stringify({eventId:A.eventId,scores:A.scores},null,2)}if(e(Ee).startPolling(),t()){let A=[];if(Rr.subscribe(k=>{A=k.map(x=>x.teamId)})(),A.length>0){const k=setInterval(()=>{fa.checkUpcomingMatches(F(),A)},6e4);return()=>clearInterval(k)}}}),Mn(()=>{e(Ee).stopPolling()}),ie(()=>(t(),y(H())),()=>{const A=t();S(Ee,mn({eventId:H(),userId:A?"spectator":"anonymous"}))}),ie(()=>y(F()),()=>{S(u,Ir(F()))}),ie(()=>(n(),y(F()),Ve),()=>{S(b,(()=>{if(n().wave!=="all"){const A=n().wave==="morning"?"08:00":"14:30",k=n().wave==="morning"?"14:30":"23:59";return Hr(F()).filter(x=>F().some(I=>{const ae=Ve(I.ScheduledStartDateTime),K=ae.split(" ")[1]||ae;return K>=A&&K<k&&I.Division.Name===x}))}return Hr(F())})())}),ie(()=>y(F()),()=>{S(p,Ca(F()))}),ie(()=>(y(F()),et),()=>{S(h,(()=>{const A=new Map;return F().forEach(k=>{const x=Ae(k);x&&A.set(x,et.getTeamStatus(x))}),A})())}),ie(()=>(y(F()),e(u),e(h),Ae),()=>{S(M,(()=>{const A=Ut(_t);return _a(F(),A,e(u),e(h),Ae,{excludeSelected:!0,preferUncovered:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:10})})())}),ie(()=>(y(F()),n(),t(),Rr),()=>{S(D,(()=>{let A=fn(F());if(n().priority&&n().priority!=="all"&&(A=A.filter(k=>Gt.getPriority(k.MatchId)===n().priority)),n().coverageStatus&&n().coverageStatus!=="all"&&(A=A.filter(k=>{const x=Ae(k);if(!x)return!0;const I=et.getTeamStatus(x);return n().coverageStatus==="uncovered"?I==="not-covered":n().coverageStatus==="covered"?I==="covered"||I==="partially-covered":n().coverageStatus==="planned"?I==="planned":!0})),t()){let k=[];Rr.subscribe(x=>{k=x.map(I=>I.teamId)})(),k.length>0&&(A=A.filter(x=>{const I=Ae(x);return I&&k.includes(I)}))}return A})())}),ie(()=>(y(F()),e(u)),()=>{S($,(()=>{const A=Ut(_t);return un(F(),A,e(u),{excludeSelected:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:50})})())}),ie(()=>e($),()=>{S(f,new Set(e($).map(A=>A.match.MatchId)))}),ie(()=>(y(F()),et),()=>{S(m,(()=>{const A=new Map;F().forEach(de=>{const ye=Ae(de);if(ye){const ke=et.getTeamStatus(ye);A.set(ye,ke)}});const k=A.size,x=Array.from(A.values()).filter(de=>de==="covered").length,I=Array.from(A.values()).filter(de=>de==="partially-covered").length,ae=Array.from(A.values()).filter(de=>de==="planned").length,K=Array.from(A.values()).filter(de=>de==="not-covered").length;return{totalTeams:k,coveredTeams:x,partiallyCoveredTeams:I,plannedTeams:ae,uncoveredTeams:K,coveragePercentage:k>0?(x+I)/k*100:0}})())}),ie(()=>(e(D),e(W),Ae),()=>{S(T,(()=>{let A=[...e(D)];return e(W)==="priority"?A.sort((k,x)=>{const I=Gt.getPriority(k.MatchId),ae=Gt.getPriority(x.MatchId),K={"must-cover":3,priority:2,optional:1,null:0},de=K[I||"null"],ye=K[ae||"null"];return de!==ye?ye-de:k.ScheduledStartDateTime-x.ScheduledStartDateTime}):e(W)==="team"?A.sort((k,x)=>{const I=Ae(k),ae=Ae(x);return I.localeCompare(ae)}):e(W)==="court"?A.sort((k,x)=>k.CourtName.localeCompare(x.CourtName)):A.sort((k,x)=>k.ScheduledStartDateTime-x.ScheduledStartDateTime),A})())}),ie(()=>(e(T),Ve),()=>{S(N,(()=>{const A={};return e(T).forEach(k=>{const x=Ve(k.ScheduledStartDateTime);A[x]||(A[x]=[]),A[x].push(k)}),A})())}),ie(()=>e(N),()=>{S(C,Object.keys(e(N)).sort((A,k)=>{const x=new Date(`2000-01-01 ${A}`).getTime(),I=new Date(`2000-01-01 ${k}`).getTime();return x-I}))}),ie(()=>(t(),y(F()),e(Ee),e(Be),e(Fe)),()=>{if(t()&&F().length>0){const A=new Set;F().forEach(k=>{e(Ee).isClaimOwner(k.MatchId)&&(A.add(k.MatchId),!e(Be).has(k.MatchId)&&(!e(Fe)||e(Fe).MatchId!==k.MatchId)&&setTimeout(()=>{S(Fe,k)},200))}),S(Be,A)}}),ie(()=>(t(),y(F()),e(Ee),fa),()=>{if(t()&&F().length>0){let A=[];Rr.subscribe(k=>{A=k.map(x=>x.teamId)})(),F().forEach(k=>{const x=Ae(k);if(x&&A.includes(x)){const I=e(Ee).getScore(k.MatchId);I&&I.status==="in-progress"&&fa.notifyScoreUpdate(k,I)}})}}),zt(),Lt();var ot=Dt(),xe=ft(ot);{var Le=A=>{var k=ki(),x=i(k,!0);o(k),B(()=>_(x,(n(),c(()=>n().division||n().wave!=="all"||n().teams.length>0||n().timeRange.start||n().timeRange.end?"No matches found for selected filters":"No matches found")))),g(A,k)},Ce=A=>{var k=zi(),x=i(k);{var I=fe=>{var Se=Ii();g(fe,Se)};E(x,fe=>{t()&&fe(I)})}var ae=l(x,2);{var K=fe=>{var Se=Ei(),Te=i(Se),O=i(Te),U=i(O),ne=i(U);o(U),ur(),o(O);var se=l(O,2),oe=i(se),ue=i(oe);o(oe);var V=l(oe,4),Me=i(V);o(V);var L=l(V,4),Z=i(L);o(L);var Y=l(L,4),J=i(Y);o(Y),o(se),o(Te);var te=l(Te,2),Ie=i(te);Ie.__click=()=>S(De,!e(De));var Pe=i(Ie,!0);o(Ie);var Ke=l(Ie,2);{var Ge=ve=>{var rt=Pi();rt.__click=()=>S(_e,!e(_e));var Qe=i(rt);o(rt),B(()=>{we(rt,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(_e)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),$t(rt,"title",`${e(M),c(()=>e(M).length)??""} coverage suggestions`),_(Qe,`ð¡ Suggestions (${e(M),c(()=>e(M).length)??""})`)}),g(ve,rt)};E(Ke,ve=>{e(M),c(()=>e(M).length>0)&&ve(Ge)})}o(te),o(Se),B(ve=>{_(ne,`${ve??""}%`),_(ue,`â ${e(m),c(()=>e(m).coveredTeams)??""}`),_(Me,`â ${e(m),c(()=>e(m).partiallyCoveredTeams)??""}`),_(Z,`ð ${e(m),c(()=>e(m).plannedTeams)??""}`),_(J,`â ${e(m),c(()=>e(m).uncoveredTeams)??""}`),we(Ie,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(De)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),_(Pe,e(De)?"ðï¸ Scanning":"Scanning Mode")},[()=>(e(m),c(()=>e(m).coveragePercentage.toFixed(0)))]),g(fe,Se)};E(ae,fe=>{s(),e(m),c(()=>s()&&e(m).totalTeams>0)&&fe(K)})}var de=l(ae,2);{var ye=fe=>{var Se=Oi(),Te=i(Se),O=l(i(Te),2);O.__click=()=>S(_e,!1),o(Te);var U=l(Te,2);xt(U,5,()=>(e(M),c(()=>e(M).slice(0,5))),mt,(ne,se)=>{var oe=Ni(),ue=i(oe),V=i(ue),Me=i(V);o(V);var L=l(V,2),Z=i(L,!0);o(L),o(ue);var Y=l(ue,2);Y.__click=J=>{J.stopPropagation(),_t.selectMatch(e(se).match.MatchId)},o(oe),B(J=>{_(Me,`${J??""} - ${e(se),c(()=>e(se).match.CourtName)??""} - Team ${e(se),c(()=>e(se).teamId)??""}`),_(Z,(e(se),c(()=>e(se).reason)))},[()=>(y(Ve),e(se),c(()=>Ve(e(se).match.ScheduledStartDateTime)))]),g(ne,oe)}),o(U),o(Se),g(fe,Se)};E(de,fe=>{s(),e(_e),e(M),c(()=>s()&&e(_e)&&e(M).length>0)&&fe(ye)})}var ke=l(de,2);{var re=fe=>{var Se=Ai();g(fe,Se)};E(ke,fe=>{s()&&fe(re)})}var We=l(ke,2),je=i(We),Ue=l(i(je),2),Re=i(Ue);Re.__click=()=>S(W,"team");var tt=l(Re,2);tt.__click=()=>S(W,"court");var P=l(tt,2);P.__click=()=>S(W,"time"),o(Ue),o(je);var q=l(je,2),j=l(i(q),2),z=i(j);z.__click=()=>Vt("wave","all");var be=l(z,2);be.__click=()=>Vt("wave","morning");var ge=l(be,2);ge.__click=()=>Vt("wave","afternoon"),o(j),o(q),o(We);var pe=l(We,2),ee=i(pe);{var he=fe=>{var Se=Fi();g(fe,Se)},$e=fe=>{var Se=Dt(),Te=ft(Se);xt(Te,1,()=>e(C),mt,(O,U)=>{const ne=X(()=>(e(N),e(U),c(()=>e(N)[e(U)]))),se=X(()=>(y(e(ne)),e(u),c(()=>e(ne).filter(Ge=>e(u).has(Ge.MatchId)).length))),oe=X(()=>e(se)>0),ue=X(()=>(y(e(se)),y(e(ne)),c(()=>e(se)===e(ne).length)));var V=Gi(),Me=i(V),L=i(Me),Z=i(L),Y=i(Z,!0);o(Z);var J=l(Z,2),te=i(J);o(J),o(L);var Ie=l(L,2);{var Pe=Ge=>{var ve=Ri(),rt=i(ve);o(ve),B(()=>{we(ve,1,`text-xs font-medium ${e(ue)?"text-[#808593]":"text-red-400"}`),_(rt,`${e(se)??""} conflict${e(se)!==1?"s":""}`)}),g(Ge,ve)};E(Ie,Ge=>{e(oe)&&Ge(Pe)})}o(Me);var Ke=l(Me,2);xt(Ke,1,()=>e(ne),mt,(Ge,ve)=>{const rt=X(()=>(e(u),e(ve),c(()=>e(u).has(e(ve).MatchId)))),Qe=X(()=>(y(Ae),e(ve),c(()=>Ae(e(ve))))),ct=X(()=>(e(ve),c(()=>at(e(ve))))),Oe=X(()=>(e(le),e(ve),c(()=>e(le)===e(ve).MatchId))),ze=X(()=>(y(Gt),e(ve),c(()=>Gt.getPriority(e(ve).MatchId)))),Q=X(()=>(e(f),e(ve),c(()=>e(f).has(e(ve).MatchId)))),Ne=X(()=>(y(e(Qe)),y(et),c(()=>e(Qe)?et.getTeamStatus(e(Qe)):"not-covered"))),it=X(()=>e(Ne)==="covered"||e(Ne)==="partially-covered"),Je=X(()=>e(Ne)==="planned"),pt=X(()=>e(Ne)==="not-covered"),kt=X(()=>e(De)&&e(it)),gt=X(()=>(y(Ut),y(_t),c(()=>Ut(_t)))),nt=X(()=>(y(e(gt)),e(ve),c(()=>e(gt).has(e(ve).MatchId)))),Xe=X(()=>e(rt)&&!e(ue));var ht=Vi(),Ze=i(ht);Ze.__click=()=>S(le,e(Oe)?null:e(ve).MatchId);var bt=i(Ze);{var lt=Mt=>{var St=Wi();St.__click=Xt=>{Xt.stopPropagation(),_t.toggleMatch(e(ve).MatchId)};var Pt=i(St);{var er=Xt=>{var ar=Li();g(Xt,ar)};E(Pt,Xt=>{e(nt)&&Xt(er)})}o(St),B(()=>{we(St,1,`absolute top-2 right-2 sm:relative sm:top-0 sm:right-0 flex-shrink-0 w-5 h-5 rounded border-2 ${e(nt)?"border-[#eab308] bg-[#eab308]/20":"border-[#525463] bg-transparent"} flex items-center justify-center hover:bg-[#454654] transition-colors`),$t(St,"aria-label",e(nt)?"Remove from plan":"Add to plan")}),g(Mt,St)};E(bt,Mt=>{s()&&Mt(lt)})}var dt=l(bt,2),Ct=i(dt),rr=i(Ct,!0);o(Ct);var qt=l(Ct,2),It=i(qt);o(qt),o(dt);var yt=l(dt,2);{var Nt=Mt=>{var St=Bi(),Pt=i(St);Pt.__click=Wt=>{Wt.stopPropagation(),S(me,e(me)===e(ve).MatchId?null:e(ve).MatchId)};var er=i(Pt),Xt=l(er);{var ar=Wt=>{var sr=ji();g(Wt,sr)};E(Xt,Wt=>{e(ze)||Wt(ar)})}o(Pt);var nr=l(Pt,2);{var or=Wt=>{var sr=Ui(),qr=i(sr);gn(qr,{get matchId(){return e(ve),c(()=>e(ve).MatchId)},get currentPriority(){return e(ze)},get onPriorityChange(){return y(Gt),c(()=>Gt.setPriority)},onClose:()=>S(me,null)}),o(sr),g(Wt,sr)};E(nr,Wt=>{e(me),e(ve),c(()=>e(me)===e(ve).MatchId)&&Wt(or)})}o(St),B(()=>{we(Pt,1,`flex-shrink-0 w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-[#454654] ${e(ze)==="must-cover"?"text-[#eab308]":e(ze)==="priority"?"text-[#f59e0b]":e(ze)==="optional"?"text-[#9fa2ab]":"text-[#808593]"}`),$t(Pt,"title",e(ze)?`Priority: ${e(ze)}`:"Set priority"),_(er,`${e(ze)==="must-cover"&&"â­"}
												${e(ze)==="priority"&&"ð¸"}
												${e(ze)==="optional"&&"â"} `)}),g(Mt,St)};E(yt,Mt=>{s()&&Mt(Nt)})}var Ot=l(yt,2);{var mr=Mt=>{var St=Hi(),Pt=i(St);Pt.__click=nr=>{nr.stopPropagation(),S(G,e(G)===e(Qe)?null:e(Qe))};var er=i(Pt);o(Pt);var Xt=l(Pt,2);{var ar=nr=>{var or=Yi(),Wt=i(or);$a(Wt,{get teamId(){return e(Qe)},get currentStatus(){return e(Ne)},get onStatusChange(){return y(et),c(()=>et.setTeamStatus)},onClose:()=>S(G,null)}),o(or),g(nr,or)};E(Xt,nr=>{e(G)===e(Qe)&&nr(ar)})}o(St),B(()=>{we(Pt,1,`flex-shrink-0 w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-[#454654] ${e(Ne)==="covered"?"text-green-500":e(Ne)==="partially-covered"?"text-[#f59e0b]":e(Ne)==="planned"?"text-[#eab308]":"text-[#808593]"}`),$t(Pt,"title",`Coverage: ${e(Ne)??""}`),_(er,`${e(Ne)==="covered"&&"â"}
												${e(Ne)==="partially-covered"&&"â"}
												${e(Ne)==="planned"&&"ð"}
												${e(Ne)==="not-covered"&&"â"}`)}),g(Mt,St)};E(Ot,Mt=>{s()&&e(Qe)&&Mt(mr)})}var xr=l(Ot,2),br=i(xr);o(xr),o(Ze);var zr=l(Ze,2);{var Fr=Mt=>{bn(Mt,{get match(){return e(ve)},get eventId(){return H()},get clubId(){return ce()},onClose:()=>S(le,null),get matches(){return F()}})};E(zr,Mt=>{e(Oe)&&Mt(Fr)})}o(ht),B(Mt=>{we(Ze,1,`group relative rounded transition-all flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 px-3 py-2.5 sm:py-2 cursor-pointer match-card min-h-[44px] sm:min-h-0 ${e(Xe)?"border border-red-800/50 bg-red-950/10":e(ze)==="must-cover"?"border-2 border-[#eab308] bg-[#eab308]/10":e(ze)==="priority"?"border border-[#f59e0b] bg-[#f59e0b]/10":e(pt)&&!e(nt)?"border border-[#eab308] bg-[#eab308]/5":e(Je)?"border border-[#eab308]/50 bg-[#eab308]/10":e(it)?"border border-green-500/30 bg-green-950/5":e(Q)&&!e(nt)?"border border-green-500/50 bg-green-950/10":e(nt)?"border border-[#eab308]/50 bg-[#eab308]/10":"border border-[#454654] bg-[#3b3c48]"} ${e(kt)?"opacity-30":""} hover:border-[#525463] hover:bg-[#3b3c48]/80`),_(rr,Mt),_(It,`${e(ve),c(()=>e(ve).CourtName)??""} â¢ ${y(e(Qe)),e(ve),c(()=>e(Qe)||e(ve).Division.CodeAlias)??""} vs ${e(ct)??""}`),we(br,0,`w-4 h-4 text-[#9fa2ab] transition-transform ${e(Oe)?"rotate-180":""}`)},[()=>(y(Ve),e(ve),c(()=>Ve(e(ve).ScheduledStartDateTime)))]),g(Ge,ht)}),o(V),B(()=>{_(Y,e(U)),_(te,`${y(e(ne)),c(()=>e(ne).length)??""} match${y(e(ne)),c(()=>e(ne).length!==1?"es":"")??""}`)}),g(O,V)}),g(fe,Se)};E(ee,fe=>{e(C),c(()=>e(C).length===0)?fe(he):fe($e,!1)})}o(pe);var He=l(pe,2);{var Ye=fe=>{var Se=Ji();g(fe,Se)};E(He,fe=>{e(Fe)&&fe(Ye)})}o(k),B(()=>{we(Re,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(W)==="team"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),we(tt,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(W)==="court"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),we(P,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(W)==="time"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),we(z,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="all"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),we(be,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="morning"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),we(ge,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="afternoon"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`)}),g(A,k)};E(xe,A=>{e(D),c(()=>e(D).length===0)?A(Le):A(Ce,!1)})}g(r,ot),Rt(),v()}Kt(["click"]);var Xi=w('<div class="text-xs text-[#808593] py-4 text-center">No conflicts found</div>'),Qi=w('<span class="text-[#9fa2ab]">â¢</span> <span class="text-[#808593]"> </span>',1),Ki=w('<div class="px-3 py-2.5 rounded border border-[#525463] bg-[#454654]/30"><div class="flex items-center gap-2 mb-1"><span class="text-sm font-bold text-[#f8f8f9]"> </span> <span class="text-xs text-[#808593]">vs</span> <span class="text-sm text-[#c0c2c8] truncate"> </span></div> <div class="flex items-center gap-3 mt-1 text-xs flex-wrap"><span class="text-[#facc15] font-medium"> </span> <span class="text-[#9fa2ab]"> </span> <span class="text-[#9fa2ab]">â¢</span> <span class="text-[#9fa2ab]"> </span> <!></div></div>'),Zi=w('<div class="space-y-2"></div>'),ec=w(`<div class="mt-2 border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="p-3 sm:p-4"><div class="flex items-center justify-between mb-3 sm:mb-4"><h4 class="text-xs sm:text-sm font-semibold text-[#f8f8f9] truncate pr-2">Conflict Details</h4> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="mb-4 pb-4 border-b border-[#454654]"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-2">Selected Match</div> <div class="px-3 py-2 rounded border border-[#eab308]/50 bg-[#eab308]/5"><div class="flex items-center gap-2 mb-1"><span class="text-sm font-bold text-[#facc15]"> </span> <span class="text-xs text-[#808593]">vs</span> <span class="text-sm text-[#c0c2c8] truncate"> </span></div> <div class="flex items-center gap-3 mt-1 text-xs"><span class="text-[#facc15] font-medium"> </span> <span class="text-[#9fa2ab]"> </span> <span class="text-[#9fa2ab]">â¢</span> <span class="text-[#9fa2ab]"> </span></div></div></div> <div><div class="flex items-center justify-between mb-2"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider"> </div> <span class="text-xs text-red-400 font-medium">Cannot cover simultaneously</span></div> <!></div> <div class="mt-4 pt-4 border-t border-[#454654]"><p class="text-xs text-[#808593]">These matches overlap in time and are on different courts. You'll need to choose which match to cover.</p></div></div></div>`);function tc(r,a){Ft(a,!1);const t=R();let n=qe(a,"match",8),s=qe(a,"conflictingMatches",8),d=qe(a,"onClose",8);function v(Ce){return Ce.InvolvedTeam==="first"?Ce.SecondTeamText:Ce.InvolvedTeam==="second"?Ce.FirstTeamText:`${Ce.FirstTeamText} vs ${Ce.SecondTeamText}`}function u(Ce,A){return Ce!==A?5:0}const b=Ae(n()),p=v(n());ie(()=>y(s()),()=>{S(t,[...s()].sort((Ce,A)=>Ce.ScheduledStartDateTime-A.ScheduledStartDateTime))}),zt(),Lt();var h=ec(),M=i(h),D=i(M),$=l(i(D),2);$.__click=function(...Ce){var A;(A=d())==null||A.apply(this,Ce)},o(D);var f=l(D,2),m=l(i(f),2),T=i(m),N=i(T),C=i(N,!0);o(N);var F=l(N,4),H=i(F,!0);o(F),o(T);var ce=l(T,2),W=i(ce),le=i(W,!0);o(W);var me=l(W,2),G=i(me,!0);o(me);var De=l(me,4),_e=i(De,!0);o(De),o(ce),o(m),o(f);var Fe=l(f,2),Be=i(Fe),Ee=i(Be),at=i(Ee);o(Ee),ur(2),o(Be);var ot=l(Be,2);{var xe=Ce=>{var A=Xi();g(Ce,A)},Le=Ce=>{var A=Zi();xt(A,5,()=>e(t),mt,(k,x)=>{const I=X(()=>(y(Ae),e(x),c(()=>Ae(e(x))))),ae=X(()=>(e(x),c(()=>v(e(x))))),K=X(()=>(y(n()),e(x),c(()=>u(n().CourtName,e(x).CourtName))));var de=Ki(),ye=i(de),ke=i(ye),re=i(ke,!0);o(ke);var We=l(ke,4),je=i(We,!0);o(We),o(ye);var Ue=l(ye,2),Re=i(Ue),tt=i(Re,!0);o(Re);var P=l(Re,2),q=i(P,!0);o(P);var j=l(P,4),z=i(j,!0);o(j);var be=l(j,2);{var ge=pe=>{var ee=Qi(),he=l(ft(ee),2),$e=i(he);o(he),B(()=>_($e,`~${e(K)??""} min travel from ${y(n()),c(()=>n().CourtName)??""}`)),g(pe,ee)};E(be,pe=>{e(K)>0&&pe(ge)})}o(Ue),o(de),B(pe=>{_(re,(y(e(I)),e(x),c(()=>e(I)||e(x).Division.CodeAlias))),_(je,e(ae)),_(tt,(e(x),c(()=>e(x).CourtName))),_(q,pe),_(z,(e(x),c(()=>e(x).Division.CodeAlias)))},[()=>(y(Ve),e(x),c(()=>Ve(e(x).ScheduledStartDateTime)))]),g(k,de)}),o(A),g(Ce,A)};E(ot,Ce=>{e(t),c(()=>e(t).length===0)?Ce(xe):Ce(Le,!1)})}o(Fe),ur(2),o(M),o(h),B(Ce=>{_(C,(y(n()),c(()=>b||n().Division.CodeAlias))),_(H,p),_(le,(y(n()),c(()=>n().CourtName))),_(G,Ce),_(_e,(y(n()),c(()=>n().Division.CodeAlias))),_(at,`Conflicting Matches (${y(s()),c(()=>s().length)??""})`)},[()=>(y(Ve),y(n()),c(()=>Ve(n().ScheduledStartDateTime)))]),g(r,h),Rt()}Kt(["click"]);var rc=w('<div class="text-center py-12 text-[#9fa2ab] text-sm"> </div>'),ac=w("<option> </option>"),nc=w('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Division:</span> <select class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"><option> </option><!></select></div>'),oc=w("<option> </option>"),sc=w('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Team:</span> <select multiple class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0 min-w-[120px]"></select></div>'),ic=w('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Priority:</span> <select class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"><option>All Priorities</option><option>Must Cover</option><option>Priority</option><option>Optional</option></select></div>'),cc=w('<button class="px-3 py-2 sm:py-1 text-xs font-medium rounded-lg transition-colors text-[#9fa2ab] hover:text-[#f8f8f9] hover:bg-[#454654] border border-[#525463] min-h-[44px] sm:min-h-0">Clear</button>'),lc=w('<span class="ml-2"> </span>'),dc=w('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab]">Showing:</span> <span class="px-2 py-1 text-xs font-semibold rounded bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50"> </span> <button class="text-xs text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors" aria-label="Clear highlight">â</button></div>'),vc=w("<div> </div>"),uc=w('<div class="absolute top-0 bottom-0 flex items-center justify-center"><!></div>'),fc=w('<div class="absolute top-0 left-0 text-[10px]"> </div>'),mc=w('<div class="absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full border border-white" title="Easy coverage opportunity"></div>'),xc=w('<div class="absolute top-0 right-0 w-4 h-4 flex items-center justify-center"><svg class="w-3 h-3 text-[#facc15]" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),bc=w('<div class="text-[8px] text-[#9fa2ab]"> </div>'),gc=w('<div class="text-[8px] text-green-400">â</div>'),pc=w('<div class="flex items-center gap-1 mt-0.5"><!> <div class="text-[9px] font-semibold text-white"> </div> <!></div>'),hc=ya('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>'),_c=w('<div class="absolute left-full top-0 ml-2 z-50"><!></div>'),yc=w('<div class="relative"><button aria-label="Set priority"> <!></button> <!></div>'),Sc=w('<div class="absolute left-full top-0 ml-2 z-50"><!></div>'),Tc=w('<div class="relative"><button aria-label="Set coverage status"> </button> <!></div>'),wc=w('<div><!> <!> <!> <div> </div> <div class="text-[9px] sm:text-[10px] opacity-90 truncate mt-0.5 leading-tight"> </div> <div class="text-[9px] sm:text-[10px] opacity-75 mt-0.5"> </div> <!> <!> <!></div>'),Mc=w('<div class="border-b border-[#454654] pb-4 last:border-b-0 last:pb-0 min-w-[600px] sm:min-w-0"><div class="flex items-center justify-between mb-2"><div class="text-base font-semibold text-[#f8f8f9]"> </div> <div class="text-xs text-[#808593]"> </div></div> <div class="relative h-20 sm:h-20 rounded-lg border overflow-hidden bg-[#3b3c48] border-[#454654]"><!> <!></div></div>'),Cc=w('<div class="text-[#9fa2ab]">Scorekeeper - To be migrated</div>'),$c=w('<div class="fixed inset-0 z-40"></div>'),Dc=w('<div class="fixed inset-0 z-40"></div>'),kc=w('<div class="space-y-4"><div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4"><div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Wave:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <!> <!> <div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Time:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <!> <!></div> <div class="flex items-center justify-between"><div class="text-xs text-[#9fa2ab]"> <!></div> <!></div> <div class="overflow-x-auto -mx-3 sm:mx-0 px-3 sm:px-0"><div class="space-y-4 min-w-max sm:min-w-0"></div></div> <!> <!> <!> <!></div>');function Ic(r,a){Ft(a,!1);const t=()=>Qt(Ma,"$isSpectator",d),n=()=>Qt(Ar,"$filters",d),s=()=>Qt(wa,"$isMedia",d),[d,v]=Ta(),u=R(),b=R(),p=R(),h=R(),M=R(),D=R(),$=R(),f=R(),m=R(),T=R(),N=R(),C=R(),F=R();let H=qe(a,"matches",8),ce=qe(a,"eventId",8),W=R(null),le=R(null),me=R(null),G=R(null),De=null,_e=R();function Fe(x){return x.InvolvedTeam==="first"?x.SecondTeamText:x.InvolvedTeam==="second"?x.FirstTeamText:`${x.FirstTeamText} vs ${x.SecondTeamText}`}function Be(x){return e(m)===0?0:(x-e($))/e(m)*100}function Ee(x,I){return e(m)===0?0:(I-x)/e(m)*100}function at(x){const I=[],ae=[...x].sort((K,de)=>K.ScheduledStartDateTime-de.ScheduledStartDateTime);for(let K=0;K<ae.length-1;K++){const de=ae[K],ye=ae[K+1],ke=Math.floor((ye.ScheduledStartDateTime-de.ScheduledEndDateTime)/6e4);ke>0&&I.push({before:de,after:ye,gapMinutes:ke})}return I}function ot(x){e(u).has(x.MatchId)?S(W,x):s()?_t.toggleMatch(x.MatchId):S(W,x)}function xe(x,I){I.stopPropagation(),S(le,e(le)===x?null:x)}ie(()=>(t(),y(ce())),()=>{const x=t();S(_e,mn({eventId:ce(),userId:x?"spectator":"anonymous"}))}),ie(()=>y(H()),()=>{S(u,Ir(H()))}),ie(()=>(n(),y(H()),Ve),()=>{S(b,(()=>{if(n().wave!=="all"){const x=n().wave==="morning"?"08:00":"14:30",I=n().wave==="morning"?"14:30":"23:59";return Hr(H()).filter(ae=>H().some(K=>{const de=Ve(K.ScheduledStartDateTime),ye=de.split(" ")[1]||de;return ye>=x&&ye<I&&K.Division.CodeAlias===ae}))}return Hr(H())})())}),ie(()=>y(H()),()=>{S(p,Ca(H()))}),ie(()=>(y(H()),n(),et),()=>{S(h,(()=>{let x=fn(H());return n().priority&&n().priority!=="all"&&(x=x.filter(I=>Gt.getPriority(I.MatchId)===n().priority)),n().coverageStatus&&n().coverageStatus!=="all"&&(x=x.filter(I=>{const ae=Ae(I);if(!ae)return!0;const K=et.getTeamStatus(ae);return n().coverageStatus==="uncovered"?K==="not-covered":n().coverageStatus==="covered"?K==="covered"||K==="partially-covered":n().coverageStatus==="planned"?K==="planned":!0})),x})())}),ie(()=>(y(H()),e(u)),()=>{S(M,(()=>{const x=Ut(_t);return un(H(),x,e(u),{excludeSelected:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:50})})())}),ie(()=>e(M),()=>{S(D,new Set(e(M).map(x=>x.match.MatchId)))}),ie(()=>e(h),()=>{S($,e(h).length>0?Math.min(...e(h).map(x=>x.ScheduledStartDateTime)):0)}),ie(()=>e(h),()=>{S(f,e(h).length>0?Math.max(...e(h).map(x=>x.ScheduledEndDateTime)):0)}),ie(()=>(e(f),e($)),()=>{S(m,e(f)-e($))}),ie(()=>e(h),()=>{S(T,(()=>{const x={};return e(h).forEach(I=>{x[I.CourtName]||(x[I.CourtName]=[]),x[I.CourtName].push(I)}),x})())}),ie(()=>e(T),()=>{S(N,Object.keys(e(T)).sort())}),ie(()=>(e(le),e(h),Ae),()=>{S(C,(()=>{if(!e(le))return new Set;const x=new Set;return e(h).forEach(I=>{Ae(I)===e(le)&&x.add(I.MatchId)}),x})())}),ie(()=>(e(W),e(u),e(h)),()=>{S(F,(()=>{if(!e(W))return[];const x=e(u).get(e(W).MatchId);return x?x.map(I=>e(h).find(ae=>ae.MatchId===I)).filter(Boolean):[]})())}),zt(),Lt();var Le=Dt(),Ce=ft(Le);{var A=x=>{var I=rc(),ae=i(I,!0);o(I),B(()=>_(ae,(n(),c(()=>n().division||n().wave!=="all"||n().teams.length>0||n().timeRange.start||n().timeRange.end?"No matches found for selected filters":"No matches found")))),g(x,I)},k=x=>{var I=kc(),ae=i(I),K=i(ae),de=l(i(K),2),ye=i(de);ye.__click=()=>Vt("wave","all");var ke=l(ye,2);ke.__click=()=>Vt("wave","morning");var re=l(ke,2);re.__click=()=>Vt("wave","afternoon"),o(de),o(K);var We=l(K,2);{var je=Y=>{var J=nc(),te=l(i(J),2);te.__change=ve=>Vt("division",ve.target.value||null);var Ie=i(te),Pe=i(Ie);o(Ie),Ie.value=Ie.__value="";var Ke=l(Ie);xt(Ke,1,()=>e(b),mt,(ve,rt)=>{var Qe=ac(),ct=i(Qe,!0);o(Qe);var Oe={};B(()=>{_(ct,e(rt)),Oe!==(Oe=e(rt))&&(Qe.value=(Qe.__value=e(rt))??"")}),g(ve,Qe)}),o(te);var Ge;yr(te),o(J),B(()=>{_(Pe,`All Divisions${n(),c(()=>n().wave!=="all"?` (${n().wave})`:"")??""}`),Ge!==(Ge=(n(),c(()=>n().division||"")))&&(te.value=(te.__value=(n(),c(()=>n().division||"")))??"",fr(te,(n(),c(()=>n().division||""))))}),g(Y,J)};E(We,Y=>{e(b),c(()=>e(b).length>1)&&Y(je)})}var Ue=l(We,2);{var Re=Y=>{var J=sc(),te=l(i(J),2);te.__change=Pe=>{const Ke=Array.from(Pe.target.selectedOptions,Ge=>Ge.value);Vt("teams",Ke)},xt(te,5,()=>e(p),mt,(Pe,Ke)=>{var Ge=oc(),ve=i(Ge,!0);o(Ge);var rt={};B(()=>{_(ve,e(Ke)),rt!==(rt=e(Ke))&&(Ge.value=(Ge.__value=e(Ke))??"")}),g(Pe,Ge)}),o(te);var Ie;yr(te),o(J),B(Pe=>{$t(te,"size",Pe),Ie!==(Ie=(n(),c(()=>n().teams)))&&(te.value=(te.__value=(n(),c(()=>n().teams)))??"",fr(te,(n(),c(()=>n().teams))))},[()=>(e(p),c(()=>Math.min(e(p).length,4)))]),g(Y,J)};E(Ue,Y=>{e(p),c(()=>e(p).length>0)&&Y(Re)})}var tt=l(Ue,2),P=l(i(tt),2),q=i(P);q.__click=()=>Vt("timeRange",{start:null,end:null});var j=l(q,2);j.__click=()=>Vt("timeRange",{start:"08:00",end:"14:30"});var z=l(j,2);z.__click=()=>Vt("timeRange",{start:"14:30",end:"23:59"}),o(P),o(tt);var be=l(tt,2);{var ge=Y=>{var J=ic(),te=l(i(J),2);te.__change=rt=>Vt("priority",rt.target.value==="all"?"all":rt.target.value);var Ie=i(te);Ie.value=Ie.__value="all";var Pe=l(Ie);Pe.value=Pe.__value="must-cover";var Ke=l(Pe);Ke.value=Ke.__value="priority";var Ge=l(Ke);Ge.value=Ge.__value="optional",o(te);var ve;yr(te),o(J),B(()=>{ve!==(ve=(n(),c(()=>n().priority||"all")))&&(te.value=(te.__value=(n(),c(()=>n().priority||"all")))??"",fr(te,(n(),c(()=>n().priority||"all"))))}),g(Y,J)};E(be,Y=>{s()&&Y(ge)})}var pe=l(be,2);{var ee=Y=>{var J=cc();J.__click=function(...te){va==null||va.apply(this,te)},g(Y,J)};E(pe,Y=>{n(),c(()=>n().division||n().wave!=="all"||n().teams.length>0||n().timeRange.start||n().timeRange.end||n().priority&&n().priority!=="all"||n().coverageStatus&&n().coverageStatus!=="all")&&Y(ee)})}o(ae);var he=l(ae,2),$e=i(he),He=i($e),Ye=l(He);{var fe=Y=>{var J=lc(),te=i(J);o(J),B(()=>_(te,`(${e(h),c(()=>e(h).length)??""} of ${y(H()),c(()=>H().length)??""})`)),g(Y,J)};E(Ye,Y=>{e(h),y(H()),c(()=>e(h).length!==H().length)&&Y(fe)})}o($e);var Se=l($e,2);{var Te=Y=>{var J=dc(),te=l(i(J),2),Ie=i(te);o(te);var Pe=l(te,2);Pe.__click=()=>S(le,null),o(J),B(()=>_(Ie,`Team ${e(le)??""}`)),g(Y,J)};E(Se,Y=>{e(le)&&Y(Te)})}o(he);var O=l(he,2),U=i(O);xt(U,5,()=>e(N),mt,(Y,J)=>{const te=X(()=>(e(T),e(J),c(()=>e(T)[e(J)])));var Ie=Mc(),Pe=i(Ie),Ke=i(Pe),Ge=i(Ke,!0);o(Ke);var ve=l(Ke,2),rt=i(ve);o(ve),o(Pe);var Qe=l(Pe,2),ct=i(Qe);xt(ct,1,()=>(y(e(te)),c(()=>at(e(te)))),mt,(ze,Q)=>{const Ne=X(()=>(e(Q),c(()=>Be(e(Q).before.ScheduledEndDateTime)))),it=X(()=>(e(Q),c(()=>Be(e(Q).after.ScheduledStartDateTime)))),Je=X(()=>e(it)-e(Ne)),pt=X(()=>(e(Q),c(()=>e(Q).gapMinutes>=30))),kt=X(()=>(e(Q),c(()=>e(Q).gapMinutes>=15&&e(Q).gapMinutes<30)));var gt=Dt(),nt=ft(gt);{var Xe=ht=>{var Ze=uc(),bt=i(Ze);{var lt=dt=>{var Ct=vc(),rr=i(Ct);o(Ct),B(()=>{we(Ct,1,`text-[9px] font-medium px-1 py-0.5 rounded ${e(pt)?"bg-green-500/20 text-green-400":e(kt)?"bg-yellow-500/20 text-yellow-400":"bg-orange-500/20 text-orange-400"}`),_(rr,`${e(Q),c(()=>e(Q).gapMinutes)??""}m`)}),g(dt,Ct)};E(bt,dt=>{e(Je)>3&&dt(lt)})}o(Ze),B(()=>{Bt(Ze,`left: ${e(Ne)??""}%; width: ${e(Je)??""}%; z-index: 0;`),$t(Ze,"title",`${e(Q),c(()=>e(Q).gapMinutes)??""} min gap between matches`)}),g(ht,Ze)};E(nt,ht=>{e(Je)>=1&&ht(Xe)})}g(ze,gt)});var Oe=l(ct,2);xt(Oe,1,()=>e(te),mt,(ze,Q)=>{const Ne=X(()=>(e(u),e(Q),c(()=>e(u).has(e(Q).MatchId)))),it=X(()=>(e(W),e(Q),c(()=>{var st;return((st=e(W))==null?void 0:st.MatchId)===e(Q).MatchId}))),Je=X(()=>(y(Ae),e(Q),c(()=>Ae(e(Q))))),pt=X(()=>(e(le),e(C),e(Q),c(()=>e(le)!==null&&e(C).has(e(Q).MatchId)))),kt=X(()=>e(le)!==null&&!e(pt)),gt=X(()=>(y(Ut),y(_t),c(()=>Ut(_t)))),nt=X(()=>(y(e(gt)),e(Q),c(()=>e(gt).has(e(Q).MatchId)))),Xe=X(()=>(y(Gt),e(Q),c(()=>Gt.getPriority(e(Q).MatchId)))),ht=X(()=>(e(D),e(Q),c(()=>e(D).has(e(Q).MatchId)))),Ze=X(()=>(y(e(Je)),y(et),c(()=>e(Je)?et.getTeamStatus(e(Je)):"not-covered"))),bt=X(()=>e(Ze)==="covered"||e(Ze)==="partially-covered"),lt=X(()=>e(Ze)==="planned"),dt=X(()=>e(Ze)==="not-covered"),Ct=X(()=>(e(Q),c(()=>Be(e(Q).ScheduledStartDateTime)))),rr=X(()=>(e(Q),c(()=>Math.max(Ee(e(Q).ScheduledStartDateTime,e(Q).ScheduledEndDateTime),2)))),qt=X(()=>(e(Q),c(()=>Fe(e(Q))))),It=X(()=>(y(e(Xe)),y(e(dt)),y(e(nt)),y(e(lt)),y(e(pt)),y(e(Ne)),y(e(bt)),y(e(ht)),e(Q),c(()=>e(Xe)==="must-cover"?"#eab308":e(Xe)==="priority"?"#f59e0b":e(dt)&&!e(nt)||e(lt)||e(pt)||e(nt)&&!e(Ne)?"#eab308":e(bt)||e(ht)&&!e(nt)?"#10b981":e(Ne)?"#dc2626":e(Q).Division.ColorHex))),yt=X(()=>e(Xe)==="must-cover"?"#facc15":e(Xe)==="priority"?"#fbbf24":e(dt)&&!e(nt)||e(lt)?"#facc15":e(it)?"#eab308":e(pt)||e(nt)?"#facc15":e(Ne)?"#ef4444":"rgba(255, 255, 255, 0.2)"),Nt=X(()=>e(it)?30:e(pt)?20:e(Xe)==="must-cover"?18:e(nt)?15:e(Ne)?10:1);var Ot=wc();Ot.__click=st=>{st.target instanceof HTMLElement&&st.target.closest(".priority-button")||ot(e(Q))};var mr=i(Ot);{var xr=st=>{var vt=fc(),Tt=i(vt);o(vt),B(()=>_(Tt,`${e(Xe)==="must-cover"&&"â­"}
											${e(Xe)==="priority"&&"ð¸"}
											${e(Xe)==="optional"&&"â"}`)),g(st,vt)};E(mr,st=>{s()&&e(Xe)&&st(xr)})}var br=l(mr,2);{var zr=st=>{var vt=mc();g(st,vt)};E(br,st=>{s()&&e(ht)&&!e(nt)&&st(zr)})}var Fr=l(br,2);{var Mt=st=>{var vt=xc();g(st,vt)};E(Fr,st=>{s()&&e(nt)&&st(Mt)})}var St=l(Fr,2);St.__click=st=>e(Je)&&xe(e(Je),st);var Pt=i(St,!0);o(St);var er=l(St,2),Xt=i(er);o(er);var ar=l(er,2),nr=i(ar,!0);o(ar);var or=l(ar,2);{var Wt=st=>{const vt=X(()=>(e(_e),e(Q),c(()=>e(_e).getScore(e(Q).MatchId))));var Tt=Dt(),gr=ft(Tt);{var Tr=lr=>{const Yt=X(()=>(y(e(vt)),c(()=>e(vt).sets.find(Et=>Et.completedAt===0)||e(vt).sets[e(vt).sets.length-1]))),Ht=X(()=>(y(e(vt)),c(()=>e(vt).sets.filter(Et=>Et.completedAt>0)))),jt=X(()=>(y(e(Ht)),c(()=>e(Ht).filter(Et=>Et.team1Score>Et.team2Score).length))),dr=X(()=>(y(e(Ht)),c(()=>e(Ht).filter(Et=>Et.team2Score>Et.team1Score).length)));var wr=pc(),Da=i(wr);{var _n=Et=>{var Mr=bc(),wn=i(Mr);o(Mr),B(()=>_(wn,`(${e(jt)??""}-${e(dr)??""})`)),g(Et,Mr)};E(Da,Et=>{y(e(Ht)),c(()=>e(Ht).length>0)&&Et(_n)})}var Xr=l(Da,2),yn=i(Xr);o(Xr);var Sn=l(Xr,2);{var Tn=Et=>{var Mr=gc();g(Et,Mr)};E(Sn,Et=>{y(e(vt)),c(()=>e(vt).status==="in-progress")&&Et(Tn)})}o(wr),B(()=>_(yn,`${y(e(Yt)),c(()=>e(Yt).team1Score)??""}-${y(e(Yt)),c(()=>e(Yt).team2Score)??""}`)),g(lr,wr)};E(gr,lr=>{y(e(vt)),c(()=>e(vt)&&e(vt).status!=="not-started")&&lr(Tr)})}g(st,Tt)};E(or,st=>{e(_e)&&st(Wt)})}var sr=l(or,2);{var qr=st=>{var vt=yc(),Tt=i(vt);Tt.__click=jt=>{jt.stopPropagation(),S(me,e(me)===e(Q).MatchId?null:e(Q).MatchId)};var gr=i(Tt),Tr=l(gr);{var lr=jt=>{var dr=hc();g(jt,dr)};E(Tr,jt=>{e(Xe)||jt(lr)})}o(Tt);var Yt=l(Tt,2);{var Ht=jt=>{var dr=_c(),wr=i(dr);gn(wr,{get matchId(){return e(Q),c(()=>e(Q).MatchId)},get currentPriority(){return e(Xe)},get onPriorityChange(){return y(Gt),c(()=>Gt.setPriority)},onClose:()=>S(me,null)}),o(dr),g(jt,dr)};E(Yt,jt=>{e(me),e(Q),c(()=>e(me)===e(Q).MatchId)&&jt(Ht)})}o(vt),B(()=>{we(Tt,1,`priority-button flex-shrink-0 w-5 h-5 rounded flex items-center justify-center transition-colors hover:bg-black/20 ${e(Xe)==="must-cover"?"text-[#facc15]":e(Xe)==="priority"?"text-[#fbbf24]":e(Xe)==="optional"?"text-white/60":"text-white/40"}`),$t(Tt,"title",e(Xe)?`Priority: ${e(Xe)}`:"Set priority"),_(gr,`${e(Xe)==="must-cover"&&"â­"}
												${e(Xe)==="priority"&&"ð¸"}
												${e(Xe)==="optional"&&"â"} `)}),g(st,vt)};E(sr,st=>{s()&&st(qr)})}var pn=l(sr,2);{var hn=st=>{var vt=Tc(),Tt=i(vt);Tt.__click=Yt=>{Yt.stopPropagation(),S(G,e(G)===e(Je)?null:e(Je))};var gr=i(Tt);o(Tt);var Tr=l(Tt,2);{var lr=Yt=>{var Ht=Sc(),jt=i(Ht);$a(jt,{get teamId(){return e(Je)},get currentStatus(){return e(Ze)},get onStatusChange(){return y(et),c(()=>et.setTeamStatus)},onClose:()=>S(G,null)}),o(Ht),g(Yt,Ht)};E(Tr,Yt=>{e(G)===e(Je)&&Yt(lr)})}o(vt),B(()=>{we(Tt,1,`flex-shrink-0 w-5 h-5 rounded flex items-center justify-center transition-colors hover:bg-black/20 ${e(Ze)==="covered"?"text-green-400":e(Ze)==="partially-covered"?"text-[#fbbf24]":e(Ze)==="planned"?"text-[#facc15]":"text-white/40"}`),$t(Tt,"title",`Coverage: ${e(Ze)??""}`),_(gr,`${e(Ze)==="covered"&&"â"}
												${e(Ze)==="partially-covered"&&"â"}
												${e(Ze)==="planned"&&"ð"}
												${e(Ze)==="not-covered"&&"â"}`)}),g(st,vt)};E(pn,st=>{s()&&e(Je)&&st(hn)})}o(Ot),B((st,vt,Tt)=>{we(Ot,1,`group absolute h-16 rounded-md px-2 py-1.5 text-white shadow-sm border-2 flex flex-col justify-center transition-all active:scale-95 sm:hover:z-20 sm:hover:shadow-lg touch-manipulation cursor-pointer ${e(it)?"ring-2 ring-[#eab308] ring-offset-2 ring-offset-[#3b3c48]":""} ${e(pt)?"ring-2 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""} ${e(kt)?"opacity-30":""} ${e(nt)?"ring-1 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""} ${e(bt)?"opacity-60":""}`),Bt(Ot,`left: ${e(Ct)??""}%; width: ${e(rr)??""}%; background-color: ${e(It)??""}; border-color: ${e(yt)??""}; min-width: 100px; z-index: ${e(Nt)??""};`),$t(Ot,"title",`${e(Q),c(()=>e(Q).CompleteShortName)??""}: ${e(Q),c(()=>e(Q).FirstTeamText)??""} vs ${e(Q),c(()=>e(Q).SecondTeamText)??""} - ${st??""}${e(Ne)?" (Click to see conflicts)":" (Click to add to plan)"}${e(Xe)?` [Priority: ${e(Xe)}]`:""}${e(ht)&&!e(nt)?" [Easy opportunity]":""}${e(Ze)!=="not-covered"?` [Coverage: ${e(Ze)}]`:""}`),we(St,1,`text-xs sm:text-sm font-bold truncate leading-tight ${e(Je)?"cursor-pointer hover:underline":""}`),_(Pt,(y(e(Je)),e(Q),c(()=>e(Je)||e(Q).Division.CodeAlias))),_(Xt,`vs ${vt??""}`),_(nr,Tt)},[()=>(y(Ve),e(Q),c(()=>Ve(e(Q).ScheduledStartDateTime))),()=>(y(e(qt)),c(()=>e(qt).length>20?e(qt).substring(0,17)+"...":e(qt))),()=>(y(Ve),e(Q),c(()=>Ve(e(Q).ScheduledStartDateTime)))]),g(ze,Ot)}),o(Qe),o(Ie),B(()=>{_(Ge,e(J)),_(rt,`${y(e(te)),c(()=>e(te).length)??""} match${y(e(te)),c(()=>e(te).length!==1?"es":"")??""}`)}),g(Y,Ie)}),o(U),o(O);var ne=l(O,2);{var se=Y=>{tc(Y,{get match(){return e(W)},get conflictingMatches(){return e(F)},onClose:()=>S(W,null)})};E(ne,Y=>{e(W)&&Y(se)})}var oe=l(ne,2);{var ue=Y=>{var J=Cc();g(Y,J)};E(oe,Y=>{e(_e),c(()=>De&&e(_e)&&e(_e).isClaimOwner(De.MatchId))&&Y(ue)})}var V=l(oe,2);{var Me=Y=>{var J=$c();J.__click=()=>S(me,null),g(Y,J)};E(V,Y=>{e(me)!==null&&Y(Me)})}var L=l(V,2);{var Z=Y=>{var J=Dc();J.__click=()=>S(G,null),g(Y,J)};E(L,Y=>{e(G)!==null&&Y(Z)})}o(I),B((Y,J)=>{we(ye,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="all"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),we(ke,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="morning"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),we(re,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="afternoon"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),we(q,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().timeRange.start===null&&n().timeRange.end===null?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),we(j,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().timeRange.start==="08:00"&&n().timeRange.end==="14:30"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),we(z,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().timeRange.start==="14:30"&&n().timeRange.end==="23:59"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),_(He,`Timeline: ${Y??""} - ${J??""} `)},[()=>(y(Ve),e($),c(()=>Ve(e($)))),()=>(y(Ve),e(f),c(()=>Ve(e(f))))]),g(x,I)};E(Ce,x=>{e(h),c(()=>e(h).length===0)?x(A):x(k,!1)})}g(r,Le),Rt(),v()}Kt(["click","change"]);function hr(r){return r.replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n")}function ga(r){const a=new Date(r),t=a.getUTCFullYear(),n=String(a.getUTCMonth()+1).padStart(2,"0"),s=String(a.getUTCDate()).padStart(2,"0"),d=String(a.getUTCHours()).padStart(2,"0"),v=String(a.getUTCMinutes()).padStart(2,"0"),u=String(a.getUTCSeconds()).padStart(2,"0");return`${t}${n}${s}T${d}${v}${u}Z`}function Pc(r,a){return`match-${r}-${a}@coursync.local`}function Ec(r,a,t,n){const s=Date.now();let d=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//CourtSync//Coverage Plan//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH",`X-WR-CALNAME:${hr(n)}`,`X-WR-CALDESC:${hr("Volleyball Match Coverage Plan")}`,"X-WR-TIMEZONE:UTC"].join(`\r
`)+`\r
`;return r.forEach(v=>{const u=a(v),b=t(v),p=u?`${u} vs ${b}`:`${v.FirstTeamText} vs ${v.SecondTeamText}`,h=[`Court: ${v.CourtName}`,`Division: ${v.Division.CodeAlias}`,`First Team: ${v.FirstTeamText}`,`Second Team: ${v.SecondTeamText}`].join("\\n"),M=hr(v.CourtName),D=hr(p),$=hr(h),f=v.ScheduledStartDateTime,m=v.ScheduledEndDateTime,N=f-5*60*1e3,C=ga(N),F=ga(m),H=ga(s),ce=Pc(v.MatchId,f);d+=["BEGIN:VEVENT",`UID:${ce}`,`DTSTAMP:${H}`,`DTSTART:${C}`,`DTEND:${F}`,`SUMMARY:${D}`,`DESCRIPTION:${$}`,`LOCATION:${M}`,"SEQUENCE:0","STATUS:CONFIRMED","TRANSP:OPAQUE"].join(`\r
`)+`\r
`,d+=["BEGIN:VALARM","TRIGGER:-PT15M","ACTION:DISPLAY",`DESCRIPTION:${hr(`Match starts in 15 minutes: ${p}`)}`,"END:VALARM"].join(`\r
`)+`\r
`,d+=`END:VEVENT\r
`}),d+=`END:VCALENDAR\r
`,d}const Nc=(r,a,t)=>{const n=r.length,s=a.size,d=n>0?s/n*100:0,v=r.filter(f=>a.has(f.MatchId)).reduce((f,m)=>{const T=(m.ScheduledEndDateTime-m.ScheduledStartDateTime)/6e4;return f+T},0),u=f=>{const T=(f.InvolvedTeam==="first"?f.FirstTeamText:f.SecondTeamText).match(/(\d+-\d+)/);return T?T[1]:""},b=new Set,p=new Set;r.forEach(f=>{const m=u(f);m&&(b.add(m),a.has(f.MatchId)&&p.add(m))});const h=p.size,M=b.size,D=M>0?n/M:0,$=Array.from(a).filter(f=>t.has(f)).length;return{totalMatches:n,coveredMatches:s,coveragePercentage:d,totalCoverageTime:v,teamsCovered:h,totalTeams:M,averageMatchesPerTeam:D,conflictsInPlan:$}},Oc=(r,a)=>{const t=s=>{const v=(s.InvolvedTeam==="first"?s.FirstTeamText:s.SecondTeamText).match(/(\d+-\d+)/);return v?v[1]:""},n=new Map;return r.forEach(s=>{const d=t(s);if(d){const v=n.get(d)||{total:0,covered:0};v.total++,a.has(s.MatchId)&&v.covered++,n.set(d,v)}}),Array.from(n.entries()).map(([s,d])=>({teamId:s,totalMatches:d.total,coveredMatches:d.covered,coveragePercentage:d.total>0?d.covered/d.total*100:0})).sort((s,d)=>d.coveragePercentage-s.coveragePercentage)},Xa=r=>{if(r<60)return`${Math.round(r)}m`;const a=Math.floor(r/60),t=Math.round(r%60);return t===0?`${a}h`:`${a}h ${t}m`};var Ac=w('<div class="flex items-center justify-between"><div class="flex items-center gap-3 flex-1 min-w-0"><div class="text-sm font-medium text-[#f8f8f9] truncate"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="flex items-center gap-2 flex-shrink-0"><div class="w-24 h-2 bg-[#454654] rounded-full overflow-hidden"><div class="h-full bg-[#eab308] transition-all duration-300"></div></div> <div class="text-xs text-[#9fa2ab] w-12 text-right"> </div></div></div>'),Fc=w('<div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-sm font-medium text-[#f8f8f9] mb-4">Team Coverage Breakdown</div> <div class="space-y-3 max-h-[400px] overflow-y-auto"></div></div>'),Rc=w('<div class="space-y-6"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"><div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Coverage</div> <div class="text-2xl font-bold text-[#f8f8f9] mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Teams Covered</div> <div class="text-2xl font-bold text-[#f8f8f9] mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Total Time</div> <div class="text-2xl font-bold text-[#f8f8f9] mb-1"> </div> <div class="text-xs text-[#9fa2ab]">coverage time</div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Conflicts</div> <div> </div> <div class="text-xs text-[#9fa2ab]">in coverage plan</div></div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-2"><div class="text-sm font-medium text-[#f8f8f9]">Coverage Progress</div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="w-full h-3 bg-[#454654] rounded-full overflow-hidden"><div class="h-full bg-[#eab308] transition-all duration-300"></div></div></div> <!> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Avg Matches/Team</div> <div class="text-xl font-bold text-[#f8f8f9]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Coverage Efficiency</div> <div class="text-xl font-bold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab] mt-1">teams covered ratio</div></div></div></div>');function Lc(r,a){Ft(a,!1);const t=R(),n=R();let s=qe(a,"matches",8);const d=Ir(s()),u=Ut(_t);ie(()=>y(s()),()=>{S(t,Nc(s(),u,d))}),ie(()=>y(s()),()=>{S(n,Oc(s(),u))}),zt(),Lt();var b=Rc(),p=i(b),h=i(p),M=l(i(h),2),D=i(M);o(M);var $=l(M,2),f=i($);o($),o(h);var m=l(h,2),T=l(i(m),2),N=i(T,!0);o(T);var C=l(T,2),F=i(C);o(C),o(m);var H=l(m,2),ce=l(i(H),2),W=i(ce,!0);o(ce),ur(2),o(H);var le=l(H,2),me=l(i(le),2),G=i(me,!0);o(me),ur(2),o(le),o(p);var De=l(p,2),_e=i(De),Fe=l(i(_e),2),Be=i(Fe);o(Fe),o(_e);var Ee=l(_e,2),at=i(Ee);o(Ee),o(De);var ot=l(De,2);{var xe=K=>{var de=Fc(),ye=l(i(de),2);xt(ye,5,()=>e(n),mt,(ke,re)=>{var We=Ac(),je=i(We),Ue=i(je),Re=i(Ue);o(Ue);var tt=l(Ue,2),P=i(tt);o(tt),o(je);var q=l(je,2),j=i(q),z=i(j);o(j);var be=l(j,2),ge=i(be);o(be),o(q),o(We),B((pe,ee)=>{_(Re,`Team ${e(re),c(()=>e(re).teamId)??""}`),_(P,`${e(re),c(()=>e(re).coveredMatches)??""}/${e(re),c(()=>e(re).totalMatches)??""} matches`),Bt(z,`width: ${pe??""}%;`),_(ge,`${ee??""}%`)},[()=>(e(re),c(()=>Math.min(e(re).coveragePercentage,100))),()=>(e(re),c(()=>e(re).coveragePercentage.toFixed(0)))]),g(ke,We)}),o(ye),o(de),g(K,de)};E(ot,K=>{e(n),c(()=>e(n).length>0)&&K(xe)})}var Le=l(ot,2),Ce=i(Le),A=l(i(Ce),2),k=i(A,!0);o(A),o(Ce);var x=l(Ce,2),I=l(i(x),2),ae=i(I);o(I),ur(2),o(x),o(Le),o(b),B((K,de,ye,ke,re,We)=>{_(D,`${K??""}%`),_(f,`${e(t),c(()=>e(t).coveredMatches)??""} of ${e(t),c(()=>e(t).totalMatches)??""} matches`),_(N,(e(t),c(()=>e(t).teamsCovered))),_(F,`of ${e(t),c(()=>e(t).totalTeams)??""} teams`),_(W,de),we(me,1,`text-2xl font-bold mb-1 ${e(t),c(()=>e(t).conflictsInPlan>0?"text-red-400":"text-[#f8f8f9]")??""}`),_(G,(e(t),c(()=>e(t).conflictsInPlan))),_(Be,`${ye??""}%`),Bt(at,`width: ${ke??""}%;`),_(k,re),_(ae,`${We??""}%`)},[()=>(e(t),c(()=>e(t).coveragePercentage.toFixed(1))),()=>(y(Xa),e(t),c(()=>Xa(e(t).totalCoverageTime))),()=>(e(t),c(()=>e(t).coveragePercentage.toFixed(1))),()=>(e(t),c(()=>Math.min(e(t).coveragePercentage,100))),()=>(e(t),c(()=>e(t).averageMatchesPerTeam.toFixed(1))),()=>(e(t),c(()=>e(t).totalMatches>0?(e(t).teamsCovered/e(t).totalTeams*100).toFixed(1):"0"))]),g(r,b),Rt()}const Wc=(r,a,t,n)=>{const s=new Map;return r.forEach(d=>{const v=n(d);if(!v)return;const u=s.get(v)||{total:0,covered:0,planned:0};u.total++,a.has(d.MatchId)&&u.covered++,t.get(v)==="planned"&&u.planned++,s.set(v,u)}),Array.from(s.entries()).map(([d,v])=>({teamId:d,status:t.get(d)||"not-covered",totalMatches:v.total,coveredMatches:v.covered,plannedMatches:v.planned,coveragePercentage:v.total>0?v.covered/v.total*100:0})).sort((d,v)=>{const u={"not-covered":0,planned:1,"partially-covered":2,covered:3},b=u[d.status],p=u[v.status];return b!==p?b-p:d.coveragePercentage-v.coveragePercentage})},jc=(r,a,t,n)=>{const s=new Map,d=new Map;r.forEach(f=>{const m=n(f);if(!m)return;const T=t.get(m)||"not-covered";s.has(m)||s.set(m,T);const N=d.get(m)||{total:0,covered:0,planned:0};N.total++,a.has(f.MatchId)&&N.covered++,T==="planned"&&N.planned++,d.set(m,N)});const v=s.size,u=Array.from(s.values()).filter(f=>f==="covered").length,b=Array.from(s.values()).filter(f=>f==="partially-covered").length,p=Array.from(s.values()).filter(f=>f==="planned").length,h=Array.from(s.values()).filter(f=>f==="not-covered").length,M=r.length,D=a.size,$=Array.from(d.values()).reduce((f,m)=>f+m.planned,0);return{totalTeams:v,coveredTeams:u,partiallyCoveredTeams:b,plannedTeams:p,uncoveredTeams:h,coveragePercentage:v>0?(u+b)/v*100:0,plannedPercentage:v>0?p/v*100:0,totalMatches:M,coveredMatches:D,plannedMatches:$}},Uc=(r,a)=>{const t=[];return t.push("Coverage Statistics Report"),t.push(`Generated: ${new Date().toLocaleString()}`),t.push(""),t.push("Summary"),t.push(`Total Teams,${a.totalTeams}`),t.push(`Covered Teams,${a.coveredTeams}`),t.push(`Partially Covered Teams,${a.partiallyCoveredTeams}`),t.push(`Planned Teams,${a.plannedTeams}`),t.push(`Uncovered Teams,${a.uncoveredTeams}`),t.push(`Coverage Percentage,${a.coveragePercentage.toFixed(1)}%`),t.push(`Planned Percentage,${a.plannedPercentage.toFixed(1)}%`),t.push(""),t.push("Team Breakdown"),t.push("Team ID,Status,Total Matches,Covered Matches,Planned Matches,Coverage Percentage"),r.forEach(n=>{t.push(`${n.teamId},${n.status},${n.totalMatches},${n.coveredMatches},${n.plannedMatches},${n.coveragePercentage.toFixed(1)}%`)}),t.join(`
`)},Bc=(r,a)=>JSON.stringify({generated:new Date().toISOString(),summary:a,teams:r},null,2);var Yc=w('<div class="flex items-center justify-between"><div class="flex items-center gap-3 flex-1 min-w-0"><div class="flex items-center gap-2 flex-shrink-0"><div></div> <div class="text-sm font-medium text-[#f8f8f9]"> </div></div> <div class="text-xs text-[#9fa2ab]"> <!></div></div> <div class="flex items-center gap-2 flex-shrink-0"><div class="w-24 h-2 bg-[#454654] rounded-full overflow-hidden"><div></div></div> <div class="text-xs text-[#9fa2ab] w-12 text-right"> </div></div></div>'),Hc=w('<div class="space-y-6"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"><div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Coverage</div> <div class="text-2xl font-bold text-[#f8f8f9] mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Covered</div> <div class="text-2xl font-bold text-green-400 mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Planned</div> <div class="text-2xl font-bold text-[#eab308] mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Uncovered</div> <div class="text-2xl font-bold text-[#808593] mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-2"><div class="text-sm font-medium text-[#f8f8f9]">Overall Coverage Progress</div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="w-full h-3 bg-[#454654] rounded-full overflow-hidden"><div class="h-full bg-[#eab308] transition-all duration-300"></div></div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-4"><div class="text-sm font-medium text-[#f8f8f9]">Team Coverage Breakdown</div> <div class="flex gap-2"><button class="px-3 py-1.5 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463] transition-colors">Export CSV</button> <button class="px-3 py-1.5 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463] transition-colors">Export JSON</button></div></div> <div class="space-y-3 max-h-[400px] overflow-y-auto"></div></div></div>');function Vc(r,a){Ft(a,!1);const t=R(),n=R(),s=R();let d=qe(a,"matches",8);const u=Ut(_t);function b(){const ke=Uc(e(n),e(s)),re=new Blob([ke],{type:"text/csv"}),We=URL.createObjectURL(re),je=document.createElement("a");je.href=We,je.download=`coverage-stats-${new Date().toISOString().split("T")[0]}.csv`,je.click(),URL.revokeObjectURL(We)}function p(){const ke=Bc(e(n),e(s)),re=new Blob([ke],{type:"application/json"}),We=URL.createObjectURL(re),je=document.createElement("a");je.href=We,je.download=`coverage-stats-${new Date().toISOString().split("T")[0]}.json`,je.click(),URL.revokeObjectURL(We)}ie(()=>(y(d()),et),()=>{S(t,(()=>{const ke=new Map;return d().forEach(re=>{const We=Ae(re);We&&ke.set(We,et.getTeamStatus(We))}),ke})())}),ie(()=>(y(d()),e(t),Ae),()=>{S(n,Wc(d(),u,e(t),Ae))}),ie(()=>(y(d()),e(t),Ae),()=>{S(s,jc(d(),u,e(t),Ae))}),zt(),Lt();var h=Hc(),M=i(h),D=i(M),$=l(i(D),2),f=i($);o($);var m=l($,2),T=i(m);o(m),o(D);var N=l(D,2),C=l(i(N),2),F=i(C,!0);o(C);var H=l(C,2),ce=i(H);o(H),o(N);var W=l(N,2),le=l(i(W),2),me=i(le,!0);o(le);var G=l(le,2),De=i(G);o(G),o(W);var _e=l(W,2),Fe=l(i(_e),2),Be=i(Fe,!0);o(Fe);var Ee=l(Fe,2),at=i(Ee);o(Ee),o(_e),o(M);var ot=l(M,2),xe=i(ot),Le=l(i(xe),2),Ce=i(Le);o(Le),o(xe);var A=l(xe,2),k=i(A);o(A),o(ot);var x=l(ot,2),I=i(x),ae=l(i(I),2),K=i(ae);K.__click=b;var de=l(K,2);de.__click=p,o(ae),o(I);var ye=l(I,2);xt(ye,5,()=>e(n),mt,(ke,re)=>{var We=Yc(),je=i(We),Ue=i(je),Re=i(Ue),tt=l(Re,2),P=i(tt);o(tt),o(Ue);var q=l(Ue,2),j=i(q),z=l(j);{var be=He=>{var Ye=Qa();B(()=>_(Ye,`â¢ ${e(re),c(()=>e(re).plannedMatches)??""} planned`)),g(He,Ye)};E(z,He=>{e(re),c(()=>e(re).plannedMatches>0)&&He(be)})}o(q),o(je);var ge=l(je,2),pe=i(ge),ee=i(pe);o(pe);var he=l(pe,2),$e=i(he);o(he),o(ge),o(We),B((He,Ye)=>{we(Re,1,`w-3 h-3 rounded ${e(re),c(()=>e(re).status==="covered"?"bg-green-500":e(re).status==="partially-covered"?"bg-[#f59e0b]":e(re).status==="planned"?"bg-[#eab308]":"bg-[#808593]")??""}`),_(P,`Team ${e(re),c(()=>e(re).teamId)??""}`),_(j,`${e(re),c(()=>e(re).coveredMatches)??""}/${e(re),c(()=>e(re).totalMatches)??""} matches `),we(ee,1,`h-full transition-all duration-300 ${e(re),c(()=>e(re).status==="covered"?"bg-green-500":e(re).status==="partially-covered"?"bg-[#f59e0b]":e(re).status==="planned"?"bg-[#eab308]":"bg-[#808593]")??""}`),Bt(ee,`width: ${He??""}%;`),_($e,`${Ye??""}%`)},[()=>(e(re),c(()=>Math.min(e(re).coveragePercentage,100))),()=>(e(re),c(()=>e(re).coveragePercentage.toFixed(0)))]),g(ke,We)}),o(ye),o(x),o(h),B((ke,re,We,je,Ue)=>{_(f,`${ke??""}%`),_(T,`${e(s),c(()=>e(s).coveredTeams+e(s).partiallyCoveredTeams)??""} of ${e(s),c(()=>e(s).totalTeams)??""} teams`),_(F,(e(s),c(()=>e(s).coveredTeams))),_(ce,`${e(s),c(()=>e(s).partiallyCoveredTeams)??""} partially covered`),_(me,(e(s),c(()=>e(s).plannedTeams))),_(De,`${re??""}% of teams`),_(Be,(e(s),c(()=>e(s).uncoveredTeams))),_(at,`${We??""}% remaining`),_(Ce,`${je??""}%`),Bt(k,`width: ${Ue??""}%;`)},[()=>(e(s),c(()=>e(s).coveragePercentage.toFixed(1))),()=>(e(s),c(()=>e(s).plannedPercentage.toFixed(1))),()=>(e(s),c(()=>e(s).totalTeams>0?(e(s).uncoveredTeams/e(s).totalTeams*100).toFixed(1):0)),()=>(e(s),c(()=>e(s).coveragePercentage.toFixed(1))),()=>(e(s),c(()=>Math.min(e(s).coveragePercentage,100)))]),g(r,h),Rt()}Kt(["click"]);var Gc=w('<span class="ml-2 text-red-400"> </span>'),Jc=w('<div class="flex items-center gap-1 bg-[#3b3c48] rounded-lg p-1 border border-[#454654] mx-4"><button>Plan</button> <button>Analytics</button> <button>Stats</button> <button>Team</button></div>'),zc=w('<div class="text-center py-12 text-[#9fa2ab] text-sm"><p>No matches selected yet</p> <p class="text-xs text-[#808593] mt-2">Click matches in the timeline or list to add them to your coverage plan</p></div>'),qc=w('<span class="ml-2 text-[#eab308]"> </span>'),Xc=w('<button class="px-2 py-1 text-xs font-medium rounded-lg bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors border border-[#525463]" title="Previous conflict">â Prev</button> <button class="px-2 py-1 text-xs font-medium rounded-lg bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors border border-[#525463]" title="Next conflict">Next â</button>',1),Qc=w('<div class="text-[10px] font-semibold text-[#eab308] px-1.5 py-0.5 rounded bg-[#eab308]/20">ACTIVE</div>'),Kc=w('<div class="flex-shrink-0 text-[10px] font-semibold text-[#eab308] px-1.5 py-0.5 rounded bg-[#eab308]/20">KEEP</div>'),Zc=w('<div class="text-[10px] text-[#808593] mt-0.5"> </div>'),el=w('<button class="px-2 py-1 text-[10px] font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Remove</button>'),tl=w('<div><!> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="text-xs font-semibold text-[#f8f8f9]"> </span> <span class="text-xs text-[#facc15] font-medium"> </span> <span class="text-xs text-[#c0c2c8]"> </span></div> <!></div> <!></div>'),rl=w('<div><div class="flex items-center gap-2 mb-2"><div class="text-xs font-medium text-red-400"> </div> <!></div> <div class="space-y-2"></div></div>'),al=w('<div class="border border-red-800/50 rounded-lg bg-red-950/10 p-4"><div class="flex items-center justify-between mb-3"><div><h4 class="text-sm font-semibold text-red-400">â ï¸ Conflicts Detected</h4> <p class="text-xs text-[#9fa2ab] mt-0.5"> <!></p></div> <div class="flex items-center gap-2"><!> <button class="px-3 py-1.5 text-xs font-medium rounded-lg bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Auto-Resolve</button></div></div> <div class="space-y-3"></div></div>'),nl=w('<span class="text-[10px] px-1.5 py-0.5 rounded bg-[#eab308]/20 text-[#eab308] border border-[#eab308]/50">Uncovered</span>'),ol=w('<div class="flex items-center gap-2 px-2 py-1.5 rounded bg-green-950/20 border border-green-500/30"><div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="text-xs font-semibold text-[#f8f8f9]"> </span> <span class="text-xs text-green-400 font-medium"> </span> <span class="text-xs text-[#c0c2c8]"> </span> <!></div> <div class="text-[10px] text-[#808593] mt-0.5"> </div></div> <button class="px-2 py-1 text-xs font-medium rounded transition-colors bg-green-500/20 text-green-400 border border-green-500/50 hover:bg-green-500/30">Add</button></div>'),sl=w('<div class="border border-green-500/50 rounded-lg bg-green-950/10 p-4"><div class="flex items-center justify-between mb-3"><div><h4 class="text-sm font-semibold text-green-400">ð¡ Coverage Opportunities</h4> <p class="text-xs text-[#9fa2ab] mt-0.5"> </p></div></div> <div class="space-y-2"></div></div>'),il=w('<div class="flex-shrink-0 text-[10px] font-semibold text-red-400 px-1.5 py-0.5 rounded bg-red-950/50">CONFLICT</div>'),cl=w("<div></div>"),ll=w('<div class="fixed inset-0 z-40"></div> <div class="absolute right-0 top-full mt-1 z-50"><!></div>',1),dl=w('<div class="relative flex-shrink-0"><button title="Set coverage status"> </button> <!></div>'),vl=w('<div><button aria-label="Remove from plan"><svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></button> <!> <div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <div class="flex-shrink-0 w-24 text-sm font-bold text-[#facc15]"> </div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><div class="text-sm font-bold text-[#f8f8f9]"> </div> <!></div> <div class="text-xs text-[#c0c2c8] truncate"> </div></div> <!> <div class="flex-shrink-0"><span class="px-2 py-0.5 text-[10px] font-semibold rounded"> </span></div></div>'),ul=w('<div class="space-y-2"><div class="flex items-center gap-2 pb-2 border-b border-[#454654]"><h4 class="text-sm font-semibold text-[#f8f8f9]"> </h4> <span class="text-xs text-[#808593]"> </span></div> <!></div>'),fl=w('<div class="space-y-4"><!> <!> <div class="space-y-4"></div></div>'),ml=w('<div class="text-center py-12 text-[#9fa2ab] text-sm">TeamMemberSelector and TeamCoverageView - To be migrated</div>'),xl=w('<div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 p-4 border-t border-[#454654] bg-[#454654]/50"><div class="flex items-center gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]">Mark All as Planned</button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]">Mark All as Covered</button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors text-[#9fa2ab] hover:text-[#f8f8f9] hover:bg-[#454654]">Clear Plan</button></div> <div class="flex items-center gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]" title="Copy plan to clipboard">Copy</button> <div class="flex items-center gap-1 bg-[#3b3c48] rounded-lg p-1 border border-[#454654]"><button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as JSON">JSON</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as CSV">CSV</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as Text">TXT</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as Calendar (ICS)">ð ICS</button></div></div></div>'),bl=w('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"><div class="relative w-full max-w-3xl max-h-[90vh] border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden flex flex-col"><div class="flex items-center justify-between p-4 border-b border-[#454654] bg-[#454654]/50"><div class="flex-1"><h3 class="text-base sm:text-lg font-semibold text-[#f8f8f9]">My Coverage Plan</h3> <div class="flex items-center gap-3 mt-1 flex-wrap"><p class="text-xs text-[#9fa2ab]"> <!> <!></p> <select class="px-2 py-1 text-xs rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none"><option>All Status</option><option>Uncovered</option><option>Planned</option><option>Covered</option></select></div></div> <!> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-4"><!></div> <!></div></div>');function gl(r,a){Ft(a,!1);const t=R(),n=R(),s=R(),d=R(),v=R(),u=R(),b=R();let p=qe(a,"matches",8),h=qe(a,"onClose",8),M=R("plan"),D=R("all"),$=R(null),f=R(0),m=R([]);function T(P){return(e(n).get(P)||[]).map(j=>e(t).find(z=>z.MatchId===j)).filter(Boolean)}function N(){e(d).length>0&&S(f,(e(f)+1)%e(d).length)}function C(){e(d).length>0&&S(f,(e(f)-1+e(d).length)%e(d).length)}function F(P){return P.InvolvedTeam==="first"?P.SecondTeamText:P.InvolvedTeam==="second"?P.FirstTeamText:`${P.FirstTeamText} vs ${P.SecondTeamText}`}function H(){var ge;const P={plan:{createdAt:new Date().toISOString(),totalMatches:e(t).length,totalCoverageTime:e(v),conflicts:e(d).length},matches:e(t).map(pe=>({MatchId:pe.MatchId,Date:wt(pe.ScheduledStartDateTime),Time:Ve(pe.ScheduledStartDateTime),Court:pe.CourtName,Team:Ae(pe)||pe.Division.CodeAlias,Opponent:F(pe),Division:pe.Division.CodeAlias,FirstTeam:pe.FirstTeamText,SecondTeam:pe.SecondTeamText,StartTime:new Date(pe.ScheduledStartDateTime).toISOString(),EndTime:new Date(pe.ScheduledEndDateTime).toISOString()}))},q=JSON.stringify(P,null,2),j=new Blob([q],{type:"application/json"}),z=URL.createObjectURL(j),be=document.createElement("a");be.href=z,be.download=`coverage-plan-${wt(((ge=e(t)[0])==null?void 0:ge.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.json`,be.click(),URL.revokeObjectURL(z)}function ce(){var pe;const P=["Date","Time","Court","Team","Opponent","Division","First Team","Second Team","Start Time","End Time"],q=e(t).map(ee=>[wt(ee.ScheduledStartDateTime),Ve(ee.ScheduledStartDateTime),ee.CourtName,Ae(ee)||ee.Division.CodeAlias,F(ee),ee.Division.CodeAlias,ee.FirstTeamText,ee.SecondTeamText,new Date(ee.ScheduledStartDateTime).toISOString(),new Date(ee.ScheduledEndDateTime).toISOString()]),j=[P.join(","),...q.map(ee=>ee.map(he=>`"${he}"`).join(","))].join(`
`),z=new Blob([j],{type:"text/csv"}),be=URL.createObjectURL(z),ge=document.createElement("a");ge.href=be,ge.download=`coverage-plan-${wt(((pe=e(t)[0])==null?void 0:pe.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.csv`,ge.click(),URL.revokeObjectURL(be)}function W(){var be;let P=`COVERAGE PLAN
`;P+=`${"=".repeat(50)}

`,P+=`Total Matches: ${e(t).length}
`,P+=`Total Coverage Time: ${Math.floor(e(v)/60)}h ${e(v)%60}m
`,e(d).length>0&&(P+=`Conflicts: ${e(d).length}
`),P+=`
`,e(b).forEach(ge=>{const pe=e(u)[ge];P+=`${ge}
`,P+=`${"-".repeat(50)}
`,pe.forEach(ee=>{const he=Ae(ee),$e=F(ee);P+=`${Ve(ee.ScheduledStartDateTime)} | ${ee.CourtName} | ${he||ee.Division.CodeAlias} vs ${$e}
`}),P+=`
`});const q=new Blob([P],{type:"text/plain"}),j=URL.createObjectURL(q),z=document.createElement("a");z.href=j,z.download=`coverage-plan-${wt(((be=e(t)[0])==null?void 0:be.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.txt`,z.click(),URL.revokeObjectURL(j)}function le(){var be;const P=Ec(e(t),Ae,F,"Coverage Plan"),q=new Blob([P],{type:"text/calendar;charset=utf-8"}),j=URL.createObjectURL(q),z=document.createElement("a");z.href=j,z.download=`coverage-plan-${wt(((be=e(t)[0])==null?void 0:be.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.ics`,z.click(),URL.revokeObjectURL(j)}async function me(){let P=`COVERAGE PLAN
`;P+=`${"=".repeat(50)}

`,P+=`Total Matches: ${e(t).length}
`,P+=`Total Coverage Time: ${Math.floor(e(v)/60)}h ${e(v)%60}m
`,e(d).length>0&&(P+=`Conflicts: ${e(d).length}
`),P+=`
`,e(b).forEach(q=>{const j=e(u)[q];P+=`${q}
`,P+=`${"-".repeat(50)}
`,j.forEach(z=>{const be=Ae(z),ge=F(z);P+=`${Ve(z.ScheduledStartDateTime)} | ${z.CourtName} | ${be||z.Division.CodeAlias} vs ${ge}
`}),P+=`
`});try{await navigator.clipboard.writeText(P),alert("Coverage plan copied to clipboard!")}catch(q){console.error("Failed to copy to clipboard:",q),alert("Failed to copy to clipboard. Please try exporting instead.")}}ie(()=>(y(p()),et),()=>{if(p().length>0){const P=new Map,q=Ut(_t);p().forEach(j=>{const z=Ae(j);if(!z)return;const be=P.get(z)||{total:0,inPlan:0};be.total++,q.has(j.MatchId)&&be.inPlan++,P.set(z,be)}),P.forEach((j,z)=>{et.updateFromPlan(z,j.inPlan,j.total)})}}),ie(()=>(y(p()),e(D),et),()=>{S(t,(()=>{const P=Ut(_t);let q=p().filter(j=>P.has(j.MatchId)).sort((j,z)=>j.ScheduledStartDateTime-z.ScheduledStartDateTime);return e(D)!=="all"&&(q=q.filter(j=>{const z=Ae(j);return z?et.getTeamStatus(z)===e(D):!1})),q})())}),ie(()=>e(t),()=>{S(n,Ir(e(t)))}),ie(()=>(y(p()),_a),()=>{S(s,(()=>{const P=Ir(p()),j=Ut(_t),z=new Map;return p().forEach(be=>{const ge=Ae(be);ge&&z.set(ge,et.getTeamStatus(ge))}),_a(p(),j,P,z,Ae,{preferUncovered:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:5})})())}),ie(()=>(e(n),e(t)),()=>{S(d,(()=>{if(e(n).size===0)return[];const P=[],q=new Set;return e(t).forEach(j=>{if(q.has(j.MatchId))return;const z=e(n).get(j.MatchId);if(!z||z.length===0)return;const be=[j,...z.map(ge=>e(t).find(pe=>pe.MatchId===ge)).filter(Boolean)];be.forEach(ge=>q.add(ge.MatchId)),P.push({matches:be.sort((ge,pe)=>ge.ScheduledStartDateTime-pe.ScheduledStartDateTime),conflictCount:be.length})}),P})())}),ie(()=>(e(d),e(f)),()=>{e(d).length>0&&e(f)>=e(d).length?S(f,0):e(d).length===0&&S(f,0)}),ie(()=>(e(d),e(m),e(f)),()=>{e(d).length>0&&e(m)[e(f)]&&setTimeout(()=>{var P;(P=e(m)[e(f)])==null||P.scrollIntoView({behavior:"smooth",block:"center"})},100)}),ie(()=>e(t),()=>{S(v,(()=>{if(e(t).length===0)return 0;const P=Math.min(...e(t).map(j=>j.ScheduledStartDateTime)),q=Math.max(...e(t).map(j=>j.ScheduledEndDateTime));return Math.floor((q-P)/6e4)})())}),ie(()=>(e(t),wt),()=>{S(u,(()=>{const P={};return e(t).forEach(q=>{const j=wt(q.ScheduledStartDateTime);P[j]||(P[j]=[]),P[j].push(q)}),P})())}),ie(()=>e(u),()=>{S(b,Object.keys(e(u)).sort((P,q)=>{const j=new Date(P).getTime(),z=new Date(q).getTime();return j-z}))}),zt(),Lt();var G=bl(),De=i(G),_e=i(De),Fe=i(_e),Be=l(i(Fe),2),Ee=i(Be),at=i(Ee),ot=l(at);{var xe=P=>{var q=Qa();B(j=>_(q,`â¢ ${j??""}h ${e(v)%60}m coverage`),[()=>(e(v),c(()=>Math.floor(e(v)/60)))]),g(P,q)};E(ot,P=>{e(v)>0&&P(xe)})}var Le=l(ot,2);{var Ce=P=>{var q=Gc(),j=i(q);o(q),B(()=>_(j,`â¢ ${e(d),c(()=>e(d).length)??""} conflict${e(d),c(()=>e(d).length!==1?"s":"")??""}`)),g(P,q)};E(Le,P=>{e(d),c(()=>e(d).length>0)&&P(Ce)})}o(Ee);var A=l(Ee,2);A.__change=P=>S(D,P.target.value);var k=i(A);k.value=k.__value="all";var x=l(k);x.value=x.__value="not-covered";var I=l(x);I.value=I.__value="planned";var ae=l(I);ae.value=ae.__value="covered",o(A);var K;yr(A),o(Be),o(Fe);var de=l(Fe,2);{var ye=P=>{var q=Jc(),j=i(q);j.__click=()=>S(M,"plan");var z=l(j,2);z.__click=()=>S(M,"analytics");var be=l(z,2);be.__click=()=>S(M,"stats");var ge=l(be,2);ge.__click=()=>S(M,"coordination"),o(q),B(()=>{we(j,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(M)==="plan"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),we(z,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(M)==="analytics"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),we(be,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(M)==="stats"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),we(ge,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(M)==="coordination"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),g(P,q)};E(de,P=>{e(t),c(()=>e(t).length>0)&&P(ye)})}var ke=l(de,2);ke.__click=function(...P){var q;(q=h())==null||q.apply(this,P)},o(_e);var re=l(_e,2),We=i(re);{var je=P=>{var q=Dt(),j=ft(q);{var z=ge=>{var pe=zc();g(ge,pe)},be=ge=>{var pe=fl(),ee=i(pe);{var he=fe=>{var Se=al(),Te=i(Se),O=i(Te),U=l(i(O),2),ne=i(U),se=l(ne);{var oe=Y=>{var J=qc(),te=i(J);o(J),B(()=>_(te,`â¢ Conflict ${e(f)+1} of ${e(d),c(()=>e(d).length)??""}`)),g(Y,J)};E(se,Y=>{e(d),c(()=>e(d).length>0)&&Y(oe)})}o(U),o(O);var ue=l(O,2),V=i(ue);{var Me=Y=>{var J=Xc(),te=ft(J);te.__click=C;var Ie=l(te,2);Ie.__click=N,g(Y,J)};E(V,Y=>{e(d),c(()=>e(d).length>1)&&Y(Me)})}var L=l(V,2);L.__click=()=>{e(d).forEach(Y=>{Y.matches.slice(1).forEach(J=>{_t.deselectMatch(J.MatchId)})})},o(ue),o(Te);var Z=l(Te,2);xt(Z,5,()=>e(d),mt,(Y,J,te)=>{var Ie=rl(),Pe=i(Ie),Ke=i(Pe),Ge=i(Ke);o(Ke);var ve=l(Ke,2);{var rt=ct=>{var Oe=Qc();g(ct,Oe)};E(ve,ct=>{te===e(f)&&ct(rt)})}o(Pe);var Qe=l(Pe,2);xt(Qe,5,()=>(e(J),c(()=>e(J).matches)),mt,(ct,Oe,ze)=>{const Q=X(()=>(y(Ae),e(Oe),c(()=>Ae(e(Oe))))),Ne=X(()=>(e(Oe),c(()=>T(e(Oe).MatchId)))),it=X(()=>ze===0);var Je=tl(),pt=i(Je);{var kt=yt=>{var Nt=Kc();g(yt,Nt)};E(pt,yt=>{e(it)&&yt(kt)})}var gt=l(pt,2),nt=i(gt),Xe=i(nt),ht=i(Xe,!0);o(Xe);var Ze=l(Xe,2),bt=i(Ze,!0);o(Ze);var lt=l(Ze,2),dt=i(lt,!0);o(lt),o(nt);var Ct=l(nt,2);{var rr=yt=>{var Nt=Zc(),Ot=i(Nt);o(Nt),B(()=>_(Ot,`Conflicts with ${y(e(Ne)),c(()=>e(Ne).length)??""} other match${y(e(Ne)),c(()=>e(Ne).length!==1?"es":"")??""}`)),g(yt,Nt)};E(Ct,yt=>{y(e(Ne)),c(()=>e(Ne).length>0)&&yt(rr)})}o(gt);var qt=l(gt,2);{var It=yt=>{var Nt=el();Nt.__click=()=>_t.deselectMatch(e(Oe).MatchId),g(yt,Nt)};E(qt,yt=>{e(it)||yt(It)})}o(Je),B(yt=>{we(Je,1,`flex items-center gap-2 px-2 py-1.5 rounded ${e(it)?"bg-[#eab308]/10 border border-[#eab308]/30":"bg-[#454654]/50"}`),_(ht,yt),_(bt,(e(Oe),c(()=>e(Oe).CourtName))),_(dt,(y(e(Q)),e(Oe),c(()=>e(Q)||e(Oe).Division.CodeAlias)))},[()=>(y(Ve),e(Oe),c(()=>Ve(e(Oe).ScheduledStartDateTime)))]),g(ct,Je)}),o(Qe),o(Ie),to(Ie,(ct,Oe)=>eo(m,e(m)[Oe]=ct),ct=>{var Oe;return(Oe=e(m))==null?void 0:Oe[ct]},()=>[te]),B(()=>{we(Ie,1,`border rounded p-3 transition-all ${te===e(f)?"border-[#eab308] bg-[#eab308]/5":"border-red-800/30 bg-[#3b3c48]/50"}`),_(Ge,`Conflict Group ${te+1}: ${e(J),c(()=>e(J).conflictCount)??""} overlapping match${e(J),c(()=>e(J).conflictCount!==1?"es":"")??""}`)}),g(Y,Ie)}),o(Z),o(Se),B(()=>_(ne,`${e(d),c(()=>e(d).length)??""} conflict group${e(d),c(()=>e(d).length!==1?"s":"")??""} in your plan `)),g(fe,Se)};E(ee,fe=>{e(d),c(()=>e(d).length>0)&&fe(he)})}var $e=l(ee,2);{var He=fe=>{var Se=sl(),Te=i(Se),O=i(Te),U=l(i(O),2),ne=i(U);o(U),o(O),o(Te);var se=l(Te,2);xt(se,5,()=>e(s),mt,(oe,ue)=>{const V=X(()=>(e(ue),c(()=>e(ue).match))),Me=X(()=>(y(Ae),y(e(V)),c(()=>Ae(e(V))))),L=X(()=>(y(e(Me)),y(et),c(()=>e(Me)?et.getTeamStatus(e(Me)):"not-covered")));var Z=ol(),Y=i(Z),J=i(Y),te=i(J),Ie=i(te,!0);o(te);var Pe=l(te,2),Ke=i(Pe,!0);o(Pe);var Ge=l(Pe,2),ve=i(Ge,!0);o(Ge);var rt=l(Ge,2);{var Qe=Q=>{var Ne=nl();g(Q,Ne)};E(rt,Q=>{e(L)==="not-covered"&&Q(Qe)})}o(J);var ct=l(J,2),Oe=i(ct,!0);o(ct),o(Y);var ze=l(Y,2);ze.__click=()=>_t.selectMatch(e(V).MatchId),o(Z),B(Q=>{_(Ie,Q),_(Ke,(y(e(V)),c(()=>e(V).CourtName))),_(ve,(y(e(Me)),y(e(V)),c(()=>e(Me)||e(V).Division.CodeAlias))),_(Oe,(e(ue),c(()=>e(ue).reason)))},[()=>(y(Ve),y(e(V)),c(()=>Ve(e(V).ScheduledStartDateTime)))]),g(oe,Z)}),o(se),o(Se),B(()=>_(ne,`${e(s),c(()=>e(s).length)??""} suggestion${e(s),c(()=>e(s).length!==1?"s":"")??""} (prioritizing uncovered teams)`)),g(fe,Se)};E($e,fe=>{e(s),c(()=>e(s).length>0)&&fe(He)})}var Ye=l($e,2);xt(Ye,5,()=>e(b),mt,(fe,Se)=>{const Te=X(()=>(e(u),e(Se),c(()=>e(u)[e(Se)])));var O=ul(),U=i(O),ne=i(U),se=i(ne,!0);o(ne);var oe=l(ne,2),ue=i(oe);o(oe),o(U);var V=l(U,2);xt(V,1,()=>e(Te),mt,(Me,L)=>{const Z=X(()=>(y(Ae),e(L),c(()=>Ae(e(L))))),Y=X(()=>(e(L),c(()=>F(e(L))))),J=X(()=>(e(n),e(L),c(()=>e(n).has(e(L).MatchId))));var te=vl(),Ie=i(te);Ie.__click=()=>_t.toggleMatch(e(L).MatchId);var Pe=i(Ie);o(Ie);var Ke=l(Ie,2);{var Ge=bt=>{var lt=il();g(bt,lt)};E(Ke,bt=>{e(J)&&bt(Ge)})}var ve=l(Ke,2),rt=i(ve,!0);o(ve);var Qe=l(ve,2),ct=i(Qe,!0);o(Qe);var Oe=l(Qe,2),ze=i(Oe),Q=i(ze),Ne=i(Q,!0);o(Q);var it=l(Q,2);{var Je=bt=>{const lt=X(()=>(y(et),y(e(Z)),c(()=>et.getTeamStatus(e(Z)))));var dt=cl();B(()=>{we(dt,1,`w-2 h-2 rounded ${e(lt)==="covered"?"bg-green-500":e(lt)==="partially-covered"?"bg-[#f59e0b]":e(lt)==="planned"?"bg-[#eab308]":"bg-[#808593]"}`),$t(dt,"title",`Status: ${e(lt)??""}`)}),g(bt,dt)};E(it,bt=>{e(Z)&&bt(Je)})}o(ze);var pt=l(ze,2),kt=i(pt);o(pt),o(Oe);var gt=l(Oe,2);{var nt=bt=>{var lt=dl(),dt=i(lt);dt.__click=It=>{It.stopPropagation(),S($,e($)===e(Z)?null:e(Z))};var Ct=i(dt,!0);o(dt);var rr=l(dt,2);{var qt=It=>{var yt=ll(),Nt=ft(yt);Nt.__click=()=>S($,null);var Ot=l(Nt,2),mr=i(Ot);{let xr=X(()=>(y(et),y(e(Z)),c(()=>et.getTeamStatus(e(Z)))));$a(mr,{get teamId(){return e(Z)},get currentStatus(){return e(xr)},onStatusChange:br=>{et.setTeamStatus(e(Z),br),S($,null)},onClose:()=>S($,null)})}o(Ot),g(It,yt)};E(rr,It=>{e($)===e(Z)&&It(qt)})}o(lt),B(It=>{we(dt,1,`px-2 py-1 text-xs rounded transition-colors ${e($)===e(Z)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]"}`),_(Ct,It)},[()=>(y(et),y(e(Z)),c(()=>(()=>{const It=et.getTeamStatus(e(Z));return It==="covered"?"â":It==="partially-covered"?"â":It==="planned"?"ð":"â"})()))]),g(bt,lt)};E(gt,bt=>{e(Z)&&bt(nt)})}var Xe=l(gt,2),ht=i(Xe),Ze=i(ht,!0);o(ht),o(Xe),o(te),B(bt=>{we(te,1,`flex items-center gap-3 px-3 py-2.5 rounded border ${e(J)?"border-red-800/50 bg-red-950/10":"border-[#eab308]/50 bg-[#eab308]/5"}`),we(Ie,1,`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center hover:opacity-80 transition-colors ${e(J)?"border-red-800/50 bg-red-950/20":"border-[#eab308] bg-[#eab308]/20"}`),we(Pe,0,`w-3 h-3 ${e(J)?"text-red-400":"text-[#facc15]"}`),_(rt,bt),_(ct,(e(L),c(()=>e(L).CourtName))),_(Ne,(y(e(Z)),e(L),c(()=>e(Z)||e(L).Division.CodeAlias))),_(kt,`vs ${e(Y)??""}`),Bt(ht,`background-color: ${e(L),c(()=>e(L).Division.ColorHex)??""}20; color: ${e(L),c(()=>e(L).Division.ColorHex)??""}; border: 1px solid ${e(L),c(()=>e(L).Division.ColorHex)??""}40;`),_(Ze,(e(L),c(()=>e(L).Division.CodeAlias)))},[()=>(y(Ve),e(L),c(()=>Ve(e(L).ScheduledStartDateTime)))]),g(Me,te)}),o(O),B(()=>{_(se,e(Se)),_(ue,`(${y(e(Te)),c(()=>e(Te).length)??""} match${y(e(Te)),c(()=>e(Te).length!==1?"es":"")??""})`)}),g(fe,O)}),o(Ye),o(pe),g(ge,pe)};E(j,ge=>{e(t),c(()=>e(t).length===0)?ge(z):ge(be,!1)})}g(P,q)},Ue=P=>{var q=Dt(),j=ft(q);{var z=ge=>{Lc(ge,{get matches(){return p()}})},be=ge=>{var pe=Dt(),ee=ft(pe);{var he=He=>{Vc(He,{get matches(){return p()}})},$e=He=>{var Ye=ml();g(He,Ye)};E(ee,He=>{e(M)==="stats"?He(he):He($e,!1)},!0)}g(ge,pe)};E(j,ge=>{e(M)==="analytics"?ge(z):ge(be,!1)},!0)}g(P,q)};E(We,P=>{e(M)==="plan"?P(je):P(Ue,!1)})}o(re);var Re=l(re,2);{var tt=P=>{var q=xl(),j=i(q),z=i(j);z.__click=()=>{e(t).forEach(Se=>{const Te=Ae(Se);Te&&et.setTeamStatus(Te,"planned")}),alert("All matches marked as Planned")};var be=l(z,2);be.__click=()=>{e(t).forEach(Se=>{const Te=Ae(Se);Te&&et.setTeamStatus(Te,"covered")}),alert("All matches marked as Covered")};var ge=l(be,2);ge.__click=()=>_t.clearPlan(),o(j);var pe=l(j,2),ee=i(pe);ee.__click=me;var he=l(ee,2),$e=i(he);$e.__click=H;var He=l($e,2);He.__click=ce;var Ye=l(He,2);Ye.__click=W;var fe=l(Ye,2);fe.__click=le,o(he),o(pe),o(q),g(P,q)};E(Re,P=>{e(t),e(M),c(()=>e(t).length>0&&e(M)==="plan")&&P(tt)})}o(De),o(G),B(()=>{_(at,`${e(t),c(()=>e(t).length)??""} match${e(t),c(()=>e(t).length!==1?"es":"")??""} selected `),K!==(K=e(D))&&(A.value=(A.__value=e(D))??"",fr(A,e(D)))}),g(r,G),Rt()}Kt(["change","click"]);var pl=w('<button class="px-3 py-1 text-xs font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Delete</button>'),hl=w('<div class="mt-3 pt-3 border-t border-[#454654]"><textarea placeholder="Add notes about this match..." class="w-full px-3 py-2 text-sm bg-[#454654] border border-[#525463] rounded text-[#c0c2c8] focus:border-[#eab308] focus:outline-none resize-none"></textarea> <div class="flex items-center gap-2 mt-2"><button class="px-3 py-1 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors">Save</button> <!> <button class="px-3 py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors">Cancel</button></div></div>'),_l=w('<div class="mt-3 pt-3 border-t border-[#454654]"><div class="text-xs text-[#9fa2ab] mb-1">Note:</div> <div class="text-sm text-[#c0c2c8] whitespace-pre-wrap"> </div></div>'),yl=w('<div class="px-4 py-3 rounded-lg border-2 border-[#eab308] bg-[#eab308]/10 transition-colors"><div class="flex items-start justify-between mb-2"><div class="flex-1"><div class="flex items-center justify-between mb-2"><div class="text-sm font-semibold text-[#f8f8f9]"> </div> <div class="text-xs font-medium text-[#facc15]"> </div></div> <div class="text-base font-bold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab] mt-1"> </div></div> <button> </button></div> <!></div>'),Sl=w('<div><h3 class="text-sm font-semibold text-[#facc15] mb-3 uppercase tracking-wider">Live Now</h3> <div class="space-y-2"></div></div>'),Tl=w('<button class="px-3 py-1 text-xs font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Delete</button>'),wl=w('<div class="mt-3 pt-3 border-t border-[#454654]"><textarea placeholder="Add notes about this match..." class="w-full px-3 py-2 text-sm bg-[#454654] border border-[#525463] rounded text-[#c0c2c8] focus:border-[#eab308] focus:outline-none resize-none"></textarea> <div class="flex items-center gap-2 mt-2"><button class="px-3 py-1 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors">Save</button> <!> <button class="px-3 py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors">Cancel</button></div></div>'),Ml=w('<div class="mt-3 pt-3 border-t border-[#454654]"><div class="text-xs text-[#9fa2ab] mb-1">Note:</div> <div class="text-sm text-[#c0c2c8] whitespace-pre-wrap"> </div></div>'),Cl=w('<div class="px-4 py-3 rounded-lg border border-[#454654] bg-[#3b3c48] hover:border-[#525463] transition-colors"><div class="flex items-start justify-between mb-2"><div class="flex-1"><div class="flex items-center justify-between mb-2"><div class="text-sm font-semibold text-[#f8f8f9]"> </div> <div class="text-xs font-medium text-[#facc15]"> </div></div> <div class="text-base font-bold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab] mt-1"> </div></div> <button> </button></div> <!></div>'),$l=w('<div><h3 class="text-sm font-semibold text-[#f8f8f9] mb-3 uppercase tracking-wider">Upcoming Matches</h3> <div class="space-y-2"></div></div>'),Dl=w('<button class="px-3 py-1 text-xs font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Delete</button>'),kl=w('<div class="mt-3 pt-3 border-t border-[#454654]"><textarea placeholder="Add notes about this match..." class="w-full px-3 py-2 text-sm bg-[#454654] border border-[#525463] rounded text-[#c0c2c8] focus:border-[#eab308] focus:outline-none resize-none"></textarea> <div class="flex items-center gap-2 mt-2"><button class="px-3 py-1 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors">Save</button> <!> <button class="px-3 py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors">Cancel</button></div></div>'),Il=w('<div class="mt-3 pt-3 border-t border-[#454654]"><div class="text-xs text-[#9fa2ab] mb-1">Note:</div> <div class="text-sm text-[#c0c2c8] whitespace-pre-wrap"> </div></div>'),Pl=w('<div class="px-4 py-3 rounded-lg border border-[#454654] bg-[#3b3c48]/50 opacity-75 transition-colors"><div class="flex items-start justify-between mb-2"><div class="flex-1"><div class="flex items-center justify-between mb-2"><div class="text-xs font-semibold text-[#f8f8f9]"> </div> <div class="text-xs font-medium text-[#facc15]"> </div></div> <div class="text-sm font-bold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab] mt-1"> </div></div> <button> </button></div> <!></div>'),El=w('<div><h3 class="text-sm font-semibold text-[#9fa2ab] mb-3 uppercase tracking-wider">Match History</h3> <div class="space-y-2"></div></div>'),Nl=w('<div class="text-center py-12 text-[#9fa2ab] text-sm"> </div>'),Ol=w('<div class="space-y-6"><div class="border-b border-[#454654] pb-4"><h2 class="text-xl font-bold text-[#f8f8f9]"> </h2> <div class="text-sm text-[#9fa2ab] mt-1"> </div></div> <!> <!> <!> <!></div>');function Al(r,a){Ft(a,!1);const t=R(),n=R(),s=R(),d=R();let v=qe(a,"matches",8),u=qe(a,"teamId",8),b=qe(a,"teamName",8),p=qe(a,"eventId",8,"");const h=xn(p());let M=R(null),D=R("");const $=Date.now();function f(xe){return xe.InvolvedTeam==="first"?xe.SecondTeamText:xe.InvolvedTeam==="second"?xe.FirstTeamText:`${xe.FirstTeamText} vs ${xe.SecondTeamText}`}function m(xe){S(M,xe),S(D,h.getNote(xe))}function T(xe){h.setNote(xe,e(D)),S(M,null),S(D,"")}function N(){S(M,null),S(D,"")}function C(xe){h.deleteNote(xe),S(M,null)}ie(()=>(y(v()),y(u())),()=>{S(t,v().filter(xe=>Ae(xe)===u()).sort((xe,Le)=>xe.ScheduledStartDateTime-Le.ScheduledStartDateTime))}),ie(()=>e(t),()=>{S(n,e(t).filter(xe=>xe.ScheduledEndDateTime<$))}),ie(()=>e(t),()=>{S(s,e(t).filter(xe=>xe.ScheduledStartDateTime<=$&&xe.ScheduledEndDateTime>=$))}),ie(()=>e(t),()=>{S(d,e(t).filter(xe=>xe.ScheduledStartDateTime>$))}),zt(),Lt();var F=Ol(),H=i(F),ce=i(H),W=i(ce,!0);o(ce);var le=l(ce,2),me=i(le);o(le),o(H);var G=l(H,2);{var De=xe=>{var Le=Sl(),Ce=l(i(Le),2);xt(Ce,5,()=>e(s),mt,(A,k)=>{const x=X(()=>(e(k),c(()=>h.hasNote(e(k).MatchId)))),I=X(()=>(e(M),e(k),c(()=>e(M)===e(k).MatchId))),ae=X(()=>(e(k),c(()=>h.getNote(e(k).MatchId))));var K=yl(),de=i(K),ye=i(de),ke=i(ye),re=i(ke),We=i(re,!0);o(re);var je=l(re,2),Ue=i(je,!0);o(je),o(ke);var Re=l(ke,2),tt=i(Re);o(Re);var P=l(Re,2),q=i(P,!0);o(P),o(ye);var j=l(ye,2);j.__click=()=>e(I)?N():m(e(k).MatchId);var z=i(j,!0);o(j),o(de);var be=l(de,2);{var ge=ee=>{var he=hl(),$e=i(he);ea($e),$t($e,"rows",3),ta($e);var He=l($e,2),Ye=i(He);Ye.__click=()=>T(e(k).MatchId);var fe=l(Ye,2);{var Se=O=>{var U=pl();U.__click=()=>C(e(k).MatchId),g(O,U)};E(fe,O=>{e(x)&&O(Se)})}var Te=l(fe,2);Te.__click=N,o(He),o(he),Sr($e,()=>e(D),O=>S(D,O)),g(ee,he)},pe=ee=>{var he=Dt(),$e=ft(he);{var He=Ye=>{var fe=_l(),Se=l(i(fe),2),Te=i(Se,!0);o(Se),o(fe),B(()=>_(Te,e(ae))),g(Ye,fe)};E($e,Ye=>{e(x)&&Ye(He)},!0)}g(ee,he)};E(be,ee=>{e(I)?ee(ge):ee(pe,!1)})}o(K),B((ee,he)=>{_(We,ee),_(Ue,(e(k),c(()=>e(k).CourtName))),_(tt,`vs ${he??""}`),_(q,(e(k),c(()=>e(k).Division.CodeAlias))),we(j,1,`ml-2 px-2 py-1 text-xs rounded transition-colors flex-shrink-0 ${e(x)||e(I)?"bg-[#eab308] text-[#18181b] hover:bg-[#facc15]":"bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] border border-[#525463]"}`),$t(j,"title",e(x)?"Edit note":"Add note"),_(z,e(x)?"ð":"ð")},[()=>(y(Ve),e(k),c(()=>Ve(e(k).ScheduledStartDateTime))),()=>(e(k),c(()=>f(e(k))))]),g(A,K)}),o(Ce),o(Le),g(xe,Le)};E(G,xe=>{e(s),c(()=>e(s).length>0)&&xe(De)})}var _e=l(G,2);{var Fe=xe=>{var Le=$l(),Ce=l(i(Le),2);xt(Ce,5,()=>e(d),mt,(A,k)=>{const x=X(()=>(e(k),c(()=>h.hasNote(e(k).MatchId)))),I=X(()=>(e(M),e(k),c(()=>e(M)===e(k).MatchId))),ae=X(()=>(e(k),c(()=>h.getNote(e(k).MatchId))));var K=Cl(),de=i(K),ye=i(de),ke=i(ye),re=i(ke),We=i(re,!0);o(re);var je=l(re,2),Ue=i(je,!0);o(je),o(ke);var Re=l(ke,2),tt=i(Re);o(Re);var P=l(Re,2),q=i(P,!0);o(P),o(ye);var j=l(ye,2);j.__click=()=>e(I)?N():m(e(k).MatchId);var z=i(j,!0);o(j),o(de);var be=l(de,2);{var ge=ee=>{var he=wl(),$e=i(he);ea($e),$t($e,"rows",3),ta($e);var He=l($e,2),Ye=i(He);Ye.__click=()=>T(e(k).MatchId);var fe=l(Ye,2);{var Se=O=>{var U=Tl();U.__click=()=>C(e(k).MatchId),g(O,U)};E(fe,O=>{e(x)&&O(Se)})}var Te=l(fe,2);Te.__click=N,o(He),o(he),Sr($e,()=>e(D),O=>S(D,O)),g(ee,he)},pe=ee=>{var he=Dt(),$e=ft(he);{var He=Ye=>{var fe=Ml(),Se=l(i(fe),2),Te=i(Se,!0);o(Se),o(fe),B(()=>_(Te,e(ae))),g(Ye,fe)};E($e,Ye=>{e(x)&&Ye(He)},!0)}g(ee,he)};E(be,ee=>{e(I)?ee(ge):ee(pe,!1)})}o(K),B((ee,he)=>{_(We,ee),_(Ue,(e(k),c(()=>e(k).CourtName))),_(tt,`vs ${he??""}`),_(q,(e(k),c(()=>e(k).Division.CodeAlias))),we(j,1,`ml-2 px-2 py-1 text-xs rounded transition-colors flex-shrink-0 ${e(x)||e(I)?"bg-[#eab308] text-[#18181b] hover:bg-[#facc15]":"bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] border border-[#525463]"}`),$t(j,"title",e(x)?"Edit note":"Add note"),_(z,e(x)?"ð":"ð")},[()=>(y(Ve),e(k),c(()=>Ve(e(k).ScheduledStartDateTime))),()=>(e(k),c(()=>f(e(k))))]),g(A,K)}),o(Ce),o(Le),g(xe,Le)};E(_e,xe=>{e(d),c(()=>e(d).length>0)&&xe(Fe)})}var Be=l(_e,2);{var Ee=xe=>{var Le=El(),Ce=l(i(Le),2);xt(Ce,5,()=>e(n),mt,(A,k)=>{const x=X(()=>(e(k),c(()=>h.hasNote(e(k).MatchId)))),I=X(()=>(e(M),e(k),c(()=>e(M)===e(k).MatchId))),ae=X(()=>(e(k),c(()=>h.getNote(e(k).MatchId))));var K=Pl(),de=i(K),ye=i(de),ke=i(ye),re=i(ke),We=i(re);o(re);var je=l(re,2),Ue=i(je,!0);o(je),o(ke);var Re=l(ke,2),tt=i(Re);o(Re);var P=l(Re,2),q=i(P,!0);o(P),o(ye);var j=l(ye,2);j.__click=()=>e(I)?N():m(e(k).MatchId);var z=i(j,!0);o(j),o(de);var be=l(de,2);{var ge=ee=>{var he=kl(),$e=i(he);ea($e),$t($e,"rows",3),ta($e);var He=l($e,2),Ye=i(He);Ye.__click=()=>T(e(k).MatchId);var fe=l(Ye,2);{var Se=O=>{var U=Dl();U.__click=()=>C(e(k).MatchId),g(O,U)};E(fe,O=>{e(x)&&O(Se)})}var Te=l(fe,2);Te.__click=N,o(He),o(he),Sr($e,()=>e(D),O=>S(D,O)),g(ee,he)},pe=ee=>{var he=Dt(),$e=ft(he);{var He=Ye=>{var fe=Il(),Se=l(i(fe),2),Te=i(Se,!0);o(Se),o(fe),B(()=>_(Te,e(ae))),g(Ye,fe)};E($e,Ye=>{e(x)&&Ye(He)},!0)}g(ee,he)};E(be,ee=>{e(I)?ee(ge):ee(pe,!1)})}o(K),B((ee,he,$e)=>{_(We,`${ee??""} â¢ ${he??""}`),_(Ue,(e(k),c(()=>e(k).CourtName))),_(tt,`vs ${$e??""}`),_(q,(e(k),c(()=>e(k).Division.CodeAlias))),we(j,1,`ml-2 px-2 py-1 text-xs rounded transition-colors flex-shrink-0 ${e(x)||e(I)?"bg-[#eab308] text-[#18181b] hover:bg-[#facc15]":"bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] border border-[#525463]"}`),$t(j,"title",e(x)?"Edit note":"Add note"),_(z,e(x)?"ð":"ð")},[()=>(y(wt),e(k),c(()=>wt(e(k).ScheduledStartDateTime))),()=>(y(Ve),e(k),c(()=>Ve(e(k).ScheduledStartDateTime))),()=>(e(k),c(()=>f(e(k))))]),g(A,K)}),o(Ce),o(Le),g(xe,Le)};E(Be,xe=>{e(n),c(()=>e(n).length>0)&&xe(Ee)})}var at=l(Be,2);{var ot=xe=>{var Le=Nl(),Ce=i(Le);o(Le),B(()=>_(Ce,`No matches found for ${b()??""}`)),g(xe,Le)};E(at,xe=>{e(t),c(()=>e(t).length===0)&&xe(ot)})}o(F),B(()=>{_(W,b()),_(me,`${e(t),c(()=>e(t).length)??""} total match${e(t),c(()=>e(t).length!==1?"es":"")??""}`)}),g(r,F),Rt()}Kt(["click"]);var Fl=w('<div class="px-4 py-3 rounded-lg border border-[#525463] bg-[#454654]/30"><div class="flex items-center justify-between mb-2"><div class="text-sm font-semibold text-[#f8f8f9]"> </div> <div class="text-xs font-medium text-[#9fa2ab]"> </div></div> <div class="text-sm text-[#c0c2c8]"> </div> <div class="text-xs text-[#9fa2ab] mt-1"> </div></div>'),Rl=w('<div><h3 class="text-sm font-semibold text-[#9fa2ab] mb-2 uppercase tracking-wider"> </h3> <div class="space-y-2"></div></div>'),Ll=w('<div class="space-y-4"></div>'),Wl=w('<div class="text-center py-12 text-[#9fa2ab] text-sm"> <div class="text-xs text-[#808593] mt-2">Work assignments will appear here when assigned by tournament officials.</div></div>'),jl=w('<div class="space-y-6"><div class="border-b border-[#454654] pb-4"><h2 class="text-xl font-bold text-[#f8f8f9]">Work Assignments</h2> <div class="text-sm text-[#9fa2ab] mt-1"> </div></div> <!></div>');function Ul(r,a){Ft(a,!1);const t=R(),n=R(),s=R();let d=qe(a,"matches",8),v=qe(a,"teamId",8),u=qe(a,"teamName",8);ie(()=>(y(d()),y(v())),()=>{S(t,d().filter(m=>(Ae(m)===v(),!1)).sort((m,T)=>m.ScheduledStartDateTime-T.ScheduledStartDateTime))}),ie(()=>(e(t),wt),()=>{S(n,(()=>{const m={};return e(t).forEach(T=>{const N=wt(T.ScheduledStartDateTime);m[N]||(m[N]=[]),m[N].push(T)}),m})())}),ie(()=>e(n),()=>{S(s,Object.keys(e(n)).sort())}),zt(),Lt();var b=jl(),p=i(b),h=l(i(p),2),M=i(h);o(h),o(p);var D=l(p,2);{var $=m=>{var T=Ll();xt(T,5,()=>e(s),mt,(N,C)=>{var F=Rl(),H=i(F),ce=i(H,!0);o(H);var W=l(H,2);xt(W,5,()=>(e(n),e(C),c(()=>e(n)[e(C)])),mt,(le,me)=>{var G=Fl(),De=i(G),_e=i(De),Fe=i(_e,!0);o(_e);var Be=l(_e,2),Ee=i(Be,!0);o(Be),o(De);var at=l(De,2),ot=i(at);o(at);var xe=l(at,2),Le=i(xe);o(xe),o(G),B(Ce=>{_(Fe,Ce),_(Ee,(e(me),c(()=>e(me).CourtName))),_(ot,`${e(me),c(()=>e(me).FirstTeamText)??""} vs ${e(me),c(()=>e(me).SecondTeamText)??""}`),_(Le,`${e(me),c(()=>e(me).Division.CodeAlias)??""} â¢ Work Assignment`)},[()=>(y(Ve),e(me),c(()=>Ve(e(me).ScheduledStartDateTime)))]),g(le,G)}),o(W),o(F),B(()=>_(ce,e(C))),g(N,F)}),o(T),g(m,T)},f=m=>{var T=Wl(),N=i(T);ur(),o(T),B(()=>_(N,`No work assignments found for ${u()??""} `)),g(m,T)};E(D,m=>{e(t),c(()=>e(t).length>0)?m($):m(f,!1)})}o(b),B(()=>_(M,`${u()??""} â¢ ${e(t),c(()=>e(t).length)??""} assignment${e(t),c(()=>e(t).length!==1?"s":"")??""}`)),g(r,b),Rt()}var Bl=w('<span class="ml-2 text-[10px] opacity-75"> </span>'),Yl=w("<button> <!></button>"),Hl=w('<div class="border-b border-[#454654] pb-4"><div class="flex items-center gap-2 flex-wrap"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Select Team:</span> <!></div></div>'),Vl=w('<div class="text-center py-12 text-[#9fa2ab] text-sm">Select a team to view matches and work assignments</div>'),Gl=w('<div class="space-y-4"><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-xl font-bold text-[#f8f8f9]">Coach View</h1> <p class="text-sm text-[#9fa2ab] mt-1">View matches and work assignments by team</p></div> <div class="flex items-center gap-2 bg-[#454654] rounded-lg p-1"><button>Matches</button> <button>Work Assignments</button></div></div> <!> <!> <!></div>');function Jl(r,a){Ft(a,!1);const t=R(),n=R(),s=R(),d=R();let v=qe(a,"matches",8),u=qe(a,"eventId",8),b=qe(a,"clubId",8),p=R(null),h=R(null),M=R("matches");function D(G){var _e;S(p,G);const De=(_e=e(n)[G])==null?void 0:_e[0];De&&S(h,De)}ie(()=>y(v()),()=>{S(t,Ca(v()))}),ie(()=>(y(v()),Ae),()=>{S(n,(()=>{const G={};return v().forEach(De=>{const _e=Ae(De);_e&&(G[_e]||(G[_e]=[]),G[_e].push(De))}),G})())}),ie(()=>(e(p),e(n)),()=>{S(s,e(p)?e(n)[e(p)]||[]:[])}),ie(()=>(e(t),e(n)),()=>{S(d,[...e(t)].sort((G,De)=>{var Be,Ee;const _e=((Be=e(n)[G])==null?void 0:Be.length)||0;return(((Ee=e(n)[De])==null?void 0:Ee.length)||0)-_e}))}),zt(),Lt();var $=Gl(),f=i($),m=l(i(f),2),T=i(m);T.__click=()=>S(M,"matches");var N=l(T,2);N.__click=()=>S(M,"work"),o(m),o(f);var C=l(f,2);{var F=G=>{var De=Hl(),_e=i(De),Fe=l(i(_e),2);xt(Fe,1,()=>e(d),mt,(Be,Ee)=>{var at=Yl();at.__click=()=>D(e(Ee));var ot=i(at),xe=l(ot);{var Le=Ce=>{var A=Bl(),k=i(A);o(A),B(()=>_(k,`(${e(n),e(Ee),c(()=>e(n)[e(Ee)].length)??""})`)),g(Ce,A)};E(xe,Ce=>{e(n),e(Ee),c(()=>e(n)[e(Ee)])&&Ce(Le)})}o(at),B(()=>{we(at,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(p)===e(Ee)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),_(ot,`${e(Ee)??""} `)}),g(Be,at)}),o(_e),o(De),g(G,De)};E(C,G=>{e(t),c(()=>e(t).length>0)&&G(F)})}var H=l(C,2);{var ce=G=>{var De=Dt(),_e=ft(De);{var Fe=Ee=>{Al(Ee,{get matches(){return v()},teamId,get teamName(){return e(p)},get eventId(){return u()}})},Be=Ee=>{Ul(Ee,{get matches(){return v()},teamId,get teamName(){return e(p)}})};E(_e,Ee=>{e(M)==="matches"?Ee(Fe):Ee(Be,!1)})}g(G,De)},W=G=>{var De=Vl();g(G,De)};E(H,G=>{e(p)?G(ce):G(W,!1)})}var le=l(H,2);{var me=G=>{bn(G,{get match(){return e(h)},get eventId(){return u()},get clubId(){return b()},onClose:()=>S(h,null),get matches(){return v()}})};E(le,G=>{e(h)&&G(me)})}o($),B(()=>{we(T,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(M)==="matches"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),we(N,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(M)==="work"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),g(r,$),Rt()}Kt(["click"]);var zl=w('<span class="ml-2" style="color: #ef4444;"> </span>'),ql=w('<span class="text-xs whitespace-nowrap hidden sm:inline" style="color: #9fa2ab;"> <!></span>'),Xl=w('<span class="font-medium truncate max-w-[200px] sm:max-w-none"> </span>'),Ql=w('<span class="hidden sm:inline"> </span>'),Kl=w('<div class="flex items-center gap-2 text-xs" style="color: #9fa2ab;"><!> <!></div>'),Zl=w('<span class="ml-2" style="color: #ef4444;"> </span>'),ed=w('<span class="text-xs sm:hidden" style="color: #9fa2ab;"> <!></span>'),td=w('<div class="flex items-center gap-1 rounded-lg p-1" style="background-color: #454654;"><button>List</button> <button>Timeline</button></div>'),rd=w("<button> </button>"),ad=w('<!> <!> <button class="px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors hover:text-[#f8f8f9] min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8;" title="Export JSON">JSON</button> <button class="px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors hover:text-[#f8f8f9] min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8;" title="Export CSV">CSV</button>',1),nd=w('<div class="border-b" style="border-color: #454654; background-color: rgba(59, 60, 72, 0.3);"><div class="container mx-auto px-3 sm:px-4 py-4"><!></div></div>'),od=w('<div class="text-center py-12"><div class="inline-block animate-pulse" style="color: #9fa2ab;">Loading matches...</div></div>'),sd=w('<div class="rounded-lg mb-6 px-4 py-3 border" style="background-color: rgba(127, 29, 29, 0.5); border-color: #991b1b; color: #fca5a5;"><div class="text-xs font-medium mb-1">Error</div> <div class="text-sm"> </div></div>'),id=w('<div class="text-center py-12" style="color: #9fa2ab;"><div class="text-sm">No matches found for 630 Volleyball</div> <div class="text-xs mt-2" style="color: #808593;">Click "Config" to change event parameters</div></div>'),cd=w('<div class="min-h-screen" style="background-color: #18181b;"><header class="border-b sticky top-0 z-10" style="border-color: #454654; background-color: rgba(59, 60, 72, 0.5);"><div class="container mx-auto px-3 sm:px-4 py-2 sm:py-3"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4"><div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 sm:gap-4 min-w-0 flex-1"><div class="flex items-center gap-2 min-w-0"><h1 class="text-base sm:text-lg font-semibold truncate" style="color: #f8f8f9;">630 Volleyball Coverage</h1> <!></div> <!> <!></div> <div class="flex items-center gap-1.5 sm:gap-2 flex-wrap"><div class="flex items-center gap-1"><label class="text-xs hidden sm:inline" style="color: #9fa2ab;">Role:</label> <select class="px-2 py-2 sm:py-1.5 text-xs rounded-lg transition-colors min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8; border: 1px solid #525463;" title="Select your role"><option>Media</option><option>Spectator</option><option>Coach</option></select></div> <!> <button> </button></div></div></div></header> <!> <main class="container mx-auto px-3 sm:px-4 py-4 sm:py-6"><!> <!> <!> <!> <!></main></div>');function gd(r,a){Ft(a,!1);const t=()=>Qt(Ps,"$selectedCount",u),n=()=>Qt(wa,"$isMedia",u),s=()=>Qt(Ma,"$isSpectator",u),d=()=>Qt(Os,"$isCoach",u),v=()=>Qt(Er,"$userRole",u),[u,b]=Ta(),p=R(),h=R(),M=R(),D=R(),$=R(),f=R();let m=R("PTAwMDAwNDEzMTQ90"),T=R("2025-11-01"),N=R(300),C=R([]),F=R(!1),H=R(null),ce=R("list"),W=R(!1),le=R(24426),me=R(!1),G=R(null);Sa(()=>{De(e(m),e(T),e(N))});async function De(O,U,ne){var se;S(F,!0),S(H,null),S(m,O),S(T,U),S(N,ne);try{const oe=await go(O),ue=(se=oe.Clubs)==null?void 0:se.find(L=>L.Name==="630 Volleyball");ue&&S(le,ue.ClubId),S(G,{name:oe.Name||oe.EventName||oe.FullName||oe.Title||"Event",startDate:oe.StartDate||oe.StartDateTime||oe.Start||oe.StartTime,endDate:oe.EndDate||oe.EndDateTime||oe.End||oe.EndTime});const V=await bo(O,U,ne),Me=To(V.CourtSchedules);S(C,Me)}catch(oe){console.error("Error loading schedule:",oe),S(H,oe instanceof Error?oe.message:"Failed to load schedule"),S(C,[])}finally{S(F,!1)}}function _e(){const O=JSON.stringify(e(C),null,2),U=new Blob([O],{type:"application/json"}),ne=URL.createObjectURL(U),se=document.createElement("a");se.href=ne,se.download=`630-volleyball-matches-${e(T)}.json`,se.click(),URL.revokeObjectURL(ne)}function Fe(){const O=["Match ID","Division","Short Name","First Team","Second Team","Work Team","Court","Start Time","End Time","Duration","Involved Team"],U=e(C).map(V=>[V.MatchId.toString(),V.Division.Name,V.CompleteShortName,V.FirstTeamText,V.SecondTeamText,V.WorkTeamText,V.CourtName,new Date(V.ScheduledStartDateTime).toISOString(),new Date(V.ScheduledEndDateTime).toISOString(),((V.ScheduledEndDateTime-V.ScheduledStartDateTime)/6e4).toString(),V.InvolvedTeam]),ne=[O.join(","),...U.map(V=>V.map(Me=>`"${Me}"`).join(","))].join(`
`),se=new Blob([ne],{type:"text/csv"}),oe=URL.createObjectURL(se),ue=document.createElement("a");ue.href=oe,ue.download=`630-volleyball-matches-${e(T)}.csv`,ue.click(),URL.revokeObjectURL(oe)}ie(()=>(e(C),et),()=>{if(e(C).length>0){const O=new Map;e(C).forEach(U=>{const se=(U.InvolvedTeam==="first"?U.FirstTeamText:U.SecondTeamText).match(/(\d+-\d+)/),oe=se?se[1]:"";if(!oe)return;const ue=O.get(oe)||{total:0,inPlan:0};ue.total++;let V=!1;_t.subscribe(Me=>{V=Me.has(U.MatchId)})(),V&&ue.inPlan++,O.set(oe,ue)}),O.forEach((U,ne)=>{et.updateFromPlan(ne,U.inPlan,U.total)})}}),ie(()=>e(C),()=>{S(p,(()=>{const O=new Map;return e(C).forEach((U,ne)=>{e(C).slice(ne+1).forEach(se=>{U.ScheduledStartDateTime<se.ScheduledEndDateTime&&U.ScheduledEndDateTime>se.ScheduledStartDateTime&&(O.has(U.MatchId)||O.set(U.MatchId,[]),O.get(U.MatchId).push(se.MatchId))})}),e(C).filter(U=>O.has(U.MatchId)).length})())}),ie(()=>t(),()=>{S(h,t())}),ie(()=>n(),()=>{S(M,n())}),ie(()=>s(),()=>{S(D,s())}),ie(()=>d(),()=>{S($,d())}),ie(()=>v(),()=>{S(f,v())}),ie(()=>(e(C),e(h),et),()=>{if(e(C).length>0&&e(h)!==void 0){const O=new Map,U=Ut(_t);e(C).forEach(ne=>{const oe=(ne.InvolvedTeam==="first"?ne.FirstTeamText:ne.SecondTeamText).match(/(\d+-\d+)/),ue=oe?oe[1]:"";if(!ue)return;const V=O.get(ue)||{total:0,inPlan:0};V.total++,U.has(ne.MatchId)&&V.inPlan++,O.set(ue,V)}),O.forEach((ne,se)=>{et.updateFromPlan(se,ne.inPlan,ne.total)})}}),zt(),Lt();var Be=cd(),Ee=i(Be),at=i(Ee),ot=i(at),xe=i(ot),Le=i(xe),Ce=l(i(Le),2);{var A=O=>{var U=ql(),ne=i(U),se=l(ne);{var oe=ue=>{var V=zl(),Me=i(V);o(V),B(()=>_(Me,`â¢ ${e(p)??""} conflicts`)),g(ue,V)};E(se,ue=>{e(p)>0&&ue(oe)})}o(U),B(()=>_(ne,`${e(C),c(()=>e(C).length)??""} matches `)),g(O,U)};E(Ce,O=>{e(C),c(()=>e(C).length>0)&&O(A)})}o(Le);var k=l(Le,2);{var x=O=>{var U=Kl(),ne=i(U);{var se=V=>{var Me=Xl(),L=i(Me,!0);o(Me),B(()=>_(L,(e(G),c(()=>e(G).name)))),g(V,Me)};E(ne,V=>{e(G),c(()=>e(G).name)&&V(se)})}var oe=l(ne,2);{var ue=V=>{var Me=Ql(),L=i(Me,!0);o(Me),B(Z=>_(L,Z),[()=>(e(G),y(wt),c(()=>(()=>{try{const Z=e(G).startDate?new Date(e(G).startDate).getTime():null,Y=e(G).endDate?new Date(e(G).endDate).getTime():null;return Z&&Y&&Math.abs(Z-Y)>864e5?`${wt(Z)} - ${wt(Y)}`:Z?wt(Z):Y?wt(Y):null}catch{return null}})()))]),g(V,Me)};E(oe,V=>{e(G),c(()=>(e(G).startDate||e(G).endDate)&&(()=>{try{const Me=e(G).startDate?new Date(e(G).startDate).getTime():null,L=e(G).endDate?new Date(e(G).endDate).getTime():null;return Me&&L&&Math.abs(Me-L)>864e5}catch{return!1}})())&&V(ue)})}o(U),g(O,U)};E(k,O=>{e(G),c(()=>e(G)&&(e(G).name||e(G).startDate))&&O(x)})}var I=l(k,2);{var ae=O=>{var U=ed(),ne=i(U),se=l(ne);{var oe=ue=>{var V=Zl(),Me=i(V);o(V),B(()=>_(Me,`â¢ ${e(p)??""} conflicts`)),g(ue,V)};E(se,ue=>{e(p)>0&&ue(oe)})}o(U),B(()=>_(ne,`${e(C),c(()=>e(C).length)??""} matches `)),g(O,U)};E(I,O=>{e(C),c(()=>e(C).length>0)&&O(ae)})}o(xe);var K=l(xe,2),de=i(K),ye=l(i(de),2);ye.__change=O=>Er.setRole(O.target.value);var ke=i(ye);ke.value=ke.__value="media";var re=l(ke);re.value=re.__value="spectator";var We=l(re);We.value=We.__value="coach",o(ye);var je;yr(ye),o(de);var Ue=l(de,2);{var Re=O=>{var U=ad(),ne=ft(U);{var se=L=>{var Z=td(),Y=i(Z);Y.__click=()=>S(ce,"list");let J;var te=l(Y,2);te.__click=()=>S(ce,"timeline");let Ie;o(Z),B(()=>{J=we(Y,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,J,{"bg-gold-500":e(ce)==="list","text-charcoal-950":e(ce)==="list","text-charcoal-300":e(ce)!=="list","hover:text-charcoal-50":e(ce)!=="list"}),Bt(Y,e(ce)==="list"?"background-color: #eab308; color: #18181b;":"color: #c0c2c8;"),Ie=we(te,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,Ie,{"bg-gold-500":e(ce)==="timeline","text-charcoal-950":e(ce)==="timeline","text-charcoal-300":e(ce)!=="timeline","hover:text-charcoal-50":e(ce)!=="timeline"}),Bt(te,e(ce)==="timeline"?"background-color: #eab308; color: #18181b;":"color: #c0c2c8;")}),g(L,Z)};E(ne,L=>{e($)||L(se)})}var oe=l(ne,2);{var ue=L=>{var Z=rd();Z.__click=()=>S(me,!e(me));let Y;var J=i(Z);o(Z),B(()=>{Y=we(Z,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0",null,Y,{"text-charcoal-950":e(me)}),Bt(Z,e(me)?"background-color: #eab308; color: #18181b;":"background-color: #454654; color: #c0c2c8;"),_(J,`Plan (${e(h)??""})`)}),g(L,Z)};E(oe,L=>{e(M)&&e(h)>0&&L(ue)})}var V=l(oe,2);V.__click=_e;var Me=l(V,2);Me.__click=Fe,g(O,U)};E(Ue,O=>{e(C),c(()=>e(C).length>0)&&O(Re)})}var tt=l(Ue,2);tt.__click=()=>S(W,!e(W));let P;var q=i(tt,!0);o(tt),o(K),o(ot),o(at),o(Ee);var j=l(Ee,2);{var z=O=>{var U=nd(),ne=i(U),se=i(ne);Fs(se,{get eventId(){return e(m)},get date(){return e(T)},get timeWindow(){return e(N)},onLoad:De,get loading(){return e(F)}}),o(ne),o(U),g(O,U)};E(j,O=>{e(W)&&O(z)})}var be=l(j,2),ge=i(be);{var pe=O=>{var U=od();g(O,U)};E(ge,O=>{e(F)&&O(pe)})}var ee=l(ge,2);{var he=O=>{var U=sd(),ne=l(i(U),2),se=i(ne,!0);o(ne),o(U),B(()=>_(se,e(H))),g(O,U)};E(ee,O=>{e(H)&&O(he)})}var $e=l(ee,2);{var He=O=>{var U=id();g(O,U)};E($e,O=>{e(F),e(C),e(H),c(()=>!e(F)&&e(C).length===0&&!e(H))&&O(He)})}var Ye=l($e,2);{var fe=O=>{var U=Dt(),ne=ft(U);{var se=ue=>{Jl(ue,{get matches(){return e(C)},get eventId(){return e(m)},get clubId(){return e(le)}})},oe=ue=>{var V=Dt(),Me=ft(V);{var L=Y=>{qi(Y,{get matches(){return e(C)},get eventId(){return e(m)},get clubId(){return e(le)}})},Z=Y=>{Ic(Y,{get matches(){return e(C)},get eventId(){return e(m)}})};E(Me,Y=>{e(ce)==="list"?Y(L):Y(Z,!1)},!0)}g(ue,V)};E(ne,ue=>{e($)?ue(se):ue(oe,!1)})}g(O,U)};E(Ye,O=>{e(C),c(()=>e(C).length>0)&&O(fe)})}var Se=l(Ye,2);{var Te=O=>{gl(O,{get matches(){return e(C)},onClose:()=>S(me,!1)})};E(Se,O=>{e(me)&&O(Te)})}o(be),o(Be),B(()=>{je!==(je=e(f))&&(ye.value=(ye.__value=e(f))??"",fr(ye,e(f))),P=we(tt,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0",null,P,{"text-charcoal-950":e(W)}),Bt(tt,e(W)?"background-color: #eab308; color: #18181b;":"background-color: #454654; color: #c0c2c8;"),_(q,e(W)?"Hide":"Config")}),g(r,Be),Rt(),b()}Kt(["change","click"]);export{gd as component,bd as universal};
