import{f as $,a as h,c as kt,d as Ma,t as tn}from"../chunks/DrdcVeu4.js";import"../chunks/DzJyxCZ8.js";import{d as jr,w as Wt,o as Xr,a as Nn,g as Vt}from"../chunks/BhAud1kW.js";import{D as aa,y as Bt,q as On,B as rn,A as An,L as Fn,g as e,a1 as ee,N as Rn,O as jn,P as Pa,Q as na,z as kr,ad as Ln,aA as Wn,I as Sa,K as Un,E as sr,ay as an,aG as nn,Y as A,ab as Na,ak as Oa,F as on,H as Bn,aH as Qr,aI as oa,G as sn,aJ as Kr,aK as Yn,au as Hn,aL as Jn,ax as Vn,aM as Gn,x as qn,U as cn,aN as dn,aO as zn,W as Xn,aP as Qn,aQ as Kn,aR as ln,R as Zn,aS as vn,aT as eo,aU as to,aV as ro,aW as ao,aX as no,aE as oo,b as c,S as so,p as At,aY as le,Z as S,e as C,aZ as Ut,k as s,s as d,l as o,t as W,j as Ft,i as vt,al as vr,a_ as Er,a$ as io,b0 as Pr,b1 as co}from"../chunks/DrfFkH7i.js";import{s as w,e as ur,d as Yt}from"../chunks/ClsaVdYO.js";import{p as qe,i as O,s as Zt,a as Ca,b as lo}from"../chunks/BVc7N6hh.js";import{i as Rt}from"../chunks/BoP2PCHn.js";const vo=!0;function ot(r,a){return a}function uo(r,a,t){for(var n=r.items,i=[],l=a.length,v=0;v<l;v++)Jn(a[v].e,i,!0);var f=l>0&&i.length===0&&t!==null;if(f){var b=t.parentNode;Vn(b),b.append(t),n.clear(),rr(r,a[0].prev,a[l-1].next)}Gn(i,()=>{for(var _=0;_<l;_++){var x=a[_];f||(n.delete(x.k),rr(r,x.prev,x.next)),sn(x.e,!f)}})}function st(r,a,t,n,i,l=null){var v=r,f={flags:a,items:new Map,first:null},b=(a&dn)!==0;if(b){var _=r;v=Bt?aa(On(_)):_.appendChild(rn())}Bt&&An();var x=null,g=!1,T=new Map,M=ee(()=>{var N=t();return nn(N)?N:N==null?[]:an(N)}),u,m;function p(){fo(m,u,f,T,v,i,a,n,t),l!==null&&(u.length===0?x?on(x):x=Sa(()=>l(v)):x!==null&&Bn(x,()=>{x=null}))}Fn(()=>{m??(m=qn),u=e(M);var N=u.length;if(g&&N===0)return;g=N===0;let k=!1;if(Bt){var E=Rn(v)===jn;E!==(N===0)&&(v=Pa(),aa(v),na(!1),k=!0)}if(Bt){for(var B=null,ie,U=0;U<N;U++){if(kr.nodeType===Ln&&kr.data===Wn){v=kr,k=!0,na(!1);break}var ve=u[U],ue=n(ve,U);ie=wa(kr,f,B,null,ve,ue,U,i,a,t),f.items.set(ue,ie),B=ie}N>0&&aa(Pa())}if(Bt)N===0&&l&&(x=Sa(()=>l(v)));else if(Un()){var Q=new Set,De=sr;for(U=0;U<N;U+=1){ve=u[U],ue=n(ve,U);var Te=f.items.get(ue)??T.get(ue);Te?(a&(Kr|Qr))!==0&&un(Te,ve,U,a):(ie=wa(null,f,null,null,ve,ue,U,i,a,t,!0),T.set(ue,ie)),Q.add(ue)}for(const[Re,Ue]of f.items)Q.has(Re)||De.skipped_effects.add(Ue.e);De.oncommit(p)}else p();k&&na(!0),e(M)}),Bt&&(v=kr)}function fo(r,a,t,n,i,l,v,f,b){var Ce,R,P,y;var _=(v&zn)!==0,x=(v&(Kr|Qr))!==0,g=a.length,T=t.items,M=t.first,u=M,m,p=null,N,k=[],E=[],B,ie,U,ve;if(_)for(ve=0;ve<g;ve+=1)B=a[ve],ie=f(B,ve),U=T.get(ie),U!==void 0&&((Ce=U.a)==null||Ce.measure(),(N??(N=new Set)).add(U));for(ve=0;ve<g;ve+=1){if(B=a[ve],ie=f(B,ve),U=T.get(ie),U===void 0){var ue=n.get(ie);if(ue!==void 0){n.delete(ie),T.set(ie,ue);var Q=p?p.next:u;rr(t,p,ue),rr(t,ue,Q),sa(ue,Q,i),p=ue}else{var De=u?u.e.nodes_start:i;p=wa(De,t,p,p===null?t.first:p.next,B,ie,ve,l,v,b)}T.set(ie,p),k=[],E=[],u=p.next;continue}if(x&&un(U,B,ve,v),(U.e.f&oa)!==0&&(on(U.e),_&&((R=U.a)==null||R.unfix(),(N??(N=new Set)).delete(U))),U!==u){if(m!==void 0&&m.has(U)){if(k.length<E.length){var Te=E[0],Re;p=Te.prev;var Ue=k[0],Ne=k[k.length-1];for(Re=0;Re<k.length;Re+=1)sa(k[Re],Te,i);for(Re=0;Re<E.length;Re+=1)m.delete(E[Re]);rr(t,Ue.prev,Ne.next),rr(t,p,Ue),rr(t,Ne,Te),u=Te,p=Ne,ve-=1,k=[],E=[]}else m.delete(U),sa(U,u,i),rr(t,U.prev,U.next),rr(t,U,p===null?t.first:p.next),rr(t,p,U),p=U;continue}for(k=[],E=[];u!==null&&u.k!==ie;)(u.e.f&oa)===0&&(m??(m=new Set)).add(u),E.push(u),u=u.next;if(u===null)continue;U=u}k.push(U),p=U,u=U.next}if(u!==null||m!==void 0){for(var Fe=m===void 0?[]:an(m);u!==null;)(u.e.f&oa)===0&&Fe.push(u),u=u.next;var je=Fe.length;if(je>0){var K=(v&dn)!==0&&g===0?i:null;if(_){for(ve=0;ve<je;ve+=1)(P=Fe[ve].a)==null||P.measure();for(ve=0;ve<je;ve+=1)(y=Fe[ve].a)==null||y.fix()}uo(t,Fe,K)}}_&&cn(()=>{var D;if(N!==void 0)for(U of N)(D=U.a)==null||D.apply()}),r.first=t.first&&t.first.e,r.last=p&&p.e;for(var Ie of n.values())sn(Ie.e);n.clear()}function un(r,a,t,n){(n&Kr)!==0&&Oa(r.v,a),(n&Qr)!==0?Oa(r.i,t):r.i=t}function wa(r,a,t,n,i,l,v,f,b,_,x){var g=(b&Kr)!==0,T=(b&Yn)===0,M=g?T?A(i,!1,!1):Na(i):i,u=(b&Qr)===0?v:Na(v),m={i:u,v:M,k:l,a:null,e:null,prev:t,next:n};try{if(r===null){var p=document.createDocumentFragment();p.append(r=rn())}return m.e=Sa(()=>f(r,M,u,_),Bt),m.e.prev=t&&t.e,m.e.next=n&&n.e,t===null?x||(a.first=m):(t.next=m,t.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{}}function sa(r,a,t){for(var n=r.next?r.next.e.nodes_start:t,i=a?a.e.nodes_start:t,l=r.e.nodes_start;l!==null&&l!==n;){var v=Hn(l);i.before(l),l=v}}function rr(r,a,t){a===null?r.first=t:(a.next=t,a.e.next=t&&t.e),t!==null&&(t.prev=a,t.e.prev=a&&a.e)}const Aa=[...` 	
\r\fÂ \v\uFEFF`];function mo(r,a,t){var n=r==null?"":""+r;if(a&&(n=n?n+" "+a:a),t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var l=i.length,v=0;(v=n.indexOf(i,v))>=0;){var f=v+l;(v===0||Aa.includes(n[v-1]))&&(f===n.length||Aa.includes(n[f]))?n=(v===0?"":n.substring(0,v))+n.substring(f+1):v=f}}return n===""?null:n}function xo(r,a){return r==null?null:String(r)}function Pe(r,a,t,n,i,l){var v=r.__className;if(Bt||v!==t||v===void 0){var f=mo(t,n,l);(!Bt||f!==r.getAttribute("class"))&&(f==null?r.removeAttribute("class"):a?r.className=f:r.setAttribute("class",f)),r.__className=t}else if(l&&i!==l)for(var b in l){var _=!!l[b];(i==null||_!==!!i[b])&&r.classList.toggle(b,_)}return l}function Ot(r,a,t,n){var i=r.__style;if(Bt||i!==a){var l=xo(a);(!Bt||l!==r.getAttribute("style"))&&(l==null?r.removeAttribute("style"):r.style.cssText=l),r.__style=a}return n}function fr(r,a,t=!1){if(r.multiple){if(a==null)return;if(!nn(a))return Qn();for(var n of r.options)n.selected=a.includes(Nr(n));return}for(n of r.options){var i=Nr(n);if(Kn(i,a)){n.selected=!0;return}}(!t||a!==void 0)&&(r.selectedIndex=-1)}function pr(r){var a=new MutationObserver(()=>{fr(r,r.__value)});a.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Xn(()=>{a.disconnect()})}function bo(r,a,t=a){var n=new WeakSet,i=!0;ln(r,"change",l=>{var v=l?"[selected]":":checked",f;if(r.multiple)f=[].map.call(r.querySelectorAll(v),Nr);else{var b=r.querySelector(v)??r.querySelector("option:not([disabled])");f=b&&Nr(b)}t(f),sr!==null&&n.add(sr)}),Zn(()=>{var l=a();if(r===document.activeElement){var v=vn??sr;if(n.has(v))return}if(fr(r,l,i),i&&l===void 0){var f=r.querySelector(":checked");f!==null&&(l=Nr(f),t(l))}r.__value=l,i=!1}),pr(r)}function Nr(r){return"__value"in r?r.__value:r.value}const go=Symbol("is custom element"),po=Symbol("is html");function Or(r){if(Bt){var a=!1,t=()=>{if(!a){if(a=!0,r.hasAttribute("value")){var n=r.value;$t(r,"value",null),r.value=n}if(r.hasAttribute("checked")){var i=r.checked;$t(r,"checked",null),r.checked=i}}};r.__on_r=t,cn(t),eo()}}function ho(r,a){var t=fn(r);t.value===(t.value=a??void 0)||r.value===a&&(a!==0||r.nodeName!=="PROGRESS")||(r.value=a??"")}function $t(r,a,t,n){var i=fn(r);Bt&&(i[a]=r.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&r.nodeName==="LINK")||i[a]!==(i[a]=t)&&(a==="loading"&&(r[to]=t),t==null?r.removeAttribute(a):typeof t!="string"&&_o(r).includes(a)?r[a]=t:r.setAttribute(a,t))}function fn(r){return r.__attributes??(r.__attributes={[go]:r.nodeName.includes("-"),[po]:r.namespaceURI===ro})}var Fa=new Map;function _o(r){var a=r.getAttribute("is")||r.nodeName,t=Fa.get(a);if(t)return t;Fa.set(a,t=[]);for(var n,i=r,l=Element.prototype;l!==i;){n=no(i);for(var v in n)n[v].set&&t.push(v);i=ao(i)}return t}function ir(r,a,t=a){var n=new WeakSet;ln(r,"input",async i=>{var l=i?r.defaultValue:r.value;if(l=ia(r)?ca(l):l,t(l),sr!==null&&n.add(sr),await oo(),l!==(l=a())){var v=r.selectionStart,f=r.selectionEnd,b=r.value.length;if(r.value=l??"",f!==null){var _=r.value.length;v===f&&f===b&&_>b?(r.selectionStart=_,r.selectionEnd=_):(r.selectionStart=v,r.selectionEnd=Math.min(f,_))}}}),(Bt&&r.defaultValue!==r.value||c(a)==null&&r.value)&&(t(ia(r)?ca(r.value):r.value),sr!==null&&n.add(sr)),so(()=>{var i=a();if(r===document.activeElement){var l=vn??sr;if(n.has(l))return}ia(r)&&i===ca(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}function ia(r){var a=r.type;return a==="number"||a==="range"}function ca(r){return r===""?null:+r}const yo=vo,So=!1,wo=(async()=>({})),ev=Object.freeze(Object.defineProperty({__proto__:null,load:wo,ssr:So},Symbol.toStringTag,{value:"Module"})),Lr="https://results.advancedeventsystems.com/api",To="https://results.advancedeventsystems.com/odata",Mo=async(r,a,t)=>{const n=`${Lr}/event/${r}/courts/${a}/${t}`,i=await fetch(n);if(!i.ok)throw new Error(`Failed to fetch court schedule: ${i.statusText}`);return i.json()},Co=async r=>{const a=`${Lr}/event/${r}`,t=await fetch(a);if(!t.ok)throw new Error(`Failed to fetch event info: ${t.statusText}`);return t.json()},$o=async(r,a)=>{const t=`${To}/${r}/nextassignments(dId=null,cId=${a},tIds=[])?$skip=0&$orderby=TeamName,TeamCode`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch team assignments: ${n.statusText}`);return n.json()},da=async(r,a,t,n)=>{const i=`${Lr}/event/${r}/division/${a}/team/${t}/schedule/${n}`,l=await fetch(i);if(!l.ok)throw new Error(`Failed to fetch team schedule: ${l.statusText}`);return l.json()},ko=async(r,a)=>{const t=`${Lr}/event/${r}/division/${a}/plays`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch division plays: ${n.statusText}`);return n.json()},Do=async(r,a)=>{const t=`${Lr}/event/${r}/poolsheet/${a}`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch pool sheet: ${n.statusText}`);return n.json()},Jr="630 Volleyball",Vr="630",Io=r=>[r.FirstTeamText,r.SecondTeamText,r.WorkTeamText].some(t=>t&&(t.includes(Jr)||t.includes(Vr))),Eo=r=>r.FirstTeamText&&(r.FirstTeamText.includes(Jr)||r.FirstTeamText.includes(Vr))?"first":r.SecondTeamText&&(r.SecondTeamText.includes(Jr)||r.SecondTeamText.includes(Vr))?"second":r.WorkTeamText&&(r.WorkTeamText.includes(Jr)||r.WorkTeamText.includes(Vr))?"work":null,Po=r=>{const a=[];return r.forEach(t=>{t.CourtMatches.forEach(n=>{if(Io(n)){const i=Eo(n);i&&i!=="work"&&a.push({...n,CourtName:t.Name,CourtId:t.CourtId,InvolvedTeam:i})}})}),a.sort((t,n)=>t.ScheduledStartDateTime-n.ScheduledStartDateTime)},Ar=r=>{const a=new Map;for(let t=0;t<r.length;t++){const n=r[t],i=[];for(let l=0;l<r.length;l++){if(t===l)continue;const v=r[l],f=n.ScheduledStartDateTime<v.ScheduledEndDateTime&&n.ScheduledEndDateTime>v.ScheduledStartDateTime,b=n.CourtId!==v.CourtId;f&&b&&i.push(v.MatchId)}i.length>0&&a.set(n.MatchId,i)}return a},mn=6048e5,No=864e5,Ra=Symbol.for("constructDateFrom");function mr(r,a){return typeof r=="function"?r(a):r&&typeof r=="object"&&Ra in r?r[Ra](a):r instanceof Date?new r.constructor(a):new Date(a)}function er(r,a){return mr(a||r,r)}let Oo={};function Zr(){return Oo}function Fr(r,a){var f,b,_,x;const t=Zr(),n=(a==null?void 0:a.weekStartsOn)??((b=(f=a==null?void 0:a.locale)==null?void 0:f.options)==null?void 0:b.weekStartsOn)??t.weekStartsOn??((x=(_=t.locale)==null?void 0:_.options)==null?void 0:x.weekStartsOn)??0,i=er(r,a==null?void 0:a.in),l=i.getDay(),v=(l<n?7:0)+l-n;return i.setDate(i.getDate()-v),i.setHours(0,0,0,0),i}function qr(r,a){return Fr(r,{...a,weekStartsOn:1})}function xn(r,a){const t=er(r,a==null?void 0:a.in),n=t.getFullYear(),i=mr(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const l=qr(i),v=mr(t,0);v.setFullYear(n,0,4),v.setHours(0,0,0,0);const f=qr(v);return t.getTime()>=l.getTime()?n+1:t.getTime()>=f.getTime()?n:n-1}function ja(r){const a=er(r),t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),+r-+t}function Ao(r,...a){const t=mr.bind(null,a.find(n=>typeof n=="object"));return a.map(t)}function La(r,a){const t=er(r,a==null?void 0:a.in);return t.setHours(0,0,0,0),t}function Fo(r,a,t){const[n,i]=Ao(t==null?void 0:t.in,r,a),l=La(n),v=La(i),f=+l-ja(l),b=+v-ja(v);return Math.round((f-b)/No)}function Ro(r,a){const t=xn(r,a),n=mr(r,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),qr(n)}function jo(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Lo(r){return!(!jo(r)&&typeof r!="number"||isNaN(+er(r)))}function Wo(r,a){const t=er(r,a==null?void 0:a.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Uo={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Bo=(r,a,t)=>{let n;const i=Uo[r];return typeof i=="string"?n=i:a===1?n=i.one:n=i.other.replace("{{count}}",a.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function la(r){return(a={})=>{const t=a.width?String(a.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const Yo={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ho={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Jo={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Vo={date:la({formats:Yo,defaultWidth:"full"}),time:la({formats:Ho,defaultWidth:"full"}),dateTime:la({formats:Jo,defaultWidth:"full"})},Go={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qo=(r,a,t,n)=>Go[r];function Dr(r){return(a,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let i;if(n==="formatting"&&r.formattingValues){const v=r.defaultFormattingWidth||r.defaultWidth,f=t!=null&&t.width?String(t.width):v;i=r.formattingValues[f]||r.formattingValues[v]}else{const v=r.defaultWidth,f=t!=null&&t.width?String(t.width):r.defaultWidth;i=r.values[f]||r.values[v]}const l=r.argumentCallback?r.argumentCallback(a):a;return i[l]}}const zo={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xo={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qo={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ko={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Zo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},es={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ts=(r,a)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},rs={ordinalNumber:ts,era:Dr({values:zo,defaultWidth:"wide"}),quarter:Dr({values:Xo,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Dr({values:Qo,defaultWidth:"wide"}),day:Dr({values:Ko,defaultWidth:"wide"}),dayPeriod:Dr({values:Zo,defaultWidth:"wide",formattingValues:es,defaultFormattingWidth:"wide"})};function Ir(r){return(a,t={})=>{const n=t.width,i=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],l=a.match(i);if(!l)return null;const v=l[0],f=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],b=Array.isArray(f)?ns(f,g=>g.test(v)):as(f,g=>g.test(v));let _;_=r.valueCallback?r.valueCallback(b):b,_=t.valueCallback?t.valueCallback(_):_;const x=a.slice(v.length);return{value:_,rest:x}}}function as(r,a){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&a(r[t]))return t}function ns(r,a){for(let t=0;t<r.length;t++)if(a(r[t]))return t}function os(r){return(a,t={})=>{const n=a.match(r.matchPattern);if(!n)return null;const i=n[0],l=a.match(r.parsePattern);if(!l)return null;let v=r.valueCallback?r.valueCallback(l[0]):l[0];v=t.valueCallback?t.valueCallback(v):v;const f=a.slice(i.length);return{value:v,rest:f}}}const ss=/^(\d+)(th|st|nd|rd)?/i,is=/\d+/i,cs={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ds={any:[/^b/i,/^(a|c)/i]},ls={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vs={any:[/1/i,/2/i,/3/i,/4/i]},us={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fs={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ms={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xs={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bs={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gs={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ps={ordinalNumber:os({matchPattern:ss,parsePattern:is,valueCallback:r=>parseInt(r,10)}),era:Ir({matchPatterns:cs,defaultMatchWidth:"wide",parsePatterns:ds,defaultParseWidth:"any"}),quarter:Ir({matchPatterns:ls,defaultMatchWidth:"wide",parsePatterns:vs,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ir({matchPatterns:us,defaultMatchWidth:"wide",parsePatterns:fs,defaultParseWidth:"any"}),day:Ir({matchPatterns:ms,defaultMatchWidth:"wide",parsePatterns:xs,defaultParseWidth:"any"}),dayPeriod:Ir({matchPatterns:bs,defaultMatchWidth:"any",parsePatterns:gs,defaultParseWidth:"any"})},hs={code:"en-US",formatDistance:Bo,formatLong:Vo,formatRelative:qo,localize:rs,match:ps,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _s(r,a){const t=er(r,a==null?void 0:a.in);return Fo(t,Wo(t))+1}function ys(r,a){const t=er(r,a==null?void 0:a.in),n=+qr(t)-+Ro(t);return Math.round(n/mn)+1}function bn(r,a){var x,g,T,M;const t=er(r,a==null?void 0:a.in),n=t.getFullYear(),i=Zr(),l=(a==null?void 0:a.firstWeekContainsDate)??((g=(x=a==null?void 0:a.locale)==null?void 0:x.options)==null?void 0:g.firstWeekContainsDate)??i.firstWeekContainsDate??((M=(T=i.locale)==null?void 0:T.options)==null?void 0:M.firstWeekContainsDate)??1,v=mr((a==null?void 0:a.in)||r,0);v.setFullYear(n+1,0,l),v.setHours(0,0,0,0);const f=Fr(v,a),b=mr((a==null?void 0:a.in)||r,0);b.setFullYear(n,0,l),b.setHours(0,0,0,0);const _=Fr(b,a);return+t>=+f?n+1:+t>=+_?n:n-1}function Ss(r,a){var f,b,_,x;const t=Zr(),n=(a==null?void 0:a.firstWeekContainsDate)??((b=(f=a==null?void 0:a.locale)==null?void 0:f.options)==null?void 0:b.firstWeekContainsDate)??t.firstWeekContainsDate??((x=(_=t.locale)==null?void 0:_.options)==null?void 0:x.firstWeekContainsDate)??1,i=bn(r,a),l=mr((a==null?void 0:a.in)||r,0);return l.setFullYear(i,0,n),l.setHours(0,0,0,0),Fr(l,a)}function ws(r,a){const t=er(r,a==null?void 0:a.in),n=+Fr(t,a)-+Ss(t,a);return Math.round(n/mn)+1}function bt(r,a){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(a,"0");return t+n}const lr={y(r,a){const t=r.getFullYear(),n=t>0?t:1-t;return bt(a==="yy"?n%100:n,a.length)},M(r,a){const t=r.getMonth();return a==="M"?String(t+1):bt(t+1,2)},d(r,a){return bt(r.getDate(),a.length)},a(r,a){const t=r.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,a){return bt(r.getHours()%12||12,a.length)},H(r,a){return bt(r.getHours(),a.length)},m(r,a){return bt(r.getMinutes(),a.length)},s(r,a){return bt(r.getSeconds(),a.length)},S(r,a){const t=a.length,n=r.getMilliseconds(),i=Math.trunc(n*Math.pow(10,t-3));return bt(i,a.length)}},wr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Wa={G:function(r,a,t){const n=r.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,a,t){if(a==="yo"){const n=r.getFullYear(),i=n>0?n:1-n;return t.ordinalNumber(i,{unit:"year"})}return lr.y(r,a)},Y:function(r,a,t,n){const i=bn(r,n),l=i>0?i:1-i;if(a==="YY"){const v=l%100;return bt(v,2)}return a==="Yo"?t.ordinalNumber(l,{unit:"year"}):bt(l,a.length)},R:function(r,a){const t=xn(r);return bt(t,a.length)},u:function(r,a){const t=r.getFullYear();return bt(t,a.length)},Q:function(r,a,t){const n=Math.ceil((r.getMonth()+1)/3);switch(a){case"Q":return String(n);case"QQ":return bt(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,a,t){const n=Math.ceil((r.getMonth()+1)/3);switch(a){case"q":return String(n);case"qq":return bt(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,a,t){const n=r.getMonth();switch(a){case"M":case"MM":return lr.M(r,a);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,a,t){const n=r.getMonth();switch(a){case"L":return String(n+1);case"LL":return bt(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,a,t,n){const i=ws(r,n);return a==="wo"?t.ordinalNumber(i,{unit:"week"}):bt(i,a.length)},I:function(r,a,t){const n=ys(r);return a==="Io"?t.ordinalNumber(n,{unit:"week"}):bt(n,a.length)},d:function(r,a,t){return a==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):lr.d(r,a)},D:function(r,a,t){const n=_s(r);return a==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):bt(n,a.length)},E:function(r,a,t){const n=r.getDay();switch(a){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,a,t,n){const i=r.getDay(),l=(i-n.weekStartsOn+8)%7||7;switch(a){case"e":return String(l);case"ee":return bt(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(r,a,t,n){const i=r.getDay(),l=(i-n.weekStartsOn+8)%7||7;switch(a){case"c":return String(l);case"cc":return bt(l,a.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(r,a,t){const n=r.getDay(),i=n===0?7:n;switch(a){case"i":return String(i);case"ii":return bt(i,a.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,a,t){const i=r.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,a,t){const n=r.getHours();let i;switch(n===12?i=wr.noon:n===0?i=wr.midnight:i=n/12>=1?"pm":"am",a){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,a,t){const n=r.getHours();let i;switch(n>=17?i=wr.evening:n>=12?i=wr.afternoon:n>=4?i=wr.morning:i=wr.night,a){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,a,t){if(a==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return lr.h(r,a)},H:function(r,a,t){return a==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):lr.H(r,a)},K:function(r,a,t){const n=r.getHours()%12;return a==="Ko"?t.ordinalNumber(n,{unit:"hour"}):bt(n,a.length)},k:function(r,a,t){let n=r.getHours();return n===0&&(n=24),a==="ko"?t.ordinalNumber(n,{unit:"hour"}):bt(n,a.length)},m:function(r,a,t){return a==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):lr.m(r,a)},s:function(r,a,t){return a==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):lr.s(r,a)},S:function(r,a){return lr.S(r,a)},X:function(r,a,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(a){case"X":return Ba(n);case"XXXX":case"XX":return gr(n);case"XXXXX":case"XXX":default:return gr(n,":")}},x:function(r,a,t){const n=r.getTimezoneOffset();switch(a){case"x":return Ba(n);case"xxxx":case"xx":return gr(n);case"xxxxx":case"xxx":default:return gr(n,":")}},O:function(r,a,t){const n=r.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+Ua(n,":");case"OOOO":default:return"GMT"+gr(n,":")}},z:function(r,a,t){const n=r.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+Ua(n,":");case"zzzz":default:return"GMT"+gr(n,":")}},t:function(r,a,t){const n=Math.trunc(+r/1e3);return bt(n,a.length)},T:function(r,a,t){return bt(+r,a.length)}};function Ua(r,a=""){const t=r>0?"-":"+",n=Math.abs(r),i=Math.trunc(n/60),l=n%60;return l===0?t+String(i):t+String(i)+a+bt(l,2)}function Ba(r,a){return r%60===0?(r>0?"-":"+")+bt(Math.abs(r)/60,2):gr(r,a)}function gr(r,a=""){const t=r>0?"-":"+",n=Math.abs(r),i=bt(Math.trunc(n/60),2),l=bt(n%60,2);return t+i+a+l}const Ya=(r,a)=>{switch(r){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},gn=(r,a)=>{switch(r){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},Ts=(r,a)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],i=t[2];if(!i)return Ya(r,a);let l;switch(n){case"P":l=a.dateTime({width:"short"});break;case"PP":l=a.dateTime({width:"medium"});break;case"PPP":l=a.dateTime({width:"long"});break;case"PPPP":default:l=a.dateTime({width:"full"});break}return l.replace("{{date}}",Ya(n,a)).replace("{{time}}",gn(i,a))},Ms={p:gn,P:Ts},Cs=/^D+$/,$s=/^Y+$/,ks=["D","DD","YY","YYYY"];function Ds(r){return Cs.test(r)}function Is(r){return $s.test(r)}function Es(r,a,t){const n=Ps(r,a,t);if(console.warn(n),ks.includes(r))throw new RangeError(n)}function Ps(r,a,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${a}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ns=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Os=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,As=/^'([^]*?)'?$/,Fs=/''/g,Rs=/[a-zA-Z]/;function pn(r,a,t){var x,g,T,M;const n=Zr(),i=n.locale??hs,l=n.firstWeekContainsDate??((g=(x=n.locale)==null?void 0:x.options)==null?void 0:g.firstWeekContainsDate)??1,v=n.weekStartsOn??((M=(T=n.locale)==null?void 0:T.options)==null?void 0:M.weekStartsOn)??0,f=er(r,t==null?void 0:t.in);if(!Lo(f))throw new RangeError("Invalid time value");let b=a.match(Os).map(u=>{const m=u[0];if(m==="p"||m==="P"){const p=Ms[m];return p(u,i.formatLong)}return u}).join("").match(Ns).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const m=u[0];if(m==="'")return{isToken:!1,value:js(u)};if(Wa[m])return{isToken:!0,value:u};if(m.match(Rs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:u}});i.localize.preprocessor&&(b=i.localize.preprocessor(f,b));const _={firstWeekContainsDate:l,weekStartsOn:v,locale:i};return b.map(u=>{if(!u.isToken)return u.value;const m=u.value;(Is(m)||Ds(m))&&Es(m,a,String(r));const p=Wa[m[0]];return p(f,m,i.localize,_)}).join("")}function js(r){const a=r.match(As);return a?a[1].replace(Fs,"'"):r}const ze=r=>pn(new Date(r),"h:mm a"),Mt=r=>pn(new Date(r),"MMM d, yyyy"),va="coveragePlan";function Ls(){const{subscribe:r,set:a,update:t}=Wt(new Set);try{const i=localStorage.getItem(va);if(i){const l=JSON.parse(i);a(new Set(l.selectedMatches))}}catch(i){console.error("Failed to load coverage plan:",i)}const n=i=>{try{const l={selectedMatches:Array.from(i),createdAt:Date.now(),updatedAt:Date.now()};localStorage.setItem(va,JSON.stringify(l))}catch(l){console.error("Failed to save coverage plan:",l)}};return{subscribe:r,toggleMatch:i=>{t(l=>{const v=new Set(l);return v.has(i)?v.delete(i):v.add(i),n(v),v})},selectMatch:i=>{t(l=>{const v=new Set(l);return v.add(i),n(v),v})},deselectMatch:i=>{t(l=>{const v=new Set(l);return v.delete(i),n(v),v})},clearPlan:()=>{a(new Set),localStorage.removeItem(va)}}}const yt=Ls();jr(yt,r=>r);const Ws=jr(yt,r=>r.size),ua="teamCoverageStatus";function Us(){const{subscribe:r,set:a,update:t}=Wt({});try{const i=localStorage.getItem(ua);if(i){const l=JSON.parse(i);a(l)}}catch(i){console.error("Failed to load coverage status:",i)}const n=i=>{if(Object.keys(i).length!==0)try{localStorage.setItem(ua,JSON.stringify(i))}catch(l){console.error("Failed to save coverage status:",l)}};return{subscribe:r,setTeamStatus:(i,l)=>{t(v=>{const f={...v};return l==="not-covered"?delete f[i]:f[i]=l,n(f),f})},getTeamStatus:i=>{let l="not-covered";return r(v=>{l=v[i]||"not-covered"})(),l},clearAllStatus:()=>{a({}),localStorage.removeItem(ua)},updateFromPlan:(i,l,v)=>{v!==0&&t(f=>{let b;if(l===0?b="not-covered":l===v?b="covered":b="partially-covered",(f[i]||"not-covered")===b)return f;const x={...f};return b==="not-covered"?delete x[i]:x[i]=b,n(x),x})},importStatuses:i=>{a(i),n(i)}}}const Qe=Us(),Ha="userRole";function Bs(){const{subscribe:r,set:a}=Wt("media");try{const n=localStorage.getItem(Ha);n&&["media","spectator","coach"].includes(n)&&a(n)}catch(n){console.error("Failed to load user role:",n)}const t=n=>{try{localStorage.setItem(Ha,n)}catch(i){console.error("Failed to save user role:",i)}};return{subscribe:r,setRole:n=>{a(n),t(n)}}}const Rr=Bs(),$a=jr(Rr,r=>r==="media"),ka=jr(Rr,r=>r==="spectator"),Ys=jr(Rr,r=>r==="coach");var Hs=$('<form class="space-y-4"><div class="flex flex-col sm:flex-row gap-3 sm:gap-4"><div class="flex-1"><label for="eventId" class="block text-xs text-[#9fa2ab] mb-1.5">Event ID</label> <input id="eventId" type="text" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;" placeholder="Enter Event ID"/></div> <div class="flex-1 sm:min-w-[160px]"><label for="date" class="block text-xs text-[#9fa2ab] mb-1.5">Date</label> <input id="date" type="date" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;"/></div> <div class="flex-1 sm:min-w-[120px]"><label for="timeWindow" class="block text-xs text-[#9fa2ab] mb-1.5">Window (min)</label> <input id="timeWindow" type="number" min="1" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;"/></div> <div class="flex items-end"><button type="submit" class="px-4 py-2 sm:py-2 text-sm font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0 disabled:opacity-50 disabled:cursor-not-allowed"> </button></div></div></form>');function Js(r,a){At(a,!1);let t=qe(a,"eventId",8),n=qe(a,"date",8),i=qe(a,"timeWindow",8),l=qe(a,"onLoad",8),v=qe(a,"loading",8,!1),f=A(t()),b=A(n()),_=A(i());async function x(U){U.preventDefault(),await l()(e(f),e(b),e(_))}le(()=>(C(t()),e(f),C(n()),e(b),C(i()),e(_)),()=>{t()!==e(f)&&S(f,t()),n()!==e(b)&&S(b,n()),i()!==e(_)&&S(_,i())}),Ut(),Rt();var g=Hs(),T=s(g),M=s(T),u=d(s(M),2);Or(u),o(M);var m=d(M,2),p=d(s(m),2);Or(p),o(m);var N=d(m,2),k=d(s(N),2);Or(k),o(N);var E=d(N,2),B=s(E),ie=s(B,!0);o(B),o(E),o(T),o(g),W(()=>{u.disabled=v(),p.disabled=v(),k.disabled=v(),B.disabled=v(),Ot(B,`background-color: ${v()?"#ca8a04":"#eab308"}; color: #18181b;`),w(ie,v()?"Loading...":"Load")}),ir(u,()=>e(f),U=>S(f,U)),ir(p,()=>e(b),U=>S(b,U)),ir(k,()=>e(_),U=>S(_,U)),ur("submit",g,x),h(r,g),Ft()}const hn=(r,a,t,n={})=>{const{excludeSelected:i=!0,preferNoConflicts:l=!0,preferNearSelected:v=!0,maxResults:f=10}=n;return(i?r.filter(x=>!a.has(x.MatchId)):r).map(x=>{const g=[];let T=0;const M=t.has(x.MatchId);if(!M&&l?(T+=50,g.push("No conflicts")):M&&(T-=20,g.push("Has conflicts")),v&&a.size>0){const m=x.ScheduledStartDateTime,p=x.ScheduledEndDateTime,N=r.filter(E=>a.has(E.MatchId));let k=1/0;N.forEach(E=>{const B=E.ScheduledStartDateTime,ie=E.ScheduledEndDateTime,U=Math.abs(m-ie),ve=Math.abs(B-p),ue=Math.min(U,ve);ue<k&&(k=ue)}),k<7200*1e3?(T+=20,g.push("Near selected matches")):k>14400*1e3&&(T-=10,g.push("Far from selected matches"))}v&&a.size>0&&r.filter(N=>a.has(N.MatchId)).filter(N=>N.CourtName===x.CourtName).length>0&&(T+=15,g.push("Same court as selected matches"));const u=new Date(x.ScheduledStartDateTime).getHours();return u>=8&&u<12&&(T+=5,g.push("Morning match")),{match:x,score:T,reasons:g}}).sort((x,g)=>g.score-x.score).slice(0,f).filter(x=>x.score>0)},Ta=(r,a,t,n,i,l={})=>{const{excludeSelected:v=!0,preferUncovered:f=!0,preferNoConflicts:b=!0,preferNearSelected:_=!0,maxResults:x=10}=l,g=[];return r.forEach(T=>{if(v&&a.has(T.MatchId))return;const M=i(T);if(!M)return;const u=n.get(M)||"not-covered",m=t.has(T.MatchId);let p=0;const N=[];if(f&&u==="not-covered"&&(p+=10,N.push("Uncovered team")),b&&!m&&(p+=5,N.push("No conflicts")),_&&a.size>0){const k=T.ScheduledStartDateTime;let E=!1;r.forEach(B=>{if(a.has(B.MatchId)){const U=Math.abs(k-B.ScheduledStartDateTime)/6e4;U<=30&&U>0&&(E=!0)}}),E&&(p+=3,N.push("Near selected match"))}p>0&&N.length>0&&g.push({match:T,teamId:M,reason:N.join(", "),score:p})}),g.sort((T,M)=>M.score-T.score).slice(0,x)},Vs=()=>{try{const r=window.location.hash;if(!r||!r.startsWith("#scores="))return null;const a=r.substring(8),t=decodeURIComponent(escape(atob(a))),n=JSON.parse(t);return!n.scores||!Array.isArray(n.scores)?null:{eventId:n.eventId||"",scores:n.scores}}catch(r){return console.error("Failed to extract scores from URL:",r),null}},Gs=()=>{const r=window.location.hash;return r!==null&&r.startsWith("#scores=")},Gr={division:null,wave:"all",teams:[],timeRange:{start:null,end:null},conflictsOnly:!1,coverageStatus:"all",priority:"all"},fa="matchFilters";function qs(){const{subscribe:r,set:a,update:t}=Wt(Gr);try{const i=localStorage.getItem(fa);if(i){const l=JSON.parse(i);a({...Gr,...l})}}catch(i){console.error("Failed to load filters:",i)}const n=i=>{try{localStorage.setItem(fa,JSON.stringify(i))}catch(l){console.error("Failed to save filters:",l)}};return{subscribe:r,updateFilter:(i,l)=>{t(v=>{const f={...v,[i]:l};return n(f),f})},resetFilters:()=>{a(Gr),localStorage.removeItem(fa)},setTimeRangePreset:i=>{t(l=>{let v;return i==="morning"?v={...l,timeRange:{start:"00:00",end:"14:29"}}:i==="afternoon"?v={...l,timeRange:{start:"14:30",end:"23:59"}}:v={...l,timeRange:{start:null,end:null}},n(v),v})},getTeamIdentifier:i=>{const v=(i.InvolvedTeam==="first"?i.FirstTeamText:i.SecondTeamText).match(/(\d+-\d+)/);return v?v[1]:""}}}const Wr=qs();function Ye(r){const t=(r.InvolvedTeam==="first"?r.FirstTeamText:r.SecondTeamText).match(/(\d+-\d+)/);return t?t[1]:""}function zr(r){const a=new Set(r.map(t=>t.Division.CodeAlias));return Array.from(a).sort()}function Da(r){const a=new Set;return r.forEach(t=>{const n=Ye(t);n&&a.add(n)}),Array.from(a).sort()}function _n(r){let a=Gr;return Wr.subscribe(t=>{a=t})(),r.filter(t=>{if(a.division&&t.Division.CodeAlias!==a.division)return!1;if(a.wave!=="all"){const n=new Date(t.ScheduledStartDateTime).getTime(),i=new Date(n),l=i.getHours(),v=i.getMinutes(),f=l*60+v,b=870;if(a.wave==="morning"&&f>=b||a.wave==="afternoon"&&f<b)return!1}if(a.teams.length>0){const n=Ye(t);if(!n||!a.teams.includes(n))return!1}if(a.timeRange.start||a.timeRange.end){const n=new Date(t.ScheduledStartDateTime).getTime(),i=new Date(n),l=i.getHours(),v=i.getMinutes(),f=l*60+v;if(a.timeRange.start){const[b,_]=a.timeRange.start.split(":").map(Number),x=b*60+_;if(f<x)return!1}if(a.timeRange.end){const[b,_]=a.timeRange.end.split(":").map(Number),x=b*60+_;if(f>x)return!1}}return!0})}function zt(r,a){Wr.updateFilter(r,a)}function ma(){Wr.resetFilters()}const xa="matchPriorities";function zs(){const{subscribe:r,set:a,update:t}=Wt({});try{const i=localStorage.getItem(xa);if(i){const l=JSON.parse(i);a(l)}}catch(i){console.error("Failed to load priorities:",i)}const n=i=>{try{localStorage.setItem(xa,JSON.stringify(i))}catch(l){console.error("Failed to save priorities:",l)}};return{subscribe:r,setPriority:(i,l)=>{t(v=>{const f={...v};return l===null?delete f[i]:f[i]=l,n(f),f})},getPriority:i=>{let l=null;return r(v=>{l=v[i]||null})(),l},clearAllPriorities:()=>{a({}),localStorage.removeItem(xa)}}}const Xt=zs(),Ja="followedTeams",Va="teamColors";function Xs(){const{subscribe:r,set:a,update:t}=Wt([]),{subscribe:n,set:i,update:l}=Wt(new Map);{try{const b=localStorage.getItem(Ja);b&&a(JSON.parse(b))}catch(b){console.error("Failed to load followed teams:",b)}try{const b=localStorage.getItem(Va);if(b){const _=JSON.parse(b);i(new Map(Object.entries(_)))}}catch(b){console.error("Failed to load team colors:",b)}}const v=b=>{try{localStorage.setItem(Ja,JSON.stringify(b))}catch(_){console.error("Failed to save followed teams:",_)}},f=b=>{try{const _={};b.forEach((x,g)=>{_[g]=x}),localStorage.setItem(Va,JSON.stringify(_))}catch(_){console.error("Failed to save team colors:",_)}};return{subscribe:r,followTeam:(b,_)=>{t(x=>{if(x.some(T=>T.teamId===b))return x;const g=[...x,{teamId:b,teamName:_,followedAt:Date.now()}];return v(g),g})},unfollowTeam:b=>{t(_=>{const x=_.filter(g=>g.teamId!==b);return v(x),x}),l(_=>{const x=new Map(_);return x.delete(b),f(x),x})},isFollowing:b=>{let _=!1;return r(x=>{_=x.some(g=>g.teamId===b)})(),_},setTeamColor:(b,_)=>{l(x=>{const g=new Map(x);return g.set(b,_),f(g),g})},getTeamColor:b=>{let _=null;return n(x=>{_=x.get(b)||null})(),_},reorderTeams:(b,_)=>{t(x=>{const g=x.findIndex(u=>u.teamId===b);if(g===-1)return x;const T=[...x],M=T[g];return _==="top"?(T.splice(g,1),T.unshift(M)):_==="up"&&g>0?[T[g-1],T[g]]=[T[g],T[g-1]]:_==="down"&&g<T.length-1&&([T[g],T[g+1]]=[T[g+1],T[g]]),v(T),T})}}}const Br=Xs(),Ga="notificationPreferences",Yr={upcomingMatchReminder:!0,reminderMinutes:5,scoreUpdateNotification:!0,browserNotifications:!1};function Qs(){const{subscribe:r,set:a,update:t}=Wt(Yr),{subscribe:n,set:i}=Wt("default");{try{const f=localStorage.getItem(Ga);if(f){const b=JSON.parse(f);a({...Yr,...b})}}catch(f){console.error("Failed to load notification preferences:",f)}"Notification"in window&&i(Notification.permission)}const l=f=>{try{localStorage.setItem(Ga,JSON.stringify(f))}catch(b){console.error("Failed to save notification preferences:",b)}},v=(f,b,_=!1)=>{let x="default";n(g=>{x=g})(),_&&x==="granted"&&"Notification"in window?new Notification(f,{body:b,icon:"/favicon.ico",tag:"courtsync-notification"}):console.log(`[Notification] ${f}: ${b}`)};return{preferences:{subscribe:r},notificationPermission:{subscribe:n},requestPermission:async()=>{if("Notification"in window){let f="default";if(n(b=>{f=b})(),f==="default"){const b=await Notification.requestPermission();return i(b),b==="granted"}return f==="granted"}return!1},checkUpcomingMatches:(f,b)=>{let _=Yr;if(r(T=>{_=T})(),!_.upcomingMatchReminder)return;const x=Date.now(),g=_.reminderMinutes*60*1e3;f.forEach(T=>{const M=T.ScheduledStartDateTime,u=M-x,m=T.FirstTeamText||T.SecondTeamText;if(b.includes(m)&&u>0&&u<=g){const p=`reminder-${T.MatchId}`,N=localStorage.getItem(p);if(!N||Date.now()-parseInt(N)>g){const k=Math.floor(u/6e4);v(`Match starting in ${k} minute${k!==1?"s":""}`,`${T.FirstTeamText} vs ${T.SecondTeamText}
${new Date(M).toLocaleTimeString()} - ${T.CourtName}`,_.browserNotifications),localStorage.setItem(p,Date.now().toString())}}})},notifyScoreUpdate:(f,b)=>{let _=Yr;if(r(m=>{_=m})(),!_.scoreUpdateNotification)return;const x=b.sets.find(m=>m.completedAt===0)||b.sets[b.sets.length-1],g=b.sets.filter(m=>m.completedAt>0),T=g.filter(m=>m.team1Score>m.team2Score).length,M=g.filter(m=>m.team2Score>m.team1Score).length;let u=`Score: ${x.team1Score}-${x.team2Score}`;g.length>0&&(u=`Sets: ${T}-${M} | ${u}`),v(`${f.FirstTeamText} vs ${f.SecondTeamText}`,u,_.browserNotifications)},updatePreferences:f=>{t(b=>{const _={...b,...f};return l(_),_})}}}const ba=Qs(),Ks="courtsync-score-updates";let Hr=null;const Zs=()=>{if(!Hr)try{Hr=new BroadcastChannel(Ks)}catch(r){console.error("BroadcastChannel not supported:",r),Hr={postMessage:()=>{},close:()=>{},onmessage:null}}return Hr},ei=(r,a,t)=>{const n=Zs(),i={type:t?"score-update":"score-delete",eventId:r,matchId:a,score:t||void 0,timestamp:Date.now()};try{n.postMessage(i)}catch(l){console.error("Failed to broadcast score update:",l)}},qa="scoreHistory",ti=(r,a,t)=>{try{const n=localStorage.getItem(qa),i=n?JSON.parse(n):{};i[r.toString()]||(i[r.toString()]=[]);const l={matchId:r,timestamp:Date.now(),sets:[...a.sets],status:a.status,updatedBy:t};i[r.toString()].push(l),i[r.toString()].length>100&&(i[r.toString()]=i[r.toString()].slice(-100)),localStorage.setItem(qa,JSON.stringify(i))}catch(n){console.error("Failed to save score history:",n)}},za="claimHistory",Xa=1e3;function ga(r){try{const a=localStorage.getItem(za),t=a?JSON.parse(a):[];t.unshift(r),t.length>Xa&&t.splice(Xa),localStorage.setItem(za,JSON.stringify(t))}catch(a){console.error("Failed to save claim history:",a)}}const Qa="matchClaims",pa="matchScores",ri=1800*1e3;function yn({eventId:r,userId:a="anonymous"}){const{subscribe:t,set:n,update:i}=Wt(new Map),{subscribe:l,set:v,update:f}=Wt(new Map);{try{const M=localStorage.getItem(Qa);if(M){const u=JSON.parse(M),m=new Map;Object.values(u).forEach(p=>{p.eventId===r&&p.expiresAt>Date.now()&&m.set(p.matchId,p)}),n(m)}}catch(M){console.error("Failed to load claims:",M)}try{const M=localStorage.getItem(pa);if(M){const u=JSON.parse(M),m=new Map;Object.values(u).forEach(p=>{p.eventId===r&&m.set(p.matchId,p)}),v(m)}}catch(M){console.error("Failed to load scores:",M)}}const b=M=>{try{const u={};M.forEach(m=>{u[m.matchId.toString()]=m}),localStorage.setItem(Qa,JSON.stringify(u))}catch(u){console.error("Failed to save claims:",u)}},_=M=>{try{const u={};M.forEach(m=>{u[m.matchId.toString()]=m}),localStorage.setItem(pa,JSON.stringify(u))}catch(u){console.error("Failed to save scores:",u)}};let x=null;return{claims:{subscribe:t},scores:{subscribe:l},claimMatch:(M,u)=>{const m=Date.now(),p=u+ri,N={matchId:M,claimedBy:a,claimedAt:m,expiresAt:p,eventId:r};i(k=>{const E=new Map(k);return E.set(M,N),b(E),E}),ga({matchId:M,eventId:r,action:"claimed",userId:a,timestamp:m})},releaseClaim:M=>{i(u=>{const m=u.get(M),p=new Map(u);return p.delete(M),b(p),m&&yo&&ga({matchId:M,eventId:r,action:"released",userId:m.claimedBy,timestamp:Date.now()}),p})},transferClaim:(M,u)=>{let m=!1;if(t(N=>{const k=N.get(M);m=(k==null?void 0:k.claimedBy)===a&&k.expiresAt>Date.now()})(),!m)return!1;const p=Date.now();return i(N=>{const k=N.get(M);if(!k)return N;const E={...k,claimedBy:u,claimedAt:p},B=new Map(N);return B.set(M,E),b(B),ga({matchId:M,eventId:r,action:"transferred",userId:a,timestamp:p,transferredTo:u}),B}),!0},isClaimed:M=>{let u=!1;return t(m=>{const p=m.get(M);u=p?p.expiresAt>Date.now():!1})(),u},getClaimStatus:M=>{let u="available";return t(m=>{const p=m.get(M);!p||p.expiresAt<Date.now()?u="available":p.claimedBy===a?u="claimed":u="locked"})(),u},getClaimer:M=>{let u=null;return t(m=>{const p=m.get(M);u=p&&p.expiresAt>Date.now()?p.claimedBy:null})(),u},isClaimOwner:M=>{let u=!1;return t(m=>{const p=m.get(M);u=(p==null?void 0:p.claimedBy)===a&&p.expiresAt>Date.now()})(),u},updateScore:(M,u,m)=>{const p={matchId:M,eventId:r,sets:u,status:m,lastUpdated:Date.now(),lastUpdatedBy:a};f(N=>{const k=new Map(N);return k.set(M,p),_(k),k}),ei(r,M,p),ti(M,p,a)},getScore:M=>{let u=null;return l(m=>{u=m.get(M)||null})(),u},clearEventData:()=>{i(M=>{const u=new Map(M);return u.forEach((m,p)=>{m.eventId===r&&u.delete(p)}),b(u),u}),f(M=>{const u=new Map(M);return u.forEach((m,p)=>{m.eventId===r&&u.delete(p)}),_(u),u})},startPolling:()=>{x||(x=setInterval(()=>{try{const M=localStorage.getItem(pa);if(!M)return;const u=JSON.parse(M),m=new Map;let p=!1;l(N=>{Object.values(u).forEach(k=>{if(k.eventId===r){m.set(k.matchId,k);const E=N.get(k.matchId);(!E||k.lastUpdated&&k.lastUpdated>E.lastUpdated)&&(p=!0)}}),p&&f(k=>{const E=new Map(k);return m.forEach((B,ie)=>{const U=k.get(ie);(!U||B.lastUpdated&&B.lastUpdated>U.lastUpdated)&&E.set(ie,B)}),E})})()}catch(M){console.error("Failed to poll scores:",M)}},3e3))},stopPolling:()=>{x&&(clearInterval(x),x=null)}}}const ha="matchNotes";function ai(r){const{subscribe:a,set:t,update:n}=Wt(new Map);try{const l=localStorage.getItem(ha);if(l){const v=JSON.parse(l),f=new Map;Object.values(v).forEach(b=>{b.eventId===r&&f.set(b.matchId,b)}),t(f)}}catch(l){console.error("Failed to load match notes:",l)}const i=l=>{try{const v=localStorage.getItem(ha),f=v?JSON.parse(v):{};l.forEach(b=>{f[`${r}-${b.matchId}`]=b}),Object.keys(f).forEach(b=>{if(b.startsWith(`${r}-`)){const _=parseInt(b.split("-").pop()||"0");l.has(_)||delete f[b]}}),localStorage.setItem(ha,JSON.stringify(f))}catch(v){console.error("Failed to save match notes:",v)}};return{subscribe:a,setNote:(l,v)=>{const f=Date.now();n(b=>{const _=new Map(b),x=_.get(l);return v.trim()?_.set(l,{matchId:l,eventId:r,note:v.trim(),createdAt:(x==null?void 0:x.createdAt)||f,updatedAt:f}):_.delete(l),i(_),_})},getNote:l=>{let v="";return a(f=>{var b;v=((b=f.get(l))==null?void 0:b.note)||""})(),v},deleteNote:l=>{n(v=>{const f=new Map(v);return f.delete(l),i(f),f})},hasNote:l=>{let v=!1;return a(f=>{const b=f.get(l);v=b!==void 0&&b.note.trim().length>0})(),v}}}function Sn(r){return ai(r)}var ni=$('<div class="text-center py-8 text-[#9fa2ab] text-sm">Loading schedule...</div>'),oi=$('<div class="text-center py-4 text-red-400 text-sm"> </div>'),si=$("<button>Statistics</button>"),ii=$('<div class="text-[#9fa2ab]">TeamStatsView - To be migrated</div>'),ci=$('<div class="text-xs text-[#808593] py-4 text-center">No schedule data available</div>'),di=$('<div class="flex-shrink-0 w-20 text-xs text-[#facc15] font-medium"> </div>'),li=$('<span class="text-[#808593] font-medium">WORK</span> <span class="text-[#808593] ml-2"> </span>',1),vi=$('<span class="text-[#808593] mx-1">vs</span> ',1),ui=$('<span class="text-[#eab308] font-semibold">PLAY</span> <span class="text-[#c0c2c8] ml-2"> <!></span>',1),fi=$('<span class="mx-1">vs</span> ',1),mi=$('<span class="text-[#808593] font-medium">WATCH</span> <span class="text-[#808593] ml-2"> <!></span>',1),xi=$('<div class="flex-shrink-0"><span class="px-2 py-0.5 text-[10px] font-semibold rounded"> </span></div>'),bi=$('<div><div></div> <div class="flex-shrink-0 w-16 text-xs font-medium text-[#9fa2ab]"> </div> <div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <!> <div class="flex-1 min-w-0"><div class="text-xs"><!></div></div> <!></div>'),gi=$('<div class="space-y-1"><div class="flex items-center gap-2 mb-2 pb-1 border-b border-[#454654]"><h6 class="text-xs font-semibold text-[#f8f8f9]"> </h6> <span class="text-[10px] text-[#808593]"> </span></div> <!></div>'),pi=$('<div><h5 class="text-xs font-semibold text-[#9fa2ab] uppercase tracking-wider mb-2">Complete Schedule</h5> <div class="space-y-4"><!></div></div>'),hi=$('<div class="text-xs text-[#808593] py-4 text-center">No pool data available for this team</div>'),_i=$("<option> </option>"),yi=$('<div class="mb-4"><label class="text-xs text-[#9fa2ab] mb-1 block">Pool:</label> <select class="w-full px-3 py-2.5 sm:py-2 text-sm font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"></select></div>'),Si=$('<tr><td class="px-2 sm:px-3 py-2 text-[#f8f8f9] font-medium"> </td><td class="px-2 sm:px-3 py-2"><div> </div></td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td></tr>'),wi=$('<div class="border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="px-3 sm:px-4 py-2 bg-[#454654] border-b border-[#525463]"><h6 class="text-xs sm:text-sm font-semibold text-[#f8f8f9]"> </h6></div> <div class="overflow-x-auto"><table class="w-full text-xs min-w-[500px]"><thead><tr class="border-b border-[#454654] bg-[#454654]/50"><th class="px-2 sm:px-3 py-2 text-left text-[#9fa2ab] font-semibold">Rank</th><th class="px-2 sm:px-3 py-2 text-left text-[#9fa2ab] font-semibold">Team</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">W</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">L</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">Sets</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">Points</th></tr></thead><tbody></tbody></table></div></div>'),Ti=$('<div class="flex-shrink-0 w-20 text-xs text-[#facc15] font-medium"> </div>'),Mi=$('<span class="text-[#808593] mx-1">vs</span> ',1),Ci=$('<div><div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <!> <div class="flex-1 min-w-0 text-xs text-[#c0c2c8]"> <!></div></div>'),$i=$('<div class="border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="px-3 sm:px-4 py-2 bg-[#454654] border-b border-[#525463]"><h6 class="text-xs sm:text-sm font-semibold text-[#f8f8f9]">Pool Schedule</h6></div> <div class="p-3 sm:p-4 space-y-2"></div></div>'),ki=$('<div class="space-y-4"><!> <!></div>'),Di=$('<div class="text-xs text-[#808593] py-4 text-center">Loading pool sheet...</div>'),Ii=$("<!> <!>",1),Ei=$('<div><h5 class="text-xs font-semibold text-[#9fa2ab] uppercase tracking-wider mb-2">Pool Standings</h5> <!></div>'),Pi=$('<div class="space-y-4"><div class="flex items-center gap-2 border-b border-[#454654] pb-2"><button>Schedule</button> <button>Pool Sheet</button> <!></div> <!></div>'),Ni=$('<div class="mt-2 border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="p-3 sm:p-4"><div class="flex items-center justify-between mb-3 sm:mb-4"><h4 class="text-xs sm:text-sm font-semibold text-[#f8f8f9] truncate pr-2"> </h4> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!> <!> <!></div></div>');function wn(r,a){At(a,!1);const t=A(),n=A(),i=A(),l=A(),v=A();let f=qe(a,"match",8),b=qe(a,"eventId",8),_=qe(a,"clubId",8),x=qe(a,"onClose",8),g=qe(a,"matches",24,()=>[]),T=A(null),M=A([]),u=A([]),m=A([]),p=A([]),N=A(null),k=A(null),E=A("schedule"),B=A(!0),ie=A(null);function U(){return f().InvolvedTeam==="first"?f().FirstTeamText:f().InvolvedTeam==="second"?f().SecondTeamText:""}const ve=Ye(f()),ue=U();Xr(async()=>{S(B,!0),S(ie,null);try{const D=(await $o(b(),_())).value||[],oe=U();if(!oe){S(ie,"Could not extract team name from match"),S(B,!1);return}const re=D.find(Oe=>{if(Oe.TeamText===oe||Oe.TeamName===oe)return!0;const Ve=oe.match(/(\d+-\d+)/);if(Ve){const I=Ve[1];return Oe.TeamName.includes(I)||Oe.TeamText.includes(I)}return!1});if(!re){S(ie,`Team not found: ${oe}`),S(B,!1);return}const F=re.TeamId,Y=re.TeamDivision.DivisionId;S(T,{TeamId:F,DivisionId:Y,TeamName:re.TeamName,TeamText:re.TeamText});const[V,J,Me]=await Promise.all([da(b(),Y,F,"current").catch(()=>[]),da(b(),Y,F,"work").catch(()=>[]),da(b(),Y,F,"future").catch(()=>[])]),Z=(Oe,Ve=!1)=>Array.isArray(Oe)?Oe.flatMap(I=>{var X,L;return Ve?I.Match?[{...I.Match,Court:I.Match.Court||null,Division:{...I.Play,PlayId:(X=I.Play)==null?void 0:X.PlayId},FirstTeamText:((L=I.Play)==null?void 0:L.CompleteShortName)||"Work Assignment",SecondTeamText:void 0}]:[]:!I.Matches||!Array.isArray(I.Matches)?[]:I.Matches.map(z=>{var xe;return{...z,Court:z.Court||null,Division:{...I.Play,PlayId:(xe=I.Play)==null?void 0:xe.PlayId}}})}):[];S(M,Z(V,!1)),S(u,Z(J,!0)),S(m,Z(Me,!1));const he=await ko(b(),Y).catch(()=>null);he!=null&&he.Plays&&S(p,he.Plays)}catch(y){S(ie,y instanceof Error?y.message:"Failed to load team data")}finally{S(B,!1)}});function Q(y,D=!1){var V,J;const oe=typeof y.ScheduledStartDateTime=="string"?new Date(y.ScheduledStartDateTime).getTime():y.ScheduledStartDateTime,re=((V=y.FirstTeamText)==null?void 0:V.includes("630"))||((J=y.SecondTeamText)==null?void 0:J.includes("630")),F=Mt(oe),Y=ze(oe);return{matchDate:F,startTimeDisplay:Y,isPlaying:re,isWork:D,scheduleMatch:y}}le(()=>e(E),()=>{e(E)==="poolsheet"&&S(k,null)}),le(()=>(e(M),e(u),e(m)),()=>{S(t,[...e(M).map(D=>({...D,type:"current"})),...e(u).map(D=>({...D,type:"work"})),...e(m).map(D=>({...D,type:"future"}))].filter((D,oe,re)=>re.findIndex(F=>F.MatchId===D.MatchId)===oe).sort((D,oe)=>{const re=typeof D.ScheduledStartDateTime=="string"?new Date(D.ScheduledStartDateTime).getTime():D.ScheduledStartDateTime||0,F=typeof oe.ScheduledStartDateTime=="string"?new Date(oe.ScheduledStartDateTime).getTime():oe.ScheduledStartDateTime||0;return re-F}))}),le(()=>e(t),()=>{S(n,(()=>{const y=new Set;return e(t).forEach(D=>{if(D.Division&&D.Division.PlayId){const oe=Math.abs(D.Division.PlayId);y.add(oe)}}),Array.from(y)})())}),le(()=>(e(p),e(n)),()=>{S(i,e(p).filter(y=>{const D=Math.abs(y.PlayId);return e(n).includes(D)}))}),le(()=>(e(i),e(N)),()=>{e(i).length>0&&!e(N)&&S(N,e(i)[0].PlayId)}),le(()=>(e(N),e(E),C(b())),()=>{e(N)&&e(E)==="poolsheet"&&Do(b(),e(N)).then(y=>{S(k,y)}).catch(y=>{console.error("Failed to fetch pool sheet:",y),S(k,null)})}),le(()=>(e(t),Mt),()=>{S(l,(()=>{const y={};return e(t).forEach(D=>{const oe=typeof D.ScheduledStartDateTime=="string"?new Date(D.ScheduledStartDateTime).getTime():D.ScheduledStartDateTime||0,re=Mt(oe);y[re]||(y[re]=[]),y[re].push(D)}),y})())}),le(()=>e(l),()=>{S(v,Object.keys(e(l)).sort((y,D)=>{const oe=new Date(y).getTime(),re=new Date(D).getTime();return oe-re}))}),Ut(),Rt();var De=Ni(),Te=s(De),Re=s(Te),Ue=s(Re),Ne=s(Ue);o(Ue);var Fe=d(Ue,2);Fe.__click=function(...y){var D;(D=x())==null||D.apply(this,y)},o(Re);var je=d(Re,2);{var K=y=>{var D=ni();h(y,D)};O(je,y=>{e(B)&&y(K)})}var Ie=d(je,2);{var Ce=y=>{var D=oi(),oe=s(D,!0);o(D),W(()=>w(oe,e(ie))),h(y,D)};O(Ie,y=>{e(ie)&&y(Ce)})}var R=d(Ie,2);{var P=y=>{var D=Pi(),oe=s(D),re=s(oe);re.__click=()=>S(E,"schedule");var F=d(re,2);F.__click=()=>S(E,"poolsheet");var Y=d(F,2);{var V=he=>{var Oe=si();Oe.__click=()=>S(E,"stats"),W(()=>Pe(Oe,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(E)==="stats"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)),h(he,Oe)};O(Y,he=>{C(g()),c(()=>g().length>0&&ve)&&he(V)})}o(oe);var J=d(oe,2);{var Me=he=>{var Oe=ii();h(he,Oe)},Z=he=>{var Oe=kt(),Ve=vt(Oe);{var I=L=>{var z=pi(),xe=d(s(z),2),se=s(xe);{var _e=ye=>{var $e=ci();h(ye,$e)},ae=ye=>{var $e=kt(),He=vt($e);st(He,1,()=>e(v),ot,(Je,me)=>{const ke=ee(()=>(e(l),e(me),c(()=>e(l)[e(me)])));var Ee=gi(),j=s(Ee),G=s(j),be=s(G,!0);o(G);var pe=d(G,2),ge=s(pe);o(pe),o(j);var we=d(j,2);st(we,1,()=>e(ke),ot,(te,Ae)=>{const H=ee(()=>(e(Ae),c(()=>Q(e(Ae),e(Ae).type==="work"))));var de=bi(),q=s(de),ne=d(q,2),fe=s(ne,!0);o(ne);var Le=d(ne,2),We=s(Le,!0);o(Le);var rt=d(Le,2);{var Xe=Be=>{var lt=di(),Ke=s(lt,!0);o(lt),W(()=>w(Ke,(C(e(H)),c(()=>e(H).scheduleMatch.Court.Name)))),h(Be,lt)};O(rt,Be=>{C(e(H)),c(()=>e(H).scheduleMatch.Court)&&Be(Xe)})}var Se=d(rt,2),nt=s(Se),tt=s(nt);{var ut=Be=>{var lt=li(),Ke=d(vt(lt),2),ht=s(Ke,!0);o(Ke),W(()=>w(ht,(C(e(H)),c(()=>{var It,pt;return((It=e(H).scheduleMatch.Division)==null?void 0:It.CompleteShortName)||((pt=e(H).scheduleMatch.Division)==null?void 0:pt.FullName)||e(H).scheduleMatch.FirstTeamText})))),h(Be,lt)},Ge=Be=>{var lt=kt(),Ke=vt(lt);{var ht=pt=>{var it=ui(),et=d(vt(it),2),_t=s(et),at=d(_t);{var gt=ft=>{var mt=vi(),Dt=d(vt(mt));W(()=>w(Dt,` ${C(e(H)),c(()=>e(H).scheduleMatch.SecondTeamText)??""}`)),h(ft,mt)};O(at,ft=>{C(e(H)),c(()=>e(H).scheduleMatch.SecondTeamText)&&ft(gt)})}o(et),W(()=>w(_t,`${C(e(H)),c(()=>e(H).scheduleMatch.FirstTeamText)??""} `)),h(pt,it)},It=pt=>{var it=mi(),et=d(vt(it),2),_t=s(et),at=d(_t);{var gt=ft=>{var mt=fi(),Dt=d(vt(mt));W(()=>w(Dt,` ${C(e(H)),c(()=>e(H).scheduleMatch.SecondTeamText)??""}`)),h(ft,mt)};O(at,ft=>{C(e(H)),c(()=>e(H).scheduleMatch.SecondTeamText)&&ft(gt)})}o(et),W(()=>w(_t,`${C(e(H)),c(()=>e(H).scheduleMatch.FirstTeamText)??""} `)),h(pt,it)};O(Ke,pt=>{C(e(H)),c(()=>e(H).isPlaying)?pt(ht):pt(It,!1)},!0)}h(Be,lt)};O(tt,Be=>{C(e(H)),c(()=>e(H).isWork)?Be(ut):Be(Ge,!1)})}o(nt),o(Se);var Ze=d(Se,2);{var ce=Be=>{var lt=xi(),Ke=s(lt),ht=s(Ke,!0);o(Ke),o(lt),W(()=>{Ot(Ke,`background-color: ${C(e(H)),c(()=>e(H).scheduleMatch.Division.ColorHex)??""}20; color: ${C(e(H)),c(()=>e(H).scheduleMatch.Division.ColorHex)??""}; border: 1px solid ${C(e(H)),c(()=>e(H).scheduleMatch.Division.ColorHex)??""}40;`),w(ht,(C(e(H)),c(()=>e(H).scheduleMatch.Division.CodeAlias)))}),h(Be,lt)};O(Ze,Be=>{C(e(H)),c(()=>e(H).scheduleMatch.Division)&&Be(ce)})}o(de),W(()=>{Pe(de,1,`flex items-center gap-3 px-3 py-2 rounded border ${C(e(H)),c(()=>e(H).isWork?"border-[#525463] bg-[#454654]/30":e(H).isPlaying?"border-[#eab308]/50 bg-[#eab308]/5":"border-[#454654] bg-[#3b3c48]/30")??""}`),Pe(q,1,`flex-shrink-0 w-1 h-full rounded-full ${C(e(H)),c(()=>e(H).isWork?"bg-[#808593]":e(H).isPlaying?"bg-[#eab308]":"bg-[#525463]")??""}`),w(fe,(C(e(H)),c(()=>e(H).matchDate))),w(We,(C(e(H)),c(()=>e(H).startTimeDisplay)))}),h(te,de)}),o(Ee),W(()=>{w(be,e(me)),w(ge,`(${C(e(ke)),c(()=>e(ke).length)??""} match${C(e(ke)),c(()=>e(ke).length!==1?"es":"")??""})`)}),h(Je,Ee)}),h(ye,$e)};O(se,ye=>{e(v),c(()=>e(v).length===0)?ye(_e):ye(ae,!1)})}o(xe),o(z),h(L,z)},X=L=>{var z=Ei(),xe=d(s(z),2);{var se=ae=>{var ye=hi();h(ae,ye)},_e=ae=>{var ye=Ii(),$e=vt(ye);{var He=Ee=>{var j=yi(),G=d(s(j),2);G.__change=pe=>S(N,Number(pe.target.value)),st(G,5,()=>e(i),ot,(pe,ge)=>{var we=_i(),te=s(we,!0);o(we);var Ae={};W(()=>{w(te,(e(ge),c(()=>e(ge).CompleteFullName||e(ge).FullName||`Pool ${e(ge).PlayId}`))),Ae!==(Ae=(e(ge),c(()=>e(ge).PlayId)))&&(we.value=(we.__value=(e(ge),c(()=>e(ge).PlayId)))??"")}),h(pe,we)}),o(G);var be;pr(G),o(j),W(()=>{be!==(be=e(N)||"")&&(G.value=(G.__value=e(N)||"")??"",fr(G,e(N)||""))}),h(Ee,j)};O($e,Ee=>{e(i),c(()=>e(i).length>1)&&Ee(He)})}var Je=d($e,2);{var me=Ee=>{var j=ki(),G=s(j);{var be=we=>{var te=wi(),Ae=s(te),H=s(Ae),de=s(H);o(H),o(Ae);var q=d(Ae,2),ne=s(q),fe=d(s(ne));st(fe,5,()=>(e(k),c(()=>e(k).Pool.Teams)),ot,(Le,We)=>{const rt=ee(()=>(e(We),c(()=>{var it;return(it=e(We).TeamText)==null?void 0:it.includes("630")})));var Xe=Si(),Se=s(Xe),nt=s(Se,!0);o(Se);var tt=d(Se),ut=s(tt),Ge=s(ut,!0);o(ut),o(tt);var Ze=d(tt),ce=s(Ze,!0);o(Ze);var Be=d(Ze),lt=s(Be,!0);o(Be);var Ke=d(Be),ht=s(Ke);o(Ke);var It=d(Ke),pt=s(It,!0);o(It),o(Xe),W(()=>{Pe(Xe,1,`border-b border-[#454654] ${e(rt)?"bg-[#eab308]/10":""}`),w(nt,(e(We),c(()=>e(We).FinishRank||e(We).OverallRank||"-"))),Pe(ut,1,e(rt)?"text-[#facc15] font-semibold":"text-[#c0c2c8]"),w(Ge,(e(We),c(()=>e(We).TeamText))),w(ce,(e(We),c(()=>e(We).MatchesWon??"-"))),w(lt,(e(We),c(()=>e(We).MatchesLost??"-"))),w(ht,`${e(We),c(()=>e(We).SetsWon??"-")??""}-${e(We),c(()=>e(We).SetsLost??"-")??""}`),w(pt,(e(We),c(()=>e(We).PointRatio&&e(We).PointRatio!=="NaN"?e(We).PointRatio:"-")))}),h(Le,Xe)}),o(fe),o(ne),o(q),o(te),W(()=>w(de,`${e(k),c(()=>e(k).Pool.CompleteFullName||e(k).Pool.FullName)??""} - Standings`)),h(we,te)};O(G,we=>{e(k),c(()=>e(k).Pool&&e(k).Pool.Teams&&e(k).Pool.Teams.length>0)&&we(be)})}var pe=d(G,2);{var ge=we=>{var te=$i(),Ae=d(s(te),2);st(Ae,5,()=>(e(k),c(()=>e(k).Pool.Matches)),ot,(H,de)=>{const q=ee(()=>(e(de),c(()=>typeof e(de).ScheduledStartDateTime=="string"?new Date(e(de).ScheduledStartDateTime).getTime():e(de).ScheduledStartDateTime))),ne=ee(()=>(e(de),c(()=>{var Ge,Ze;return((Ge=e(de).FirstTeamText)==null?void 0:Ge.includes("630"))||((Ze=e(de).SecondTeamText)==null?void 0:Ze.includes("630"))})));var fe=Ci(),Le=s(fe),We=s(Le,!0);o(Le);var rt=d(Le,2);{var Xe=Ge=>{var Ze=Ti(),ce=s(Ze,!0);o(Ze),W(()=>w(ce,(e(de),c(()=>e(de).Court.Name)))),h(Ge,Ze)};O(rt,Ge=>{e(de),c(()=>e(de).Court)&&Ge(Xe)})}var Se=d(rt,2),nt=s(Se),tt=d(nt);{var ut=Ge=>{var Ze=Mi(),ce=d(vt(Ze));W(()=>w(ce,` ${e(de),c(()=>e(de).SecondTeamText)??""}`)),h(Ge,Ze)};O(tt,Ge=>{e(de),c(()=>e(de).SecondTeamText)&&Ge(ut)})}o(Se),o(fe),W(Ge=>{Pe(fe,1,`flex items-center gap-3 px-3 py-2 rounded border ${e(ne)?"border-[#eab308]/50 bg-[#eab308]/5":"border-[#454654] bg-[#3b3c48]/30"}`),w(We,Ge),w(nt,`${e(de),c(()=>e(de).FirstTeamText)??""} `)},[()=>(C(ze),C(e(q)),c(()=>ze(e(q))))]),h(H,fe)}),o(Ae),o(te),h(we,te)};O(pe,we=>{e(k),c(()=>e(k).Pool&&e(k).Pool.Matches&&e(k).Pool.Matches.length>0)&&we(ge)})}o(j),h(Ee,j)},ke=Ee=>{var j=kt(),G=vt(j);{var be=pe=>{var ge=Di();h(pe,ge)};O(G,pe=>{e(N)&&pe(be)},!0)}h(Ee,j)};O(Je,Ee=>{e(N)&&e(k)?Ee(me):Ee(ke,!1)})}h(ae,ye)};O(xe,ae=>{e(i),c(()=>e(i).length===0)?ae(se):ae(_e,!1)})}o(z),h(L,z)};O(Ve,L=>{e(E)==="schedule"?L(I):L(X,!1)},!0)}h(he,Oe)};O(J,he=>{e(E)==="stats"&&ve?he(Me):he(Z,!1)})}o(D),W(()=>{Pe(re,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(E)==="schedule"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),Pe(F,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(E)==="poolsheet"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),h(y,D)};O(R,y=>{!e(B)&&e(T)&&y(P)})}o(Te),o(De),W(()=>w(Ne,`${e(T),c(()=>{var y;return((y=e(T))==null?void 0:y.TeamText)||ue})??""} - Full Schedule`)),h(r,De),Ft()}Yt(["click","change"]);var Oi=$("<button><span> </span> <span> </span></button>"),Ai=$('<div class="bg-[#3b3c48] border border-[#454654] rounded-lg p-2 shadow-lg min-w-[160px]"><div class="text-xs font-medium text-[#9fa2ab] uppercase tracking-wider mb-2 px-1">Set Priority</div> <div class="space-y-1"></div></div>');function Tn(r,a){At(a,!1);let t=qe(a,"matchId",8),n=qe(a,"currentPriority",8),i=qe(a,"onPriorityChange",8),l=qe(a,"onClose",8,void 0),v=A(null);const f=[{value:"must-cover",label:"Must Cover",color:"#eab308",icon:"â­"},{value:"priority",label:"Priority",color:"#f59e0b",icon:"ð¸"},{value:"optional",label:"Optional",color:"#9fa2ab",icon:"â"},{value:null,label:"Clear",color:"#9fa2ab",icon:"â"}];function b(g){i()(t(),g),l()&&l()()}Rt();var _=Ai(),x=d(s(_),2);st(x,5,()=>f,ot,(g,T)=>{const M=ee(()=>(C(n()),e(T),c(()=>n()===e(T).value))),u=ee(()=>(e(v),e(T),c(()=>e(v)===e(T).value)));var m=Oi();m.__click=()=>b(e(T).value);var p=s(m),N=s(p,!0);o(p);var k=d(p,2),E=s(k,!0);o(k),o(m),W(()=>{Pe(m,1,`w-full text-left px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-2 ${e(M)?"bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50":e(u)?"bg-[#454654] text-[#f8f8f9]":"text-[#c0c2c8] hover:bg-[#454654]"}`),w(N,(e(T),c(()=>e(T).icon))),w(E,(e(T),c(()=>e(T).label)))}),ur("mouseenter",m,()=>S(v,e(T).value)),ur("mouseleave",m,()=>S(v,null)),h(g,m)}),o(x),o(_),h(r,_),Ft()}Yt(["click"]);var Fi=$("<button><span> </span> <span> </span></button>"),Ri=$('<div class="bg-[#3b3c48] border border-[#454654] rounded-lg p-2 shadow-lg min-w-[180px]"><div class="text-xs font-medium text-[#9fa2ab] uppercase tracking-wider mb-2 px-1">Coverage Status</div> <div class="text-xs text-[#c0c2c8] mb-2 px-1"> </div> <div class="space-y-1"></div></div>');function Ia(r,a){At(a,!1);let t=qe(a,"teamId",8),n=qe(a,"currentStatus",8),i=qe(a,"onStatusChange",8),l=qe(a,"onClose",8,void 0),v=A(null);const f=[{value:"not-covered",label:"Not Covered",color:"#9fa2ab",icon:"â"},{value:"covered",label:"Covered",color:"#10b981",icon:"â"},{value:"partially-covered",label:"Partially Covered",color:"#f59e0b",icon:"â"},{value:"planned",label:"Planned",color:"#eab308",icon:"ð"}];function b(M){i()(t(),M),l()&&l()()}Rt();var _=Ri(),x=d(s(_),2),g=s(x);o(x);var T=d(x,2);st(T,5,()=>f,ot,(M,u)=>{const m=ee(()=>(C(n()),e(u),c(()=>n()===e(u).value))),p=ee(()=>(e(v),e(u),c(()=>e(v)===e(u).value)));var N=Fi();N.__click=()=>b(e(u).value);var k=s(N),E=s(k,!0);o(k);var B=d(k,2),ie=s(B,!0);o(B),o(N),W(()=>{Pe(N,1,`w-full text-left px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-2 ${C(e(m)),e(u),C(e(p)),c(()=>e(m)?e(u).value==="covered"?"bg-green-500/20 text-green-400 border border-green-500/50":e(u).value==="planned"?"bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50":e(u).value==="partially-covered"?"bg-[#f59e0b]/20 text-[#fbbf24] border border-[#f59e0b]/50":"bg-[#454654] text-[#9fa2ab] border border-[#525463]":e(p)?"bg-[#454654] text-[#f8f8f9]":"text-[#c0c2c8] hover:bg-[#454654]")??""}`),w(E,(e(u),c(()=>e(u).icon))),w(ie,(e(u),c(()=>e(u).label)))}),ur("mouseenter",N,()=>S(v,e(u).value)),ur("mouseleave",N,()=>S(v,null)),h(M,N)}),o(T),o(_),W(()=>w(g,`Team ${t()??""}`)),h(r,_),Ft()}Yt(["click"]);var ji=$('<div class="text-center py-12 text-[#9fa2ab] text-sm"> </div>'),Li=$('<div class="text-[#9fa2ab] mb-4">LiveMatchDashboard - To be migrated</div>'),Wi=$("<button> </button>"),Ui=$('<div class="mb-4 px-4 py-2 rounded-lg border border-[#454654] bg-[#3b3c48] flex items-center justify-between flex-wrap gap-2"><div class="flex items-center gap-4 flex-wrap"><div class="text-xs text-[#9fa2ab]"><span class="font-semibold text-[#f8f8f9]"> </span> Coverage</div> <div class="flex items-center gap-2 text-xs"><span class="text-green-400"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#f59e0b]"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#eab308]"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#808593]"> </span></div></div> <div class="flex items-center gap-2 flex-wrap"><button title="Dim covered teams to focus on uncovered"> </button> <!></div></div>'),Bi=$('<div class="flex items-center justify-between px-3 py-2 rounded bg-[#454654] border border-[#525463] hover:border-[#eab308]/50 transition-colors"><div class="flex-1 min-w-0"><div class="text-xs font-medium text-[#f8f8f9] truncate"> </div> <div class="text-[10px] text-[#9fa2ab] mt-0.5"> </div></div> <button class="ml-3 px-3 py-1 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors flex-shrink-0">Add</button></div>'),Yi=$('<div class="mb-4 rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-3"><h3 class="text-sm font-semibold text-[#f8f8f9]">Coverage Suggestions</h3> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors" aria-label="Close suggestions">â</button></div> <div class="space-y-2"></div></div>'),Hi=$('<div class="mb-4 px-3 py-2 rounded-lg border border-[#454654] bg-[#3b3c48] text-xs"><div class="font-medium text-[#9fa2ab] uppercase tracking-wider mb-2">Coverage Status Legend</div> <div class="flex flex-wrap gap-4 text-[#c0c2c8]"><div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-[#eab308] bg-[#eab308]/5"></div> <span>Uncovered</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-[#eab308]/50 bg-[#eab308]/10"></div> <span>Planned</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-green-500/30 bg-green-950/5"></div> <span>Covered</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-red-800/50 bg-red-950/10"></div> <span>Conflict</span></div></div></div>'),Ji=$('<div class="text-center py-12 text-[#9fa2ab] text-sm">No matches found</div>'),Vi=$("<span> </span>"),Gi=Ma('<svg class="w-3 h-3 text-[#facc15]" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),qi=$("<button><!></button>"),zi=Ma('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>'),Xi=$('<div class="absolute left-0 top-8 z-50"><!></div>'),Qi=$('<div class="relative"><button aria-label="Set priority"> <!></button> <!></div>'),Ki=$('<div class="absolute left-0 top-8 z-50"><!></div>'),Zi=$('<div class="relative"><button aria-label="Set coverage status"> </button> <!></div>'),ec=$('<div><div><!> <div class="flex-1 min-w-0"><div class="text-sm font-semibold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <!> <!> <div class="flex-shrink-0 w-4"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div></div> <!></div>'),tc=$('<div class="space-y-1.5"><div class="flex items-center justify-between mb-2 pb-1 border-b border-[#454654]"><div class="flex items-center gap-2"><h3 class="text-base font-semibold text-[#f8f8f9]"> </h3> <span class="text-xs text-[#9fa2ab]"> </span></div> <!></div> <!></div>'),rc=$('<div class="text-[#9fa2ab]">Scorekeeper - To be migrated</div>'),ac=$('<div><!> <!> <!> <!> <div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4"><div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Sort:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>Team</button> <button>Court</button> <button>Time</button></div></div> <div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Wave:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div></div> <div class="space-y-4"><!></div> <!></div>');function nc(r,a){At(a,!1);const t=()=>Zt(ka,"$isSpectator",l),n=()=>Zt(Wr,"$filters",l),i=()=>Zt($a,"$isMedia",l),[l,v]=Ca(),f=A(),b=A(),_=A(),x=A(),g=A(),T=A(),M=A(),u=A(),m=A(),p=A(),N=A(),k=A();let E=qe(a,"matches",8),B=qe(a,"eventId",8),ie=qe(a,"clubId",8),U=A("team"),ve=A(null),ue=A(null),Q=A(null),De=A(!1),Te=A(!1),Re=A(null),Ue=A(new Set),Ne=A();Sn(B());function Fe(R){return R.InvolvedTeam==="first"?R.SecondTeamText:R.InvolvedTeam==="second"?R.FirstTeamText:`${R.FirstTeamText} vs ${R.SecondTeamText}`}Xr(()=>{if(Gs()){const R=Vs();R&&R.scores.length>0&&JSON.stringify({eventId:R.eventId,scores:R.scores},null,2)}if(e(Ne).startPolling(),t()){let R=[];if(Br.subscribe(P=>{R=P.map(y=>y.teamId)})(),R.length>0){const P=setInterval(()=>{ba.checkUpcomingMatches(E(),R)},6e4);return()=>clearInterval(P)}}}),Nn(()=>{e(Ne).stopPolling()}),le(()=>(t(),C(B())),()=>{const R=t();S(Ne,yn({eventId:B(),userId:R?"spectator":"anonymous"}))}),le(()=>C(E()),()=>{S(f,Ar(E()))}),le(()=>(n(),C(E()),ze),()=>{S(b,(()=>{if(n().wave!=="all"){const R=n().wave==="morning"?"08:00":"14:30",P=n().wave==="morning"?"14:30":"23:59";return zr(E()).filter(y=>E().some(D=>{const oe=ze(D.ScheduledStartDateTime),re=oe.split(" ")[1]||oe;return re>=R&&re<P&&D.Division.Name===y}))}return zr(E())})())}),le(()=>C(E()),()=>{S(_,Da(E()))}),le(()=>(C(E()),Qe),()=>{S(x,(()=>{const R=new Map;return E().forEach(P=>{const y=Ye(P);y&&R.set(y,Qe.getTeamStatus(y))}),R})())}),le(()=>(C(E()),e(f),e(x),Ye),()=>{S(g,(()=>{const R=Vt(yt);return Ta(E(),R,e(f),e(x),Ye,{excludeSelected:!0,preferUncovered:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:10})})())}),le(()=>(C(E()),n(),t(),Br),()=>{S(T,(()=>{let R=_n(E());if(n().priority&&n().priority!=="all"&&(R=R.filter(P=>Xt.getPriority(P.MatchId)===n().priority)),n().coverageStatus&&n().coverageStatus!=="all"&&(R=R.filter(P=>{const y=Ye(P);if(!y)return!0;const D=Qe.getTeamStatus(y);return n().coverageStatus==="uncovered"?D==="not-covered":n().coverageStatus==="covered"?D==="covered"||D==="partially-covered":n().coverageStatus==="planned"?D==="planned":!0})),t()){let P=[];Br.subscribe(y=>{P=y.map(D=>D.teamId)})(),P.length>0&&(R=R.filter(y=>{const D=Ye(y);return D&&P.includes(D)}))}return R})())}),le(()=>(C(E()),e(f)),()=>{S(M,(()=>{const R=Vt(yt);return hn(E(),R,e(f),{excludeSelected:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:50})})())}),le(()=>e(M),()=>{S(u,new Set(e(M).map(R=>R.match.MatchId)))}),le(()=>(C(E()),Qe),()=>{S(m,(()=>{const R=new Map;E().forEach(F=>{const Y=Ye(F);if(Y){const V=Qe.getTeamStatus(Y);R.set(Y,V)}});const P=R.size,y=Array.from(R.values()).filter(F=>F==="covered").length,D=Array.from(R.values()).filter(F=>F==="partially-covered").length,oe=Array.from(R.values()).filter(F=>F==="planned").length,re=Array.from(R.values()).filter(F=>F==="not-covered").length;return{totalTeams:P,coveredTeams:y,partiallyCoveredTeams:D,plannedTeams:oe,uncoveredTeams:re,coveragePercentage:P>0?(y+D)/P*100:0}})())}),le(()=>(e(T),e(U),Ye),()=>{S(p,(()=>{let R=[...e(T)];return e(U)==="priority"?R.sort((P,y)=>{const D=Xt.getPriority(P.MatchId),oe=Xt.getPriority(y.MatchId),re={"must-cover":3,priority:2,optional:1,null:0},F=re[D||"null"],Y=re[oe||"null"];return F!==Y?Y-F:P.ScheduledStartDateTime-y.ScheduledStartDateTime}):e(U)==="team"?R.sort((P,y)=>{const D=Ye(P),oe=Ye(y);return D.localeCompare(oe)}):e(U)==="court"?R.sort((P,y)=>P.CourtName.localeCompare(y.CourtName)):R.sort((P,y)=>P.ScheduledStartDateTime-y.ScheduledStartDateTime),R})())}),le(()=>(e(p),ze),()=>{S(N,(()=>{const R={};return e(p).forEach(P=>{const y=ze(P.ScheduledStartDateTime);R[y]||(R[y]=[]),R[y].push(P)}),R})())}),le(()=>e(N),()=>{S(k,Object.keys(e(N)).sort((R,P)=>{const y=new Date(`2000-01-01 ${R}`).getTime(),D=new Date(`2000-01-01 ${P}`).getTime();return y-D}))}),le(()=>(t(),C(E()),e(Ne),e(Ue),e(Re)),()=>{if(t()&&E().length>0){const R=new Set;E().forEach(P=>{e(Ne).isClaimOwner(P.MatchId)&&(R.add(P.MatchId),!e(Ue).has(P.MatchId)&&(!e(Re)||e(Re).MatchId!==P.MatchId)&&setTimeout(()=>{S(Re,P)},200))}),S(Ue,R)}}),le(()=>(t(),C(E()),e(Ne),ba),()=>{if(t()&&E().length>0){let R=[];Br.subscribe(P=>{R=P.map(y=>y.teamId)})(),E().forEach(P=>{const y=Ye(P);if(y&&R.includes(y)){const D=e(Ne).getScore(P.MatchId);D&&D.status==="in-progress"&&ba.notifyScoreUpdate(P,D)}})}}),Ut(),Rt();var je=kt(),K=vt(je);{var Ie=R=>{var P=ji(),y=s(P,!0);o(P),W(()=>w(y,(n(),c(()=>n().division||n().wave!=="all"||n().teams.length>0||n().timeRange.start||n().timeRange.end?"No matches found for selected filters":"No matches found")))),h(R,P)},Ce=R=>{var P=ac(),y=s(P);{var D=me=>{var ke=Li();h(me,ke)};O(y,me=>{t()&&me(D)})}var oe=d(y,2);{var re=me=>{var ke=Ui(),Ee=s(ke),j=s(Ee),G=s(j),be=s(G);o(G),vr(),o(j);var pe=d(j,2),ge=s(pe),we=s(ge);o(ge);var te=d(ge,4),Ae=s(te);o(te);var H=d(te,4),de=s(H);o(H);var q=d(H,4),ne=s(q);o(q),o(pe),o(Ee);var fe=d(Ee,2),Le=s(fe);Le.__click=()=>S(De,!e(De));var We=s(Le,!0);o(Le);var rt=d(Le,2);{var Xe=Se=>{var nt=Wi();nt.__click=()=>S(Te,!e(Te));var tt=s(nt);o(nt),W(()=>{Pe(nt,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(Te)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),$t(nt,"title",`${e(g),c(()=>e(g).length)??""} coverage suggestions`),w(tt,`ð¡ Suggestions (${e(g),c(()=>e(g).length)??""})`)}),h(Se,nt)};O(rt,Se=>{e(g),c(()=>e(g).length>0)&&Se(Xe)})}o(fe),o(ke),W(Se=>{w(be,`${Se??""}%`),w(we,`â ${e(m),c(()=>e(m).coveredTeams)??""}`),w(Ae,`â ${e(m),c(()=>e(m).partiallyCoveredTeams)??""}`),w(de,`ð ${e(m),c(()=>e(m).plannedTeams)??""}`),w(ne,`â ${e(m),c(()=>e(m).uncoveredTeams)??""}`),Pe(Le,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(De)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),w(We,e(De)?"ðï¸ Scanning":"Scanning Mode")},[()=>(e(m),c(()=>e(m).coveragePercentage.toFixed(0)))]),h(me,ke)};O(oe,me=>{i(),e(m),c(()=>i()&&e(m).totalTeams>0)&&me(re)})}var F=d(oe,2);{var Y=me=>{var ke=Yi(),Ee=s(ke),j=d(s(Ee),2);j.__click=()=>S(Te,!1),o(Ee);var G=d(Ee,2);st(G,5,()=>(e(g),c(()=>e(g).slice(0,5))),ot,(be,pe)=>{var ge=Bi(),we=s(ge),te=s(we),Ae=s(te);o(te);var H=d(te,2),de=s(H,!0);o(H),o(we);var q=d(we,2);q.__click=ne=>{ne.stopPropagation(),yt.selectMatch(e(pe).match.MatchId)},o(ge),W(ne=>{w(Ae,`${ne??""} - ${e(pe),c(()=>e(pe).match.CourtName)??""} - Team ${e(pe),c(()=>e(pe).teamId)??""}`),w(de,(e(pe),c(()=>e(pe).reason)))},[()=>(C(ze),e(pe),c(()=>ze(e(pe).match.ScheduledStartDateTime)))]),h(be,ge)}),o(G),o(ke),h(me,ke)};O(F,me=>{i(),e(Te),e(g),c(()=>i()&&e(Te)&&e(g).length>0)&&me(Y)})}var V=d(F,2);{var J=me=>{var ke=Hi();h(me,ke)};O(V,me=>{i()&&me(J)})}var Me=d(V,2),Z=s(Me),he=d(s(Z),2),Oe=s(he);Oe.__click=()=>S(U,"team");var Ve=d(Oe,2);Ve.__click=()=>S(U,"court");var I=d(Ve,2);I.__click=()=>S(U,"time"),o(he),o(Z);var X=d(Z,2),L=d(s(X),2),z=s(L);z.__click=()=>zt("wave","all");var xe=d(z,2);xe.__click=()=>zt("wave","morning");var se=d(xe,2);se.__click=()=>zt("wave","afternoon"),o(L),o(X),o(Me);var _e=d(Me,2),ae=s(_e);{var ye=me=>{var ke=Ji();h(me,ke)},$e=me=>{var ke=kt(),Ee=vt(ke);st(Ee,1,()=>e(k),ot,(j,G)=>{const be=ee(()=>(e(N),e(G),c(()=>e(N)[e(G)]))),pe=ee(()=>(C(e(be)),e(f),c(()=>e(be).filter(Xe=>e(f).has(Xe.MatchId)).length))),ge=ee(()=>e(pe)>0),we=ee(()=>(C(e(pe)),C(e(be)),c(()=>e(pe)===e(be).length)));var te=tc(),Ae=s(te),H=s(Ae),de=s(H),q=s(de,!0);o(de);var ne=d(de,2),fe=s(ne);o(ne),o(H);var Le=d(H,2);{var We=Xe=>{var Se=Vi(),nt=s(Se);o(Se),W(()=>{Pe(Se,1,`text-xs font-medium ${e(we)?"text-[#808593]":"text-red-400"}`),w(nt,`${e(pe)??""} conflict${e(pe)!==1?"s":""}`)}),h(Xe,Se)};O(Le,Xe=>{e(ge)&&Xe(We)})}o(Ae);var rt=d(Ae,2);st(rt,1,()=>e(be),ot,(Xe,Se)=>{const nt=ee(()=>(e(f),e(Se),c(()=>e(f).has(e(Se).MatchId)))),tt=ee(()=>(C(Ye),e(Se),c(()=>Ye(e(Se))))),ut=ee(()=>(e(Se),c(()=>Fe(e(Se))))),Ge=ee(()=>(e(ve),e(Se),c(()=>e(ve)===e(Se).MatchId))),Ze=ee(()=>(C(Xt),e(Se),c(()=>Xt.getPriority(e(Se).MatchId)))),ce=ee(()=>(e(u),e(Se),c(()=>e(u).has(e(Se).MatchId)))),Be=ee(()=>(C(e(tt)),C(Qe),c(()=>e(tt)?Qe.getTeamStatus(e(tt)):"not-covered"))),lt=ee(()=>e(Be)==="covered"||e(Be)==="partially-covered"),Ke=ee(()=>e(Be)==="planned"),ht=ee(()=>e(Be)==="not-covered"),It=ee(()=>e(De)&&e(lt)),pt=ee(()=>(C(Vt),C(yt),c(()=>Vt(yt)))),it=ee(()=>(C(e(pt)),e(Se),c(()=>e(pt).has(e(Se).MatchId)))),et=ee(()=>e(nt)&&!e(we));var _t=ec(),at=s(_t);at.__click=()=>S(ve,e(Ge)?null:e(Se).MatchId);var gt=s(at);{var ft=Ct=>{var wt=qi();wt.__click=Kt=>{Kt.stopPropagation(),yt.toggleMatch(e(Se).MatchId)};var Pt=s(wt);{var tr=Kt=>{var nr=Gi();h(Kt,nr)};O(Pt,Kt=>{e(it)&&Kt(tr)})}o(wt),W(()=>{Pe(wt,1,`absolute top-2 right-2 sm:relative sm:top-0 sm:right-0 flex-shrink-0 w-5 h-5 rounded border-2 ${e(it)?"border-[#eab308] bg-[#eab308]/20":"border-[#525463] bg-transparent"} flex items-center justify-center hover:bg-[#454654] transition-colors`),$t(wt,"aria-label",e(it)?"Remove from plan":"Add to plan")}),h(Ct,wt)};O(gt,Ct=>{i()&&Ct(ft)})}var mt=d(gt,2),Dt=s(mt),ar=s(Dt,!0);o(Dt);var Qt=d(Dt,2),Et=s(Qt);o(Qt),o(mt);var St=d(mt,2);{var jt=Ct=>{var wt=Qi(),Pt=s(wt);Pt.__click=Ht=>{Ht.stopPropagation(),S(ue,e(ue)===e(Se).MatchId?null:e(Se).MatchId)};var tr=s(Pt),Kt=d(tr);{var nr=Ht=>{var dr=zi();h(Ht,dr)};O(Kt,Ht=>{e(Ze)||Ht(nr)})}o(Pt);var or=d(Pt,2);{var cr=Ht=>{var dr=Xi(),ta=s(dr);Tn(ta,{get matchId(){return e(Se),c(()=>e(Se).MatchId)},get currentPriority(){return e(Ze)},get onPriorityChange(){return C(Xt),c(()=>Xt.setPriority)},onClose:()=>S(ue,null)}),o(dr),h(Ht,dr)};O(or,Ht=>{e(ue),e(Se),c(()=>e(ue)===e(Se).MatchId)&&Ht(cr)})}o(wt),W(()=>{Pe(Pt,1,`flex-shrink-0 w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-[#454654] ${e(Ze)==="must-cover"?"text-[#eab308]":e(Ze)==="priority"?"text-[#f59e0b]":e(Ze)==="optional"?"text-[#9fa2ab]":"text-[#808593]"}`),$t(Pt,"title",e(Ze)?`Priority: ${e(Ze)}`:"Set priority"),w(tr,`${e(Ze)==="must-cover"&&"â­"}
												${e(Ze)==="priority"&&"ð¸"}
												${e(Ze)==="optional"&&"â"} `)}),h(Ct,wt)};O(St,Ct=>{i()&&Ct(jt)})}var Lt=d(St,2);{var hr=Ct=>{var wt=Zi(),Pt=s(wt);Pt.__click=or=>{or.stopPropagation(),S(Q,e(Q)===e(tt)?null:e(tt))};var tr=s(Pt);o(Pt);var Kt=d(Pt,2);{var nr=or=>{var cr=Ki(),Ht=s(cr);Ia(Ht,{get teamId(){return e(tt)},get currentStatus(){return e(Be)},get onStatusChange(){return C(Qe),c(()=>Qe.setTeamStatus)},onClose:()=>S(Q,null)}),o(cr),h(or,cr)};O(Kt,or=>{e(Q)===e(tt)&&or(nr)})}o(wt),W(()=>{Pe(Pt,1,`flex-shrink-0 w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-[#454654] ${e(Be)==="covered"?"text-green-500":e(Be)==="partially-covered"?"text-[#f59e0b]":e(Be)==="planned"?"text-[#eab308]":"text-[#808593]"}`),$t(Pt,"title",`Coverage: ${e(Be)??""}`),w(tr,`${e(Be)==="covered"&&"â"}
												${e(Be)==="partially-covered"&&"â"}
												${e(Be)==="planned"&&"ð"}
												${e(Be)==="not-covered"&&"â"}`)}),h(Ct,wt)};O(Lt,Ct=>{i()&&e(tt)&&Ct(hr)})}var _r=d(Lt,2),yr=s(_r);o(_r),o(at);var ea=d(at,2);{var Ur=Ct=>{wn(Ct,{get match(){return e(Se)},get eventId(){return B()},get clubId(){return ie()},onClose:()=>S(ve,null),get matches(){return E()}})};O(ea,Ct=>{e(Ge)&&Ct(Ur)})}o(_t),W(Ct=>{Pe(at,1,`group relative rounded transition-all flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 px-3 py-2.5 sm:py-2 cursor-pointer match-card min-h-[44px] sm:min-h-0 ${e(et)?"border border-red-800/50 bg-red-950/10":e(Ze)==="must-cover"?"border-2 border-[#eab308] bg-[#eab308]/10":e(Ze)==="priority"?"border border-[#f59e0b] bg-[#f59e0b]/10":e(ht)&&!e(it)?"border border-[#eab308] bg-[#eab308]/5":e(Ke)?"border border-[#eab308]/50 bg-[#eab308]/10":e(lt)?"border border-green-500/30 bg-green-950/5":e(ce)&&!e(it)?"border border-green-500/50 bg-green-950/10":e(it)?"border border-[#eab308]/50 bg-[#eab308]/10":"border border-[#454654] bg-[#3b3c48]"} ${e(It)?"opacity-30":""} hover:border-[#525463] hover:bg-[#3b3c48]/80`),w(ar,Ct),w(Et,`${e(Se),c(()=>e(Se).CourtName)??""} â¢ ${C(e(tt)),e(Se),c(()=>e(tt)||e(Se).Division.CodeAlias)??""} vs ${e(ut)??""}`),Pe(yr,0,`w-4 h-4 text-[#9fa2ab] transition-transform ${e(Ge)?"rotate-180":""}`)},[()=>(C(ze),e(Se),c(()=>ze(e(Se).ScheduledStartDateTime)))]),h(Xe,_t)}),o(te),W(()=>{w(q,e(G)),w(fe,`${C(e(be)),c(()=>e(be).length)??""} match${C(e(be)),c(()=>e(be).length!==1?"es":"")??""}`)}),h(j,te)}),h(me,ke)};O(ae,me=>{e(k),c(()=>e(k).length===0)?me(ye):me($e,!1)})}o(_e);var He=d(_e,2);{var Je=me=>{var ke=rc();h(me,ke)};O(He,me=>{e(Re)&&me(Je)})}o(P),W(()=>{Pe(Oe,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(U)==="team"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),Pe(Ve,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(U)==="court"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),Pe(I,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(U)==="time"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),Pe(z,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="all"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),Pe(xe,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="morning"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),Pe(se,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="afternoon"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`)}),h(R,P)};O(K,R=>{e(T),c(()=>e(T).length===0)?R(Ie):R(Ce,!1)})}h(r,je),Ft(),v()}Yt(["click"]);var oc=$('<div class="text-xs text-[#808593] py-4 text-center">No conflicts found</div>'),sc=$('<span class="text-[#9fa2ab]">â¢</span> <span class="text-[#808593]"> </span>',1),ic=$('<div class="px-3 py-2.5 rounded border border-[#525463] bg-[#454654]/30"><div class="flex items-center gap-2 mb-1"><span class="text-sm font-bold text-[#f8f8f9]"> </span> <span class="text-xs text-[#808593]">vs</span> <span class="text-sm text-[#c0c2c8] truncate"> </span></div> <div class="flex items-center gap-3 mt-1 text-xs flex-wrap"><span class="text-[#facc15] font-medium"> </span> <span class="text-[#9fa2ab]"> </span> <span class="text-[#9fa2ab]">â¢</span> <span class="text-[#9fa2ab]"> </span> <!></div></div>'),cc=$('<div class="space-y-2"></div>'),dc=$(`<div class="mt-2 border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="p-3 sm:p-4"><div class="flex items-center justify-between mb-3 sm:mb-4"><h4 class="text-xs sm:text-sm font-semibold text-[#f8f8f9] truncate pr-2">Conflict Details</h4> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="mb-4 pb-4 border-b border-[#454654]"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-2">Selected Match</div> <div class="px-3 py-2 rounded border border-[#eab308]/50 bg-[#eab308]/5"><div class="flex items-center gap-2 mb-1"><span class="text-sm font-bold text-[#facc15]"> </span> <span class="text-xs text-[#808593]">vs</span> <span class="text-sm text-[#c0c2c8] truncate"> </span></div> <div class="flex items-center gap-3 mt-1 text-xs"><span class="text-[#facc15] font-medium"> </span> <span class="text-[#9fa2ab]"> </span> <span class="text-[#9fa2ab]">â¢</span> <span class="text-[#9fa2ab]"> </span></div></div></div> <div><div class="flex items-center justify-between mb-2"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider"> </div> <span class="text-xs text-red-400 font-medium">Cannot cover simultaneously</span></div> <!></div> <div class="mt-4 pt-4 border-t border-[#454654]"><p class="text-xs text-[#808593]">These matches overlap in time and are on different courts. You'll need to choose which match to cover.</p></div></div></div>`);function lc(r,a){At(a,!1);const t=A();let n=qe(a,"match",8),i=qe(a,"conflictingMatches",8),l=qe(a,"onClose",8);function v(Ce){return Ce.InvolvedTeam==="first"?Ce.SecondTeamText:Ce.InvolvedTeam==="second"?Ce.FirstTeamText:`${Ce.FirstTeamText} vs ${Ce.SecondTeamText}`}function f(Ce,R){return Ce!==R?5:0}const b=Ye(n()),_=v(n());le(()=>C(i()),()=>{S(t,[...i()].sort((Ce,R)=>Ce.ScheduledStartDateTime-R.ScheduledStartDateTime))}),Ut(),Rt();var x=dc(),g=s(x),T=s(g),M=d(s(T),2);M.__click=function(...Ce){var R;(R=l())==null||R.apply(this,Ce)},o(T);var u=d(T,2),m=d(s(u),2),p=s(m),N=s(p),k=s(N,!0);o(N);var E=d(N,4),B=s(E,!0);o(E),o(p);var ie=d(p,2),U=s(ie),ve=s(U,!0);o(U);var ue=d(U,2),Q=s(ue,!0);o(ue);var De=d(ue,4),Te=s(De,!0);o(De),o(ie),o(m),o(u);var Re=d(u,2),Ue=s(Re),Ne=s(Ue),Fe=s(Ne);o(Ne),vr(2),o(Ue);var je=d(Ue,2);{var K=Ce=>{var R=oc();h(Ce,R)},Ie=Ce=>{var R=cc();st(R,5,()=>e(t),ot,(P,y)=>{const D=ee(()=>(C(Ye),e(y),c(()=>Ye(e(y))))),oe=ee(()=>(e(y),c(()=>v(e(y))))),re=ee(()=>(C(n()),e(y),c(()=>f(n().CourtName,e(y).CourtName))));var F=ic(),Y=s(F),V=s(Y),J=s(V,!0);o(V);var Me=d(V,4),Z=s(Me,!0);o(Me),o(Y);var he=d(Y,2),Oe=s(he),Ve=s(Oe,!0);o(Oe);var I=d(Oe,2),X=s(I,!0);o(I);var L=d(I,4),z=s(L,!0);o(L);var xe=d(L,2);{var se=_e=>{var ae=sc(),ye=d(vt(ae),2),$e=s(ye);o(ye),W(()=>w($e,`~${e(re)??""} min travel from ${C(n()),c(()=>n().CourtName)??""}`)),h(_e,ae)};O(xe,_e=>{e(re)>0&&_e(se)})}o(he),o(F),W(_e=>{w(J,(C(e(D)),e(y),c(()=>e(D)||e(y).Division.CodeAlias))),w(Z,e(oe)),w(Ve,(e(y),c(()=>e(y).CourtName))),w(X,_e),w(z,(e(y),c(()=>e(y).Division.CodeAlias)))},[()=>(C(ze),e(y),c(()=>ze(e(y).ScheduledStartDateTime)))]),h(P,F)}),o(R),h(Ce,R)};O(je,Ce=>{e(t),c(()=>e(t).length===0)?Ce(K):Ce(Ie,!1)})}o(Re),vr(2),o(g),o(x),W(Ce=>{w(k,(C(n()),c(()=>b||n().Division.CodeAlias))),w(B,_),w(ve,(C(n()),c(()=>n().CourtName))),w(Q,Ce),w(Te,(C(n()),c(()=>n().Division.CodeAlias))),w(Fe,`Conflicting Matches (${C(i()),c(()=>i().length)??""})`)},[()=>(C(ze),C(n()),c(()=>ze(n().ScheduledStartDateTime)))]),h(r,x),Ft()}Yt(["click"]);var vc=$('<div class="text-center py-12 text-[#9fa2ab] text-sm"> </div>'),uc=$("<option> </option>"),fc=$('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Division:</span> <select class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"><option> </option><!></select></div>'),mc=$("<option> </option>"),xc=$('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Team:</span> <select multiple class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0 min-w-[120px]"></select></div>'),bc=$('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Priority:</span> <select class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"><option>All Priorities</option><option>Must Cover</option><option>Priority</option><option>Optional</option></select></div>'),gc=$('<button class="px-3 py-2 sm:py-1 text-xs font-medium rounded-lg transition-colors text-[#9fa2ab] hover:text-[#f8f8f9] hover:bg-[#454654] border border-[#525463] min-h-[44px] sm:min-h-0">Clear</button>'),pc=$('<span class="ml-2"> </span>'),hc=$('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab]">Showing:</span> <span class="px-2 py-1 text-xs font-semibold rounded bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50"> </span> <button class="text-xs text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors" aria-label="Clear highlight">â</button></div>'),_c=$("<div> </div>"),yc=$('<div class="absolute top-0 bottom-0 flex items-center justify-center"><!></div>'),Sc=$('<div class="absolute top-0 left-0 text-[10px]"> </div>'),wc=$('<div class="absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full border border-white" title="Easy coverage opportunity"></div>'),Tc=$('<div class="absolute top-0 right-0 w-4 h-4 flex items-center justify-center"><svg class="w-3 h-3 text-[#facc15]" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),Mc=$('<div class="text-[8px] text-[#9fa2ab]"> </div>'),Cc=$('<div class="text-[8px] text-green-400">â</div>'),$c=$('<div class="flex items-center gap-1 mt-0.5"><!> <div class="text-[9px] font-semibold text-white"> </div> <!></div>'),kc=Ma('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>'),Dc=$('<div class="absolute left-full top-0 ml-2 z-50"><!></div>'),Ic=$('<div class="relative"><button aria-label="Set priority"> <!></button> <!></div>'),Ec=$('<div class="absolute left-full top-0 ml-2 z-50"><!></div>'),Pc=$('<div class="relative"><button aria-label="Set coverage status"> </button> <!></div>'),Nc=$('<div><!> <!> <!> <div> </div> <div class="text-[9px] sm:text-[10px] opacity-90 truncate mt-0.5 leading-tight"> </div> <div class="text-[9px] sm:text-[10px] opacity-75 mt-0.5"> </div> <!> <!> <!></div>'),Oc=$('<div class="border-b border-[#454654] pb-4 last:border-b-0 last:pb-0 min-w-[600px] sm:min-w-0"><div class="flex items-center justify-between mb-2"><div class="text-base font-semibold text-[#f8f8f9]"> </div> <div class="text-xs text-[#808593]"> </div></div> <div class="relative h-20 sm:h-20 rounded-lg border overflow-hidden bg-[#3b3c48] border-[#454654]"><!> <!></div></div>'),Ac=$('<div class="text-[#9fa2ab]">Scorekeeper - To be migrated</div>'),Fc=$('<div class="fixed inset-0 z-40"></div>'),Rc=$('<div class="fixed inset-0 z-40"></div>'),jc=$('<div class="space-y-4"><div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4"><div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Wave:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <!> <!> <div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Time:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <!> <!></div> <div class="flex items-center justify-between"><div class="text-xs text-[#9fa2ab]"> <!></div> <!></div> <div class="overflow-x-auto -mx-3 sm:mx-0 px-3 sm:px-0"><div class="space-y-4 min-w-max sm:min-w-0"></div></div> <!> <!> <!> <!></div>');function Lc(r,a){At(a,!1);const t=()=>Zt(ka,"$isSpectator",l),n=()=>Zt(Wr,"$filters",l),i=()=>Zt($a,"$isMedia",l),[l,v]=Ca(),f=A(),b=A(),_=A(),x=A(),g=A(),T=A(),M=A(),u=A(),m=A(),p=A(),N=A(),k=A(),E=A();let B=qe(a,"matches",8),ie=qe(a,"eventId",8),U=A(null),ve=A(null),ue=A(null),Q=A(null),De=null,Te=A();function Re(y){return y.InvolvedTeam==="first"?y.SecondTeamText:y.InvolvedTeam==="second"?y.FirstTeamText:`${y.FirstTeamText} vs ${y.SecondTeamText}`}function Ue(y){return e(m)===0?0:(y-e(M))/e(m)*100}function Ne(y,D){return e(m)===0?0:(D-y)/e(m)*100}function Fe(y){const D=[],oe=[...y].sort((re,F)=>re.ScheduledStartDateTime-F.ScheduledStartDateTime);for(let re=0;re<oe.length-1;re++){const F=oe[re],Y=oe[re+1],V=Math.floor((Y.ScheduledStartDateTime-F.ScheduledEndDateTime)/6e4);V>0&&D.push({before:F,after:Y,gapMinutes:V})}return D}function je(y){e(f).has(y.MatchId)?S(U,y):i()?yt.toggleMatch(y.MatchId):S(U,y)}function K(y,D){D.stopPropagation(),S(ve,e(ve)===y?null:y)}le(()=>(t(),C(ie())),()=>{const y=t();S(Te,yn({eventId:ie(),userId:y?"spectator":"anonymous"}))}),le(()=>C(B()),()=>{S(f,Ar(B()))}),le(()=>(n(),C(B()),ze),()=>{S(b,(()=>{if(n().wave!=="all"){const y=n().wave==="morning"?"08:00":"14:30",D=n().wave==="morning"?"14:30":"23:59";return zr(B()).filter(oe=>B().some(re=>{const F=ze(re.ScheduledStartDateTime),Y=F.split(" ")[1]||F;return Y>=y&&Y<D&&re.Division.CodeAlias===oe}))}return zr(B())})())}),le(()=>C(B()),()=>{S(_,Da(B()))}),le(()=>(C(B()),n(),Qe),()=>{S(x,(()=>{let y=_n(B());return n().priority&&n().priority!=="all"&&(y=y.filter(D=>Xt.getPriority(D.MatchId)===n().priority)),n().coverageStatus&&n().coverageStatus!=="all"&&(y=y.filter(D=>{const oe=Ye(D);if(!oe)return!0;const re=Qe.getTeamStatus(oe);return n().coverageStatus==="uncovered"?re==="not-covered":n().coverageStatus==="covered"?re==="covered"||re==="partially-covered":n().coverageStatus==="planned"?re==="planned":!0})),y})())}),le(()=>(C(B()),e(f)),()=>{S(g,(()=>{const y=Vt(yt);return hn(B(),y,e(f),{excludeSelected:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:50})})())}),le(()=>e(g),()=>{S(T,new Set(e(g).map(y=>y.match.MatchId)))}),le(()=>e(x),()=>{S(M,e(x).length>0?Math.min(...e(x).map(y=>y.ScheduledStartDateTime)):0)}),le(()=>e(x),()=>{S(u,e(x).length>0?Math.max(...e(x).map(y=>y.ScheduledEndDateTime)):0)}),le(()=>(e(u),e(M)),()=>{S(m,e(u)-e(M))}),le(()=>e(x),()=>{S(p,(()=>{const y={};return e(x).forEach(D=>{y[D.CourtName]||(y[D.CourtName]=[]),y[D.CourtName].push(D)}),y})())}),le(()=>e(p),()=>{S(N,Object.keys(e(p)).sort())}),le(()=>(e(ve),e(x),Ye),()=>{S(k,(()=>{if(!e(ve))return new Set;const y=new Set;return e(x).forEach(D=>{Ye(D)===e(ve)&&y.add(D.MatchId)}),y})())}),le(()=>(e(U),e(f),e(x)),()=>{S(E,(()=>{if(!e(U))return[];const y=e(f).get(e(U).MatchId);return y?y.map(D=>e(x).find(oe=>oe.MatchId===D)).filter(Boolean):[]})())}),Ut(),Rt();var Ie=kt(),Ce=vt(Ie);{var R=y=>{var D=vc(),oe=s(D,!0);o(D),W(()=>w(oe,(n(),c(()=>n().division||n().wave!=="all"||n().teams.length>0||n().timeRange.start||n().timeRange.end?"No matches found for selected filters":"No matches found")))),h(y,D)},P=y=>{var D=jc(),oe=s(D),re=s(oe),F=d(s(re),2),Y=s(F);Y.__click=()=>zt("wave","all");var V=d(Y,2);V.__click=()=>zt("wave","morning");var J=d(V,2);J.__click=()=>zt("wave","afternoon"),o(F),o(re);var Me=d(re,2);{var Z=q=>{var ne=fc(),fe=d(s(ne),2);fe.__change=Se=>zt("division",Se.target.value||null);var Le=s(fe),We=s(Le);o(Le),Le.value=Le.__value="";var rt=d(Le);st(rt,1,()=>e(b),ot,(Se,nt)=>{var tt=uc(),ut=s(tt,!0);o(tt);var Ge={};W(()=>{w(ut,e(nt)),Ge!==(Ge=e(nt))&&(tt.value=(tt.__value=e(nt))??"")}),h(Se,tt)}),o(fe);var Xe;pr(fe),o(ne),W(()=>{w(We,`All Divisions${n(),c(()=>n().wave!=="all"?` (${n().wave})`:"")??""}`),Xe!==(Xe=(n(),c(()=>n().division||"")))&&(fe.value=(fe.__value=(n(),c(()=>n().division||"")))??"",fr(fe,(n(),c(()=>n().division||""))))}),h(q,ne)};O(Me,q=>{e(b),c(()=>e(b).length>1)&&q(Z)})}var he=d(Me,2);{var Oe=q=>{var ne=xc(),fe=d(s(ne),2);fe.__change=We=>{const rt=Array.from(We.target.selectedOptions,Xe=>Xe.value);zt("teams",rt)},st(fe,5,()=>e(_),ot,(We,rt)=>{var Xe=mc(),Se=s(Xe,!0);o(Xe);var nt={};W(()=>{w(Se,e(rt)),nt!==(nt=e(rt))&&(Xe.value=(Xe.__value=e(rt))??"")}),h(We,Xe)}),o(fe);var Le;pr(fe),o(ne),W(We=>{$t(fe,"size",We),Le!==(Le=(n(),c(()=>n().teams)))&&(fe.value=(fe.__value=(n(),c(()=>n().teams)))??"",fr(fe,(n(),c(()=>n().teams))))},[()=>(e(_),c(()=>Math.min(e(_).length,4)))]),h(q,ne)};O(he,q=>{e(_),c(()=>e(_).length>0)&&q(Oe)})}var Ve=d(he,2),I=d(s(Ve),2),X=s(I);X.__click=()=>zt("timeRange",{start:null,end:null});var L=d(X,2);L.__click=()=>zt("timeRange",{start:"08:00",end:"14:30"});var z=d(L,2);z.__click=()=>zt("timeRange",{start:"14:30",end:"23:59"}),o(I),o(Ve);var xe=d(Ve,2);{var se=q=>{var ne=bc(),fe=d(s(ne),2);fe.__change=nt=>zt("priority",nt.target.value==="all"?"all":nt.target.value);var Le=s(fe);Le.value=Le.__value="all";var We=d(Le);We.value=We.__value="must-cover";var rt=d(We);rt.value=rt.__value="priority";var Xe=d(rt);Xe.value=Xe.__value="optional",o(fe);var Se;pr(fe),o(ne),W(()=>{Se!==(Se=(n(),c(()=>n().priority||"all")))&&(fe.value=(fe.__value=(n(),c(()=>n().priority||"all")))??"",fr(fe,(n(),c(()=>n().priority||"all"))))}),h(q,ne)};O(xe,q=>{i()&&q(se)})}var _e=d(xe,2);{var ae=q=>{var ne=gc();ne.__click=function(...fe){ma==null||ma.apply(this,fe)},h(q,ne)};O(_e,q=>{n(),c(()=>n().division||n().wave!=="all"||n().teams.length>0||n().timeRange.start||n().timeRange.end||n().priority&&n().priority!=="all"||n().coverageStatus&&n().coverageStatus!=="all")&&q(ae)})}o(oe);var ye=d(oe,2),$e=s(ye),He=s($e),Je=d(He);{var me=q=>{var ne=pc(),fe=s(ne);o(ne),W(()=>w(fe,`(${e(x),c(()=>e(x).length)??""} of ${C(B()),c(()=>B().length)??""})`)),h(q,ne)};O(Je,q=>{e(x),C(B()),c(()=>e(x).length!==B().length)&&q(me)})}o($e);var ke=d($e,2);{var Ee=q=>{var ne=hc(),fe=d(s(ne),2),Le=s(fe);o(fe);var We=d(fe,2);We.__click=()=>S(ve,null),o(ne),W(()=>w(Le,`Team ${e(ve)??""}`)),h(q,ne)};O(ke,q=>{e(ve)&&q(Ee)})}o(ye);var j=d(ye,2),G=s(j);st(G,5,()=>e(N),ot,(q,ne)=>{const fe=ee(()=>(e(p),e(ne),c(()=>e(p)[e(ne)])));var Le=Oc(),We=s(Le),rt=s(We),Xe=s(rt,!0);o(rt);var Se=d(rt,2),nt=s(Se);o(Se),o(We);var tt=d(We,2),ut=s(tt);st(ut,1,()=>(C(e(fe)),c(()=>Fe(e(fe)))),ot,(Ze,ce)=>{const Be=ee(()=>(e(ce),c(()=>Ue(e(ce).before.ScheduledEndDateTime)))),lt=ee(()=>(e(ce),c(()=>Ue(e(ce).after.ScheduledStartDateTime)))),Ke=ee(()=>e(lt)-e(Be)),ht=ee(()=>(e(ce),c(()=>e(ce).gapMinutes>=30))),It=ee(()=>(e(ce),c(()=>e(ce).gapMinutes>=15&&e(ce).gapMinutes<30)));var pt=kt(),it=vt(pt);{var et=_t=>{var at=yc(),gt=s(at);{var ft=mt=>{var Dt=_c(),ar=s(Dt);o(Dt),W(()=>{Pe(Dt,1,`text-[9px] font-medium px-1 py-0.5 rounded ${e(ht)?"bg-green-500/20 text-green-400":e(It)?"bg-yellow-500/20 text-yellow-400":"bg-orange-500/20 text-orange-400"}`),w(ar,`${e(ce),c(()=>e(ce).gapMinutes)??""}m`)}),h(mt,Dt)};O(gt,mt=>{e(Ke)>3&&mt(ft)})}o(at),W(()=>{Ot(at,`left: ${e(Be)??""}%; width: ${e(Ke)??""}%; z-index: 0;`),$t(at,"title",`${e(ce),c(()=>e(ce).gapMinutes)??""} min gap between matches`)}),h(_t,at)};O(it,_t=>{e(Ke)>=1&&_t(et)})}h(Ze,pt)});var Ge=d(ut,2);st(Ge,1,()=>e(fe),ot,(Ze,ce)=>{const Be=ee(()=>(e(f),e(ce),c(()=>e(f).has(e(ce).MatchId)))),lt=ee(()=>(e(U),e(ce),c(()=>{var ct;return((ct=e(U))==null?void 0:ct.MatchId)===e(ce).MatchId}))),Ke=ee(()=>(C(Ye),e(ce),c(()=>Ye(e(ce))))),ht=ee(()=>(e(ve),e(k),e(ce),c(()=>e(ve)!==null&&e(k).has(e(ce).MatchId)))),It=ee(()=>e(ve)!==null&&!e(ht)),pt=ee(()=>(C(Vt),C(yt),c(()=>Vt(yt)))),it=ee(()=>(C(e(pt)),e(ce),c(()=>e(pt).has(e(ce).MatchId)))),et=ee(()=>(C(Xt),e(ce),c(()=>Xt.getPriority(e(ce).MatchId)))),_t=ee(()=>(e(T),e(ce),c(()=>e(T).has(e(ce).MatchId)))),at=ee(()=>(C(e(Ke)),C(Qe),c(()=>e(Ke)?Qe.getTeamStatus(e(Ke)):"not-covered"))),gt=ee(()=>e(at)==="covered"||e(at)==="partially-covered"),ft=ee(()=>e(at)==="planned"),mt=ee(()=>e(at)==="not-covered"),Dt=ee(()=>(e(ce),c(()=>Ue(e(ce).ScheduledStartDateTime)))),ar=ee(()=>(e(ce),c(()=>Math.max(Ne(e(ce).ScheduledStartDateTime,e(ce).ScheduledEndDateTime),2)))),Qt=ee(()=>(e(ce),c(()=>Re(e(ce))))),Et=ee(()=>(C(e(et)),C(e(mt)),C(e(it)),C(e(ft)),C(e(ht)),C(e(Be)),C(e(gt)),C(e(_t)),e(ce),c(()=>e(et)==="must-cover"?"#eab308":e(et)==="priority"?"#f59e0b":e(mt)&&!e(it)||e(ft)||e(ht)||e(it)&&!e(Be)?"#eab308":e(gt)||e(_t)&&!e(it)?"#10b981":e(Be)?"#dc2626":e(ce).Division.ColorHex))),St=ee(()=>e(et)==="must-cover"?"#facc15":e(et)==="priority"?"#fbbf24":e(mt)&&!e(it)||e(ft)?"#facc15":e(lt)?"#eab308":e(ht)||e(it)?"#facc15":e(Be)?"#ef4444":"rgba(255, 255, 255, 0.2)"),jt=ee(()=>e(lt)?30:e(ht)?20:e(et)==="must-cover"?18:e(it)?15:e(Be)?10:1);var Lt=Nc();Lt.__click=ct=>{ct.target instanceof HTMLElement&&ct.target.closest(".priority-button")||je(e(ce))};var hr=s(Lt);{var _r=ct=>{var xt=Sc(),Tt=s(xt);o(xt),W(()=>w(Tt,`${e(et)==="must-cover"&&"â­"}
											${e(et)==="priority"&&"ð¸"}
											${e(et)==="optional"&&"â"}`)),h(ct,xt)};O(hr,ct=>{i()&&e(et)&&ct(_r)})}var yr=d(hr,2);{var ea=ct=>{var xt=wc();h(ct,xt)};O(yr,ct=>{i()&&e(_t)&&!e(it)&&ct(ea)})}var Ur=d(yr,2);{var Ct=ct=>{var xt=Tc();h(ct,xt)};O(Ur,ct=>{i()&&e(it)&&ct(Ct)})}var wt=d(Ur,2);wt.__click=ct=>e(Ke)&&K(e(Ke),ct);var Pt=s(wt,!0);o(wt);var tr=d(wt,2),Kt=s(tr);o(tr);var nr=d(tr,2),or=s(nr,!0);o(nr);var cr=d(nr,2);{var Ht=ct=>{const xt=ee(()=>(e(Te),e(ce),c(()=>e(Te).getScore(e(ce).MatchId))));var Tt=kt(),Sr=vt(Tt);{var Mr=xr=>{const Gt=ee(()=>(C(e(xt)),c(()=>e(xt).sets.find(Nt=>Nt.completedAt===0)||e(xt).sets[e(xt).sets.length-1]))),qt=ee(()=>(C(e(xt)),c(()=>e(xt).sets.filter(Nt=>Nt.completedAt>0)))),Jt=ee(()=>(C(e(qt)),c(()=>e(qt).filter(Nt=>Nt.team1Score>Nt.team2Score).length))),br=ee(()=>(C(e(qt)),c(()=>e(qt).filter(Nt=>Nt.team2Score>Nt.team1Score).length)));var Cr=$c(),Ea=s(Cr);{var kn=Nt=>{var $r=Mc(),Pn=s($r);o($r),W(()=>w(Pn,`(${e(Jt)??""}-${e(br)??""})`)),h(Nt,$r)};O(Ea,Nt=>{C(e(qt)),c(()=>e(qt).length>0)&&Nt(kn)})}var ra=d(Ea,2),Dn=s(ra);o(ra);var In=d(ra,2);{var En=Nt=>{var $r=Cc();h(Nt,$r)};O(In,Nt=>{C(e(xt)),c(()=>e(xt).status==="in-progress")&&Nt(En)})}o(Cr),W(()=>w(Dn,`${C(e(Gt)),c(()=>e(Gt).team1Score)??""}-${C(e(Gt)),c(()=>e(Gt).team2Score)??""}`)),h(xr,Cr)};O(Sr,xr=>{C(e(xt)),c(()=>e(xt)&&e(xt).status!=="not-started")&&xr(Mr)})}h(ct,Tt)};O(cr,ct=>{e(Te)&&ct(Ht)})}var dr=d(cr,2);{var ta=ct=>{var xt=Ic(),Tt=s(xt);Tt.__click=Jt=>{Jt.stopPropagation(),S(ue,e(ue)===e(ce).MatchId?null:e(ce).MatchId)};var Sr=s(Tt),Mr=d(Sr);{var xr=Jt=>{var br=kc();h(Jt,br)};O(Mr,Jt=>{e(et)||Jt(xr)})}o(Tt);var Gt=d(Tt,2);{var qt=Jt=>{var br=Dc(),Cr=s(br);Tn(Cr,{get matchId(){return e(ce),c(()=>e(ce).MatchId)},get currentPriority(){return e(et)},get onPriorityChange(){return C(Xt),c(()=>Xt.setPriority)},onClose:()=>S(ue,null)}),o(br),h(Jt,br)};O(Gt,Jt=>{e(ue),e(ce),c(()=>e(ue)===e(ce).MatchId)&&Jt(qt)})}o(xt),W(()=>{Pe(Tt,1,`priority-button flex-shrink-0 w-5 h-5 rounded flex items-center justify-center transition-colors hover:bg-black/20 ${e(et)==="must-cover"?"text-[#facc15]":e(et)==="priority"?"text-[#fbbf24]":e(et)==="optional"?"text-white/60":"text-white/40"}`),$t(Tt,"title",e(et)?`Priority: ${e(et)}`:"Set priority"),w(Sr,`${e(et)==="must-cover"&&"â­"}
												${e(et)==="priority"&&"ð¸"}
												${e(et)==="optional"&&"â"} `)}),h(ct,xt)};O(dr,ct=>{i()&&ct(ta)})}var Cn=d(dr,2);{var $n=ct=>{var xt=Pc(),Tt=s(xt);Tt.__click=Gt=>{Gt.stopPropagation(),S(Q,e(Q)===e(Ke)?null:e(Ke))};var Sr=s(Tt);o(Tt);var Mr=d(Tt,2);{var xr=Gt=>{var qt=Ec(),Jt=s(qt);Ia(Jt,{get teamId(){return e(Ke)},get currentStatus(){return e(at)},get onStatusChange(){return C(Qe),c(()=>Qe.setTeamStatus)},onClose:()=>S(Q,null)}),o(qt),h(Gt,qt)};O(Mr,Gt=>{e(Q)===e(Ke)&&Gt(xr)})}o(xt),W(()=>{Pe(Tt,1,`flex-shrink-0 w-5 h-5 rounded flex items-center justify-center transition-colors hover:bg-black/20 ${e(at)==="covered"?"text-green-400":e(at)==="partially-covered"?"text-[#fbbf24]":e(at)==="planned"?"text-[#facc15]":"text-white/40"}`),$t(Tt,"title",`Coverage: ${e(at)??""}`),w(Sr,`${e(at)==="covered"&&"â"}
												${e(at)==="partially-covered"&&"â"}
												${e(at)==="planned"&&"ð"}
												${e(at)==="not-covered"&&"â"}`)}),h(ct,xt)};O(Cn,ct=>{i()&&e(Ke)&&ct($n)})}o(Lt),W((ct,xt,Tt)=>{Pe(Lt,1,`group absolute h-16 rounded-md px-2 py-1.5 text-white shadow-sm border-2 flex flex-col justify-center transition-all active:scale-95 sm:hover:z-20 sm:hover:shadow-lg touch-manipulation cursor-pointer ${e(lt)?"ring-2 ring-[#eab308] ring-offset-2 ring-offset-[#3b3c48]":""} ${e(ht)?"ring-2 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""} ${e(It)?"opacity-30":""} ${e(it)?"ring-1 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""} ${e(gt)?"opacity-60":""}`),Ot(Lt,`left: ${e(Dt)??""}%; width: ${e(ar)??""}%; background-color: ${e(Et)??""}; border-color: ${e(St)??""}; min-width: 100px; z-index: ${e(jt)??""};`),$t(Lt,"title",`${e(ce),c(()=>e(ce).CompleteShortName)??""}: ${e(ce),c(()=>e(ce).FirstTeamText)??""} vs ${e(ce),c(()=>e(ce).SecondTeamText)??""} - ${ct??""}${e(Be)?" (Click to see conflicts)":" (Click to add to plan)"}${e(et)?` [Priority: ${e(et)}]`:""}${e(_t)&&!e(it)?" [Easy opportunity]":""}${e(at)!=="not-covered"?` [Coverage: ${e(at)}]`:""}`),Pe(wt,1,`text-xs sm:text-sm font-bold truncate leading-tight ${e(Ke)?"cursor-pointer hover:underline":""}`),w(Pt,(C(e(Ke)),e(ce),c(()=>e(Ke)||e(ce).Division.CodeAlias))),w(Kt,`vs ${xt??""}`),w(or,Tt)},[()=>(C(ze),e(ce),c(()=>ze(e(ce).ScheduledStartDateTime))),()=>(C(e(Qt)),c(()=>e(Qt).length>20?e(Qt).substring(0,17)+"...":e(Qt))),()=>(C(ze),e(ce),c(()=>ze(e(ce).ScheduledStartDateTime)))]),h(Ze,Lt)}),o(tt),o(Le),W(()=>{w(Xe,e(ne)),w(nt,`${C(e(fe)),c(()=>e(fe).length)??""} match${C(e(fe)),c(()=>e(fe).length!==1?"es":"")??""}`)}),h(q,Le)}),o(G),o(j);var be=d(j,2);{var pe=q=>{lc(q,{get match(){return e(U)},get conflictingMatches(){return e(E)},onClose:()=>S(U,null)})};O(be,q=>{e(U)&&q(pe)})}var ge=d(be,2);{var we=q=>{var ne=Ac();h(q,ne)};O(ge,q=>{e(Te),c(()=>De&&e(Te)&&e(Te).isClaimOwner(De.MatchId))&&q(we)})}var te=d(ge,2);{var Ae=q=>{var ne=Fc();ne.__click=()=>S(ue,null),h(q,ne)};O(te,q=>{e(ue)!==null&&q(Ae)})}var H=d(te,2);{var de=q=>{var ne=Rc();ne.__click=()=>S(Q,null),h(q,ne)};O(H,q=>{e(Q)!==null&&q(de)})}o(D),W((q,ne)=>{Pe(Y,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="all"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),Pe(V,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="morning"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),Pe(J,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().wave==="afternoon"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),Pe(X,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().timeRange.start===null&&n().timeRange.end===null?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),Pe(L,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().timeRange.start==="08:00"&&n().timeRange.end==="14:30"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),Pe(z,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${n(),c(()=>n().timeRange.start==="14:30"&&n().timeRange.end==="23:59"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),w(He,`Timeline: ${q??""} - ${ne??""} `)},[()=>(C(ze),e(M),c(()=>ze(e(M)))),()=>(C(ze),e(u),c(()=>ze(e(u))))]),h(y,D)};O(Ce,y=>{e(x),c(()=>e(x).length===0)?y(R):y(P,!1)})}h(r,Ie),Ft(),v()}Yt(["click","change"]);function Tr(r){return r.replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n")}function _a(r){const a=new Date(r),t=a.getUTCFullYear(),n=String(a.getUTCMonth()+1).padStart(2,"0"),i=String(a.getUTCDate()).padStart(2,"0"),l=String(a.getUTCHours()).padStart(2,"0"),v=String(a.getUTCMinutes()).padStart(2,"0"),f=String(a.getUTCSeconds()).padStart(2,"0");return`${t}${n}${i}T${l}${v}${f}Z`}function Wc(r,a){return`match-${r}-${a}@coursync.local`}function Uc(r,a,t,n){const i=Date.now();let l=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//CourtSync//Coverage Plan//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH",`X-WR-CALNAME:${Tr(n)}`,`X-WR-CALDESC:${Tr("Volleyball Match Coverage Plan")}`,"X-WR-TIMEZONE:UTC"].join(`\r
`)+`\r
`;return r.forEach(v=>{const f=a(v),b=t(v),_=f?`${f} vs ${b}`:`${v.FirstTeamText} vs ${v.SecondTeamText}`,x=[`Court: ${v.CourtName}`,`Division: ${v.Division.CodeAlias}`,`First Team: ${v.FirstTeamText}`,`Second Team: ${v.SecondTeamText}`].join("\\n"),g=Tr(v.CourtName),T=Tr(_),M=Tr(x),u=v.ScheduledStartDateTime,m=v.ScheduledEndDateTime,N=u-5*60*1e3,k=_a(N),E=_a(m),B=_a(i),ie=Wc(v.MatchId,u);l+=["BEGIN:VEVENT",`UID:${ie}`,`DTSTAMP:${B}`,`DTSTART:${k}`,`DTEND:${E}`,`SUMMARY:${T}`,`DESCRIPTION:${M}`,`LOCATION:${g}`,"SEQUENCE:0","STATUS:CONFIRMED","TRANSP:OPAQUE"].join(`\r
`)+`\r
`,l+=["BEGIN:VALARM","TRIGGER:-PT15M","ACTION:DISPLAY",`DESCRIPTION:${Tr(`Match starts in 15 minutes: ${_}`)}`,"END:VALARM"].join(`\r
`)+`\r
`,l+=`END:VEVENT\r
`}),l+=`END:VCALENDAR\r
`,l}const Bc=(r,a,t)=>{const n=r.length,i=a.size,l=n>0?i/n*100:0,v=r.filter(u=>a.has(u.MatchId)).reduce((u,m)=>{const p=(m.ScheduledEndDateTime-m.ScheduledStartDateTime)/6e4;return u+p},0),f=u=>{const p=(u.InvolvedTeam==="first"?u.FirstTeamText:u.SecondTeamText).match(/(\d+-\d+)/);return p?p[1]:""},b=new Set,_=new Set;r.forEach(u=>{const m=f(u);m&&(b.add(m),a.has(u.MatchId)&&_.add(m))});const x=_.size,g=b.size,T=g>0?n/g:0,M=Array.from(a).filter(u=>t.has(u)).length;return{totalMatches:n,coveredMatches:i,coveragePercentage:l,totalCoverageTime:v,teamsCovered:x,totalTeams:g,averageMatchesPerTeam:T,conflictsInPlan:M}},Yc=(r,a)=>{const t=i=>{const v=(i.InvolvedTeam==="first"?i.FirstTeamText:i.SecondTeamText).match(/(\d+-\d+)/);return v?v[1]:""},n=new Map;return r.forEach(i=>{const l=t(i);if(l){const v=n.get(l)||{total:0,covered:0};v.total++,a.has(i.MatchId)&&v.covered++,n.set(l,v)}}),Array.from(n.entries()).map(([i,l])=>({teamId:i,totalMatches:l.total,coveredMatches:l.covered,coveragePercentage:l.total>0?l.covered/l.total*100:0})).sort((i,l)=>l.coveragePercentage-i.coveragePercentage)},Ka=r=>{if(r<60)return`${Math.round(r)}m`;const a=Math.floor(r/60),t=Math.round(r%60);return t===0?`${a}h`:`${a}h ${t}m`};var Hc=$('<div class="flex items-center justify-between"><div class="flex items-center gap-3 flex-1 min-w-0"><div class="text-sm font-medium text-[#f8f8f9] truncate"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="flex items-center gap-2 flex-shrink-0"><div class="w-24 h-2 bg-[#454654] rounded-full overflow-hidden"><div class="h-full bg-[#eab308] transition-all duration-300"></div></div> <div class="text-xs text-[#9fa2ab] w-12 text-right"> </div></div></div>'),Jc=$('<div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-sm font-medium text-[#f8f8f9] mb-4">Team Coverage Breakdown</div> <div class="space-y-3 max-h-[400px] overflow-y-auto"></div></div>'),Vc=$('<div class="space-y-6"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"><div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Coverage</div> <div class="text-2xl font-bold text-[#f8f8f9] mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Teams Covered</div> <div class="text-2xl font-bold text-[#f8f8f9] mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Total Time</div> <div class="text-2xl font-bold text-[#f8f8f9] mb-1"> </div> <div class="text-xs text-[#9fa2ab]">coverage time</div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Conflicts</div> <div> </div> <div class="text-xs text-[#9fa2ab]">in coverage plan</div></div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-2"><div class="text-sm font-medium text-[#f8f8f9]">Coverage Progress</div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="w-full h-3 bg-[#454654] rounded-full overflow-hidden"><div class="h-full bg-[#eab308] transition-all duration-300"></div></div></div> <!> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Avg Matches/Team</div> <div class="text-xl font-bold text-[#f8f8f9]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Coverage Efficiency</div> <div class="text-xl font-bold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab] mt-1">teams covered ratio</div></div></div></div>');function Gc(r,a){At(a,!1);const t=A(),n=A();let i=qe(a,"matches",8);const l=Ar(i()),f=Vt(yt);le(()=>C(i()),()=>{S(t,Bc(i(),f,l))}),le(()=>C(i()),()=>{S(n,Yc(i(),f))}),Ut(),Rt();var b=Vc(),_=s(b),x=s(_),g=d(s(x),2),T=s(g);o(g);var M=d(g,2),u=s(M);o(M),o(x);var m=d(x,2),p=d(s(m),2),N=s(p,!0);o(p);var k=d(p,2),E=s(k);o(k),o(m);var B=d(m,2),ie=d(s(B),2),U=s(ie,!0);o(ie),vr(2),o(B);var ve=d(B,2),ue=d(s(ve),2),Q=s(ue,!0);o(ue),vr(2),o(ve),o(_);var De=d(_,2),Te=s(De),Re=d(s(Te),2),Ue=s(Re);o(Re),o(Te);var Ne=d(Te,2),Fe=s(Ne);o(Ne),o(De);var je=d(De,2);{var K=re=>{var F=Jc(),Y=d(s(F),2);st(Y,5,()=>e(n),ot,(V,J)=>{var Me=Hc(),Z=s(Me),he=s(Z),Oe=s(he);o(he);var Ve=d(he,2),I=s(Ve);o(Ve),o(Z);var X=d(Z,2),L=s(X),z=s(L);o(L);var xe=d(L,2),se=s(xe);o(xe),o(X),o(Me),W((_e,ae)=>{w(Oe,`Team ${e(J),c(()=>e(J).teamId)??""}`),w(I,`${e(J),c(()=>e(J).coveredMatches)??""}/${e(J),c(()=>e(J).totalMatches)??""} matches`),Ot(z,`width: ${_e??""}%;`),w(se,`${ae??""}%`)},[()=>(e(J),c(()=>Math.min(e(J).coveragePercentage,100))),()=>(e(J),c(()=>e(J).coveragePercentage.toFixed(0)))]),h(V,Me)}),o(Y),o(F),h(re,F)};O(je,re=>{e(n),c(()=>e(n).length>0)&&re(K)})}var Ie=d(je,2),Ce=s(Ie),R=d(s(Ce),2),P=s(R,!0);o(R),o(Ce);var y=d(Ce,2),D=d(s(y),2),oe=s(D);o(D),vr(2),o(y),o(Ie),o(b),W((re,F,Y,V,J,Me)=>{w(T,`${re??""}%`),w(u,`${e(t),c(()=>e(t).coveredMatches)??""} of ${e(t),c(()=>e(t).totalMatches)??""} matches`),w(N,(e(t),c(()=>e(t).teamsCovered))),w(E,`of ${e(t),c(()=>e(t).totalTeams)??""} teams`),w(U,F),Pe(ue,1,`text-2xl font-bold mb-1 ${e(t),c(()=>e(t).conflictsInPlan>0?"text-red-400":"text-[#f8f8f9]")??""}`),w(Q,(e(t),c(()=>e(t).conflictsInPlan))),w(Ue,`${Y??""}%`),Ot(Fe,`width: ${V??""}%;`),w(P,J),w(oe,`${Me??""}%`)},[()=>(e(t),c(()=>e(t).coveragePercentage.toFixed(1))),()=>(C(Ka),e(t),c(()=>Ka(e(t).totalCoverageTime))),()=>(e(t),c(()=>e(t).coveragePercentage.toFixed(1))),()=>(e(t),c(()=>Math.min(e(t).coveragePercentage,100))),()=>(e(t),c(()=>e(t).averageMatchesPerTeam.toFixed(1))),()=>(e(t),c(()=>e(t).totalMatches>0?(e(t).teamsCovered/e(t).totalTeams*100).toFixed(1):"0"))]),h(r,b),Ft()}const qc=(r,a,t,n)=>{const i=new Map;return r.forEach(l=>{const v=n(l);if(!v)return;const f=i.get(v)||{total:0,covered:0,planned:0};f.total++,a.has(l.MatchId)&&f.covered++,t.get(v)==="planned"&&f.planned++,i.set(v,f)}),Array.from(i.entries()).map(([l,v])=>({teamId:l,status:t.get(l)||"not-covered",totalMatches:v.total,coveredMatches:v.covered,plannedMatches:v.planned,coveragePercentage:v.total>0?v.covered/v.total*100:0})).sort((l,v)=>{const f={"not-covered":0,planned:1,"partially-covered":2,covered:3},b=f[l.status],_=f[v.status];return b!==_?b-_:l.coveragePercentage-v.coveragePercentage})},zc=(r,a,t,n)=>{const i=new Map,l=new Map;r.forEach(u=>{const m=n(u);if(!m)return;const p=t.get(m)||"not-covered";i.has(m)||i.set(m,p);const N=l.get(m)||{total:0,covered:0,planned:0};N.total++,a.has(u.MatchId)&&N.covered++,p==="planned"&&N.planned++,l.set(m,N)});const v=i.size,f=Array.from(i.values()).filter(u=>u==="covered").length,b=Array.from(i.values()).filter(u=>u==="partially-covered").length,_=Array.from(i.values()).filter(u=>u==="planned").length,x=Array.from(i.values()).filter(u=>u==="not-covered").length,g=r.length,T=a.size,M=Array.from(l.values()).reduce((u,m)=>u+m.planned,0);return{totalTeams:v,coveredTeams:f,partiallyCoveredTeams:b,plannedTeams:_,uncoveredTeams:x,coveragePercentage:v>0?(f+b)/v*100:0,plannedPercentage:v>0?_/v*100:0,totalMatches:g,coveredMatches:T,plannedMatches:M}},Xc=(r,a)=>{const t=[];return t.push("Coverage Statistics Report"),t.push(`Generated: ${new Date().toLocaleString()}`),t.push(""),t.push("Summary"),t.push(`Total Teams,${a.totalTeams}`),t.push(`Covered Teams,${a.coveredTeams}`),t.push(`Partially Covered Teams,${a.partiallyCoveredTeams}`),t.push(`Planned Teams,${a.plannedTeams}`),t.push(`Uncovered Teams,${a.uncoveredTeams}`),t.push(`Coverage Percentage,${a.coveragePercentage.toFixed(1)}%`),t.push(`Planned Percentage,${a.plannedPercentage.toFixed(1)}%`),t.push(""),t.push("Team Breakdown"),t.push("Team ID,Status,Total Matches,Covered Matches,Planned Matches,Coverage Percentage"),r.forEach(n=>{t.push(`${n.teamId},${n.status},${n.totalMatches},${n.coveredMatches},${n.plannedMatches},${n.coveragePercentage.toFixed(1)}%`)}),t.join(`
`)},Qc=(r,a)=>JSON.stringify({generated:new Date().toISOString(),summary:a,teams:r},null,2);var Kc=$('<div class="flex items-center justify-between"><div class="flex items-center gap-3 flex-1 min-w-0"><div class="flex items-center gap-2 flex-shrink-0"><div></div> <div class="text-sm font-medium text-[#f8f8f9]"> </div></div> <div class="text-xs text-[#9fa2ab]"> <!></div></div> <div class="flex items-center gap-2 flex-shrink-0"><div class="w-24 h-2 bg-[#454654] rounded-full overflow-hidden"><div></div></div> <div class="text-xs text-[#9fa2ab] w-12 text-right"> </div></div></div>'),Zc=$('<div class="space-y-6"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"><div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Coverage</div> <div class="text-2xl font-bold text-[#f8f8f9] mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Covered</div> <div class="text-2xl font-bold text-green-400 mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Planned</div> <div class="text-2xl font-bold text-[#eab308] mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Uncovered</div> <div class="text-2xl font-bold text-[#808593] mb-1"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-2"><div class="text-sm font-medium text-[#f8f8f9]">Overall Coverage Progress</div> <div class="text-xs text-[#9fa2ab]"> </div></div> <div class="w-full h-3 bg-[#454654] rounded-full overflow-hidden"><div class="h-full bg-[#eab308] transition-all duration-300"></div></div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-4"><div class="text-sm font-medium text-[#f8f8f9]">Team Coverage Breakdown</div> <div class="flex gap-2"><button class="px-3 py-1.5 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463] transition-colors">Export CSV</button> <button class="px-3 py-1.5 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463] transition-colors">Export JSON</button></div></div> <div class="space-y-3 max-h-[400px] overflow-y-auto"></div></div></div>');function ed(r,a){At(a,!1);const t=A(),n=A(),i=A();let l=qe(a,"matches",8);const f=Vt(yt);function b(){const V=Xc(e(n),e(i)),J=new Blob([V],{type:"text/csv"}),Me=URL.createObjectURL(J),Z=document.createElement("a");Z.href=Me,Z.download=`coverage-stats-${new Date().toISOString().split("T")[0]}.csv`,Z.click(),URL.revokeObjectURL(Me)}function _(){const V=Qc(e(n),e(i)),J=new Blob([V],{type:"application/json"}),Me=URL.createObjectURL(J),Z=document.createElement("a");Z.href=Me,Z.download=`coverage-stats-${new Date().toISOString().split("T")[0]}.json`,Z.click(),URL.revokeObjectURL(Me)}le(()=>(C(l()),Qe),()=>{S(t,(()=>{const V=new Map;return l().forEach(J=>{const Me=Ye(J);Me&&V.set(Me,Qe.getTeamStatus(Me))}),V})())}),le(()=>(C(l()),e(t),Ye),()=>{S(n,qc(l(),f,e(t),Ye))}),le(()=>(C(l()),e(t),Ye),()=>{S(i,zc(l(),f,e(t),Ye))}),Ut(),Rt();var x=Zc(),g=s(x),T=s(g),M=d(s(T),2),u=s(M);o(M);var m=d(M,2),p=s(m);o(m),o(T);var N=d(T,2),k=d(s(N),2),E=s(k,!0);o(k);var B=d(k,2),ie=s(B);o(B),o(N);var U=d(N,2),ve=d(s(U),2),ue=s(ve,!0);o(ve);var Q=d(ve,2),De=s(Q);o(Q),o(U);var Te=d(U,2),Re=d(s(Te),2),Ue=s(Re,!0);o(Re);var Ne=d(Re,2),Fe=s(Ne);o(Ne),o(Te),o(g);var je=d(g,2),K=s(je),Ie=d(s(K),2),Ce=s(Ie);o(Ie),o(K);var R=d(K,2),P=s(R);o(R),o(je);var y=d(je,2),D=s(y),oe=d(s(D),2),re=s(oe);re.__click=b;var F=d(re,2);F.__click=_,o(oe),o(D);var Y=d(D,2);st(Y,5,()=>e(n),ot,(V,J)=>{var Me=Kc(),Z=s(Me),he=s(Z),Oe=s(he),Ve=d(Oe,2),I=s(Ve);o(Ve),o(he);var X=d(he,2),L=s(X),z=d(L);{var xe=He=>{var Je=tn();W(()=>w(Je,`â¢ ${e(J),c(()=>e(J).plannedMatches)??""} planned`)),h(He,Je)};O(z,He=>{e(J),c(()=>e(J).plannedMatches>0)&&He(xe)})}o(X),o(Z);var se=d(Z,2),_e=s(se),ae=s(_e);o(_e);var ye=d(_e,2),$e=s(ye);o(ye),o(se),o(Me),W((He,Je)=>{Pe(Oe,1,`w-3 h-3 rounded ${e(J),c(()=>e(J).status==="covered"?"bg-green-500":e(J).status==="partially-covered"?"bg-[#f59e0b]":e(J).status==="planned"?"bg-[#eab308]":"bg-[#808593]")??""}`),w(I,`Team ${e(J),c(()=>e(J).teamId)??""}`),w(L,`${e(J),c(()=>e(J).coveredMatches)??""}/${e(J),c(()=>e(J).totalMatches)??""} matches `),Pe(ae,1,`h-full transition-all duration-300 ${e(J),c(()=>e(J).status==="covered"?"bg-green-500":e(J).status==="partially-covered"?"bg-[#f59e0b]":e(J).status==="planned"?"bg-[#eab308]":"bg-[#808593]")??""}`),Ot(ae,`width: ${He??""}%;`),w($e,`${Je??""}%`)},[()=>(e(J),c(()=>Math.min(e(J).coveragePercentage,100))),()=>(e(J),c(()=>e(J).coveragePercentage.toFixed(0)))]),h(V,Me)}),o(Y),o(y),o(x),W((V,J,Me,Z,he)=>{w(u,`${V??""}%`),w(p,`${e(i),c(()=>e(i).coveredTeams+e(i).partiallyCoveredTeams)??""} of ${e(i),c(()=>e(i).totalTeams)??""} teams`),w(E,(e(i),c(()=>e(i).coveredTeams))),w(ie,`${e(i),c(()=>e(i).partiallyCoveredTeams)??""} partially covered`),w(ue,(e(i),c(()=>e(i).plannedTeams))),w(De,`${J??""}% of teams`),w(Ue,(e(i),c(()=>e(i).uncoveredTeams))),w(Fe,`${Me??""}% remaining`),w(Ce,`${Z??""}%`),Ot(P,`width: ${he??""}%;`)},[()=>(e(i),c(()=>e(i).coveragePercentage.toFixed(1))),()=>(e(i),c(()=>e(i).plannedPercentage.toFixed(1))),()=>(e(i),c(()=>e(i).totalTeams>0?(e(i).uncoveredTeams/e(i).totalTeams*100).toFixed(1):0)),()=>(e(i),c(()=>e(i).coveragePercentage.toFixed(1))),()=>(e(i),c(()=>Math.min(e(i).coveragePercentage,100)))]),h(r,x),Ft()}Yt(["click"]);const Za="teamMembers",en="teamAssignments",ya=["#eab308","#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#f97316"];function td(){const{subscribe:r,set:a,update:t}=Wt([]),{subscribe:n,set:i,update:l}=Wt(new Map),{subscribe:v,set:f}=Wt(null);{try{const x=localStorage.getItem(Za);if(x){const g=JSON.parse(x);a(g),g.length>0&&f(g[0].id)}else{const g={id:"you",name:"You",color:ya[0],createdAt:Date.now()};a([g]),f("you")}}catch(x){console.error("Failed to load team coordination data:",x)}try{const x=localStorage.getItem(en);if(x){const g=JSON.parse(x);i(new Map(Object.entries(g)))}}catch(x){console.error("Failed to load team assignments:",x)}}const b=x=>{try{localStorage.setItem(Za,JSON.stringify(x))}catch(g){console.error("Failed to save team members:",g)}},_=x=>{try{const g=Object.fromEntries(x);localStorage.setItem(en,JSON.stringify(g))}catch(g){console.error("Failed to save team assignments:",g)}};return{members:{subscribe:r},assignments:{subscribe:n},currentMemberId:{subscribe:v},setCurrentMemberId:x=>{f(x)},addMember:x=>{let g=new Set;r(u=>{g=new Set(u.map(m=>m.color))})();const T=ya.find(u=>!g.has(u))||ya[0],M={id:`member-${Date.now()}`,name:x,color:T,createdAt:Date.now()};return t(u=>{const m=[...u,M];return b(m),m}),f(M.id),M.id},removeMember:x=>{t(g=>{const T=g.filter(M=>M.id!==x);return b(T),T}),l(g=>{const T=new Map(g);return Array.from(T.entries()).forEach(([M,u])=>{u===x&&T.delete(M)}),_(T),T}),r(g=>{g.length>0&&f(g[0].id)})()},updateMember:(x,g)=>{t(T=>{const M=T.map(u=>u.id===x?{...u,...g}:u);return b(M),M})},assignTeam:(x,g)=>{l(T=>{const M=new Map(T);return M.set(x,g),_(M),M})},unassignTeam:x=>{l(g=>{const T=new Map(g);return T.delete(x),_(T),T})},getTeamAssignment:x=>{let g=null;return n(T=>{g=T.get(x)||null})(),g},getMember:x=>{let g=null;return r(T=>{g=T.find(M=>M.id===x)||null})(),g},getCurrentMember:()=>{let x=null;if(v(T=>{x=T})(),!x)return null;let g=null;return r(T=>{g=T.find(M=>M.id===x)||null})(),g},exportCoverageStatus:(x,g)=>{let T=null;v(E=>{T=E})();const M=g||T;if(!M)return JSON.stringify({});let u=null;r(E=>{u=E.find(B=>B.id===M)||null})();let m=new Map;n(E=>{m=E})();const p=Array.from(m.entries()).filter(([E,B])=>B===M).map(([E])=>E),N={};Array.from(x.entries()).forEach(([E,B])=>{p.includes(E)&&(N[E]=B)});const k={memberId:M,memberName:(u==null?void 0:u.name)||"Unknown",exportedAt:new Date().toISOString(),assignments:p.map(E=>({teamId:E})),coverageStatus:N};return JSON.stringify(k,null,2)},importCoverageStatus:(x,g="merge")=>{try{const T=JSON.parse(x);return!T.coverageStatus||!T.memberId?{success:!1,error:"Invalid data format: missing coverageStatus or memberId"}:(g==="merge"&&T.assignments&&l(M=>{const u=new Map(M);return T.assignments.forEach(m=>{u.set(m.teamId,T.memberId)}),_(u),u}),{success:!0})}catch(T){return{success:!1,error:T instanceof Error?T.message:"Unknown error"}}},mergeCoverageStatuses:x=>{const g=new Map;return x.forEach(({coverageStatus:T})=>{Object.entries(T).forEach(([M,u])=>{const m=g.get(M);if(!m)g.set(M,u);else{const p={covered:3,"partially-covered":2,planned:1,"not-covered":0};p[u]>p[m]&&g.set(M,u)}})}),g}}}const dt=td();var rd=$('<div class="mb-4 p-3 rounded bg-[#454654] border border-[#525463]"><div class="flex gap-2"><input type="text" placeholder="Member name" class="flex-1 px-3 py-2 text-sm rounded bg-[#3b3c48] text-[#f8f8f9] border border-[#525463] focus:border-[#eab308] focus:outline-none"/> <button class="px-3 py-2 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors">Add</button></div></div>'),ad=$('<input type="text" class="flex-1 px-2 py-1 text-sm rounded bg-[#454654] text-[#f8f8f9] border border-[#525463] focus:border-[#eab308] focus:outline-none"/>'),nd=$('<span class="text-[10px] text-[#9fa2ab]">(Active)</span>'),od=$('<span class="text-[10px] text-[#9fa2ab]"> </span>'),sd=$('<div class="flex items-center gap-2 flex-1 min-w-0"><button> </button> <!> <!></div>'),id=$('<button class="px-2 py-1 text-xs text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors" title="Edit name">âï¸</button>'),cd=$('<button class="px-2 py-1 text-xs text-[#9fa2ab] hover:text-red-400 transition-colors" title="Remove member">â</button>'),dd=$('<div><div class="flex items-center gap-3 flex-1 min-w-0"><div class="w-4 h-4 rounded-full flex-shrink-0"></div> <!></div> <div class="flex items-center gap-2 flex-shrink-0"><!> <!></div></div>'),ld=$('<div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-4"><h3 class="text-sm font-semibold text-[#f8f8f9]">Team Members</h3> <button class="px-3 py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463] transition-colors"> </button></div> <!> <div class="space-y-2"></div></div>');function vd(r,a){At(a,!1);const t=A();let n=A(!1),i=A(""),l=A(null);function v(){e(i).trim()&&(dt.addMember(e(i).trim()),S(i,""),S(n,!1))}function f(m){if(dt.members.length>1){const p=dt.getMember(m);confirm(`Remove ${p==null?void 0:p.name}?`)&&dt.removeMember(m)}else alert("Cannot remove the last team member")}le(()=>dt,()=>{S(t,(()=>{const m=new Map;return Array.from(dt.assignments.values()).forEach(p=>{m.set(p,(m.get(p)||0)+1)}),m})())}),Ut(),Rt();var b=ld(),_=s(b),x=d(s(_),2);x.__click=()=>S(n,!e(n));var g=s(x,!0);o(x),o(_);var T=d(_,2);{var M=m=>{var p=rd(),N=s(p),k=s(N);Or(k),Er(k);var E=d(k,2);E.__click=v,o(N),o(p),ur("keypress",k,B=>B.key==="Enter"&&v()),ir(k,()=>e(i),B=>S(i,B)),h(m,p)};O(T,m=>{e(n)&&m(M)})}var u=d(T,2);st(u,5,()=>(C(dt),c(()=>dt.members)),ot,(m,p)=>{const N=ee(()=>(C(dt),e(p),c(()=>dt.currentMemberId===e(p).id))),k=ee(()=>(e(l),e(p),c(()=>e(l)===e(p).id))),E=ee(()=>(e(t),e(p),c(()=>e(t).get(e(p).id)||0)));var B=dd(),ie=s(B),U=s(ie),ve=d(U,2);{var ue=Fe=>{var je=ad();Or(je),Er(je),W(()=>ho(je,(e(p),c(()=>e(p).name)))),ur("blur",je,K=>{K.target.value.trim()&&K.target.value!==e(p).name&&dt.updateMember(e(p).id,{name:K.target.value.trim()}),S(l,null)}),ur("keypress",je,K=>{K.key==="Enter"&&K.currentTarget.blur()}),h(Fe,je)},Q=Fe=>{var je=sd(),K=s(je);K.__click=()=>dt.setCurrentMemberId(e(p).id);var Ie=s(K,!0);o(K);var Ce=d(K,2);{var R=D=>{var oe=nd();h(D,oe)};O(Ce,D=>{e(N)&&D(R)})}var P=d(Ce,2);{var y=D=>{var oe=od(),re=s(oe);o(oe),W(()=>w(re,`(${e(E)??""} team${e(E)!==1?"s":""})`)),h(D,oe)};O(P,D=>{e(E)>0&&D(y)})}o(je),W(()=>{Pe(K,1,`text-sm font-medium truncate ${e(N)?"text-[#facc15]":"text-[#f8f8f9] hover:text-[#facc15]"} transition-colors`),w(Ie,(e(p),c(()=>e(p).name)))}),h(Fe,je)};O(ve,Fe=>{e(k)?Fe(ue):Fe(Q,!1)})}o(ie);var De=d(ie,2),Te=s(De);{var Re=Fe=>{var je=id();je.__click=()=>S(l,e(p).id),h(Fe,je)};O(Te,Fe=>{e(k)||Fe(Re)})}var Ue=d(Te,2);{var Ne=Fe=>{var je=cd();je.__click=()=>f(e(p).id),h(Fe,je)};O(Ue,Fe=>{C(dt),c(()=>dt.members.length>1)&&Fe(Ne)})}o(De),o(B),W(()=>{Pe(B,1,`flex items-center justify-between p-3 rounded border transition-colors ${e(N)?"border-[#eab308] bg-[#eab308]/10":"border-[#454654] bg-[#3b3c48]"}`),Ot(U,`background-color: ${e(p),c(()=>e(p).color)??""}`)}),h(m,B)}),o(u),o(b),W(()=>w(g,e(n)?"Cancel":"+ Add Member")),h(r,b),Ft()}Yt(["click"]);const ud=r=>{try{const a=JSON.stringify(r);return btoa(encodeURIComponent(a))}catch(a){throw console.error("Failed to encode coverage data:",a),new Error("Failed to encode coverage data")}},fd=r=>{try{const a=r.startsWith("#")?r.slice(1):r,t=decodeURIComponent(atob(a)),n=JSON.parse(t);return!n.memberId||!n.coverageStatus?null:n}catch(a){return console.error("Failed to decode coverage data:",a),null}},md=r=>{const a=ud(r),n=`${window.location.origin+window.location.pathname}#coverage=${a}`;return n.length>2e3&&console.warn("Shareable URL exceeds 2000 characters. Consider using compression or export/import instead."),n},Mn=()=>{const r=window.location.hash;if(!r||!r.includes("coverage="))return null;const a=r.match(/coverage=([^&]+)/);return a?fd(a[1]):null},xd=()=>Mn()!==null;var bd=$("<option> </option>"),gd=$('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div class="bg-[#3b3c48] border border-[#454654] rounded-lg p-6 max-w-md w-full"><div class="flex items-center justify-between mb-4"><h3 class="text-sm font-semibold text-[#f8f8f9]">Transfer Coverage</h3> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors">â</button></div> <div class="space-y-4"><div><label class="text-xs text-[#9fa2ab] mb-1 block">Team</label> <div class="text-sm text-[#f8f8f9]"> </div></div> <div><label class="text-xs text-[#9fa2ab] mb-1 block">From</label> <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full"></div> <span class="text-sm text-[#f8f8f9]"> </span></div></div> <div><label class="text-xs text-[#9fa2ab] mb-1 block">Transfer To</label> <select class="w-full px-3 py-2 text-sm rounded bg-[#454654] text-[#f8f8f9] border border-[#525463] focus:border-[#eab308] focus:outline-none"><option>Select team member...</option><!></select></div> <div><label class="text-xs text-[#9fa2ab] mb-1 block">Notes (optional)</label> <textarea placeholder="Add any notes about this handoff..." class="w-full px-3 py-2 text-sm rounded bg-[#454654] text-[#f8f8f9] border border-[#525463] focus:border-[#eab308] focus:outline-none resize-none"></textarea></div></div> <div class="flex gap-2 mt-6"><button class="flex-1 px-3 py-2 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Transfer</button> <button class="px-3 py-2 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463] transition-colors">Cancel</button></div></div></div>');function pd(r,a){At(a,!1);const t=A();let n=qe(a,"teamId",8),i=qe(a,"fromMemberId",8),l=qe(a,"onClose",8),v=qe(a,"onHandoff",8),f=A(""),b=A("");const _=dt.getMember(i());function x(){e(f)&&(v()(e(f),e(b)),l()())}le(()=>C(i()),()=>{S(t,dt.members.filter(K=>K.id!==i()))}),Ut(),Rt();var g=gd(),T=s(g),M=s(T),u=d(s(M),2);u.__click=function(...K){var Ie;(Ie=l())==null||Ie.apply(this,K)},o(M);var m=d(M,2),p=s(m),N=d(s(p),2),k=s(N);o(N),o(p);var E=d(p,2),B=d(s(E),2),ie=s(B),U=d(ie,2),ve=s(U,!0);o(U),o(B),o(E);var ue=d(E,2),Q=d(s(ue),2);W(()=>{e(f),io(()=>{e(t)})});var De=s(Q);De.value=De.__value="";var Te=d(De);st(Te,1,()=>e(t),ot,(K,Ie)=>{var Ce=bd(),R=s(Ce,!0);o(Ce);var P={};W(()=>{w(R,(e(Ie),c(()=>e(Ie).name))),P!==(P=(e(Ie),c(()=>e(Ie).id)))&&(Ce.value=(Ce.__value=(e(Ie),c(()=>e(Ie).id)))??"")}),h(K,Ce)}),o(Q),o(ue);var Re=d(ue,2),Ue=d(s(Re),2);Pr(Ue),$t(Ue,"rows",3),o(Re),o(m);var Ne=d(m,2),Fe=s(Ne);Fe.__click=x;var je=d(Fe,2);je.__click=function(...K){var Ie;(Ie=l())==null||Ie.apply(this,K)},o(Ne),o(T),o(g),W(()=>{w(k,`Team ${n()??""}`),Ot(ie,`background-color: ${c(()=>_==null?void 0:_.color)??""}`),w(ve,c(()=>(_==null?void 0:_.name)||"Unknown")),Fe.disabled=!e(f)}),bo(Q,()=>e(f),K=>S(f,K)),ir(Ue,()=>e(b),K=>S(b,K)),h(r,g),Ft()}Yt(["click"]);var hd=$('<div class="mt-2 text-xs text-red-400"> </div>'),_d=$('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div class="bg-[#3b3c48] border border-[#454654] rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto"><div class="flex items-center justify-between mb-4"><h3 class="text-sm font-semibold text-[#f8f8f9]">Import Coverage Status</h3> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors">â</button></div> <textarea placeholder="Paste JSON data here..." class="w-full h-64 px-3 py-2 text-sm rounded bg-[#454654] text-[#f8f8f9] border border-[#525463] focus:border-[#eab308] focus:outline-none font-mono"></textarea> <!> <div class="flex gap-2 mt-4"><button class="px-3 py-1.5 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors">Import</button> <button class="px-3 py-1.5 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463] transition-colors">Cancel</button></div></div></div>'),yd=$('<div class="flex items-center gap-3"><div class="w-4 h-4 rounded-full flex-shrink-0"></div> <div class="flex-1 min-w-0"><div class="text-sm font-medium text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div></div>'),Sd=$('<div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><h3 class="text-sm font-semibold text-[#f8f8f9] mb-4">Coverage by Team Member</h3> <div class="space-y-3"></div></div>'),wd=$("<option> </option>"),Td=$('<div class="flex items-center justify-between p-2 rounded bg-[#454654] border border-[#525463]"><div class="flex items-center gap-2"><div></div> <span class="text-sm text-[#f8f8f9]"> </span> <span class="text-xs text-[#9fa2ab]"> </span></div> <select class="px-2 py-1 text-xs rounded bg-[#3b3c48] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none"><option>Assign...</option><!></select></div>'),Md=$('<div class="mb-6"><h4 class="text-xs font-medium text-[#808593] uppercase tracking-wider mb-2"> </h4> <div class="space-y-1"></div></div>'),Cd=$('<div class="flex items-center justify-between p-2 rounded bg-[#454654] border border-[#525463]"><div class="flex items-center gap-2"><div></div> <span class="text-sm text-[#f8f8f9]"> </span> <span class="text-xs text-[#9fa2ab]"> </span></div> <div class="flex items-center gap-2"><button class="px-2 py-1 text-xs text-[#9fa2ab] hover:text-[#eab308] transition-colors" title="Transfer to another member">âª</button> <button class="px-2 py-1 text-xs text-[#9fa2ab] hover:text-red-400 transition-colors" title="Unassign">â</button></div></div>'),$d=$('<div class="mb-6"><div class="flex items-center gap-2 mb-2"><div class="w-3 h-3 rounded-full"></div> <h4 class="text-xs font-medium text-[#f8f8f9] uppercase tracking-wider"> </h4></div> <div class="space-y-1"></div></div>'),kd=$('<div class="space-y-6"><div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-4"><h3 class="text-sm font-semibold text-[#f8f8f9]">Share Coverage Status</h3> <div class="flex gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463] transition-colors">Export JSON</button> <button class="px-3 py-1.5 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463] transition-colors">Generate Link</button> <button class="px-3 py-1.5 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463] transition-colors">Import JSON</button></div></div> <p class="text-xs text-[#9fa2ab]">Export your coverage status to share with team members, generate a shareable link, or import coverage status from others.</p></div> <!> <div class="grid grid-cols-1 sm:grid-cols-3 gap-4"><div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Total Teams</div> <div class="text-2xl font-bold text-[#f8f8f9]"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Assigned</div> <div class="text-2xl font-bold text-green-400"> </div></div> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-1">Unassigned</div> <div class="text-2xl font-bold text-[#808593]"> </div></div></div> <!> <div class="rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><h3 class="text-sm font-semibold text-[#f8f8f9] mb-4">Team Assignments</h3> <!> <!></div> <!></div>');function Dd(r,a){At(a,!1);const t=A(),n=A(),i=A(),l=A();let v=qe(a,"matches",8),f=A(!1),b=A(""),_=A(null),x=A(null);Xr(()=>{if(xd()){const F=Mn();F&&(S(b,JSON.stringify(F,null,2)),S(f,!0),window.history.replaceState(null,"",window.location.pathname))}});function g(){const F=dt.exportCoverageStatus(e(t)),Y=new Blob([F],{type:"application/json"}),V=URL.createObjectURL(Y),J=document.createElement("a");J.href=V,J.download=`coverage-status-${new Date().toISOString().split("T")[0]}.json`,J.click(),URL.revokeObjectURL(V)}function T(){const F=dt.getCurrentMember();if(!F){alert("Please select a team member first");return}const Y={memberId:F.id,memberName:F.name,exportedAt:new Date().toISOString(),assignments:[],coverageStatus:{}},V=new Map;v().forEach(Me=>{const Z=Ye(Me);Z&&(V.has(Z)||V.set(Z,{teamId:Z,status:Qe.getTeamStatus(Z),assignment:dt.getTeamAssignment(Z)}))}),Array.from(V.entries()).forEach(([Me,Z])=>{Z.assignment===F.id&&(Y.assignments.push({teamId:Me}),Y.coverageStatus[Me]=Z.status)});const J=md(Y);navigator.clipboard.writeText(J).then(()=>{alert("Shareable link copied to clipboard!")}).catch(()=>{prompt("Shareable link (copy this):",J)})}function M(F,Y,V,J){dt.assignTeam(F,V),console.log(`Handoff: Team ${F} from ${Y} to ${V}`,J),S(x,null)}function u(){try{S(_,null);const F=dt.importCoverageStatus(e(b),"merge");if(F.success){try{const Y=JSON.parse(e(b));Y.coverageStatus&&Object.entries(Y.coverageStatus).forEach(([V,J])=>{Qe.setTeamStatus(V,J)})}catch(Y){console.error("Failed to import coverage status:",Y)}S(f,!1),S(b,""),alert("Coverage status imported successfully!")}else S(_,F.error||"Import failed")}catch(F){S(_,F instanceof Error?F.message:"Unknown error")}}le(()=>(C(v()),Qe),()=>{S(t,(()=>{const F=new Map;return v().forEach(Y=>{const V=Ye(Y);V&&F.set(V,Qe.getTeamStatus(V))}),F})())}),le(()=>(C(v()),dt),()=>{S(n,(()=>{const F=new Map;return v().forEach(Y=>{const V=Ye(Y);V&&(F.has(V)||F.set(V,{teamId:V,status:Qe.getTeamStatus(V),assignment:dt.getTeamAssignment(V),matches:[]}),F.get(V).matches.push(Y))}),F})())}),le(()=>e(n),()=>{S(i,(()=>{const F=e(n).size,Y=Array.from(e(n).values()).filter(Z=>Z.assignment!==null).length,V=F-Y,J=new Map;Array.from(e(n).values()).forEach(Z=>{Z.assignment&&(J.has(Z.teamId)||J.set(Z.teamId,[]),J.get(Z.teamId).push(Z.assignment))});const Me=new Map;return Array.from(e(n).values()).forEach(Z=>{if(Z.assignment){const he=Me.get(Z.assignment)||{covered:0,partiallyCovered:0,planned:0,uncovered:0};Z.status==="covered"?he.covered++:Z.status==="partially-covered"?he.partiallyCovered++:Z.status==="planned"?he.planned++:he.uncovered++,Me.set(Z.assignment,he)}}),{totalTeams:F,assignedTeams:Y,unassignedTeams:V,coverageByMember:Me,assignmentConflicts:J}})())}),le(()=>e(n),()=>{S(l,(()=>{const F=new Map;return Array.from(e(n).values()).forEach(Y=>{const V=Y.assignment||"unassigned";F.has(V)||F.set(V,[]),F.get(V).push(Y)}),F})())}),Ut(),Rt();var m=kd(),p=s(m),N=s(p),k=d(s(N),2),E=s(k);E.__click=g;var B=d(E,2);B.__click=T;var ie=d(B,2);ie.__click=()=>S(f,!0),o(k),o(N),vr(2),o(p);var U=d(p,2);{var ve=F=>{var Y=_d(),V=s(Y),J=s(V),Me=d(s(J),2);Me.__click=()=>{S(f,!1),S(b,""),S(_,null)},o(J);var Z=d(J,2);Pr(Z);var he=d(Z,2);{var Oe=L=>{var z=hd(),xe=s(z,!0);o(z),W(()=>w(xe,e(_))),h(L,z)};O(he,L=>{e(_)&&L(Oe)})}var Ve=d(he,2),I=s(Ve);I.__click=u;var X=d(I,2);X.__click=()=>{S(f,!1),S(b,""),S(_,null)},o(Ve),o(V),o(Y),ir(Z,()=>e(b),L=>S(b,L)),h(F,Y)};O(U,F=>{e(f)&&F(ve)})}var ue=d(U,2),Q=s(ue),De=d(s(Q),2),Te=s(De,!0);o(De),o(Q);var Re=d(Q,2),Ue=d(s(Re),2),Ne=s(Ue,!0);o(Ue),o(Re);var Fe=d(Re,2),je=d(s(Fe),2),K=s(je,!0);o(je),o(Fe),o(ue);var Ie=d(ue,2);{var Ce=F=>{var Y=Sd(),V=d(s(Y),2);st(V,5,()=>(C(dt),c(()=>dt.members)),ot,(J,Me)=>{const Z=ee(()=>(e(i),e(Me),c(()=>e(i).coverageByMember.get(e(Me).id)||{covered:0,partiallyCovered:0,planned:0,uncovered:0}))),he=ee(()=>(C(e(Z)),c(()=>e(Z).covered+e(Z).partiallyCovered+e(Z).planned+e(Z).uncovered)));var Oe=yd(),Ve=s(Oe),I=d(Ve,2),X=s(I),L=s(X,!0);o(X);var z=d(X,2),xe=s(z);o(z),o(I),o(Oe),W(()=>{Ot(Ve,`background-color: ${e(Me),c(()=>e(Me).color)??""}`),w(L,(e(Me),c(()=>e(Me).name))),w(xe,`${e(he)??""} team${e(he)!==1?"s":""} â¢ ${C(e(Z)),c(()=>e(Z).covered)??""} covered â¢ ${C(e(Z)),c(()=>e(Z).planned)??""} planned`)}),h(J,Oe)}),o(V),o(Y),h(F,Y)};O(Ie,F=>{C(dt),c(()=>dt.members.length>0)&&F(Ce)})}var R=d(Ie,2),P=d(s(R),2);{var y=F=>{var Y=Md(),V=s(Y),J=s(V);o(V);var Me=d(V,2);st(Me,5,()=>(e(l),c(()=>e(l).get("unassigned"))),ot,(Z,he)=>{var Oe=Td(),Ve=s(Oe),I=s(Ve),X=d(I,2),L=s(X);o(X);var z=d(X,2),xe=s(z);o(z),o(Ve);var se=d(Ve,2);se.__change=ye=>{ye.target.value&&dt.assignTeam(e(he).teamId,ye.target.value)};var _e=s(se);_e.value=_e.__value="";var ae=d(_e);st(ae,1,()=>(C(dt),c(()=>dt.members)),ot,(ye,$e)=>{var He=wd(),Je=s(He,!0);o(He);var me={};W(()=>{w(Je,(e($e),c(()=>e($e).name))),me!==(me=(e($e),c(()=>e($e).id)))&&(He.value=(He.__value=(e($e),c(()=>e($e).id)))??"")}),h(ye,He)}),o(se),se.value=se.__value="",o(Oe),W(()=>{Pe(I,1,`w-2 h-2 rounded ${e(he),c(()=>e(he).status==="covered"?"bg-green-500":e(he).status==="partially-covered"?"bg-[#f59e0b]":e(he).status==="planned"?"bg-[#eab308]":"bg-[#808593]")??""}`),w(L,`Team ${e(he),c(()=>e(he).teamId)??""}`),w(xe,`(${e(he),c(()=>e(he).matches.length)??""} matches)`)}),h(Z,Oe)}),o(Me),o(Y),W(Z=>w(J,`Unassigned (${Z??""})`),[()=>(e(l),c(()=>e(l).get("unassigned").length))]),h(F,Y)};O(P,F=>{e(l),c(()=>e(l).has("unassigned"))&&F(y)})}var D=d(P,2);st(D,1,()=>(C(dt),c(()=>dt.members)),ot,(F,Y)=>{const V=ee(()=>(e(l),e(Y),c(()=>e(l).get(e(Y).id)||[])));var J=kt(),Me=vt(J);{var Z=he=>{var Oe=$d(),Ve=s(Oe),I=s(Ve),X=d(I,2),L=s(X);o(X),o(Ve);var z=d(Ve,2);st(z,5,()=>e(V),ot,(xe,se)=>{var _e=Cd(),ae=s(_e),ye=s(ae),$e=d(ye,2),He=s($e);o($e);var Je=d($e,2),me=s(Je);o(Je),o(ae);var ke=d(ae,2),Ee=s(ke);Ee.__click=()=>S(x,{teamId:e(se).teamId,fromMemberId:e(Y).id});var j=d(Ee,2);j.__click=()=>dt.unassignTeam(e(se).teamId),o(ke),o(_e),W(()=>{Pe(ye,1,`w-2 h-2 rounded ${e(se),c(()=>e(se).status==="covered"?"bg-green-500":e(se).status==="partially-covered"?"bg-[#f59e0b]":e(se).status==="planned"?"bg-[#eab308]":"bg-[#808593]")??""}`),w(He,`Team ${e(se),c(()=>e(se).teamId)??""}`),w(me,`(${e(se),c(()=>e(se).matches.length)??""} matches)`)}),h(xe,_e)}),o(z),o(Oe),W(()=>{Ot(I,`background-color: ${e(Y),c(()=>e(Y).color)??""}`),w(L,`${e(Y),c(()=>e(Y).name)??""} (${C(e(V)),c(()=>e(V).length)??""})`)}),h(he,Oe)};O(Me,he=>{C(e(V)),c(()=>e(V).length>0)&&he(Z)})}h(F,J)}),o(R);var oe=d(R,2);{var re=F=>{pd(F,{get teamId(){return e(x),c(()=>e(x).teamId)},get fromMemberId(){return e(x),c(()=>e(x).fromMemberId)},onClose:()=>S(x,null),onHandoff:(Y,V)=>M(e(x).teamId,e(x).fromMemberId,Y,V)})};O(oe,F=>{e(x)&&F(re)})}o(m),W(()=>{w(Te,(e(i),c(()=>e(i).totalTeams))),w(Ne,(e(i),c(()=>e(i).assignedTeams))),w(K,(e(i),c(()=>e(i).unassignedTeams)))}),h(r,m),Ft()}Yt(["click","change"]);var Id=$('<span class="ml-2 text-red-400"> </span>'),Ed=$('<div class="flex items-center gap-1 bg-[#3b3c48] rounded-lg p-1 border border-[#454654] mx-4"><button>Plan</button> <button>Analytics</button> <button>Stats</button> <button>Team</button></div>'),Pd=$('<div class="text-center py-12 text-[#9fa2ab] text-sm"><p>No matches selected yet</p> <p class="text-xs text-[#808593] mt-2">Click matches in the timeline or list to add them to your coverage plan</p></div>'),Nd=$('<span class="ml-2 text-[#eab308]"> </span>'),Od=$('<button class="px-2 py-1 text-xs font-medium rounded-lg bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors border border-[#525463]" title="Previous conflict">â Prev</button> <button class="px-2 py-1 text-xs font-medium rounded-lg bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors border border-[#525463]" title="Next conflict">Next â</button>',1),Ad=$('<div class="text-[10px] font-semibold text-[#eab308] px-1.5 py-0.5 rounded bg-[#eab308]/20">ACTIVE</div>'),Fd=$('<div class="flex-shrink-0 text-[10px] font-semibold text-[#eab308] px-1.5 py-0.5 rounded bg-[#eab308]/20">KEEP</div>'),Rd=$('<div class="text-[10px] text-[#808593] mt-0.5"> </div>'),jd=$('<button class="px-2 py-1 text-[10px] font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Remove</button>'),Ld=$('<div><!> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="text-xs font-semibold text-[#f8f8f9]"> </span> <span class="text-xs text-[#facc15] font-medium"> </span> <span class="text-xs text-[#c0c2c8]"> </span></div> <!></div> <!></div>'),Wd=$('<div><div class="flex items-center gap-2 mb-2"><div class="text-xs font-medium text-red-400"> </div> <!></div> <div class="space-y-2"></div></div>'),Ud=$('<div class="border border-red-800/50 rounded-lg bg-red-950/10 p-4"><div class="flex items-center justify-between mb-3"><div><h4 class="text-sm font-semibold text-red-400">â ï¸ Conflicts Detected</h4> <p class="text-xs text-[#9fa2ab] mt-0.5"> <!></p></div> <div class="flex items-center gap-2"><!> <button class="px-3 py-1.5 text-xs font-medium rounded-lg bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Auto-Resolve</button></div></div> <div class="space-y-3"></div></div>'),Bd=$('<span class="text-[10px] px-1.5 py-0.5 rounded bg-[#eab308]/20 text-[#eab308] border border-[#eab308]/50">Uncovered</span>'),Yd=$('<div class="flex items-center gap-2 px-2 py-1.5 rounded bg-green-950/20 border border-green-500/30"><div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="text-xs font-semibold text-[#f8f8f9]"> </span> <span class="text-xs text-green-400 font-medium"> </span> <span class="text-xs text-[#c0c2c8]"> </span> <!></div> <div class="text-[10px] text-[#808593] mt-0.5"> </div></div> <button class="px-2 py-1 text-xs font-medium rounded transition-colors bg-green-500/20 text-green-400 border border-green-500/50 hover:bg-green-500/30">Add</button></div>'),Hd=$('<div class="border border-green-500/50 rounded-lg bg-green-950/10 p-4"><div class="flex items-center justify-between mb-3"><div><h4 class="text-sm font-semibold text-green-400">ð¡ Coverage Opportunities</h4> <p class="text-xs text-[#9fa2ab] mt-0.5"> </p></div></div> <div class="space-y-2"></div></div>'),Jd=$('<div class="flex-shrink-0 text-[10px] font-semibold text-red-400 px-1.5 py-0.5 rounded bg-red-950/50">CONFLICT</div>'),Vd=$("<div></div>"),Gd=$('<div class="fixed inset-0 z-40"></div> <div class="absolute right-0 top-full mt-1 z-50"><!></div>',1),qd=$('<div class="relative flex-shrink-0"><button title="Set coverage status"> </button> <!></div>'),zd=$('<div><button aria-label="Remove from plan"><svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></button> <!> <div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <div class="flex-shrink-0 w-24 text-sm font-bold text-[#facc15]"> </div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><div class="text-sm font-bold text-[#f8f8f9]"> </div> <!></div> <div class="text-xs text-[#c0c2c8] truncate"> </div></div> <!> <div class="flex-shrink-0"><span class="px-2 py-0.5 text-[10px] font-semibold rounded"> </span></div></div>'),Xd=$('<div class="space-y-2"><div class="flex items-center gap-2 pb-2 border-b border-[#454654]"><h4 class="text-sm font-semibold text-[#f8f8f9]"> </h4> <span class="text-xs text-[#808593]"> </span></div> <!></div>'),Qd=$('<div class="space-y-4"><!> <!> <div class="space-y-4"></div></div>'),Kd=$('<div class="space-y-4"><!> <!></div>'),Zd=$('<div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 p-4 border-t border-[#454654] bg-[#454654]/50"><div class="flex items-center gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]">Mark All as Planned</button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]">Mark All as Covered</button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors text-[#9fa2ab] hover:text-[#f8f8f9] hover:bg-[#454654]">Clear Plan</button></div> <div class="flex items-center gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]" title="Copy plan to clipboard">Copy</button> <div class="flex items-center gap-1 bg-[#3b3c48] rounded-lg p-1 border border-[#454654]"><button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as JSON">JSON</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as CSV">CSV</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as Text">TXT</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as Calendar (ICS)">ð ICS</button></div></div></div>'),el=$('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"><div class="relative w-full max-w-3xl max-h-[90vh] border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden flex flex-col"><div class="flex items-center justify-between p-4 border-b border-[#454654] bg-[#454654]/50"><div class="flex-1"><h3 class="text-base sm:text-lg font-semibold text-[#f8f8f9]">My Coverage Plan</h3> <div class="flex items-center gap-3 mt-1 flex-wrap"><p class="text-xs text-[#9fa2ab]"> <!> <!></p> <select class="px-2 py-1 text-xs rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none"><option>All Status</option><option>Uncovered</option><option>Planned</option><option>Covered</option></select></div></div> <!> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-4"><!></div> <!></div></div>');function tl(r,a){At(a,!1);const t=A(),n=A(),i=A(),l=A(),v=A(),f=A(),b=A();let _=qe(a,"matches",8),x=qe(a,"onClose",8),g=A("plan"),T=A("all"),M=A(null),u=A(0),m=A([]);function p(I){return(e(n).get(I)||[]).map(L=>e(t).find(z=>z.MatchId===L)).filter(Boolean)}function N(){e(l).length>0&&S(u,(e(u)+1)%e(l).length)}function k(){e(l).length>0&&S(u,(e(u)-1+e(l).length)%e(l).length)}function E(I){return I.InvolvedTeam==="first"?I.SecondTeamText:I.InvolvedTeam==="second"?I.FirstTeamText:`${I.FirstTeamText} vs ${I.SecondTeamText}`}function B(){var se;const I={plan:{createdAt:new Date().toISOString(),totalMatches:e(t).length,totalCoverageTime:e(v),conflicts:e(l).length},matches:e(t).map(_e=>({MatchId:_e.MatchId,Date:Mt(_e.ScheduledStartDateTime),Time:ze(_e.ScheduledStartDateTime),Court:_e.CourtName,Team:Ye(_e)||_e.Division.CodeAlias,Opponent:E(_e),Division:_e.Division.CodeAlias,FirstTeam:_e.FirstTeamText,SecondTeam:_e.SecondTeamText,StartTime:new Date(_e.ScheduledStartDateTime).toISOString(),EndTime:new Date(_e.ScheduledEndDateTime).toISOString()}))},X=JSON.stringify(I,null,2),L=new Blob([X],{type:"application/json"}),z=URL.createObjectURL(L),xe=document.createElement("a");xe.href=z,xe.download=`coverage-plan-${Mt(((se=e(t)[0])==null?void 0:se.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.json`,xe.click(),URL.revokeObjectURL(z)}function ie(){var _e;const I=["Date","Time","Court","Team","Opponent","Division","First Team","Second Team","Start Time","End Time"],X=e(t).map(ae=>[Mt(ae.ScheduledStartDateTime),ze(ae.ScheduledStartDateTime),ae.CourtName,Ye(ae)||ae.Division.CodeAlias,E(ae),ae.Division.CodeAlias,ae.FirstTeamText,ae.SecondTeamText,new Date(ae.ScheduledStartDateTime).toISOString(),new Date(ae.ScheduledEndDateTime).toISOString()]),L=[I.join(","),...X.map(ae=>ae.map(ye=>`"${ye}"`).join(","))].join(`
`),z=new Blob([L],{type:"text/csv"}),xe=URL.createObjectURL(z),se=document.createElement("a");se.href=xe,se.download=`coverage-plan-${Mt(((_e=e(t)[0])==null?void 0:_e.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.csv`,se.click(),URL.revokeObjectURL(xe)}function U(){var xe;let I=`COVERAGE PLAN
`;I+=`${"=".repeat(50)}

`,I+=`Total Matches: ${e(t).length}
`,I+=`Total Coverage Time: ${Math.floor(e(v)/60)}h ${e(v)%60}m
`,e(l).length>0&&(I+=`Conflicts: ${e(l).length}
`),I+=`
`,e(b).forEach(se=>{const _e=e(f)[se];I+=`${se}
`,I+=`${"-".repeat(50)}
`,_e.forEach(ae=>{const ye=Ye(ae),$e=E(ae);I+=`${ze(ae.ScheduledStartDateTime)} | ${ae.CourtName} | ${ye||ae.Division.CodeAlias} vs ${$e}
`}),I+=`
`});const X=new Blob([I],{type:"text/plain"}),L=URL.createObjectURL(X),z=document.createElement("a");z.href=L,z.download=`coverage-plan-${Mt(((xe=e(t)[0])==null?void 0:xe.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.txt`,z.click(),URL.revokeObjectURL(L)}function ve(){var xe;const I=Uc(e(t),Ye,E,"Coverage Plan"),X=new Blob([I],{type:"text/calendar;charset=utf-8"}),L=URL.createObjectURL(X),z=document.createElement("a");z.href=L,z.download=`coverage-plan-${Mt(((xe=e(t)[0])==null?void 0:xe.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.ics`,z.click(),URL.revokeObjectURL(L)}async function ue(){let I=`COVERAGE PLAN
`;I+=`${"=".repeat(50)}

`,I+=`Total Matches: ${e(t).length}
`,I+=`Total Coverage Time: ${Math.floor(e(v)/60)}h ${e(v)%60}m
`,e(l).length>0&&(I+=`Conflicts: ${e(l).length}
`),I+=`
`,e(b).forEach(X=>{const L=e(f)[X];I+=`${X}
`,I+=`${"-".repeat(50)}
`,L.forEach(z=>{const xe=Ye(z),se=E(z);I+=`${ze(z.ScheduledStartDateTime)} | ${z.CourtName} | ${xe||z.Division.CodeAlias} vs ${se}
`}),I+=`
`});try{await navigator.clipboard.writeText(I),alert("Coverage plan copied to clipboard!")}catch(X){console.error("Failed to copy to clipboard:",X),alert("Failed to copy to clipboard. Please try exporting instead.")}}le(()=>(C(_()),Qe),()=>{if(_().length>0){const I=new Map,X=Vt(yt);_().forEach(L=>{const z=Ye(L);if(!z)return;const xe=I.get(z)||{total:0,inPlan:0};xe.total++,X.has(L.MatchId)&&xe.inPlan++,I.set(z,xe)}),I.forEach((L,z)=>{Qe.updateFromPlan(z,L.inPlan,L.total)})}}),le(()=>(C(_()),e(T),Qe),()=>{S(t,(()=>{const I=Vt(yt);let X=_().filter(L=>I.has(L.MatchId)).sort((L,z)=>L.ScheduledStartDateTime-z.ScheduledStartDateTime);return e(T)!=="all"&&(X=X.filter(L=>{const z=Ye(L);return z?Qe.getTeamStatus(z)===e(T):!1})),X})())}),le(()=>e(t),()=>{S(n,Ar(e(t)))}),le(()=>(C(_()),Ta),()=>{S(i,(()=>{const I=Ar(_()),L=Vt(yt),z=new Map;return _().forEach(xe=>{const se=Ye(xe);se&&z.set(se,Qe.getTeamStatus(se))}),Ta(_(),L,I,z,Ye,{preferUncovered:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:5})})())}),le(()=>(e(n),e(t)),()=>{S(l,(()=>{if(e(n).size===0)return[];const I=[],X=new Set;return e(t).forEach(L=>{if(X.has(L.MatchId))return;const z=e(n).get(L.MatchId);if(!z||z.length===0)return;const xe=[L,...z.map(se=>e(t).find(_e=>_e.MatchId===se)).filter(Boolean)];xe.forEach(se=>X.add(se.MatchId)),I.push({matches:xe.sort((se,_e)=>se.ScheduledStartDateTime-_e.ScheduledStartDateTime),conflictCount:xe.length})}),I})())}),le(()=>(e(l),e(u)),()=>{e(l).length>0&&e(u)>=e(l).length?S(u,0):e(l).length===0&&S(u,0)}),le(()=>(e(l),e(m),e(u)),()=>{e(l).length>0&&e(m)[e(u)]&&setTimeout(()=>{var I;(I=e(m)[e(u)])==null||I.scrollIntoView({behavior:"smooth",block:"center"})},100)}),le(()=>e(t),()=>{S(v,(()=>{if(e(t).length===0)return 0;const I=Math.min(...e(t).map(L=>L.ScheduledStartDateTime)),X=Math.max(...e(t).map(L=>L.ScheduledEndDateTime));return Math.floor((X-I)/6e4)})())}),le(()=>(e(t),Mt),()=>{S(f,(()=>{const I={};return e(t).forEach(X=>{const L=Mt(X.ScheduledStartDateTime);I[L]||(I[L]=[]),I[L].push(X)}),I})())}),le(()=>e(f),()=>{S(b,Object.keys(e(f)).sort((I,X)=>{const L=new Date(I).getTime(),z=new Date(X).getTime();return L-z}))}),Ut(),Rt();var Q=el(),De=s(Q),Te=s(De),Re=s(Te),Ue=d(s(Re),2),Ne=s(Ue),Fe=s(Ne),je=d(Fe);{var K=I=>{var X=tn();W(L=>w(X,`â¢ ${L??""}h ${e(v)%60}m coverage`),[()=>(e(v),c(()=>Math.floor(e(v)/60)))]),h(I,X)};O(je,I=>{e(v)>0&&I(K)})}var Ie=d(je,2);{var Ce=I=>{var X=Id(),L=s(X);o(X),W(()=>w(L,`â¢ ${e(l),c(()=>e(l).length)??""} conflict${e(l),c(()=>e(l).length!==1?"s":"")??""}`)),h(I,X)};O(Ie,I=>{e(l),c(()=>e(l).length>0)&&I(Ce)})}o(Ne);var R=d(Ne,2);R.__change=I=>S(T,I.target.value);var P=s(R);P.value=P.__value="all";var y=d(P);y.value=y.__value="not-covered";var D=d(y);D.value=D.__value="planned";var oe=d(D);oe.value=oe.__value="covered",o(R);var re;pr(R),o(Ue),o(Re);var F=d(Re,2);{var Y=I=>{var X=Ed(),L=s(X);L.__click=()=>S(g,"plan");var z=d(L,2);z.__click=()=>S(g,"analytics");var xe=d(z,2);xe.__click=()=>S(g,"stats");var se=d(xe,2);se.__click=()=>S(g,"coordination"),o(X),W(()=>{Pe(L,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(g)==="plan"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),Pe(z,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(g)==="analytics"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),Pe(xe,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(g)==="stats"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),Pe(se,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(g)==="coordination"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),h(I,X)};O(F,I=>{e(t),c(()=>e(t).length>0)&&I(Y)})}var V=d(F,2);V.__click=function(...I){var X;(X=x())==null||X.apply(this,I)},o(Te);var J=d(Te,2),Me=s(J);{var Z=I=>{var X=kt(),L=vt(X);{var z=se=>{var _e=Pd();h(se,_e)},xe=se=>{var _e=Qd(),ae=s(_e);{var ye=me=>{var ke=Ud(),Ee=s(ke),j=s(Ee),G=d(s(j),2),be=s(G),pe=d(be);{var ge=q=>{var ne=Nd(),fe=s(ne);o(ne),W(()=>w(fe,`â¢ Conflict ${e(u)+1} of ${e(l),c(()=>e(l).length)??""}`)),h(q,ne)};O(pe,q=>{e(l),c(()=>e(l).length>0)&&q(ge)})}o(G),o(j);var we=d(j,2),te=s(we);{var Ae=q=>{var ne=Od(),fe=vt(ne);fe.__click=k;var Le=d(fe,2);Le.__click=N,h(q,ne)};O(te,q=>{e(l),c(()=>e(l).length>1)&&q(Ae)})}var H=d(te,2);H.__click=()=>{e(l).forEach(q=>{q.matches.slice(1).forEach(ne=>{yt.deselectMatch(ne.MatchId)})})},o(we),o(Ee);var de=d(Ee,2);st(de,5,()=>e(l),ot,(q,ne,fe)=>{var Le=Wd(),We=s(Le),rt=s(We),Xe=s(rt);o(rt);var Se=d(rt,2);{var nt=ut=>{var Ge=Ad();h(ut,Ge)};O(Se,ut=>{fe===e(u)&&ut(nt)})}o(We);var tt=d(We,2);st(tt,5,()=>(e(ne),c(()=>e(ne).matches)),ot,(ut,Ge,Ze)=>{const ce=ee(()=>(C(Ye),e(Ge),c(()=>Ye(e(Ge))))),Be=ee(()=>(e(Ge),c(()=>p(e(Ge).MatchId)))),lt=ee(()=>Ze===0);var Ke=Ld(),ht=s(Ke);{var It=St=>{var jt=Fd();h(St,jt)};O(ht,St=>{e(lt)&&St(It)})}var pt=d(ht,2),it=s(pt),et=s(it),_t=s(et,!0);o(et);var at=d(et,2),gt=s(at,!0);o(at);var ft=d(at,2),mt=s(ft,!0);o(ft),o(it);var Dt=d(it,2);{var ar=St=>{var jt=Rd(),Lt=s(jt);o(jt),W(()=>w(Lt,`Conflicts with ${C(e(Be)),c(()=>e(Be).length)??""} other match${C(e(Be)),c(()=>e(Be).length!==1?"es":"")??""}`)),h(St,jt)};O(Dt,St=>{C(e(Be)),c(()=>e(Be).length>0)&&St(ar)})}o(pt);var Qt=d(pt,2);{var Et=St=>{var jt=jd();jt.__click=()=>yt.deselectMatch(e(Ge).MatchId),h(St,jt)};O(Qt,St=>{e(lt)||St(Et)})}o(Ke),W(St=>{Pe(Ke,1,`flex items-center gap-2 px-2 py-1.5 rounded ${e(lt)?"bg-[#eab308]/10 border border-[#eab308]/30":"bg-[#454654]/50"}`),w(_t,St),w(gt,(e(Ge),c(()=>e(Ge).CourtName))),w(mt,(C(e(ce)),e(Ge),c(()=>e(ce)||e(Ge).Division.CodeAlias)))},[()=>(C(ze),e(Ge),c(()=>ze(e(Ge).ScheduledStartDateTime)))]),h(ut,Ke)}),o(tt),o(Le),lo(Le,(ut,Ge)=>co(m,e(m)[Ge]=ut),ut=>{var Ge;return(Ge=e(m))==null?void 0:Ge[ut]},()=>[fe]),W(()=>{Pe(Le,1,`border rounded p-3 transition-all ${fe===e(u)?"border-[#eab308] bg-[#eab308]/5":"border-red-800/30 bg-[#3b3c48]/50"}`),w(Xe,`Conflict Group ${fe+1}: ${e(ne),c(()=>e(ne).conflictCount)??""} overlapping match${e(ne),c(()=>e(ne).conflictCount!==1?"es":"")??""}`)}),h(q,Le)}),o(de),o(ke),W(()=>w(be,`${e(l),c(()=>e(l).length)??""} conflict group${e(l),c(()=>e(l).length!==1?"s":"")??""} in your plan `)),h(me,ke)};O(ae,me=>{e(l),c(()=>e(l).length>0)&&me(ye)})}var $e=d(ae,2);{var He=me=>{var ke=Hd(),Ee=s(ke),j=s(Ee),G=d(s(j),2),be=s(G);o(G),o(j),o(Ee);var pe=d(Ee,2);st(pe,5,()=>e(i),ot,(ge,we)=>{const te=ee(()=>(e(we),c(()=>e(we).match))),Ae=ee(()=>(C(Ye),C(e(te)),c(()=>Ye(e(te))))),H=ee(()=>(C(e(Ae)),C(Qe),c(()=>e(Ae)?Qe.getTeamStatus(e(Ae)):"not-covered")));var de=Yd(),q=s(de),ne=s(q),fe=s(ne),Le=s(fe,!0);o(fe);var We=d(fe,2),rt=s(We,!0);o(We);var Xe=d(We,2),Se=s(Xe,!0);o(Xe);var nt=d(Xe,2);{var tt=ce=>{var Be=Bd();h(ce,Be)};O(nt,ce=>{e(H)==="not-covered"&&ce(tt)})}o(ne);var ut=d(ne,2),Ge=s(ut,!0);o(ut),o(q);var Ze=d(q,2);Ze.__click=()=>yt.selectMatch(e(te).MatchId),o(de),W(ce=>{w(Le,ce),w(rt,(C(e(te)),c(()=>e(te).CourtName))),w(Se,(C(e(Ae)),C(e(te)),c(()=>e(Ae)||e(te).Division.CodeAlias))),w(Ge,(e(we),c(()=>e(we).reason)))},[()=>(C(ze),C(e(te)),c(()=>ze(e(te).ScheduledStartDateTime)))]),h(ge,de)}),o(pe),o(ke),W(()=>w(be,`${e(i),c(()=>e(i).length)??""} suggestion${e(i),c(()=>e(i).length!==1?"s":"")??""} (prioritizing uncovered teams)`)),h(me,ke)};O($e,me=>{e(i),c(()=>e(i).length>0)&&me(He)})}var Je=d($e,2);st(Je,5,()=>e(b),ot,(me,ke)=>{const Ee=ee(()=>(e(f),e(ke),c(()=>e(f)[e(ke)])));var j=Xd(),G=s(j),be=s(G),pe=s(be,!0);o(be);var ge=d(be,2),we=s(ge);o(ge),o(G);var te=d(G,2);st(te,1,()=>e(Ee),ot,(Ae,H)=>{const de=ee(()=>(C(Ye),e(H),c(()=>Ye(e(H))))),q=ee(()=>(e(H),c(()=>E(e(H))))),ne=ee(()=>(e(n),e(H),c(()=>e(n).has(e(H).MatchId))));var fe=zd(),Le=s(fe);Le.__click=()=>yt.toggleMatch(e(H).MatchId);var We=s(Le);o(Le);var rt=d(Le,2);{var Xe=gt=>{var ft=Jd();h(gt,ft)};O(rt,gt=>{e(ne)&&gt(Xe)})}var Se=d(rt,2),nt=s(Se,!0);o(Se);var tt=d(Se,2),ut=s(tt,!0);o(tt);var Ge=d(tt,2),Ze=s(Ge),ce=s(Ze),Be=s(ce,!0);o(ce);var lt=d(ce,2);{var Ke=gt=>{const ft=ee(()=>(C(Qe),C(e(de)),c(()=>Qe.getTeamStatus(e(de)))));var mt=Vd();W(()=>{Pe(mt,1,`w-2 h-2 rounded ${e(ft)==="covered"?"bg-green-500":e(ft)==="partially-covered"?"bg-[#f59e0b]":e(ft)==="planned"?"bg-[#eab308]":"bg-[#808593]"}`),$t(mt,"title",`Status: ${e(ft)??""}`)}),h(gt,mt)};O(lt,gt=>{e(de)&&gt(Ke)})}o(Ze);var ht=d(Ze,2),It=s(ht);o(ht),o(Ge);var pt=d(Ge,2);{var it=gt=>{var ft=qd(),mt=s(ft);mt.__click=Et=>{Et.stopPropagation(),S(M,e(M)===e(de)?null:e(de))};var Dt=s(mt,!0);o(mt);var ar=d(mt,2);{var Qt=Et=>{var St=Gd(),jt=vt(St);jt.__click=()=>S(M,null);var Lt=d(jt,2),hr=s(Lt);{let _r=ee(()=>(C(Qe),C(e(de)),c(()=>Qe.getTeamStatus(e(de)))));Ia(hr,{get teamId(){return e(de)},get currentStatus(){return e(_r)},onStatusChange:yr=>{Qe.setTeamStatus(e(de),yr),S(M,null)},onClose:()=>S(M,null)})}o(Lt),h(Et,St)};O(ar,Et=>{e(M)===e(de)&&Et(Qt)})}o(ft),W(Et=>{Pe(mt,1,`px-2 py-1 text-xs rounded transition-colors ${e(M)===e(de)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]"}`),w(Dt,Et)},[()=>(C(Qe),C(e(de)),c(()=>(()=>{const Et=Qe.getTeamStatus(e(de));return Et==="covered"?"â":Et==="partially-covered"?"â":Et==="planned"?"ð":"â"})()))]),h(gt,ft)};O(pt,gt=>{e(de)&&gt(it)})}var et=d(pt,2),_t=s(et),at=s(_t,!0);o(_t),o(et),o(fe),W(gt=>{Pe(fe,1,`flex items-center gap-3 px-3 py-2.5 rounded border ${e(ne)?"border-red-800/50 bg-red-950/10":"border-[#eab308]/50 bg-[#eab308]/5"}`),Pe(Le,1,`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center hover:opacity-80 transition-colors ${e(ne)?"border-red-800/50 bg-red-950/20":"border-[#eab308] bg-[#eab308]/20"}`),Pe(We,0,`w-3 h-3 ${e(ne)?"text-red-400":"text-[#facc15]"}`),w(nt,gt),w(ut,(e(H),c(()=>e(H).CourtName))),w(Be,(C(e(de)),e(H),c(()=>e(de)||e(H).Division.CodeAlias))),w(It,`vs ${e(q)??""}`),Ot(_t,`background-color: ${e(H),c(()=>e(H).Division.ColorHex)??""}20; color: ${e(H),c(()=>e(H).Division.ColorHex)??""}; border: 1px solid ${e(H),c(()=>e(H).Division.ColorHex)??""}40;`),w(at,(e(H),c(()=>e(H).Division.CodeAlias)))},[()=>(C(ze),e(H),c(()=>ze(e(H).ScheduledStartDateTime)))]),h(Ae,fe)}),o(j),W(()=>{w(pe,e(ke)),w(we,`(${C(e(Ee)),c(()=>e(Ee).length)??""} match${C(e(Ee)),c(()=>e(Ee).length!==1?"es":"")??""})`)}),h(me,j)}),o(Je),o(_e),h(se,_e)};O(L,se=>{e(t),c(()=>e(t).length===0)?se(z):se(xe,!1)})}h(I,X)},he=I=>{var X=kt(),L=vt(X);{var z=se=>{Gc(se,{get matches(){return _()}})},xe=se=>{var _e=kt(),ae=vt(_e);{var ye=He=>{ed(He,{get matches(){return _()}})},$e=He=>{var Je=Kd(),me=s(Je);vd(me,{});var ke=d(me,2);Dd(ke,{get matches(){return _()}}),o(Je),h(He,Je)};O(ae,He=>{e(g)==="stats"?He(ye):He($e,!1)},!0)}h(se,_e)};O(L,se=>{e(g)==="analytics"?se(z):se(xe,!1)},!0)}h(I,X)};O(Me,I=>{e(g)==="plan"?I(Z):I(he,!1)})}o(J);var Oe=d(J,2);{var Ve=I=>{var X=Zd(),L=s(X),z=s(L);z.__click=()=>{e(t).forEach(ke=>{const Ee=Ye(ke);Ee&&Qe.setTeamStatus(Ee,"planned")}),alert("All matches marked as Planned")};var xe=d(z,2);xe.__click=()=>{e(t).forEach(ke=>{const Ee=Ye(ke);Ee&&Qe.setTeamStatus(Ee,"covered")}),alert("All matches marked as Covered")};var se=d(xe,2);se.__click=()=>yt.clearPlan(),o(L);var _e=d(L,2),ae=s(_e);ae.__click=ue;var ye=d(ae,2),$e=s(ye);$e.__click=B;var He=d($e,2);He.__click=ie;var Je=d(He,2);Je.__click=U;var me=d(Je,2);me.__click=ve,o(ye),o(_e),o(X),h(I,X)};O(Oe,I=>{e(t),e(g),c(()=>e(t).length>0&&e(g)==="plan")&&I(Ve)})}o(De),o(Q),W(()=>{w(Fe,`${e(t),c(()=>e(t).length)??""} match${e(t),c(()=>e(t).length!==1?"es":"")??""} selected `),re!==(re=e(T))&&(R.value=(R.__value=e(T))??"",fr(R,e(T)))}),h(r,Q),Ft()}Yt(["change","click"]);var rl=$('<button class="px-3 py-1 text-xs font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Delete</button>'),al=$('<div class="mt-3 pt-3 border-t border-[#454654]"><textarea placeholder="Add notes about this match..." class="w-full px-3 py-2 text-sm bg-[#454654] border border-[#525463] rounded text-[#c0c2c8] focus:border-[#eab308] focus:outline-none resize-none"></textarea> <div class="flex items-center gap-2 mt-2"><button class="px-3 py-1 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors">Save</button> <!> <button class="px-3 py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors">Cancel</button></div></div>'),nl=$('<div class="mt-3 pt-3 border-t border-[#454654]"><div class="text-xs text-[#9fa2ab] mb-1">Note:</div> <div class="text-sm text-[#c0c2c8] whitespace-pre-wrap"> </div></div>'),ol=$('<div class="px-4 py-3 rounded-lg border-2 border-[#eab308] bg-[#eab308]/10 transition-colors"><div class="flex items-start justify-between mb-2"><div class="flex-1"><div class="flex items-center justify-between mb-2"><div class="text-sm font-semibold text-[#f8f8f9]"> </div> <div class="text-xs font-medium text-[#facc15]"> </div></div> <div class="text-base font-bold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab] mt-1"> </div></div> <button> </button></div> <!></div>'),sl=$('<div><h3 class="text-sm font-semibold text-[#facc15] mb-3 uppercase tracking-wider">Live Now</h3> <div class="space-y-2"></div></div>'),il=$('<button class="px-3 py-1 text-xs font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Delete</button>'),cl=$('<div class="mt-3 pt-3 border-t border-[#454654]"><textarea placeholder="Add notes about this match..." class="w-full px-3 py-2 text-sm bg-[#454654] border border-[#525463] rounded text-[#c0c2c8] focus:border-[#eab308] focus:outline-none resize-none"></textarea> <div class="flex items-center gap-2 mt-2"><button class="px-3 py-1 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors">Save</button> <!> <button class="px-3 py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors">Cancel</button></div></div>'),dl=$('<div class="mt-3 pt-3 border-t border-[#454654]"><div class="text-xs text-[#9fa2ab] mb-1">Note:</div> <div class="text-sm text-[#c0c2c8] whitespace-pre-wrap"> </div></div>'),ll=$('<div class="px-4 py-3 rounded-lg border border-[#454654] bg-[#3b3c48] hover:border-[#525463] transition-colors"><div class="flex items-start justify-between mb-2"><div class="flex-1"><div class="flex items-center justify-between mb-2"><div class="text-sm font-semibold text-[#f8f8f9]"> </div> <div class="text-xs font-medium text-[#facc15]"> </div></div> <div class="text-base font-bold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab] mt-1"> </div></div> <button> </button></div> <!></div>'),vl=$('<div><h3 class="text-sm font-semibold text-[#f8f8f9] mb-3 uppercase tracking-wider">Upcoming Matches</h3> <div class="space-y-2"></div></div>'),ul=$('<button class="px-3 py-1 text-xs font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Delete</button>'),fl=$('<div class="mt-3 pt-3 border-t border-[#454654]"><textarea placeholder="Add notes about this match..." class="w-full px-3 py-2 text-sm bg-[#454654] border border-[#525463] rounded text-[#c0c2c8] focus:border-[#eab308] focus:outline-none resize-none"></textarea> <div class="flex items-center gap-2 mt-2"><button class="px-3 py-1 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors">Save</button> <!> <button class="px-3 py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors">Cancel</button></div></div>'),ml=$('<div class="mt-3 pt-3 border-t border-[#454654]"><div class="text-xs text-[#9fa2ab] mb-1">Note:</div> <div class="text-sm text-[#c0c2c8] whitespace-pre-wrap"> </div></div>'),xl=$('<div class="px-4 py-3 rounded-lg border border-[#454654] bg-[#3b3c48]/50 opacity-75 transition-colors"><div class="flex items-start justify-between mb-2"><div class="flex-1"><div class="flex items-center justify-between mb-2"><div class="text-xs font-semibold text-[#f8f8f9]"> </div> <div class="text-xs font-medium text-[#facc15]"> </div></div> <div class="text-sm font-bold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab] mt-1"> </div></div> <button> </button></div> <!></div>'),bl=$('<div><h3 class="text-sm font-semibold text-[#9fa2ab] mb-3 uppercase tracking-wider">Match History</h3> <div class="space-y-2"></div></div>'),gl=$('<div class="text-center py-12 text-[#9fa2ab] text-sm"> </div>'),pl=$('<div class="space-y-6"><div class="border-b border-[#454654] pb-4"><h2 class="text-xl font-bold text-[#f8f8f9]"> </h2> <div class="text-sm text-[#9fa2ab] mt-1"> </div></div> <!> <!> <!> <!></div>');function hl(r,a){At(a,!1);const t=A(),n=A(),i=A(),l=A();let v=qe(a,"matches",8),f=qe(a,"teamId",8),b=qe(a,"teamName",8),_=qe(a,"eventId",8,"");const x=Sn(_());let g=A(null),T=A("");const M=Date.now();function u(K){return K.InvolvedTeam==="first"?K.SecondTeamText:K.InvolvedTeam==="second"?K.FirstTeamText:`${K.FirstTeamText} vs ${K.SecondTeamText}`}function m(K){S(g,K),S(T,x.getNote(K))}function p(K){x.setNote(K,e(T)),S(g,null),S(T,"")}function N(){S(g,null),S(T,"")}function k(K){x.deleteNote(K),S(g,null)}le(()=>(C(v()),C(f())),()=>{S(t,v().filter(K=>Ye(K)===f()).sort((K,Ie)=>K.ScheduledStartDateTime-Ie.ScheduledStartDateTime))}),le(()=>e(t),()=>{S(n,e(t).filter(K=>K.ScheduledEndDateTime<M))}),le(()=>e(t),()=>{S(i,e(t).filter(K=>K.ScheduledStartDateTime<=M&&K.ScheduledEndDateTime>=M))}),le(()=>e(t),()=>{S(l,e(t).filter(K=>K.ScheduledStartDateTime>M))}),Ut(),Rt();var E=pl(),B=s(E),ie=s(B),U=s(ie,!0);o(ie);var ve=d(ie,2),ue=s(ve);o(ve),o(B);var Q=d(B,2);{var De=K=>{var Ie=sl(),Ce=d(s(Ie),2);st(Ce,5,()=>e(i),ot,(R,P)=>{const y=ee(()=>(e(P),c(()=>x.hasNote(e(P).MatchId)))),D=ee(()=>(e(g),e(P),c(()=>e(g)===e(P).MatchId))),oe=ee(()=>(e(P),c(()=>x.getNote(e(P).MatchId))));var re=ol(),F=s(re),Y=s(F),V=s(Y),J=s(V),Me=s(J,!0);o(J);var Z=d(J,2),he=s(Z,!0);o(Z),o(V);var Oe=d(V,2),Ve=s(Oe);o(Oe);var I=d(Oe,2),X=s(I,!0);o(I),o(Y);var L=d(Y,2);L.__click=()=>e(D)?N():m(e(P).MatchId);var z=s(L,!0);o(L),o(F);var xe=d(F,2);{var se=ae=>{var ye=al(),$e=s(ye);Pr($e),$t($e,"rows",3),Er($e);var He=d($e,2),Je=s(He);Je.__click=()=>p(e(P).MatchId);var me=d(Je,2);{var ke=j=>{var G=rl();G.__click=()=>k(e(P).MatchId),h(j,G)};O(me,j=>{e(y)&&j(ke)})}var Ee=d(me,2);Ee.__click=N,o(He),o(ye),ir($e,()=>e(T),j=>S(T,j)),h(ae,ye)},_e=ae=>{var ye=kt(),$e=vt(ye);{var He=Je=>{var me=nl(),ke=d(s(me),2),Ee=s(ke,!0);o(ke),o(me),W(()=>w(Ee,e(oe))),h(Je,me)};O($e,Je=>{e(y)&&Je(He)},!0)}h(ae,ye)};O(xe,ae=>{e(D)?ae(se):ae(_e,!1)})}o(re),W((ae,ye)=>{w(Me,ae),w(he,(e(P),c(()=>e(P).CourtName))),w(Ve,`vs ${ye??""}`),w(X,(e(P),c(()=>e(P).Division.CodeAlias))),Pe(L,1,`ml-2 px-2 py-1 text-xs rounded transition-colors flex-shrink-0 ${e(y)||e(D)?"bg-[#eab308] text-[#18181b] hover:bg-[#facc15]":"bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] border border-[#525463]"}`),$t(L,"title",e(y)?"Edit note":"Add note"),w(z,e(y)?"ð":"ð")},[()=>(C(ze),e(P),c(()=>ze(e(P).ScheduledStartDateTime))),()=>(e(P),c(()=>u(e(P))))]),h(R,re)}),o(Ce),o(Ie),h(K,Ie)};O(Q,K=>{e(i),c(()=>e(i).length>0)&&K(De)})}var Te=d(Q,2);{var Re=K=>{var Ie=vl(),Ce=d(s(Ie),2);st(Ce,5,()=>e(l),ot,(R,P)=>{const y=ee(()=>(e(P),c(()=>x.hasNote(e(P).MatchId)))),D=ee(()=>(e(g),e(P),c(()=>e(g)===e(P).MatchId))),oe=ee(()=>(e(P),c(()=>x.getNote(e(P).MatchId))));var re=ll(),F=s(re),Y=s(F),V=s(Y),J=s(V),Me=s(J,!0);o(J);var Z=d(J,2),he=s(Z,!0);o(Z),o(V);var Oe=d(V,2),Ve=s(Oe);o(Oe);var I=d(Oe,2),X=s(I,!0);o(I),o(Y);var L=d(Y,2);L.__click=()=>e(D)?N():m(e(P).MatchId);var z=s(L,!0);o(L),o(F);var xe=d(F,2);{var se=ae=>{var ye=cl(),$e=s(ye);Pr($e),$t($e,"rows",3),Er($e);var He=d($e,2),Je=s(He);Je.__click=()=>p(e(P).MatchId);var me=d(Je,2);{var ke=j=>{var G=il();G.__click=()=>k(e(P).MatchId),h(j,G)};O(me,j=>{e(y)&&j(ke)})}var Ee=d(me,2);Ee.__click=N,o(He),o(ye),ir($e,()=>e(T),j=>S(T,j)),h(ae,ye)},_e=ae=>{var ye=kt(),$e=vt(ye);{var He=Je=>{var me=dl(),ke=d(s(me),2),Ee=s(ke,!0);o(ke),o(me),W(()=>w(Ee,e(oe))),h(Je,me)};O($e,Je=>{e(y)&&Je(He)},!0)}h(ae,ye)};O(xe,ae=>{e(D)?ae(se):ae(_e,!1)})}o(re),W((ae,ye)=>{w(Me,ae),w(he,(e(P),c(()=>e(P).CourtName))),w(Ve,`vs ${ye??""}`),w(X,(e(P),c(()=>e(P).Division.CodeAlias))),Pe(L,1,`ml-2 px-2 py-1 text-xs rounded transition-colors flex-shrink-0 ${e(y)||e(D)?"bg-[#eab308] text-[#18181b] hover:bg-[#facc15]":"bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] border border-[#525463]"}`),$t(L,"title",e(y)?"Edit note":"Add note"),w(z,e(y)?"ð":"ð")},[()=>(C(ze),e(P),c(()=>ze(e(P).ScheduledStartDateTime))),()=>(e(P),c(()=>u(e(P))))]),h(R,re)}),o(Ce),o(Ie),h(K,Ie)};O(Te,K=>{e(l),c(()=>e(l).length>0)&&K(Re)})}var Ue=d(Te,2);{var Ne=K=>{var Ie=bl(),Ce=d(s(Ie),2);st(Ce,5,()=>e(n),ot,(R,P)=>{const y=ee(()=>(e(P),c(()=>x.hasNote(e(P).MatchId)))),D=ee(()=>(e(g),e(P),c(()=>e(g)===e(P).MatchId))),oe=ee(()=>(e(P),c(()=>x.getNote(e(P).MatchId))));var re=xl(),F=s(re),Y=s(F),V=s(Y),J=s(V),Me=s(J);o(J);var Z=d(J,2),he=s(Z,!0);o(Z),o(V);var Oe=d(V,2),Ve=s(Oe);o(Oe);var I=d(Oe,2),X=s(I,!0);o(I),o(Y);var L=d(Y,2);L.__click=()=>e(D)?N():m(e(P).MatchId);var z=s(L,!0);o(L),o(F);var xe=d(F,2);{var se=ae=>{var ye=fl(),$e=s(ye);Pr($e),$t($e,"rows",3),Er($e);var He=d($e,2),Je=s(He);Je.__click=()=>p(e(P).MatchId);var me=d(Je,2);{var ke=j=>{var G=ul();G.__click=()=>k(e(P).MatchId),h(j,G)};O(me,j=>{e(y)&&j(ke)})}var Ee=d(me,2);Ee.__click=N,o(He),o(ye),ir($e,()=>e(T),j=>S(T,j)),h(ae,ye)},_e=ae=>{var ye=kt(),$e=vt(ye);{var He=Je=>{var me=ml(),ke=d(s(me),2),Ee=s(ke,!0);o(ke),o(me),W(()=>w(Ee,e(oe))),h(Je,me)};O($e,Je=>{e(y)&&Je(He)},!0)}h(ae,ye)};O(xe,ae=>{e(D)?ae(se):ae(_e,!1)})}o(re),W((ae,ye,$e)=>{w(Me,`${ae??""} â¢ ${ye??""}`),w(he,(e(P),c(()=>e(P).CourtName))),w(Ve,`vs ${$e??""}`),w(X,(e(P),c(()=>e(P).Division.CodeAlias))),Pe(L,1,`ml-2 px-2 py-1 text-xs rounded transition-colors flex-shrink-0 ${e(y)||e(D)?"bg-[#eab308] text-[#18181b] hover:bg-[#facc15]":"bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] border border-[#525463]"}`),$t(L,"title",e(y)?"Edit note":"Add note"),w(z,e(y)?"ð":"ð")},[()=>(C(Mt),e(P),c(()=>Mt(e(P).ScheduledStartDateTime))),()=>(C(ze),e(P),c(()=>ze(e(P).ScheduledStartDateTime))),()=>(e(P),c(()=>u(e(P))))]),h(R,re)}),o(Ce),o(Ie),h(K,Ie)};O(Ue,K=>{e(n),c(()=>e(n).length>0)&&K(Ne)})}var Fe=d(Ue,2);{var je=K=>{var Ie=gl(),Ce=s(Ie);o(Ie),W(()=>w(Ce,`No matches found for ${b()??""}`)),h(K,Ie)};O(Fe,K=>{e(t),c(()=>e(t).length===0)&&K(je)})}o(E),W(()=>{w(U,b()),w(ue,`${e(t),c(()=>e(t).length)??""} total match${e(t),c(()=>e(t).length!==1?"es":"")??""}`)}),h(r,E),Ft()}Yt(["click"]);var _l=$('<div class="px-4 py-3 rounded-lg border border-[#525463] bg-[#454654]/30"><div class="flex items-center justify-between mb-2"><div class="text-sm font-semibold text-[#f8f8f9]"> </div> <div class="text-xs font-medium text-[#9fa2ab]"> </div></div> <div class="text-sm text-[#c0c2c8]"> </div> <div class="text-xs text-[#9fa2ab] mt-1"> </div></div>'),yl=$('<div><h3 class="text-sm font-semibold text-[#9fa2ab] mb-2 uppercase tracking-wider"> </h3> <div class="space-y-2"></div></div>'),Sl=$('<div class="space-y-4"></div>'),wl=$('<div class="text-center py-12 text-[#9fa2ab] text-sm"> <div class="text-xs text-[#808593] mt-2">Work assignments will appear here when assigned by tournament officials.</div></div>'),Tl=$('<div class="space-y-6"><div class="border-b border-[#454654] pb-4"><h2 class="text-xl font-bold text-[#f8f8f9]">Work Assignments</h2> <div class="text-sm text-[#9fa2ab] mt-1"> </div></div> <!></div>');function Ml(r,a){At(a,!1);const t=A(),n=A(),i=A();let l=qe(a,"matches",8),v=qe(a,"teamId",8),f=qe(a,"teamName",8);le(()=>(C(l()),C(v())),()=>{S(t,l().filter(m=>(Ye(m)===v(),!1)).sort((m,p)=>m.ScheduledStartDateTime-p.ScheduledStartDateTime))}),le(()=>(e(t),Mt),()=>{S(n,(()=>{const m={};return e(t).forEach(p=>{const N=Mt(p.ScheduledStartDateTime);m[N]||(m[N]=[]),m[N].push(p)}),m})())}),le(()=>e(n),()=>{S(i,Object.keys(e(n)).sort())}),Ut(),Rt();var b=Tl(),_=s(b),x=d(s(_),2),g=s(x);o(x),o(_);var T=d(_,2);{var M=m=>{var p=Sl();st(p,5,()=>e(i),ot,(N,k)=>{var E=yl(),B=s(E),ie=s(B,!0);o(B);var U=d(B,2);st(U,5,()=>(e(n),e(k),c(()=>e(n)[e(k)])),ot,(ve,ue)=>{var Q=_l(),De=s(Q),Te=s(De),Re=s(Te,!0);o(Te);var Ue=d(Te,2),Ne=s(Ue,!0);o(Ue),o(De);var Fe=d(De,2),je=s(Fe);o(Fe);var K=d(Fe,2),Ie=s(K);o(K),o(Q),W(Ce=>{w(Re,Ce),w(Ne,(e(ue),c(()=>e(ue).CourtName))),w(je,`${e(ue),c(()=>e(ue).FirstTeamText)??""} vs ${e(ue),c(()=>e(ue).SecondTeamText)??""}`),w(Ie,`${e(ue),c(()=>e(ue).Division.CodeAlias)??""} â¢ Work Assignment`)},[()=>(C(ze),e(ue),c(()=>ze(e(ue).ScheduledStartDateTime)))]),h(ve,Q)}),o(U),o(E),W(()=>w(ie,e(k))),h(N,E)}),o(p),h(m,p)},u=m=>{var p=wl(),N=s(p);vr(),o(p),W(()=>w(N,`No work assignments found for ${f()??""} `)),h(m,p)};O(T,m=>{e(t),c(()=>e(t).length>0)?m(M):m(u,!1)})}o(b),W(()=>w(g,`${f()??""} â¢ ${e(t),c(()=>e(t).length)??""} assignment${e(t),c(()=>e(t).length!==1?"s":"")??""}`)),h(r,b),Ft()}var Cl=$('<span class="ml-2 text-[10px] opacity-75"> </span>'),$l=$("<button> <!></button>"),kl=$('<div class="border-b border-[#454654] pb-4"><div class="flex items-center gap-2 flex-wrap"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Select Team:</span> <!></div></div>'),Dl=$('<div class="text-center py-12 text-[#9fa2ab] text-sm">Select a team to view matches and work assignments</div>'),Il=$('<div class="space-y-4"><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-xl font-bold text-[#f8f8f9]">Coach View</h1> <p class="text-sm text-[#9fa2ab] mt-1">View matches and work assignments by team</p></div> <div class="flex items-center gap-2 bg-[#454654] rounded-lg p-1"><button>Matches</button> <button>Work Assignments</button></div></div> <!> <!> <!></div>');function El(r,a){At(a,!1);const t=A(),n=A(),i=A(),l=A();let v=qe(a,"matches",8),f=qe(a,"eventId",8),b=qe(a,"clubId",8),_=A(null),x=A(null),g=A("matches");function T(Q){var Te;S(_,Q);const De=(Te=e(n)[Q])==null?void 0:Te[0];De&&S(x,De)}le(()=>C(v()),()=>{S(t,Da(v()))}),le(()=>(C(v()),Ye),()=>{S(n,(()=>{const Q={};return v().forEach(De=>{const Te=Ye(De);Te&&(Q[Te]||(Q[Te]=[]),Q[Te].push(De))}),Q})())}),le(()=>(e(_),e(n)),()=>{S(i,e(_)?e(n)[e(_)]||[]:[])}),le(()=>(e(t),e(n)),()=>{S(l,[...e(t)].sort((Q,De)=>{var Ue,Ne;const Te=((Ue=e(n)[Q])==null?void 0:Ue.length)||0;return(((Ne=e(n)[De])==null?void 0:Ne.length)||0)-Te}))}),Ut(),Rt();var M=Il(),u=s(M),m=d(s(u),2),p=s(m);p.__click=()=>S(g,"matches");var N=d(p,2);N.__click=()=>S(g,"work"),o(m),o(u);var k=d(u,2);{var E=Q=>{var De=kl(),Te=s(De),Re=d(s(Te),2);st(Re,1,()=>e(l),ot,(Ue,Ne)=>{var Fe=$l();Fe.__click=()=>T(e(Ne));var je=s(Fe),K=d(je);{var Ie=Ce=>{var R=Cl(),P=s(R);o(R),W(()=>w(P,`(${e(n),e(Ne),c(()=>e(n)[e(Ne)].length)??""})`)),h(Ce,R)};O(K,Ce=>{e(n),e(Ne),c(()=>e(n)[e(Ne)])&&Ce(Ie)})}o(Fe),W(()=>{Pe(Fe,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(_)===e(Ne)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),w(je,`${e(Ne)??""} `)}),h(Ue,Fe)}),o(Te),o(De),h(Q,De)};O(k,Q=>{e(t),c(()=>e(t).length>0)&&Q(E)})}var B=d(k,2);{var ie=Q=>{var De=kt(),Te=vt(De);{var Re=Ne=>{hl(Ne,{get matches(){return v()},teamId,get teamName(){return e(_)},get eventId(){return f()}})},Ue=Ne=>{Ml(Ne,{get matches(){return v()},teamId,get teamName(){return e(_)}})};O(Te,Ne=>{e(g)==="matches"?Ne(Re):Ne(Ue,!1)})}h(Q,De)},U=Q=>{var De=Dl();h(Q,De)};O(B,Q=>{e(_)?Q(ie):Q(U,!1)})}var ve=d(B,2);{var ue=Q=>{wn(Q,{get match(){return e(x)},get eventId(){return f()},get clubId(){return b()},onClose:()=>S(x,null),get matches(){return v()}})};O(ve,Q=>{e(x)&&Q(ue)})}o(M),W(()=>{Pe(p,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(g)==="matches"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),Pe(N,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(g)==="work"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),h(r,M),Ft()}Yt(["click"]);var Pl=$('<span class="ml-2" style="color: #ef4444;"> </span>'),Nl=$('<span class="text-xs whitespace-nowrap hidden sm:inline" style="color: #9fa2ab;"> <!></span>'),Ol=$('<span class="font-medium truncate max-w-[200px] sm:max-w-none"> </span>'),Al=$('<span class="hidden sm:inline"> </span>'),Fl=$('<div class="flex items-center gap-2 text-xs" style="color: #9fa2ab;"><!> <!></div>'),Rl=$('<span class="ml-2" style="color: #ef4444;"> </span>'),jl=$('<span class="text-xs sm:hidden" style="color: #9fa2ab;"> <!></span>'),Ll=$('<div class="flex items-center gap-1 rounded-lg p-1" style="background-color: #454654;"><button>List</button> <button>Timeline</button></div>'),Wl=$("<button> </button>"),Ul=$('<!> <!> <button class="px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors hover:text-[#f8f8f9] min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8;" title="Export JSON">JSON</button> <button class="px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors hover:text-[#f8f8f9] min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8;" title="Export CSV">CSV</button>',1),Bl=$('<div class="border-b" style="border-color: #454654; background-color: rgba(59, 60, 72, 0.3);"><div class="container mx-auto px-3 sm:px-4 py-4"><!></div></div>'),Yl=$('<div class="text-center py-12"><div class="inline-block animate-pulse" style="color: #9fa2ab;">Loading matches...</div></div>'),Hl=$('<div class="rounded-lg mb-6 px-4 py-3 border" style="background-color: rgba(127, 29, 29, 0.5); border-color: #991b1b; color: #fca5a5;"><div class="text-xs font-medium mb-1">Error</div> <div class="text-sm"> </div></div>'),Jl=$('<div class="text-center py-12" style="color: #9fa2ab;"><div class="text-sm">No matches found for 630 Volleyball</div> <div class="text-xs mt-2" style="color: #808593;">Click "Config" to change event parameters</div></div>'),Vl=$('<div class="min-h-screen" style="background-color: #18181b;"><header class="border-b sticky top-0 z-10" style="border-color: #454654; background-color: rgba(59, 60, 72, 0.5);"><div class="container mx-auto px-3 sm:px-4 py-2 sm:py-3"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4"><div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 sm:gap-4 min-w-0 flex-1"><div class="flex items-center gap-2 min-w-0"><h1 class="text-base sm:text-lg font-semibold truncate" style="color: #f8f8f9;">630 Volleyball Coverage</h1> <!></div> <!> <!></div> <div class="flex items-center gap-1.5 sm:gap-2 flex-wrap"><div class="flex items-center gap-1"><label class="text-xs hidden sm:inline" style="color: #9fa2ab;">Role:</label> <select class="px-2 py-2 sm:py-1.5 text-xs rounded-lg transition-colors min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8; border: 1px solid #525463;" title="Select your role"><option>Media</option><option>Spectator</option><option>Coach</option></select></div> <!> <button> </button></div></div></div></header> <!> <main class="container mx-auto px-3 sm:px-4 py-4 sm:py-6"><!> <!> <!> <!> <!></main></div>');function tv(r,a){At(a,!1);const t=()=>Zt(Ws,"$selectedCount",f),n=()=>Zt($a,"$isMedia",f),i=()=>Zt(ka,"$isSpectator",f),l=()=>Zt(Ys,"$isCoach",f),v=()=>Zt(Rr,"$userRole",f),[f,b]=Ca(),_=A(),x=A(),g=A(),T=A(),M=A(),u=A();let m=A("PTAwMDAwNDEzMTQ90"),p=A("2025-11-01"),N=A(300),k=A([]),E=A(!1),B=A(null),ie=A("list"),U=A(!1),ve=A(24426),ue=A(!1),Q=A(null);Xr(()=>{De(e(m),e(p),e(N))});async function De(j,G,be){var pe;S(E,!0),S(B,null),S(m,j),S(p,G),S(N,be);try{const ge=await Co(j),we=(pe=ge.Clubs)==null?void 0:pe.find(H=>H.Name==="630 Volleyball");we&&S(ve,we.ClubId),S(Q,{name:ge.Name||ge.EventName||ge.FullName||ge.Title||"Event",startDate:ge.StartDate||ge.StartDateTime||ge.Start||ge.StartTime,endDate:ge.EndDate||ge.EndDateTime||ge.End||ge.EndTime});const te=await Mo(j,G,be),Ae=Po(te.CourtSchedules);S(k,Ae)}catch(ge){console.error("Error loading schedule:",ge),S(B,ge instanceof Error?ge.message:"Failed to load schedule"),S(k,[])}finally{S(E,!1)}}function Te(){const j=JSON.stringify(e(k),null,2),G=new Blob([j],{type:"application/json"}),be=URL.createObjectURL(G),pe=document.createElement("a");pe.href=be,pe.download=`630-volleyball-matches-${e(p)}.json`,pe.click(),URL.revokeObjectURL(be)}function Re(){const j=["Match ID","Division","Short Name","First Team","Second Team","Work Team","Court","Start Time","End Time","Duration","Involved Team"],G=e(k).map(te=>[te.MatchId.toString(),te.Division.Name,te.CompleteShortName,te.FirstTeamText,te.SecondTeamText,te.WorkTeamText,te.CourtName,new Date(te.ScheduledStartDateTime).toISOString(),new Date(te.ScheduledEndDateTime).toISOString(),((te.ScheduledEndDateTime-te.ScheduledStartDateTime)/6e4).toString(),te.InvolvedTeam]),be=[j.join(","),...G.map(te=>te.map(Ae=>`"${Ae}"`).join(","))].join(`
`),pe=new Blob([be],{type:"text/csv"}),ge=URL.createObjectURL(pe),we=document.createElement("a");we.href=ge,we.download=`630-volleyball-matches-${e(p)}.csv`,we.click(),URL.revokeObjectURL(ge)}le(()=>(e(k),Qe),()=>{if(e(k).length>0){const j=new Map;e(k).forEach(G=>{const pe=(G.InvolvedTeam==="first"?G.FirstTeamText:G.SecondTeamText).match(/(\d+-\d+)/),ge=pe?pe[1]:"";if(!ge)return;const we=j.get(ge)||{total:0,inPlan:0};we.total++;let te=!1;yt.subscribe(Ae=>{te=Ae.has(G.MatchId)})(),te&&we.inPlan++,j.set(ge,we)}),j.forEach((G,be)=>{Qe.updateFromPlan(be,G.inPlan,G.total)})}}),le(()=>e(k),()=>{S(_,(()=>{const j=new Map;return e(k).forEach((G,be)=>{e(k).slice(be+1).forEach(pe=>{G.ScheduledStartDateTime<pe.ScheduledEndDateTime&&G.ScheduledEndDateTime>pe.ScheduledStartDateTime&&(j.has(G.MatchId)||j.set(G.MatchId,[]),j.get(G.MatchId).push(pe.MatchId))})}),e(k).filter(G=>j.has(G.MatchId)).length})())}),le(()=>t(),()=>{S(x,t())}),le(()=>n(),()=>{S(g,n())}),le(()=>i(),()=>{S(T,i())}),le(()=>l(),()=>{S(M,l())}),le(()=>v(),()=>{S(u,v())}),le(()=>(e(k),e(x),Qe),()=>{if(e(k).length>0&&e(x)!==void 0){const j=new Map,G=Vt(yt);e(k).forEach(be=>{const ge=(be.InvolvedTeam==="first"?be.FirstTeamText:be.SecondTeamText).match(/(\d+-\d+)/),we=ge?ge[1]:"";if(!we)return;const te=j.get(we)||{total:0,inPlan:0};te.total++,G.has(be.MatchId)&&te.inPlan++,j.set(we,te)}),j.forEach((be,pe)=>{Qe.updateFromPlan(pe,be.inPlan,be.total)})}}),Ut(),Rt();var Ue=Vl(),Ne=s(Ue),Fe=s(Ne),je=s(Fe),K=s(je),Ie=s(K),Ce=d(s(Ie),2);{var R=j=>{var G=Nl(),be=s(G),pe=d(be);{var ge=we=>{var te=Pl(),Ae=s(te);o(te),W(()=>w(Ae,`â¢ ${e(_)??""} conflicts`)),h(we,te)};O(pe,we=>{e(_)>0&&we(ge)})}o(G),W(()=>w(be,`${e(k),c(()=>e(k).length)??""} matches `)),h(j,G)};O(Ce,j=>{e(k),c(()=>e(k).length>0)&&j(R)})}o(Ie);var P=d(Ie,2);{var y=j=>{var G=Fl(),be=s(G);{var pe=te=>{var Ae=Ol(),H=s(Ae,!0);o(Ae),W(()=>w(H,(e(Q),c(()=>e(Q).name)))),h(te,Ae)};O(be,te=>{e(Q),c(()=>e(Q).name)&&te(pe)})}var ge=d(be,2);{var we=te=>{var Ae=Al(),H=s(Ae,!0);o(Ae),W(de=>w(H,de),[()=>(e(Q),C(Mt),c(()=>(()=>{try{const de=e(Q).startDate?new Date(e(Q).startDate).getTime():null,q=e(Q).endDate?new Date(e(Q).endDate).getTime():null;return de&&q&&Math.abs(de-q)>864e5?`${Mt(de)} - ${Mt(q)}`:de?Mt(de):q?Mt(q):null}catch{return null}})()))]),h(te,Ae)};O(ge,te=>{e(Q),c(()=>(e(Q).startDate||e(Q).endDate)&&(()=>{try{const Ae=e(Q).startDate?new Date(e(Q).startDate).getTime():null,H=e(Q).endDate?new Date(e(Q).endDate).getTime():null;return Ae&&H&&Math.abs(Ae-H)>864e5}catch{return!1}})())&&te(we)})}o(G),h(j,G)};O(P,j=>{e(Q),c(()=>e(Q)&&(e(Q).name||e(Q).startDate))&&j(y)})}var D=d(P,2);{var oe=j=>{var G=jl(),be=s(G),pe=d(be);{var ge=we=>{var te=Rl(),Ae=s(te);o(te),W(()=>w(Ae,`â¢ ${e(_)??""} conflicts`)),h(we,te)};O(pe,we=>{e(_)>0&&we(ge)})}o(G),W(()=>w(be,`${e(k),c(()=>e(k).length)??""} matches `)),h(j,G)};O(D,j=>{e(k),c(()=>e(k).length>0)&&j(oe)})}o(K);var re=d(K,2),F=s(re),Y=d(s(F),2);Y.__change=j=>Rr.setRole(j.target.value);var V=s(Y);V.value=V.__value="media";var J=d(V);J.value=J.__value="spectator";var Me=d(J);Me.value=Me.__value="coach",o(Y);var Z;pr(Y),o(F);var he=d(F,2);{var Oe=j=>{var G=Ul(),be=vt(G);{var pe=H=>{var de=Ll(),q=s(de);q.__click=()=>S(ie,"list");let ne;var fe=d(q,2);fe.__click=()=>S(ie,"timeline");let Le;o(de),W(()=>{ne=Pe(q,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,ne,{"bg-gold-500":e(ie)==="list","text-charcoal-950":e(ie)==="list","text-charcoal-300":e(ie)!=="list","hover:text-charcoal-50":e(ie)!=="list"}),Ot(q,e(ie)==="list"?"background-color: #eab308; color: #18181b;":"color: #c0c2c8;"),Le=Pe(fe,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,Le,{"bg-gold-500":e(ie)==="timeline","text-charcoal-950":e(ie)==="timeline","text-charcoal-300":e(ie)!=="timeline","hover:text-charcoal-50":e(ie)!=="timeline"}),Ot(fe,e(ie)==="timeline"?"background-color: #eab308; color: #18181b;":"color: #c0c2c8;")}),h(H,de)};O(be,H=>{e(M)||H(pe)})}var ge=d(be,2);{var we=H=>{var de=Wl();de.__click=()=>S(ue,!e(ue));let q;var ne=s(de);o(de),W(()=>{q=Pe(de,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0",null,q,{"text-charcoal-950":e(ue)}),Ot(de,e(ue)?"background-color: #eab308; color: #18181b;":"background-color: #454654; color: #c0c2c8;"),w(ne,`Plan (${e(x)??""})`)}),h(H,de)};O(ge,H=>{e(g)&&e(x)>0&&H(we)})}var te=d(ge,2);te.__click=Te;var Ae=d(te,2);Ae.__click=Re,h(j,G)};O(he,j=>{e(k),c(()=>e(k).length>0)&&j(Oe)})}var Ve=d(he,2);Ve.__click=()=>S(U,!e(U));let I;var X=s(Ve,!0);o(Ve),o(re),o(je),o(Fe),o(Ne);var L=d(Ne,2);{var z=j=>{var G=Bl(),be=s(G),pe=s(be);Js(pe,{get eventId(){return e(m)},get date(){return e(p)},get timeWindow(){return e(N)},onLoad:De,get loading(){return e(E)}}),o(be),o(G),h(j,G)};O(L,j=>{e(U)&&j(z)})}var xe=d(L,2),se=s(xe);{var _e=j=>{var G=Yl();h(j,G)};O(se,j=>{e(E)&&j(_e)})}var ae=d(se,2);{var ye=j=>{var G=Hl(),be=d(s(G),2),pe=s(be,!0);o(be),o(G),W(()=>w(pe,e(B))),h(j,G)};O(ae,j=>{e(B)&&j(ye)})}var $e=d(ae,2);{var He=j=>{var G=Jl();h(j,G)};O($e,j=>{e(E),e(k),e(B),c(()=>!e(E)&&e(k).length===0&&!e(B))&&j(He)})}var Je=d($e,2);{var me=j=>{var G=kt(),be=vt(G);{var pe=we=>{El(we,{get matches(){return e(k)},get eventId(){return e(m)},get clubId(){return e(ve)}})},ge=we=>{var te=kt(),Ae=vt(te);{var H=q=>{nc(q,{get matches(){return e(k)},get eventId(){return e(m)},get clubId(){return e(ve)}})},de=q=>{Lc(q,{get matches(){return e(k)},get eventId(){return e(m)}})};O(Ae,q=>{e(ie)==="list"?q(H):q(de,!1)},!0)}h(we,te)};O(be,we=>{e(M)?we(pe):we(ge,!1)})}h(j,G)};O(Je,j=>{e(k),c(()=>e(k).length>0)&&j(me)})}var ke=d(Je,2);{var Ee=j=>{tl(j,{get matches(){return e(k)},onClose:()=>S(ue,!1)})};O(ke,j=>{e(ue)&&j(Ee)})}o(xe),o(Ue),W(()=>{Z!==(Z=e(u))&&(Y.value=(Y.__value=e(u))??"",fr(Y,e(u))),I=Pe(Ve,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0",null,I,{"text-charcoal-950":e(U)}),Ot(Ve,e(U)?"background-color: #eab308; color: #18181b;":"background-color: #454654; color: #c0c2c8;"),w(X,e(U)?"Hide":"Config")}),h(r,Ue),Ft(),b()}Yt(["change","click"]);export{tv as component,ev as universal};
