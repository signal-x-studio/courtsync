import{f as S,a as h,c as Ot,d as ga,t as _n}from"../chunks/C4ilCsHB.js";import"../chunks/DatUqRBN.js";import{d as Ir,w as Yt,o as _a,a as yn,g as Gt}from"../chunks/DOd7VXKj.js";import{D as zr,y as Nt,q as Sn,B as qa,A as wn,L as Tn,g as e,a1 as Z,N as Mn,O as Cn,P as Da,Q as Xr,z as Tr,ad as Dn,aA as $n,I as xa,K as kn,E as gr,ay as za,aG as Xa,Y as R,ab as $a,ak as ka,F as Qa,H as In,aH as Br,aI as Qr,G as Ka,aJ as Hr,aK as Pn,au as En,aL as On,ax as Nn,aM as An,x as Fn,U as Za,aN as en,aO as Rn,W as Wn,aP as Ln,aQ as jn,aR as Un,aS as Yn,aT as Bn,aU as Hn,aV as Vn,aW as Gn,aE as Jn,b as l,S as qn,aX as zn,p as Xt,aY as ie,Z as y,e as _,aZ as cr,k as i,s as d,l as s,t as Y,j as Qt,i as st,al as ba,a_ as Xn}from"../chunks/DVX6VRk5.js";import{s as $,e as Dr,d as ar}from"../chunks/BA7jJIuj.js";import{p as Je,i as P,s as Vt,a as ya,b as Qn}from"../chunks/DQzpnLv7.js";import{i as Kt}from"../chunks/39mQBiRJ.js";const Kn=!0;function ft(t,r){return r}function Zn(t,r,n){for(var a=t.items,o=[],c=r.length,u=0;u<c;u++)On(r[u].e,o,!0);var v=c>0&&o.length===0&&n!==null;if(v){var x=n.parentNode;Nn(x),x.append(n),a.clear(),zt(t,r[0].prev,r[c-1].next)}An(o,()=>{for(var p=0;p<c;p++){var g=r[p];v||(a.delete(g.k),zt(t,g.prev,g.next)),Ka(g.e,!v)}})}function mt(t,r,n,a,o,c=null){var u=t,v={flags:r,items:new Map,first:null},x=(r&en)!==0;if(x){var p=t;u=Nt?zr(Sn(p)):p.appendChild(qa())}Nt&&wn();var g=null,M=!1,k=new Map,C=Z(()=>{var W=n();return Xa(W)?W:W==null?[]:za(W)}),f,b;function T(){eo(b,f,v,k,u,o,r,a,n),c!==null&&(f.length===0?g?Qa(g):g=xa(()=>c(u)):g!==null&&In(g,()=>{g=null}))}Tn(()=>{b??(b=Fn),f=e(C);var W=f.length;if(M&&W===0)return;M=W===0;let w=!1;if(Nt){var N=Mn(u)===Cn;N!==(W===0)&&(u=Da(),zr(u),Xr(!1),w=!0)}if(Nt){for(var q=null,se,L=0;L<W;L++){if(Tr.nodeType===Dn&&Tr.data===$n){u=Tr,w=!0,Xr(!1);break}var ce=f[L],_e=a(ce,L);se=ha(Tr,v,q,null,ce,_e,L,o,r,n),v.items.set(_e,se),q=se}W>0&&zr(Da())}if(Nt)W===0&&c&&(g=xa(()=>c(u)));else if(kn()){var ee=new Set,De=gr;for(L=0;L<W;L+=1){ce=f[L],_e=a(ce,L);var ye=v.items.get(_e)??k.get(_e);ye?(r&(Hr|Br))!==0&&tn(ye,ce,L,r):(se=ha(null,v,null,null,ce,_e,L,o,r,n,!0),k.set(_e,se)),ee.add(_e)}for(const[We,Be]of v.items)ee.has(We)||De.skipped_effects.add(Be.e);De.oncommit(T)}else T();w&&Xr(!0),e(C)}),Nt&&(u=Tr)}function eo(t,r,n,a,o,c,u,v,x){var Ne,O,te,m;var p=(u&Rn)!==0,g=(u&(Hr|Br))!==0,M=r.length,k=n.items,C=n.first,f=C,b,T=null,W,w=[],N=[],q,se,L,ce;if(p)for(ce=0;ce<M;ce+=1)q=r[ce],se=v(q,ce),L=k.get(se),L!==void 0&&((Ne=L.a)==null||Ne.measure(),(W??(W=new Set)).add(L));for(ce=0;ce<M;ce+=1){if(q=r[ce],se=v(q,ce),L=k.get(se),L===void 0){var _e=a.get(se);if(_e!==void 0){a.delete(se),k.set(se,_e);var ee=T?T.next:f;zt(n,T,_e),zt(n,_e,ee),Kr(_e,ee,o),T=_e}else{var De=f?f.e.nodes_start:o;T=ha(De,n,T,T===null?n.first:T.next,q,se,ce,c,u,x)}k.set(se,T),w=[],N=[],f=T.next;continue}if(g&&tn(L,q,ce,u),(L.e.f&Qr)!==0&&(Qa(L.e),p&&((O=L.a)==null||O.unfix(),(W??(W=new Set)).delete(L))),L!==f){if(b!==void 0&&b.has(L)){if(w.length<N.length){var ye=N[0],We;T=ye.prev;var Be=w[0],Ce=w[w.length-1];for(We=0;We<w.length;We+=1)Kr(w[We],ye,o);for(We=0;We<N.length;We+=1)b.delete(N[We]);zt(n,Be.prev,Ce.next),zt(n,T,Be),zt(n,Ce,ye),f=ye,T=Ce,ce-=1,w=[],N=[]}else b.delete(L),Kr(L,f,o),zt(n,L.prev,L.next),zt(n,L,T===null?n.first:T.next),zt(n,T,L),T=L;continue}for(w=[],N=[];f!==null&&f.k!==se;)(f.e.f&Qr)===0&&(b??(b=new Set)).add(f),N.push(f),f=f.next;if(f===null)continue;L=f}w.push(L),T=L,f=L.next}if(f!==null||b!==void 0){for(var Ge=b===void 0?[]:za(b);f!==null;)(f.e.f&Qr)===0&&Ge.push(f),f=f.next;var it=Ge.length;if(it>0){var _t=(u&en)!==0&&M===0?o:null;if(p){for(ce=0;ce<it;ce+=1)(te=Ge[ce].a)==null||te.measure();for(ce=0;ce<it;ce+=1)(m=Ge[ce].a)==null||m.fix()}Zn(n,Ge,_t)}}p&&Za(()=>{var I;if(W!==void 0)for(L of W)(I=L.a)==null||I.apply()}),t.first=n.first&&n.first.e,t.last=T&&T.e;for(var yt of a.values())Ka(yt.e);a.clear()}function tn(t,r,n,a){(a&Hr)!==0&&ka(t.v,r),(a&Br)!==0?ka(t.i,n):t.i=n}function ha(t,r,n,a,o,c,u,v,x,p,g){var M=(x&Hr)!==0,k=(x&Pn)===0,C=M?k?R(o,!1,!1):$a(o):o,f=(x&Br)===0?u:$a(u),b={i:f,v:C,k:c,a:null,e:null,prev:n,next:a};try{if(t===null){var T=document.createDocumentFragment();T.append(t=qa())}return b.e=xa(()=>v(t,C,f,p),Nt),b.e.prev=n&&n.e,b.e.next=a&&a.e,n===null?g||(r.first=b):(n.next=b,n.e.next=b.e),a!==null&&(a.prev=b,a.e.prev=b.e),b}finally{}}function Kr(t,r,n){for(var a=t.next?t.next.e.nodes_start:n,o=r?r.e.nodes_start:n,c=t.e.nodes_start;c!==null&&c!==a;){var u=En(c);o.before(c),c=u}}function zt(t,r,n){r===null?t.first=n:(r.next=n,r.e.next=n&&n.e),n!==null&&(n.prev=r,n.e.prev=r&&r.e)}const Ia=[...` 	
\r\fÂ \v\uFEFF`];function to(t,r,n){var a=t==null?"":""+t;if(r&&(a=a?a+" "+r:r),n){for(var o in n)if(n[o])a=a?a+" "+o:o;else if(a.length)for(var c=o.length,u=0;(u=a.indexOf(o,u))>=0;){var v=u+c;(u===0||Ia.includes(a[u-1]))&&(v===a.length||Ia.includes(a[v]))?a=(u===0?"":a.substring(0,u))+a.substring(v+1):u=v}}return a===""?null:a}function ro(t,r){return t==null?null:String(t)}function he(t,r,n,a,o,c){var u=t.__className;if(Nt||u!==n||u===void 0){var v=to(n,a,c);(!Nt||v!==t.getAttribute("class"))&&(v==null?t.removeAttribute("class"):r?t.className=v:t.setAttribute("class",v)),t.__className=n}else if(c&&o!==c)for(var x in c){var p=!!c[x];(o==null||p!==!!o[x])&&t.classList.toggle(x,p)}return c}function rr(t,r,n,a){var o=t.__style;if(Nt||o!==r){var c=ro(r);(!Nt||c!==t.getAttribute("style"))&&(c==null?t.removeAttribute("style"):t.style.cssText=c),t.__style=r}return a}function vr(t,r,n=!1){if(t.multiple){if(r==null)return;if(!Xa(r))return Ln();for(var a of t.options)a.selected=r.includes(Pa(a));return}for(a of t.options){var o=Pa(a);if(jn(o,r)){a.selected=!0;return}}(!n||r!==void 0)&&(t.selectedIndex=-1)}function _r(t){var r=new MutationObserver(()=>{vr(t,t.__value)});r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Wn(()=>{r.disconnect()})}function Pa(t){return"__value"in t?t.__value:t.value}const ao=Symbol("is custom element"),no=Symbol("is html");function Zr(t){if(Nt){var r=!1,n=()=>{if(!r){if(r=!0,t.hasAttribute("value")){var a=t.value;Ut(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var o=t.checked;Ut(t,"checked",null),t.checked=o}}};t.__on_r=n,Za(n),Un()}}function Ut(t,r,n,a){var o=oo(t);Nt&&(o[r]=t.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&t.nodeName==="LINK")||o[r]!==(o[r]=n)&&(r==="loading"&&(t[Yn]=n),n==null?t.removeAttribute(r):typeof n!="string"&&so(t).includes(r)?t[r]=n:t.setAttribute(r,n))}function oo(t){return t.__attributes??(t.__attributes={[ao]:t.nodeName.includes("-"),[no]:t.namespaceURI===Bn})}var Ea=new Map;function so(t){var r=t.getAttribute("is")||t.nodeName,n=Ea.get(r);if(n)return n;Ea.set(r,n=[]);for(var a,o=t,c=Element.prototype;c!==o;){a=Vn(o);for(var u in a)a[u].set&&n.push(u);o=Hn(o)}return n}function ea(t,r,n=r){var a=new WeakSet;Gn(t,"input",async o=>{var c=o?t.defaultValue:t.value;if(c=ta(t)?ra(c):c,n(c),gr!==null&&a.add(gr),await Jn(),c!==(c=r())){var u=t.selectionStart,v=t.selectionEnd,x=t.value.length;if(t.value=c??"",v!==null){var p=t.value.length;u===v&&v===x&&p>x?(t.selectionStart=p,t.selectionEnd=p):(t.selectionStart=u,t.selectionEnd=Math.min(v,p))}}}),(Nt&&t.defaultValue!==t.value||l(r)==null&&t.value)&&(n(ta(t)?ra(t.value):t.value),gr!==null&&a.add(gr)),qn(()=>{var o=r();if(t===document.activeElement){var c=zn??gr;if(a.has(c))return}ta(t)&&o===ra(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function ta(t){var r=t.type;return r==="number"||r==="range"}function ra(t){return t===""?null:+t}const io=Kn,co=!1,lo=(async()=>({})),Nl=Object.freeze(Object.defineProperty({__proto__:null,load:lo,ssr:co},Symbol.toStringTag,{value:"Module"})),Pr="https://results.advancedeventsystems.com/api",uo="https://results.advancedeventsystems.com/odata",vo=async(t,r,n)=>{const a=`${Pr}/event/${t}/courts/${r}/${n}`,o=await fetch(a);if(!o.ok)throw new Error(`Failed to fetch court schedule: ${o.statusText}`);return o.json()},fo=async t=>{const r=`${Pr}/event/${t}`,n=await fetch(r);if(!n.ok)throw new Error(`Failed to fetch event info: ${n.statusText}`);return n.json()},mo=async(t,r)=>{const n=`${uo}/${t}/nextassignments(dId=null,cId=${r},tIds=[])?$skip=0&$orderby=TeamName,TeamCode`,a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch team assignments: ${a.statusText}`);return a.json()},aa=async(t,r,n,a)=>{const o=`${Pr}/event/${t}/division/${r}/team/${n}/schedule/${a}`,c=await fetch(o);if(!c.ok)throw new Error(`Failed to fetch team schedule: ${c.statusText}`);return c.json()},xo=async(t,r)=>{const n=`${Pr}/event/${t}/division/${r}/plays`,a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch division plays: ${a.statusText}`);return a.json()},bo=async(t,r)=>{const n=`${Pr}/event/${t}/poolsheet/${r}`,a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch pool sheet: ${a.statusText}`);return a.json()},Rr="630 Volleyball",Wr="630",ho=t=>[t.FirstTeamText,t.SecondTeamText,t.WorkTeamText].some(n=>n&&(n.includes(Rr)||n.includes(Wr))),po=t=>t.FirstTeamText&&(t.FirstTeamText.includes(Rr)||t.FirstTeamText.includes(Wr))?"first":t.SecondTeamText&&(t.SecondTeamText.includes(Rr)||t.SecondTeamText.includes(Wr))?"second":t.WorkTeamText&&(t.WorkTeamText.includes(Rr)||t.WorkTeamText.includes(Wr))?"work":null,go=t=>{const r=[];return t.forEach(n=>{n.CourtMatches.forEach(a=>{if(ho(a)){const o=po(a);o&&o!=="work"&&r.push({...a,CourtName:n.Name,CourtId:n.CourtId,InvolvedTeam:o})}})}),r.sort((n,a)=>n.ScheduledStartDateTime-a.ScheduledStartDateTime)},jr=t=>{const r=new Map;for(let n=0;n<t.length;n++){const a=t[n],o=[];for(let c=0;c<t.length;c++){if(n===c)continue;const u=t[c],v=a.ScheduledStartDateTime<u.ScheduledEndDateTime&&a.ScheduledEndDateTime>u.ScheduledStartDateTime,x=a.CourtId!==u.CourtId;v&&x&&o.push(u.MatchId)}o.length>0&&r.set(a.MatchId,o)}return r},rn=6048e5,_o=864e5,Oa=Symbol.for("constructDateFrom");function ir(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&Oa in t?t[Oa](r):t instanceof Date?new t.constructor(r):new Date(r)}function Jt(t,r){return ir(r||t,t)}let yo={};function Vr(){return yo}function $r(t,r){var v,x,p,g;const n=Vr(),a=(r==null?void 0:r.weekStartsOn)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,o=Jt(t,r==null?void 0:r.in),c=o.getDay(),u=(c<a?7:0)+c-a;return o.setDate(o.getDate()-u),o.setHours(0,0,0,0),o}function Ur(t,r){return $r(t,{...r,weekStartsOn:1})}function an(t,r){const n=Jt(t,r==null?void 0:r.in),a=n.getFullYear(),o=ir(n,0);o.setFullYear(a+1,0,4),o.setHours(0,0,0,0);const c=Ur(o),u=ir(n,0);u.setFullYear(a,0,4),u.setHours(0,0,0,0);const v=Ur(u);return n.getTime()>=c.getTime()?a+1:n.getTime()>=v.getTime()?a:a-1}function Na(t){const r=Jt(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function So(t,...r){const n=ir.bind(null,r.find(a=>typeof a=="object"));return r.map(n)}function Aa(t,r){const n=Jt(t,r==null?void 0:r.in);return n.setHours(0,0,0,0),n}function wo(t,r,n){const[a,o]=So(n==null?void 0:n.in,t,r),c=Aa(a),u=Aa(o),v=+c-Na(c),x=+u-Na(u);return Math.round((v-x)/_o)}function To(t,r){const n=an(t,r),a=ir(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),Ur(a)}function Mo(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Co(t){return!(!Mo(t)&&typeof t!="number"||isNaN(+Jt(t)))}function Do(t,r){const n=Jt(t,r==null?void 0:r.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const $o={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ko=(t,r,n)=>{let a;const o=$o[t];return typeof o=="string"?a=o:r===1?a=o.one:a=o.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function na(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Io={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Po={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Eo={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Oo={date:na({formats:Io,defaultWidth:"full"}),time:na({formats:Po,defaultWidth:"full"}),dateTime:na({formats:Eo,defaultWidth:"full"})},No={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ao=(t,r,n,a)=>No[t];function Mr(t){return(r,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let o;if(a==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,v=n!=null&&n.width?String(n.width):u;o=t.formattingValues[v]||t.formattingValues[u]}else{const u=t.defaultWidth,v=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[v]||t.values[u]}const c=t.argumentCallback?t.argumentCallback(r):r;return o[c]}}const Fo={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ro={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wo={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Lo={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Uo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yo=(t,r)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Bo={ordinalNumber:Yo,era:Mr({values:Fo,defaultWidth:"wide"}),quarter:Mr({values:Ro,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Mr({values:Wo,defaultWidth:"wide"}),day:Mr({values:Lo,defaultWidth:"wide"}),dayPeriod:Mr({values:jo,defaultWidth:"wide",formattingValues:Uo,defaultFormattingWidth:"wide"})};function Cr(t){return(r,n={})=>{const a=n.width,o=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],c=r.match(o);if(!c)return null;const u=c[0],v=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],x=Array.isArray(v)?Vo(v,M=>M.test(u)):Ho(v,M=>M.test(u));let p;p=t.valueCallback?t.valueCallback(x):x,p=n.valueCallback?n.valueCallback(p):p;const g=r.slice(u.length);return{value:p,rest:g}}}function Ho(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function Vo(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function Go(t){return(r,n={})=>{const a=r.match(t.matchPattern);if(!a)return null;const o=a[0],c=r.match(t.parsePattern);if(!c)return null;let u=t.valueCallback?t.valueCallback(c[0]):c[0];u=n.valueCallback?n.valueCallback(u):u;const v=r.slice(o.length);return{value:u,rest:v}}}const Jo=/^(\d+)(th|st|nd|rd)?/i,qo=/\d+/i,zo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xo={any:[/^b/i,/^(a|c)/i]},Qo={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ko={any:[/1/i,/2/i,/3/i,/4/i]},Zo={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},es={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ts={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rs={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},as={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},os={ordinalNumber:Go({matchPattern:Jo,parsePattern:qo,valueCallback:t=>parseInt(t,10)}),era:Cr({matchPatterns:zo,defaultMatchWidth:"wide",parsePatterns:Xo,defaultParseWidth:"any"}),quarter:Cr({matchPatterns:Qo,defaultMatchWidth:"wide",parsePatterns:Ko,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Cr({matchPatterns:Zo,defaultMatchWidth:"wide",parsePatterns:es,defaultParseWidth:"any"}),day:Cr({matchPatterns:ts,defaultMatchWidth:"wide",parsePatterns:rs,defaultParseWidth:"any"}),dayPeriod:Cr({matchPatterns:as,defaultMatchWidth:"any",parsePatterns:ns,defaultParseWidth:"any"})},ss={code:"en-US",formatDistance:ko,formatLong:Oo,formatRelative:Ao,localize:Bo,match:os,options:{weekStartsOn:0,firstWeekContainsDate:1}};function is(t,r){const n=Jt(t,r==null?void 0:r.in);return wo(n,Do(n))+1}function cs(t,r){const n=Jt(t,r==null?void 0:r.in),a=+Ur(n)-+To(n);return Math.round(a/rn)+1}function nn(t,r){var g,M,k,C;const n=Jt(t,r==null?void 0:r.in),a=n.getFullYear(),o=Vr(),c=(r==null?void 0:r.firstWeekContainsDate)??((M=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:M.firstWeekContainsDate)??o.firstWeekContainsDate??((C=(k=o.locale)==null?void 0:k.options)==null?void 0:C.firstWeekContainsDate)??1,u=ir((r==null?void 0:r.in)||t,0);u.setFullYear(a+1,0,c),u.setHours(0,0,0,0);const v=$r(u,r),x=ir((r==null?void 0:r.in)||t,0);x.setFullYear(a,0,c),x.setHours(0,0,0,0);const p=$r(x,r);return+n>=+v?a+1:+n>=+p?a:a-1}function ls(t,r){var v,x,p,g;const n=Vr(),a=(r==null?void 0:r.firstWeekContainsDate)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(p=n.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=nn(t,r),c=ir((r==null?void 0:r.in)||t,0);return c.setFullYear(o,0,a),c.setHours(0,0,0,0),$r(c,r)}function ds(t,r){const n=Jt(t,r==null?void 0:r.in),a=+$r(n,r)-+ls(n,r);return Math.round(a/rn)+1}function tt(t,r){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(r,"0");return n+a}const sr={y(t,r){const n=t.getFullYear(),a=n>0?n:1-n;return tt(r==="yy"?a%100:a,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):tt(n+1,2)},d(t,r){return tt(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return tt(t.getHours()%12||12,r.length)},H(t,r){return tt(t.getHours(),r.length)},m(t,r){return tt(t.getMinutes(),r.length)},s(t,r){return tt(t.getSeconds(),r.length)},S(t,r){const n=r.length,a=t.getMilliseconds(),o=Math.trunc(a*Math.pow(10,n-3));return tt(o,r.length)}},hr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fa={G:function(t,r,n){const a=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const a=t.getFullYear(),o=a>0?a:1-a;return n.ordinalNumber(o,{unit:"year"})}return sr.y(t,r)},Y:function(t,r,n,a){const o=nn(t,a),c=o>0?o:1-o;if(r==="YY"){const u=c%100;return tt(u,2)}return r==="Yo"?n.ordinalNumber(c,{unit:"year"}):tt(c,r.length)},R:function(t,r){const n=an(t);return tt(n,r.length)},u:function(t,r){const n=t.getFullYear();return tt(n,r.length)},Q:function(t,r,n){const a=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return tt(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,n){const a=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return tt(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,n){const a=t.getMonth();switch(r){case"M":case"MM":return sr.M(t,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,n){const a=t.getMonth();switch(r){case"L":return String(a+1);case"LL":return tt(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,n,a){const o=ds(t,a);return r==="wo"?n.ordinalNumber(o,{unit:"week"}):tt(o,r.length)},I:function(t,r,n){const a=cs(t);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):tt(a,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):sr.d(t,r)},D:function(t,r,n){const a=is(t);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):tt(a,r.length)},E:function(t,r,n){const a=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,n,a){const o=t.getDay(),c=(o-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(c);case"ee":return tt(c,2);case"eo":return n.ordinalNumber(c,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,r,n,a){const o=t.getDay(),c=(o-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(c);case"cc":return tt(c,r.length);case"co":return n.ordinalNumber(c,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,r,n){const a=t.getDay(),o=a===0?7:a;switch(r){case"i":return String(o);case"ii":return tt(o,r.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,n){const o=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,r,n){const a=t.getHours();let o;switch(a===12?o=hr.noon:a===0?o=hr.midnight:o=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,r,n){const a=t.getHours();let o;switch(a>=17?o=hr.evening:a>=12?o=hr.afternoon:a>=4?o=hr.morning:o=hr.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return sr.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):sr.H(t,r)},K:function(t,r,n){const a=t.getHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):tt(a,r.length)},k:function(t,r,n){let a=t.getHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):tt(a,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):sr.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):sr.s(t,r)},S:function(t,r){return sr.S(t,r)},X:function(t,r,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(r){case"X":return Wa(a);case"XXXX":case"XX":return ur(a);case"XXXXX":case"XXX":default:return ur(a,":")}},x:function(t,r,n){const a=t.getTimezoneOffset();switch(r){case"x":return Wa(a);case"xxxx":case"xx":return ur(a);case"xxxxx":case"xxx":default:return ur(a,":")}},O:function(t,r,n){const a=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Ra(a,":");case"OOOO":default:return"GMT"+ur(a,":")}},z:function(t,r,n){const a=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Ra(a,":");case"zzzz":default:return"GMT"+ur(a,":")}},t:function(t,r,n){const a=Math.trunc(+t/1e3);return tt(a,r.length)},T:function(t,r,n){return tt(+t,r.length)}};function Ra(t,r=""){const n=t>0?"-":"+",a=Math.abs(t),o=Math.trunc(a/60),c=a%60;return c===0?n+String(o):n+String(o)+r+tt(c,2)}function Wa(t,r){return t%60===0?(t>0?"-":"+")+tt(Math.abs(t)/60,2):ur(t,r)}function ur(t,r=""){const n=t>0?"-":"+",a=Math.abs(t),o=tt(Math.trunc(a/60),2),c=tt(a%60,2);return n+o+r+c}const La=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},on=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},us=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],o=n[2];if(!o)return La(t,r);let c;switch(a){case"P":c=r.dateTime({width:"short"});break;case"PP":c=r.dateTime({width:"medium"});break;case"PPP":c=r.dateTime({width:"long"});break;case"PPPP":default:c=r.dateTime({width:"full"});break}return c.replace("{{date}}",La(a,r)).replace("{{time}}",on(o,r))},vs={p:on,P:us},fs=/^D+$/,ms=/^Y+$/,xs=["D","DD","YY","YYYY"];function bs(t){return fs.test(t)}function hs(t){return ms.test(t)}function ps(t,r,n){const a=gs(t,r,n);if(console.warn(a),xs.includes(t))throw new RangeError(a)}function gs(t,r,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _s=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ys=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ss=/^'([^]*?)'?$/,ws=/''/g,Ts=/[a-zA-Z]/;function sn(t,r,n){var g,M,k,C;const a=Vr(),o=a.locale??ss,c=a.firstWeekContainsDate??((M=(g=a.locale)==null?void 0:g.options)==null?void 0:M.firstWeekContainsDate)??1,u=a.weekStartsOn??((C=(k=a.locale)==null?void 0:k.options)==null?void 0:C.weekStartsOn)??0,v=Jt(t,n==null?void 0:n.in);if(!Co(v))throw new RangeError("Invalid time value");let x=r.match(ys).map(f=>{const b=f[0];if(b==="p"||b==="P"){const T=vs[b];return T(f,o.formatLong)}return f}).join("").match(_s).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const b=f[0];if(b==="'")return{isToken:!1,value:Ms(f)};if(Fa[b])return{isToken:!0,value:f};if(b.match(Ts))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:f}});o.localize.preprocessor&&(x=o.localize.preprocessor(v,x));const p={firstWeekContainsDate:c,weekStartsOn:u,locale:o};return x.map(f=>{if(!f.isToken)return f.value;const b=f.value;(hs(b)||bs(b))&&ps(b,r,String(t));const T=Fa[b[0]];return T(v,b,o.localize,p)}).join("")}function Ms(t){const r=t.match(Ss);return r?r[1].replace(ws,"'"):t}const Ye=t=>sn(new Date(t),"h:mm a"),It=t=>sn(new Date(t),"MMM d, yyyy"),oa="coveragePlan";function Cs(){const{subscribe:t,set:r,update:n}=Yt(new Set);try{const o=localStorage.getItem(oa);if(o){const c=JSON.parse(o);r(new Set(c.selectedMatches))}}catch(o){console.error("Failed to load coverage plan:",o)}const a=o=>{try{const c={selectedMatches:Array.from(o),createdAt:Date.now(),updatedAt:Date.now()};localStorage.setItem(oa,JSON.stringify(c))}catch(c){console.error("Failed to save coverage plan:",c)}};return{subscribe:t,toggleMatch:o=>{n(c=>{const u=new Set(c);return u.has(o)?u.delete(o):u.add(o),a(u),u})},selectMatch:o=>{n(c=>{const u=new Set(c);return u.add(o),a(u),u})},deselectMatch:o=>{n(c=>{const u=new Set(c);return u.delete(o),a(u),u})},clearPlan:()=>{r(new Set),localStorage.removeItem(oa)}}}const vt=Cs();Ir(vt,t=>t);const Ds=Ir(vt,t=>t.size),sa="teamCoverageStatus";function $s(){const{subscribe:t,set:r,update:n}=Yt({});try{const o=localStorage.getItem(sa);if(o){const c=JSON.parse(o);r(c)}}catch(o){console.error("Failed to load coverage status:",o)}const a=o=>{if(Object.keys(o).length!==0)try{localStorage.setItem(sa,JSON.stringify(o))}catch(c){console.error("Failed to save coverage status:",c)}};return{subscribe:t,setTeamStatus:(o,c)=>{n(u=>{const v={...u};return c==="not-covered"?delete v[o]:v[o]=c,a(v),v})},getTeamStatus:o=>{let c="not-covered";return t(u=>{c=u[o]||"not-covered"})(),c},clearAllStatus:()=>{r({}),localStorage.removeItem(sa)},updateFromPlan:(o,c,u)=>{u!==0&&n(v=>{let x;if(c===0?x="not-covered":c===u?x="covered":x="partially-covered",(v[o]||"not-covered")===x)return v;const g={...v};return x==="not-covered"?delete g[o]:g[o]=x,a(g),g})},importStatuses:o=>{r(o),a(o)}}}const Ue=$s(),ja="userRole";function ks(){const{subscribe:t,set:r}=Yt("media");try{const a=localStorage.getItem(ja);a&&["media","spectator","coach"].includes(a)&&r(a)}catch(a){console.error("Failed to load user role:",a)}const n=a=>{try{localStorage.setItem(ja,a)}catch(o){console.error("Failed to save user role:",o)}};return{subscribe:t,setRole:a=>{r(a),n(a)}}}const kr=ks(),Sa=Ir(kr,t=>t==="media"),wa=Ir(kr,t=>t==="spectator"),Is=Ir(kr,t=>t==="coach");var Ps=S('<form class="space-y-4"><div class="flex flex-col sm:flex-row gap-3 sm:gap-4"><div class="flex-1"><label for="eventId" class="block text-xs text-[#9fa2ab] mb-1.5">Event ID</label> <input id="eventId" type="text" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;" placeholder="Enter Event ID"/></div> <div class="flex-1 sm:min-w-[160px]"><label for="date" class="block text-xs text-[#9fa2ab] mb-1.5">Date</label> <input id="date" type="date" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;"/></div> <div class="flex-1 sm:min-w-[120px]"><label for="timeWindow" class="block text-xs text-[#9fa2ab] mb-1.5">Window (min)</label> <input id="timeWindow" type="number" min="1" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;"/></div> <div class="flex items-end"><button type="submit" class="px-4 py-2 sm:py-2 text-sm font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0 disabled:opacity-50 disabled:cursor-not-allowed"> </button></div></div></form>');function Es(t,r){Xt(r,!1);let n=Je(r,"eventId",8),a=Je(r,"date",8),o=Je(r,"timeWindow",8),c=Je(r,"onLoad",8),u=Je(r,"loading",8,!1),v=R(n()),x=R(a()),p=R(o());async function g(L){L.preventDefault(),await c()(e(v),e(x),e(p))}ie(()=>(_(n()),e(v),_(a()),e(x),_(o()),e(p)),()=>{n()!==e(v)&&y(v,n()),a()!==e(x)&&y(x,a()),o()!==e(p)&&y(p,o())}),cr(),Kt();var M=Ps(),k=i(M),C=i(k),f=d(i(C),2);Zr(f),s(C);var b=d(C,2),T=d(i(b),2);Zr(T),s(b);var W=d(b,2),w=d(i(W),2);Zr(w),s(W);var N=d(W,2),q=i(N),se=i(q,!0);s(q),s(N),s(k),s(M),Y(()=>{f.disabled=u(),T.disabled=u(),w.disabled=u(),q.disabled=u(),rr(q,`background-color: ${u()?"#ca8a04":"#eab308"}; color: #18181b;`),$(se,u()?"Loading...":"Load")}),ea(f,()=>e(v),L=>y(v,L)),ea(T,()=>e(x),L=>y(x,L)),ea(w,()=>e(p),L=>y(p,L)),Dr("submit",M,g),h(t,M),Qt()}const cn=(t,r,n,a={})=>{const{excludeSelected:o=!0,preferNoConflicts:c=!0,preferNearSelected:u=!0,maxResults:v=10}=a;return(o?t.filter(g=>!r.has(g.MatchId)):t).map(g=>{const M=[];let k=0;const C=n.has(g.MatchId);if(!C&&c?(k+=50,M.push("No conflicts")):C&&(k-=20,M.push("Has conflicts")),u&&r.size>0){const b=g.ScheduledStartDateTime,T=g.ScheduledEndDateTime,W=t.filter(N=>r.has(N.MatchId));let w=1/0;W.forEach(N=>{const q=N.ScheduledStartDateTime,se=N.ScheduledEndDateTime,L=Math.abs(b-se),ce=Math.abs(q-T),_e=Math.min(L,ce);_e<w&&(w=_e)}),w<7200*1e3?(k+=20,M.push("Near selected matches")):w>14400*1e3&&(k-=10,M.push("Far from selected matches"))}u&&r.size>0&&t.filter(W=>r.has(W.MatchId)).filter(W=>W.CourtName===g.CourtName).length>0&&(k+=15,M.push("Same court as selected matches"));const f=new Date(g.ScheduledStartDateTime).getHours();return f>=8&&f<12&&(k+=5,M.push("Morning match")),{match:g,score:k,reasons:M}}).sort((g,M)=>M.score-g.score).slice(0,v).filter(g=>g.score>0)},pa=(t,r,n,a,o,c={})=>{const{excludeSelected:u=!0,preferUncovered:v=!0,preferNoConflicts:x=!0,preferNearSelected:p=!0,maxResults:g=10}=c,M=[];return t.forEach(k=>{if(u&&r.has(k.MatchId))return;const C=o(k);if(!C)return;const f=a.get(C)||"not-covered",b=n.has(k.MatchId);let T=0;const W=[];if(v&&f==="not-covered"&&(T+=10,W.push("Uncovered team")),x&&!b&&(T+=5,W.push("No conflicts")),p&&r.size>0){const w=k.ScheduledStartDateTime;let N=!1;t.forEach(q=>{if(r.has(q.MatchId)){const L=Math.abs(w-q.ScheduledStartDateTime)/6e4;L<=30&&L>0&&(N=!0)}}),N&&(T+=3,W.push("Near selected match"))}T>0&&W.length>0&&M.push({match:k,teamId:C,reason:W.join(", "),score:T})}),M.sort((k,C)=>C.score-k.score).slice(0,g)},Os=()=>{try{const t=window.location.hash;if(!t||!t.startsWith("#scores="))return null;const r=t.substring(8),n=decodeURIComponent(escape(atob(r))),a=JSON.parse(n);return!a.scores||!Array.isArray(a.scores)?null:{eventId:a.eventId||"",scores:a.scores}}catch(t){return console.error("Failed to extract scores from URL:",t),null}},Ns=()=>{const t=window.location.hash;return t!==null&&t.startsWith("#scores=")},Lr={division:null,wave:"all",teams:[],timeRange:{start:null,end:null},conflictsOnly:!1,coverageStatus:"all",priority:"all"},ia="matchFilters";function As(){const{subscribe:t,set:r,update:n}=Yt(Lr);try{const o=localStorage.getItem(ia);if(o){const c=JSON.parse(o);r({...Lr,...c})}}catch(o){console.error("Failed to load filters:",o)}const a=o=>{try{localStorage.setItem(ia,JSON.stringify(o))}catch(c){console.error("Failed to save filters:",c)}};return{subscribe:t,updateFilter:(o,c)=>{n(u=>{const v={...u,[o]:c};return a(v),v})},resetFilters:()=>{r(Lr),localStorage.removeItem(ia)},setTimeRangePreset:o=>{n(c=>{let u;return o==="morning"?u={...c,timeRange:{start:"00:00",end:"14:29"}}:o==="afternoon"?u={...c,timeRange:{start:"14:30",end:"23:59"}}:u={...c,timeRange:{start:null,end:null}},a(u),u})},getTeamIdentifier:o=>{const u=(o.InvolvedTeam==="first"?o.FirstTeamText:o.SecondTeamText).match(/(\d+-\d+)/);return u?u[1]:""}}}const Er=As();function Ie(t){const n=(t.InvolvedTeam==="first"?t.FirstTeamText:t.SecondTeamText).match(/(\d+-\d+)/);return n?n[1]:""}function Yr(t){const r=new Set(t.map(n=>n.Division.CodeAlias));return Array.from(r).sort()}function Ta(t){const r=new Set;return t.forEach(n=>{const a=Ie(n);a&&r.add(a)}),Array.from(r).sort()}function ln(t){let r=Lr;return Er.subscribe(n=>{r=n})(),t.filter(n=>{if(r.division&&n.Division.CodeAlias!==r.division)return!1;if(r.wave!=="all"){const a=new Date(n.ScheduledStartDateTime).getTime(),o=new Date(a),c=o.getHours(),u=o.getMinutes(),v=c*60+u,x=870;if(r.wave==="morning"&&v>=x||r.wave==="afternoon"&&v<x)return!1}if(r.teams.length>0){const a=Ie(n);if(!a||!r.teams.includes(a))return!1}if(r.timeRange.start||r.timeRange.end){const a=new Date(n.ScheduledStartDateTime).getTime(),o=new Date(a),c=o.getHours(),u=o.getMinutes(),v=c*60+u;if(r.timeRange.start){const[x,p]=r.timeRange.start.split(":").map(Number),g=x*60+p;if(v<g)return!1}if(r.timeRange.end){const[x,p]=r.timeRange.end.split(":").map(Number),g=x*60+p;if(v>g)return!1}}return!0})}function Lt(t,r){Er.updateFilter(t,r)}function ca(){Er.resetFilters()}const la="matchPriorities";function Fs(){const{subscribe:t,set:r,update:n}=Yt({});try{const o=localStorage.getItem(la);if(o){const c=JSON.parse(o);r(c)}}catch(o){console.error("Failed to load priorities:",o)}const a=o=>{try{localStorage.setItem(la,JSON.stringify(o))}catch(c){console.error("Failed to save priorities:",c)}};return{subscribe:t,setPriority:(o,c)=>{n(u=>{const v={...u};return c===null?delete v[o]:v[o]=c,a(v),v})},getPriority:o=>{let c=null;return t(u=>{c=u[o]||null})(),c},clearAllPriorities:()=>{r({}),localStorage.removeItem(la)}}}const jt=Fs(),Ua="followedTeams",Ya="teamColors";function Rs(){const{subscribe:t,set:r,update:n}=Yt([]),{subscribe:a,set:o,update:c}=Yt(new Map);{try{const x=localStorage.getItem(Ua);x&&r(JSON.parse(x))}catch(x){console.error("Failed to load followed teams:",x)}try{const x=localStorage.getItem(Ya);if(x){const p=JSON.parse(x);o(new Map(Object.entries(p)))}}catch(x){console.error("Failed to load team colors:",x)}}const u=x=>{try{localStorage.setItem(Ua,JSON.stringify(x))}catch(p){console.error("Failed to save followed teams:",p)}},v=x=>{try{const p={};x.forEach((g,M)=>{p[M]=g}),localStorage.setItem(Ya,JSON.stringify(p))}catch(p){console.error("Failed to save team colors:",p)}};return{subscribe:t,followTeam:(x,p)=>{n(g=>{if(g.some(k=>k.teamId===x))return g;const M=[...g,{teamId:x,teamName:p,followedAt:Date.now()}];return u(M),M})},unfollowTeam:x=>{n(p=>{const g=p.filter(M=>M.teamId!==x);return u(g),g}),c(p=>{const g=new Map(p);return g.delete(x),v(g),g})},isFollowing:x=>{let p=!1;return t(g=>{p=g.some(M=>M.teamId===x)})(),p},setTeamColor:(x,p)=>{c(g=>{const M=new Map(g);return M.set(x,p),v(M),M})},getTeamColor:x=>{let p=null;return a(g=>{p=g.get(x)||null})(),p},reorderTeams:(x,p)=>{n(g=>{const M=g.findIndex(f=>f.teamId===x);if(M===-1)return g;const k=[...g],C=k[M];return p==="top"?(k.splice(M,1),k.unshift(C)):p==="up"&&M>0?[k[M-1],k[M]]=[k[M],k[M-1]]:p==="down"&&M<k.length-1&&([k[M],k[M+1]]=[k[M+1],k[M]]),u(k),k})}}}const Nr=Rs(),Ba="notificationPreferences",Ar={upcomingMatchReminder:!0,reminderMinutes:5,scoreUpdateNotification:!0,browserNotifications:!1};function Ws(){const{subscribe:t,set:r,update:n}=Yt(Ar),{subscribe:a,set:o}=Yt("default");{try{const v=localStorage.getItem(Ba);if(v){const x=JSON.parse(v);r({...Ar,...x})}}catch(v){console.error("Failed to load notification preferences:",v)}"Notification"in window&&o(Notification.permission)}const c=v=>{try{localStorage.setItem(Ba,JSON.stringify(v))}catch(x){console.error("Failed to save notification preferences:",x)}},u=(v,x,p=!1)=>{let g="default";a(M=>{g=M})(),p&&g==="granted"&&"Notification"in window?new Notification(v,{body:x,icon:"/favicon.ico",tag:"courtsync-notification"}):console.log(`[Notification] ${v}: ${x}`)};return{preferences:{subscribe:t},notificationPermission:{subscribe:a},requestPermission:async()=>{if("Notification"in window){let v="default";if(a(x=>{v=x})(),v==="default"){const x=await Notification.requestPermission();return o(x),x==="granted"}return v==="granted"}return!1},checkUpcomingMatches:(v,x)=>{let p=Ar;if(t(k=>{p=k})(),!p.upcomingMatchReminder)return;const g=Date.now(),M=p.reminderMinutes*60*1e3;v.forEach(k=>{const C=k.ScheduledStartDateTime,f=C-g,b=k.FirstTeamText||k.SecondTeamText;if(x.includes(b)&&f>0&&f<=M){const T=`reminder-${k.MatchId}`,W=localStorage.getItem(T);if(!W||Date.now()-parseInt(W)>M){const w=Math.floor(f/6e4);u(`Match starting in ${w} minute${w!==1?"s":""}`,`${k.FirstTeamText} vs ${k.SecondTeamText}
${new Date(C).toLocaleTimeString()} - ${k.CourtName}`,p.browserNotifications),localStorage.setItem(T,Date.now().toString())}}})},notifyScoreUpdate:(v,x)=>{let p=Ar;if(t(b=>{p=b})(),!p.scoreUpdateNotification)return;const g=x.sets.find(b=>b.completedAt===0)||x.sets[x.sets.length-1],M=x.sets.filter(b=>b.completedAt>0),k=M.filter(b=>b.team1Score>b.team2Score).length,C=M.filter(b=>b.team2Score>b.team1Score).length;let f=`Score: ${g.team1Score}-${g.team2Score}`;M.length>0&&(f=`Sets: ${k}-${C} | ${f}`),u(`${v.FirstTeamText} vs ${v.SecondTeamText}`,f,p.browserNotifications)},updatePreferences:v=>{n(x=>{const p={...x,...v};return c(p),p})}}}const da=Ws(),Ls="courtsync-score-updates";let Fr=null;const js=()=>{if(!Fr)try{Fr=new BroadcastChannel(Ls)}catch(t){console.error("BroadcastChannel not supported:",t),Fr={postMessage:()=>{},close:()=>{},onmessage:null}}return Fr},Us=(t,r,n)=>{const a=js(),o={type:n?"score-update":"score-delete",eventId:t,matchId:r,score:n||void 0,timestamp:Date.now()};try{a.postMessage(o)}catch(c){console.error("Failed to broadcast score update:",c)}},Ha="scoreHistory",Ys=(t,r,n)=>{try{const a=localStorage.getItem(Ha),o=a?JSON.parse(a):{};o[t.toString()]||(o[t.toString()]=[]);const c={matchId:t,timestamp:Date.now(),sets:[...r.sets],status:r.status,updatedBy:n};o[t.toString()].push(c),o[t.toString()].length>100&&(o[t.toString()]=o[t.toString()].slice(-100)),localStorage.setItem(Ha,JSON.stringify(o))}catch(a){console.error("Failed to save score history:",a)}},Va="claimHistory",Ga=1e3;function ua(t){try{const r=localStorage.getItem(Va),n=r?JSON.parse(r):[];n.unshift(t),n.length>Ga&&n.splice(Ga),localStorage.setItem(Va,JSON.stringify(n))}catch(r){console.error("Failed to save claim history:",r)}}const Ja="matchClaims",va="matchScores",Bs=1800*1e3;function dn({eventId:t,userId:r="anonymous"}){const{subscribe:n,set:a,update:o}=Yt(new Map),{subscribe:c,set:u,update:v}=Yt(new Map);{try{const C=localStorage.getItem(Ja);if(C){const f=JSON.parse(C),b=new Map;Object.values(f).forEach(T=>{T.eventId===t&&T.expiresAt>Date.now()&&b.set(T.matchId,T)}),a(b)}}catch(C){console.error("Failed to load claims:",C)}try{const C=localStorage.getItem(va);if(C){const f=JSON.parse(C),b=new Map;Object.values(f).forEach(T=>{T.eventId===t&&b.set(T.matchId,T)}),u(b)}}catch(C){console.error("Failed to load scores:",C)}}const x=C=>{try{const f={};C.forEach(b=>{f[b.matchId.toString()]=b}),localStorage.setItem(Ja,JSON.stringify(f))}catch(f){console.error("Failed to save claims:",f)}},p=C=>{try{const f={};C.forEach(b=>{f[b.matchId.toString()]=b}),localStorage.setItem(va,JSON.stringify(f))}catch(f){console.error("Failed to save scores:",f)}};let g=null;return{claims:{subscribe:n},scores:{subscribe:c},claimMatch:(C,f)=>{const b=Date.now(),T=f+Bs,W={matchId:C,claimedBy:r,claimedAt:b,expiresAt:T,eventId:t};o(w=>{const N=new Map(w);return N.set(C,W),x(N),N}),ua({matchId:C,eventId:t,action:"claimed",userId:r,timestamp:b})},releaseClaim:C=>{o(f=>{const b=f.get(C),T=new Map(f);return T.delete(C),x(T),b&&io&&ua({matchId:C,eventId:t,action:"released",userId:b.claimedBy,timestamp:Date.now()}),T})},transferClaim:(C,f)=>{let b=!1;if(n(W=>{const w=W.get(C);b=(w==null?void 0:w.claimedBy)===r&&w.expiresAt>Date.now()})(),!b)return!1;const T=Date.now();return o(W=>{const w=W.get(C);if(!w)return W;const N={...w,claimedBy:f,claimedAt:T},q=new Map(W);return q.set(C,N),x(q),ua({matchId:C,eventId:t,action:"transferred",userId:r,timestamp:T,transferredTo:f}),q}),!0},isClaimed:C=>{let f=!1;return n(b=>{const T=b.get(C);f=T?T.expiresAt>Date.now():!1})(),f},getClaimStatus:C=>{let f="available";return n(b=>{const T=b.get(C);!T||T.expiresAt<Date.now()?f="available":T.claimedBy===r?f="claimed":f="locked"})(),f},getClaimer:C=>{let f=null;return n(b=>{const T=b.get(C);f=T&&T.expiresAt>Date.now()?T.claimedBy:null})(),f},isClaimOwner:C=>{let f=!1;return n(b=>{const T=b.get(C);f=(T==null?void 0:T.claimedBy)===r&&T.expiresAt>Date.now()})(),f},updateScore:(C,f,b)=>{const T={matchId:C,eventId:t,sets:f,status:b,lastUpdated:Date.now(),lastUpdatedBy:r};v(W=>{const w=new Map(W);return w.set(C,T),p(w),w}),Us(t,C,T),Ys(C,T,r)},getScore:C=>{let f=null;return c(b=>{f=b.get(C)||null})(),f},clearEventData:()=>{o(C=>{const f=new Map(C);return f.forEach((b,T)=>{b.eventId===t&&f.delete(T)}),x(f),f}),v(C=>{const f=new Map(C);return f.forEach((b,T)=>{b.eventId===t&&f.delete(T)}),p(f),f})},startPolling:()=>{g||(g=setInterval(()=>{try{const C=localStorage.getItem(va);if(!C)return;const f=JSON.parse(C),b=new Map;let T=!1;c(W=>{Object.values(f).forEach(w=>{if(w.eventId===t){b.set(w.matchId,w);const N=W.get(w.matchId);(!N||w.lastUpdated&&w.lastUpdated>N.lastUpdated)&&(T=!0)}}),T&&v(w=>{const N=new Map(w);return b.forEach((q,se)=>{const L=w.get(se);(!L||q.lastUpdated&&q.lastUpdated>L.lastUpdated)&&N.set(se,q)}),N})})()}catch(C){console.error("Failed to poll scores:",C)}},3e3))},stopPolling:()=>{g&&(clearInterval(g),g=null)}}}const fa="matchNotes";function Hs(t){const{subscribe:r,set:n,update:a}=Yt(new Map);try{const c=localStorage.getItem(fa);if(c){const u=JSON.parse(c),v=new Map;Object.values(u).forEach(x=>{x.eventId===t&&v.set(x.matchId,x)}),n(v)}}catch(c){console.error("Failed to load match notes:",c)}const o=c=>{try{const u=localStorage.getItem(fa),v=u?JSON.parse(u):{};c.forEach(x=>{v[`${t}-${x.matchId}`]=x}),Object.keys(v).forEach(x=>{if(x.startsWith(`${t}-`)){const p=parseInt(x.split("-").pop()||"0");c.has(p)||delete v[x]}}),localStorage.setItem(fa,JSON.stringify(v))}catch(u){console.error("Failed to save match notes:",u)}};return{subscribe:r,setNote:(c,u)=>{const v=Date.now();a(x=>{const p=new Map(x),g=p.get(c);return u.trim()?p.set(c,{matchId:c,eventId:t,note:u.trim(),createdAt:(g==null?void 0:g.createdAt)||v,updatedAt:v}):p.delete(c),o(p),p})},getNote:c=>{let u="";return r(v=>{var x;u=((x=v.get(c))==null?void 0:x.note)||""})(),u},deleteNote:c=>{a(u=>{const v=new Map(u);return v.delete(c),o(v),v})},hasNote:c=>{let u=!1;return r(v=>{const x=v.get(c);u=x!==void 0&&x.note.trim().length>0})(),u}}}function Vs(t){return Hs(t)}var Gs=S('<div class="text-center py-8 text-[#9fa2ab] text-sm">Loading schedule...</div>'),Js=S('<div class="text-center py-4 text-red-400 text-sm"> </div>'),qs=S("<button>Statistics</button>"),zs=S('<div class="text-[#9fa2ab]">TeamStatsView - To be migrated</div>'),Xs=S('<div class="text-xs text-[#808593] py-4 text-center">No schedule data available</div>'),Qs=S('<div class="flex-shrink-0 w-20 text-xs text-[#facc15] font-medium"> </div>'),Ks=S('<span class="text-[#808593] font-medium">WORK</span> <span class="text-[#808593] ml-2"> </span>',1),Zs=S('<span class="text-[#808593] mx-1">vs</span> ',1),ei=S('<span class="text-[#eab308] font-semibold">PLAY</span> <span class="text-[#c0c2c8] ml-2"> <!></span>',1),ti=S('<span class="mx-1">vs</span> ',1),ri=S('<span class="text-[#808593] font-medium">WATCH</span> <span class="text-[#808593] ml-2"> <!></span>',1),ai=S('<div class="flex-shrink-0"><span class="px-2 py-0.5 text-[10px] font-semibold rounded"> </span></div>'),ni=S('<div><div></div> <div class="flex-shrink-0 w-16 text-xs font-medium text-[#9fa2ab]"> </div> <div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <!> <div class="flex-1 min-w-0"><div class="text-xs"><!></div></div> <!></div>'),oi=S('<div class="space-y-1"><div class="flex items-center gap-2 mb-2 pb-1 border-b border-[#454654]"><h6 class="text-xs font-semibold text-[#f8f8f9]"> </h6> <span class="text-[10px] text-[#808593]"> </span></div> <!></div>'),si=S('<div><h5 class="text-xs font-semibold text-[#9fa2ab] uppercase tracking-wider mb-2">Complete Schedule</h5> <div class="space-y-4"><!></div></div>'),ii=S('<div class="text-xs text-[#808593] py-4 text-center">No pool data available for this team</div>'),ci=S("<option> </option>"),li=S('<div class="mb-4"><label class="text-xs text-[#9fa2ab] mb-1 block">Pool:</label> <select class="w-full px-3 py-2.5 sm:py-2 text-sm font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"></select></div>'),di=S('<tr><td class="px-2 sm:px-3 py-2 text-[#f8f8f9] font-medium"> </td><td class="px-2 sm:px-3 py-2"><div> </div></td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td></tr>'),ui=S('<div class="border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="px-3 sm:px-4 py-2 bg-[#454654] border-b border-[#525463]"><h6 class="text-xs sm:text-sm font-semibold text-[#f8f8f9]"> </h6></div> <div class="overflow-x-auto"><table class="w-full text-xs min-w-[500px]"><thead><tr class="border-b border-[#454654] bg-[#454654]/50"><th class="px-2 sm:px-3 py-2 text-left text-[#9fa2ab] font-semibold">Rank</th><th class="px-2 sm:px-3 py-2 text-left text-[#9fa2ab] font-semibold">Team</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">W</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">L</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">Sets</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">Points</th></tr></thead><tbody></tbody></table></div></div>'),vi=S('<div class="flex-shrink-0 w-20 text-xs text-[#facc15] font-medium"> </div>'),fi=S('<span class="text-[#808593] mx-1">vs</span> ',1),mi=S('<div><div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <!> <div class="flex-1 min-w-0 text-xs text-[#c0c2c8]"> <!></div></div>'),xi=S('<div class="border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="px-3 sm:px-4 py-2 bg-[#454654] border-b border-[#525463]"><h6 class="text-xs sm:text-sm font-semibold text-[#f8f8f9]">Pool Schedule</h6></div> <div class="p-3 sm:p-4 space-y-2"></div></div>'),bi=S('<div class="space-y-4"><!> <!></div>'),hi=S('<div class="text-xs text-[#808593] py-4 text-center">Loading pool sheet...</div>'),pi=S("<!> <!>",1),gi=S('<div><h5 class="text-xs font-semibold text-[#9fa2ab] uppercase tracking-wider mb-2">Pool Standings</h5> <!></div>'),_i=S('<div class="space-y-4"><div class="flex items-center gap-2 border-b border-[#454654] pb-2"><button>Schedule</button> <button>Pool Sheet</button> <!></div> <!></div>'),yi=S('<div class="mt-2 border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="p-3 sm:p-4"><div class="flex items-center justify-between mb-3 sm:mb-4"><h4 class="text-xs sm:text-sm font-semibold text-[#f8f8f9] truncate pr-2"> </h4> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!> <!> <!></div></div>');function un(t,r){Xt(r,!1);const n=R(),a=R(),o=R(),c=R(),u=R();let v=Je(r,"match",8),x=Je(r,"eventId",8),p=Je(r,"clubId",8),g=Je(r,"onClose",8),M=Je(r,"matches",24,()=>[]),k=R(null),C=R([]),f=R([]),b=R([]),T=R([]),W=R(null),w=R(null),N=R("schedule"),q=R(!0),se=R(null);function L(){return v().InvolvedTeam==="first"?v().FirstTeamText:v().InvolvedTeam==="second"?v().SecondTeamText:""}const ce=Ie(v()),_e=L();_a(async()=>{y(q,!0),y(se,null);try{const I=(await mo(x(),p())).value||[],oe=L();if(!oe){y(se,"Could not extract team name from match"),y(q,!1);return}const le=I.find(qe=>{if(qe.TeamText===oe||qe.TeamName===oe)return!0;const ct=oe.match(/(\d+-\d+)/);if(ct){const D=ct[1];return qe.TeamName.includes(D)||qe.TeamText.includes(D)}return!1});if(!le){y(se,`Team not found: ${oe}`),y(q,!1);return}const pe=le.TeamId,$e=le.TeamDivision.DivisionId;y(k,{TeamId:pe,DivisionId:$e,TeamName:le.TeamName,TeamText:le.TeamText});const[rt,xt,wt]=await Promise.all([aa(x(),$e,pe,"current").catch(()=>[]),aa(x(),$e,pe,"work").catch(()=>[]),aa(x(),$e,pe,"future").catch(()=>[])]),Tt=(qe,ct=!1)=>Array.isArray(qe)?qe.flatMap(D=>{var ae,H;return ct?D.Match?[{...D.Match,Court:D.Match.Court||null,Division:{...D.Play,PlayId:(ae=D.Play)==null?void 0:ae.PlayId},FirstTeamText:((H=D.Play)==null?void 0:H.CompleteShortName)||"Work Assignment",SecondTeamText:void 0}]:[]:!D.Matches||!Array.isArray(D.Matches)?[]:D.Matches.map(Q=>{var ue;return{...Q,Court:Q.Court||null,Division:{...D.Play,PlayId:(ue=D.Play)==null?void 0:ue.PlayId}}})}):[];y(C,Tt(rt,!1)),y(f,Tt(xt,!0)),y(b,Tt(wt,!1));const Xe=await xo(x(),$e).catch(()=>null);Xe!=null&&Xe.Plays&&y(T,Xe.Plays)}catch(m){y(se,m instanceof Error?m.message:"Failed to load team data")}finally{y(q,!1)}});function ee(m,I=!1){var rt,xt;const oe=typeof m.ScheduledStartDateTime=="string"?new Date(m.ScheduledStartDateTime).getTime():m.ScheduledStartDateTime,le=((rt=m.FirstTeamText)==null?void 0:rt.includes("630"))||((xt=m.SecondTeamText)==null?void 0:xt.includes("630")),pe=It(oe),$e=Ye(oe);return{matchDate:pe,startTimeDisplay:$e,isPlaying:le,isWork:I,scheduleMatch:m}}ie(()=>e(N),()=>{e(N)==="poolsheet"&&y(w,null)}),ie(()=>(e(C),e(f),e(b)),()=>{y(n,[...e(C).map(I=>({...I,type:"current"})),...e(f).map(I=>({...I,type:"work"})),...e(b).map(I=>({...I,type:"future"}))].filter((I,oe,le)=>le.findIndex(pe=>pe.MatchId===I.MatchId)===oe).sort((I,oe)=>{const le=typeof I.ScheduledStartDateTime=="string"?new Date(I.ScheduledStartDateTime).getTime():I.ScheduledStartDateTime||0,pe=typeof oe.ScheduledStartDateTime=="string"?new Date(oe.ScheduledStartDateTime).getTime():oe.ScheduledStartDateTime||0;return le-pe}))}),ie(()=>e(n),()=>{y(a,(()=>{const m=new Set;return e(n).forEach(I=>{if(I.Division&&I.Division.PlayId){const oe=Math.abs(I.Division.PlayId);m.add(oe)}}),Array.from(m)})())}),ie(()=>(e(T),e(a)),()=>{y(o,e(T).filter(m=>{const I=Math.abs(m.PlayId);return e(a).includes(I)}))}),ie(()=>(e(o),e(W)),()=>{e(o).length>0&&!e(W)&&y(W,e(o)[0].PlayId)}),ie(()=>(e(W),e(N),_(x())),()=>{e(W)&&e(N)==="poolsheet"&&bo(x(),e(W)).then(m=>{y(w,m)}).catch(m=>{console.error("Failed to fetch pool sheet:",m),y(w,null)})}),ie(()=>(e(n),It),()=>{y(c,(()=>{const m={};return e(n).forEach(I=>{const oe=typeof I.ScheduledStartDateTime=="string"?new Date(I.ScheduledStartDateTime).getTime():I.ScheduledStartDateTime||0,le=It(oe);m[le]||(m[le]=[]),m[le].push(I)}),m})())}),ie(()=>e(c),()=>{y(u,Object.keys(e(c)).sort((m,I)=>{const oe=new Date(m).getTime(),le=new Date(I).getTime();return oe-le}))}),cr(),Kt();var De=yi(),ye=i(De),We=i(ye),Be=i(We),Ce=i(Be);s(Be);var Ge=d(Be,2);Ge.__click=function(...m){var I;(I=g())==null||I.apply(this,m)},s(We);var it=d(We,2);{var _t=m=>{var I=Gs();h(m,I)};P(it,m=>{e(q)&&m(_t)})}var yt=d(it,2);{var Ne=m=>{var I=Js(),oe=i(I,!0);s(I),Y(()=>$(oe,e(se))),h(m,I)};P(yt,m=>{e(se)&&m(Ne)})}var O=d(yt,2);{var te=m=>{var I=_i(),oe=i(I),le=i(oe);le.__click=()=>y(N,"schedule");var pe=d(le,2);pe.__click=()=>y(N,"poolsheet");var $e=d(pe,2);{var rt=Xe=>{var qe=qs();qe.__click=()=>y(N,"stats"),Y(()=>he(qe,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(N)==="stats"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)),h(Xe,qe)};P($e,Xe=>{_(M()),l(()=>M().length>0&&ce)&&Xe(rt)})}s(oe);var xt=d(oe,2);{var wt=Xe=>{var qe=zs();h(Xe,qe)},Tt=Xe=>{var qe=Ot(),ct=st(qe);{var D=H=>{var Q=si(),ue=d(i(Q),2),me=i(ue);{var xe=He=>{var at=Xs();h(He,at)},Te=He=>{var at=Ot(),ut=st(at);mt(ut,1,()=>e(u),ft,(ht,Se)=>{const Me=Z(()=>(e(c),e(Se),l(()=>e(c)[e(Se)])));var we=oi(),A=i(we),j=i(A),z=i(j,!0);s(j);var K=d(j,2),X=i(K);s(K),s(A);var ne=d(A,2);mt(ne,1,()=>e(Me),ft,(U,de)=>{const E=Z(()=>(e(de),l(()=>ee(e(de),e(de).type==="work"))));var G=ni(),F=i(G),B=d(F,2),J=i(B,!0);s(B);var ve=d(B,2),fe=i(ve,!0);s(ve);var Fe=d(ve,2);{var ke=be=>{var ze=Qs(),Pe=i(ze,!0);s(ze),Y(()=>$(Pe,(_(e(E)),l(()=>e(E).scheduleMatch.Court.Name)))),h(be,ze)};P(Fe,be=>{_(e(E)),l(()=>e(E).scheduleMatch.Court)&&be(ke)})}var re=d(Fe,2),Le=i(re),Ae=i(Le);{var Qe=be=>{var ze=Ks(),Pe=d(st(ze),2),lt=i(Pe,!0);s(Pe),Y(()=>$(lt,(_(e(E)),l(()=>{var Ct,ot;return((Ct=e(E).scheduleMatch.Division)==null?void 0:Ct.CompleteShortName)||((ot=e(E).scheduleMatch.Division)==null?void 0:ot.FullName)||e(E).scheduleMatch.FirstTeamText})))),h(be,ze)},ge=be=>{var ze=Ot(),Pe=st(ze);{var lt=ot=>{var je=ei(),Oe=d(st(je),2),dt=i(Oe),Re=d(dt);{var nt=Ke=>{var Ze=Zs(),Mt=d(st(Ze));Y(()=>$(Mt,` ${_(e(E)),l(()=>e(E).scheduleMatch.SecondTeamText)??""}`)),h(Ke,Ze)};P(Re,Ke=>{_(e(E)),l(()=>e(E).scheduleMatch.SecondTeamText)&&Ke(nt)})}s(Oe),Y(()=>$(dt,`${_(e(E)),l(()=>e(E).scheduleMatch.FirstTeamText)??""} `)),h(ot,je)},Ct=ot=>{var je=ri(),Oe=d(st(je),2),dt=i(Oe),Re=d(dt);{var nt=Ke=>{var Ze=ti(),Mt=d(st(Ze));Y(()=>$(Mt,` ${_(e(E)),l(()=>e(E).scheduleMatch.SecondTeamText)??""}`)),h(Ke,Ze)};P(Re,Ke=>{_(e(E)),l(()=>e(E).scheduleMatch.SecondTeamText)&&Ke(nt)})}s(Oe),Y(()=>$(dt,`${_(e(E)),l(()=>e(E).scheduleMatch.FirstTeamText)??""} `)),h(ot,je)};P(Pe,ot=>{_(e(E)),l(()=>e(E).isPlaying)?ot(lt):ot(Ct,!1)},!0)}h(be,ze)};P(Ae,be=>{_(e(E)),l(()=>e(E).isWork)?be(Qe):be(ge,!1)})}s(Le),s(re);var Ee=d(re,2);{var V=be=>{var ze=ai(),Pe=i(ze),lt=i(Pe,!0);s(Pe),s(ze),Y(()=>{rr(Pe,`background-color: ${_(e(E)),l(()=>e(E).scheduleMatch.Division.ColorHex)??""}20; color: ${_(e(E)),l(()=>e(E).scheduleMatch.Division.ColorHex)??""}; border: 1px solid ${_(e(E)),l(()=>e(E).scheduleMatch.Division.ColorHex)??""}40;`),$(lt,(_(e(E)),l(()=>e(E).scheduleMatch.Division.CodeAlias)))}),h(be,ze)};P(Ee,be=>{_(e(E)),l(()=>e(E).scheduleMatch.Division)&&be(V)})}s(G),Y(()=>{he(G,1,`flex items-center gap-3 px-3 py-2 rounded border ${_(e(E)),l(()=>e(E).isWork?"border-[#525463] bg-[#454654]/30":e(E).isPlaying?"border-[#eab308]/50 bg-[#eab308]/5":"border-[#454654] bg-[#3b3c48]/30")??""}`),he(F,1,`flex-shrink-0 w-1 h-full rounded-full ${_(e(E)),l(()=>e(E).isWork?"bg-[#808593]":e(E).isPlaying?"bg-[#eab308]":"bg-[#525463]")??""}`),$(J,(_(e(E)),l(()=>e(E).matchDate))),$(fe,(_(e(E)),l(()=>e(E).startTimeDisplay)))}),h(U,G)}),s(we),Y(()=>{$(z,e(Se)),$(X,`(${_(e(Me)),l(()=>e(Me).length)??""} match${_(e(Me)),l(()=>e(Me).length!==1?"es":"")??""})`)}),h(ht,we)}),h(He,at)};P(me,He=>{e(u),l(()=>e(u).length===0)?He(xe):He(Te,!1)})}s(ue),s(Q),h(H,Q)},ae=H=>{var Q=gi(),ue=d(i(Q),2);{var me=Te=>{var He=ii();h(Te,He)},xe=Te=>{var He=pi(),at=st(He);{var ut=we=>{var A=li(),j=d(i(A),2);j.__change=K=>y(W,Number(K.target.value)),mt(j,5,()=>e(o),ft,(K,X)=>{var ne=ci(),U=i(ne,!0);s(ne);var de={};Y(()=>{$(U,(e(X),l(()=>e(X).CompleteFullName||e(X).FullName||`Pool ${e(X).PlayId}`))),de!==(de=(e(X),l(()=>e(X).PlayId)))&&(ne.value=(ne.__value=(e(X),l(()=>e(X).PlayId)))??"")}),h(K,ne)}),s(j);var z;_r(j),s(A),Y(()=>{z!==(z=e(W)||"")&&(j.value=(j.__value=e(W)||"")??"",vr(j,e(W)||""))}),h(we,A)};P(at,we=>{e(o),l(()=>e(o).length>1)&&we(ut)})}var ht=d(at,2);{var Se=we=>{var A=bi(),j=i(A);{var z=ne=>{var U=ui(),de=i(U),E=i(de),G=i(E);s(E),s(de);var F=d(de,2),B=i(F),J=d(i(B));mt(J,5,()=>(e(w),l(()=>e(w).Pool.Teams)),ft,(ve,fe)=>{const Fe=Z(()=>(e(fe),l(()=>{var je;return(je=e(fe).TeamText)==null?void 0:je.includes("630")})));var ke=di(),re=i(ke),Le=i(re,!0);s(re);var Ae=d(re),Qe=i(Ae),ge=i(Qe,!0);s(Qe),s(Ae);var Ee=d(Ae),V=i(Ee,!0);s(Ee);var be=d(Ee),ze=i(be,!0);s(be);var Pe=d(be),lt=i(Pe);s(Pe);var Ct=d(Pe),ot=i(Ct,!0);s(Ct),s(ke),Y(()=>{he(ke,1,`border-b border-[#454654] ${e(Fe)?"bg-[#eab308]/10":""}`),$(Le,(e(fe),l(()=>e(fe).FinishRank||e(fe).OverallRank||"-"))),he(Qe,1,e(Fe)?"text-[#facc15] font-semibold":"text-[#c0c2c8]"),$(ge,(e(fe),l(()=>e(fe).TeamText))),$(V,(e(fe),l(()=>e(fe).MatchesWon??"-"))),$(ze,(e(fe),l(()=>e(fe).MatchesLost??"-"))),$(lt,`${e(fe),l(()=>e(fe).SetsWon??"-")??""}-${e(fe),l(()=>e(fe).SetsLost??"-")??""}`),$(ot,(e(fe),l(()=>e(fe).PointRatio&&e(fe).PointRatio!=="NaN"?e(fe).PointRatio:"-")))}),h(ve,ke)}),s(J),s(B),s(F),s(U),Y(()=>$(G,`${e(w),l(()=>e(w).Pool.CompleteFullName||e(w).Pool.FullName)??""} - Standings`)),h(ne,U)};P(j,ne=>{e(w),l(()=>e(w).Pool&&e(w).Pool.Teams&&e(w).Pool.Teams.length>0)&&ne(z)})}var K=d(j,2);{var X=ne=>{var U=xi(),de=d(i(U),2);mt(de,5,()=>(e(w),l(()=>e(w).Pool.Matches)),ft,(E,G)=>{const F=Z(()=>(e(G),l(()=>typeof e(G).ScheduledStartDateTime=="string"?new Date(e(G).ScheduledStartDateTime).getTime():e(G).ScheduledStartDateTime))),B=Z(()=>(e(G),l(()=>{var ge,Ee;return((ge=e(G).FirstTeamText)==null?void 0:ge.includes("630"))||((Ee=e(G).SecondTeamText)==null?void 0:Ee.includes("630"))})));var J=mi(),ve=i(J),fe=i(ve,!0);s(ve);var Fe=d(ve,2);{var ke=ge=>{var Ee=vi(),V=i(Ee,!0);s(Ee),Y(()=>$(V,(e(G),l(()=>e(G).Court.Name)))),h(ge,Ee)};P(Fe,ge=>{e(G),l(()=>e(G).Court)&&ge(ke)})}var re=d(Fe,2),Le=i(re),Ae=d(Le);{var Qe=ge=>{var Ee=fi(),V=d(st(Ee));Y(()=>$(V,` ${e(G),l(()=>e(G).SecondTeamText)??""}`)),h(ge,Ee)};P(Ae,ge=>{e(G),l(()=>e(G).SecondTeamText)&&ge(Qe)})}s(re),s(J),Y(ge=>{he(J,1,`flex items-center gap-3 px-3 py-2 rounded border ${e(B)?"border-[#eab308]/50 bg-[#eab308]/5":"border-[#454654] bg-[#3b3c48]/30"}`),$(fe,ge),$(Le,`${e(G),l(()=>e(G).FirstTeamText)??""} `)},[()=>(_(Ye),_(e(F)),l(()=>Ye(e(F))))]),h(E,J)}),s(de),s(U),h(ne,U)};P(K,ne=>{e(w),l(()=>e(w).Pool&&e(w).Pool.Matches&&e(w).Pool.Matches.length>0)&&ne(X)})}s(A),h(we,A)},Me=we=>{var A=Ot(),j=st(A);{var z=K=>{var X=hi();h(K,X)};P(j,K=>{e(W)&&K(z)},!0)}h(we,A)};P(ht,we=>{e(W)&&e(w)?we(Se):we(Me,!1)})}h(Te,He)};P(ue,Te=>{e(o),l(()=>e(o).length===0)?Te(me):Te(xe,!1)})}s(Q),h(H,Q)};P(ct,H=>{e(N)==="schedule"?H(D):H(ae,!1)},!0)}h(Xe,qe)};P(xt,Xe=>{e(N)==="stats"&&ce?Xe(wt):Xe(Tt,!1)})}s(I),Y(()=>{he(le,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(N)==="schedule"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(pe,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(N)==="poolsheet"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),h(m,I)};P(O,m=>{!e(q)&&e(k)&&m(te)})}s(ye),s(De),Y(()=>$(Ce,`${e(k),l(()=>{var m;return((m=e(k))==null?void 0:m.TeamText)||_e})??""} - Full Schedule`)),h(t,De),Qt()}ar(["click","change"]);var Si=S("<button><span> </span> <span> </span></button>"),wi=S('<div class="bg-[#3b3c48] border border-[#454654] rounded-lg p-2 shadow-lg min-w-[160px]"><div class="text-xs font-medium text-[#9fa2ab] uppercase tracking-wider mb-2 px-1">Set Priority</div> <div class="space-y-1"></div></div>');function vn(t,r){Xt(r,!1);let n=Je(r,"matchId",8),a=Je(r,"currentPriority",8),o=Je(r,"onPriorityChange",8),c=Je(r,"onClose",8,void 0),u=R(null);const v=[{value:"must-cover",label:"Must Cover",color:"#eab308",icon:"â­"},{value:"priority",label:"Priority",color:"#f59e0b",icon:"ð¸"},{value:"optional",label:"Optional",color:"#9fa2ab",icon:"â"},{value:null,label:"Clear",color:"#9fa2ab",icon:"â"}];function x(M){o()(n(),M),c()&&c()()}Kt();var p=wi(),g=d(i(p),2);mt(g,5,()=>v,ft,(M,k)=>{const C=Z(()=>(_(a()),e(k),l(()=>a()===e(k).value))),f=Z(()=>(e(u),e(k),l(()=>e(u)===e(k).value)));var b=Si();b.__click=()=>x(e(k).value);var T=i(b),W=i(T,!0);s(T);var w=d(T,2),N=i(w,!0);s(w),s(b),Y(()=>{he(b,1,`w-full text-left px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-2 ${e(C)?"bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50":e(f)?"bg-[#454654] text-[#f8f8f9]":"text-[#c0c2c8] hover:bg-[#454654]"}`),$(W,(e(k),l(()=>e(k).icon))),$(N,(e(k),l(()=>e(k).label)))}),Dr("mouseenter",b,()=>y(u,e(k).value)),Dr("mouseleave",b,()=>y(u,null)),h(M,b)}),s(g),s(p),h(t,p),Qt()}ar(["click"]);var Ti=S("<button><span> </span> <span> </span></button>"),Mi=S('<div class="bg-[#3b3c48] border border-[#454654] rounded-lg p-2 shadow-lg min-w-[180px]"><div class="text-xs font-medium text-[#9fa2ab] uppercase tracking-wider mb-2 px-1">Coverage Status</div> <div class="text-xs text-[#c0c2c8] mb-2 px-1"> </div> <div class="space-y-1"></div></div>');function Ma(t,r){Xt(r,!1);let n=Je(r,"teamId",8),a=Je(r,"currentStatus",8),o=Je(r,"onStatusChange",8),c=Je(r,"onClose",8,void 0),u=R(null);const v=[{value:"not-covered",label:"Not Covered",color:"#9fa2ab",icon:"â"},{value:"covered",label:"Covered",color:"#10b981",icon:"â"},{value:"partially-covered",label:"Partially Covered",color:"#f59e0b",icon:"â"},{value:"planned",label:"Planned",color:"#eab308",icon:"ð"}];function x(C){o()(n(),C),c()&&c()()}Kt();var p=Mi(),g=d(i(p),2),M=i(g);s(g);var k=d(g,2);mt(k,5,()=>v,ft,(C,f)=>{const b=Z(()=>(_(a()),e(f),l(()=>a()===e(f).value))),T=Z(()=>(e(u),e(f),l(()=>e(u)===e(f).value)));var W=Ti();W.__click=()=>x(e(f).value);var w=i(W),N=i(w,!0);s(w);var q=d(w,2),se=i(q,!0);s(q),s(W),Y(()=>{he(W,1,`w-full text-left px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-2 ${_(e(b)),e(f),_(e(T)),l(()=>e(b)?e(f).value==="covered"?"bg-green-500/20 text-green-400 border border-green-500/50":e(f).value==="planned"?"bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50":e(f).value==="partially-covered"?"bg-[#f59e0b]/20 text-[#fbbf24] border border-[#f59e0b]/50":"bg-[#454654] text-[#9fa2ab] border border-[#525463]":e(T)?"bg-[#454654] text-[#f8f8f9]":"text-[#c0c2c8] hover:bg-[#454654]")??""}`),$(N,(e(f),l(()=>e(f).icon))),$(se,(e(f),l(()=>e(f).label)))}),Dr("mouseenter",W,()=>y(u,e(f).value)),Dr("mouseleave",W,()=>y(u,null)),h(C,W)}),s(k),s(p),Y(()=>$(M,`Team ${n()??""}`)),h(t,p),Qt()}ar(["click"]);var Ci=S('<div class="text-center py-12 text-[#9fa2ab] text-sm"> </div>'),Di=S('<div class="text-[#9fa2ab] mb-4">LiveMatchDashboard - To be migrated</div>'),$i=S("<button> </button>"),ki=S('<div class="mb-4 px-4 py-2 rounded-lg border border-[#454654] bg-[#3b3c48] flex items-center justify-between flex-wrap gap-2"><div class="flex items-center gap-4 flex-wrap"><div class="text-xs text-[#9fa2ab]"><span class="font-semibold text-[#f8f8f9]"> </span> Coverage</div> <div class="flex items-center gap-2 text-xs"><span class="text-green-400"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#f59e0b]"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#eab308]"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#808593]"> </span></div></div> <div class="flex items-center gap-2 flex-wrap"><button title="Dim covered teams to focus on uncovered"> </button> <!></div></div>'),Ii=S('<div class="flex items-center justify-between px-3 py-2 rounded bg-[#454654] border border-[#525463] hover:border-[#eab308]/50 transition-colors"><div class="flex-1 min-w-0"><div class="text-xs font-medium text-[#f8f8f9] truncate"> </div> <div class="text-[10px] text-[#9fa2ab] mt-0.5"> </div></div> <button class="ml-3 px-3 py-1 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors flex-shrink-0">Add</button></div>'),Pi=S('<div class="mb-4 rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-3"><h3 class="text-sm font-semibold text-[#f8f8f9]">Coverage Suggestions</h3> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors" aria-label="Close suggestions">â</button></div> <div class="space-y-2"></div></div>'),Ei=S('<div class="mb-4 px-3 py-2 rounded-lg border border-[#454654] bg-[#3b3c48] text-xs"><div class="font-medium text-[#9fa2ab] uppercase tracking-wider mb-2">Coverage Status Legend</div> <div class="flex flex-wrap gap-4 text-[#c0c2c8]"><div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-[#eab308] bg-[#eab308]/5"></div> <span>Uncovered</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-[#eab308]/50 bg-[#eab308]/10"></div> <span>Planned</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-green-500/30 bg-green-950/5"></div> <span>Covered</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-red-800/50 bg-red-950/10"></div> <span>Conflict</span></div></div></div>'),Oi=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">No matches found</div>'),Ni=S("<span> </span>"),Ai=ga('<svg class="w-3 h-3 text-[#facc15]" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Fi=S("<button><!></button>"),Ri=ga('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>'),Wi=S('<div class="absolute left-0 top-8 z-50"><!></div>'),Li=S('<div class="relative"><button aria-label="Set priority"> <!></button> <!></div>'),ji=S('<div class="absolute left-0 top-8 z-50"><!></div>'),Ui=S('<div class="relative"><button aria-label="Set coverage status"> </button> <!></div>'),Yi=S('<div><div><!> <div class="flex-1 min-w-0"><div class="text-sm font-semibold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <!> <!> <div class="flex-shrink-0 w-4"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div></div> <!></div>'),Bi=S('<div class="space-y-1.5"><div class="flex items-center justify-between mb-2 pb-1 border-b border-[#454654]"><div class="flex items-center gap-2"><h3 class="text-base font-semibold text-[#f8f8f9]"> </h3> <span class="text-xs text-[#9fa2ab]"> </span></div> <!></div> <!></div>'),Hi=S('<div class="text-[#9fa2ab]">Scorekeeper - To be migrated</div>'),Vi=S('<div><!> <!> <!> <!> <div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4"><div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Sort:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>Team</button> <button>Court</button> <button>Time</button></div></div> <div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Wave:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div></div> <div class="space-y-4"><!></div> <!></div>');function Gi(t,r){Xt(r,!1);const n=()=>Vt(wa,"$isSpectator",c),a=()=>Vt(Er,"$filters",c),o=()=>Vt(Sa,"$isMedia",c),[c,u]=ya(),v=R(),x=R(),p=R(),g=R(),M=R(),k=R(),C=R(),f=R(),b=R(),T=R(),W=R(),w=R();let N=Je(r,"matches",8),q=Je(r,"eventId",8),se=Je(r,"clubId",8),L=R("team"),ce=R(null),_e=R(null),ee=R(null),De=R(!1),ye=R(!1),We=R(null),Be=R(new Set),Ce=R();Vs(q());function Ge(O){return O.InvolvedTeam==="first"?O.SecondTeamText:O.InvolvedTeam==="second"?O.FirstTeamText:`${O.FirstTeamText} vs ${O.SecondTeamText}`}_a(()=>{if(Ns()){const O=Os();O&&O.scores.length>0&&JSON.stringify({eventId:O.eventId,scores:O.scores},null,2)}if(e(Ce).startPolling(),n()){let O=[];if(Nr.subscribe(te=>{O=te.map(m=>m.teamId)})(),O.length>0){const te=setInterval(()=>{da.checkUpcomingMatches(N(),O)},6e4);return()=>clearInterval(te)}}}),yn(()=>{e(Ce).stopPolling()}),ie(()=>(n(),_(q())),()=>{const O=n();y(Ce,dn({eventId:q(),userId:O?"spectator":"anonymous"}))}),ie(()=>_(N()),()=>{y(v,jr(N()))}),ie(()=>(a(),_(N()),Ye),()=>{y(x,(()=>{if(a().wave!=="all"){const O=a().wave==="morning"?"08:00":"14:30",te=a().wave==="morning"?"14:30":"23:59";return Yr(N()).filter(m=>N().some(I=>{const oe=Ye(I.ScheduledStartDateTime),le=oe.split(" ")[1]||oe;return le>=O&&le<te&&I.Division.Name===m}))}return Yr(N())})())}),ie(()=>_(N()),()=>{y(p,Ta(N()))}),ie(()=>(_(N()),Ue),()=>{y(g,(()=>{const O=new Map;return N().forEach(te=>{const m=Ie(te);m&&O.set(m,Ue.getTeamStatus(m))}),O})())}),ie(()=>(_(N()),e(v),e(g),Ie),()=>{y(M,(()=>{const O=Gt(vt);return pa(N(),O,e(v),e(g),Ie,{excludeSelected:!0,preferUncovered:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:10})})())}),ie(()=>(_(N()),a(),n(),Nr),()=>{y(k,(()=>{let O=ln(N());if(a().priority&&a().priority!=="all"&&(O=O.filter(te=>jt.getPriority(te.MatchId)===a().priority)),a().coverageStatus&&a().coverageStatus!=="all"&&(O=O.filter(te=>{const m=Ie(te);if(!m)return!0;const I=Ue.getTeamStatus(m);return a().coverageStatus==="uncovered"?I==="not-covered":a().coverageStatus==="covered"?I==="covered"||I==="partially-covered":a().coverageStatus==="planned"?I==="planned":!0})),n()){let te=[];Nr.subscribe(m=>{te=m.map(I=>I.teamId)})(),te.length>0&&(O=O.filter(m=>{const I=Ie(m);return I&&te.includes(I)}))}return O})())}),ie(()=>(_(N()),e(v)),()=>{y(C,(()=>{const O=Gt(vt);return cn(N(),O,e(v),{excludeSelected:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:50})})())}),ie(()=>e(C),()=>{y(f,new Set(e(C).map(O=>O.match.MatchId)))}),ie(()=>(_(N()),Ue),()=>{y(b,(()=>{const O=new Map;N().forEach(pe=>{const $e=Ie(pe);if($e){const rt=Ue.getTeamStatus($e);O.set($e,rt)}});const te=O.size,m=Array.from(O.values()).filter(pe=>pe==="covered").length,I=Array.from(O.values()).filter(pe=>pe==="partially-covered").length,oe=Array.from(O.values()).filter(pe=>pe==="planned").length,le=Array.from(O.values()).filter(pe=>pe==="not-covered").length;return{totalTeams:te,coveredTeams:m,partiallyCoveredTeams:I,plannedTeams:oe,uncoveredTeams:le,coveragePercentage:te>0?(m+I)/te*100:0}})())}),ie(()=>(e(k),e(L),Ie),()=>{y(T,(()=>{let O=[...e(k)];return e(L)==="priority"?O.sort((te,m)=>{const I=jt.getPriority(te.MatchId),oe=jt.getPriority(m.MatchId),le={"must-cover":3,priority:2,optional:1,null:0},pe=le[I||"null"],$e=le[oe||"null"];return pe!==$e?$e-pe:te.ScheduledStartDateTime-m.ScheduledStartDateTime}):e(L)==="team"?O.sort((te,m)=>{const I=Ie(te),oe=Ie(m);return I.localeCompare(oe)}):e(L)==="court"?O.sort((te,m)=>te.CourtName.localeCompare(m.CourtName)):O.sort((te,m)=>te.ScheduledStartDateTime-m.ScheduledStartDateTime),O})())}),ie(()=>(e(T),Ye),()=>{y(W,(()=>{const O={};return e(T).forEach(te=>{const m=Ye(te.ScheduledStartDateTime);O[m]||(O[m]=[]),O[m].push(te)}),O})())}),ie(()=>e(W),()=>{y(w,Object.keys(e(W)).sort((O,te)=>{const m=new Date(`2000-01-01 ${O}`).getTime(),I=new Date(`2000-01-01 ${te}`).getTime();return m-I}))}),ie(()=>(n(),_(N()),e(Ce),e(Be),e(We)),()=>{if(n()&&N().length>0){const O=new Set;N().forEach(te=>{e(Ce).isClaimOwner(te.MatchId)&&(O.add(te.MatchId),!e(Be).has(te.MatchId)&&(!e(We)||e(We).MatchId!==te.MatchId)&&setTimeout(()=>{y(We,te)},200))}),y(Be,O)}}),ie(()=>(n(),_(N()),e(Ce),da),()=>{if(n()&&N().length>0){let O=[];Nr.subscribe(te=>{O=te.map(m=>m.teamId)})(),N().forEach(te=>{const m=Ie(te);if(m&&O.includes(m)){const I=e(Ce).getScore(te.MatchId);I&&I.status==="in-progress"&&da.notifyScoreUpdate(te,I)}})}}),cr(),Kt();var it=Ot(),_t=st(it);{var yt=O=>{var te=Ci(),m=i(te,!0);s(te),Y(()=>$(m,(a(),l(()=>a().division||a().wave!=="all"||a().teams.length>0||a().timeRange.start||a().timeRange.end?"No matches found for selected filters":"No matches found")))),h(O,te)},Ne=O=>{var te=Vi(),m=i(te);{var I=Se=>{var Me=Di();h(Se,Me)};P(m,Se=>{n()&&Se(I)})}var oe=d(m,2);{var le=Se=>{var Me=ki(),we=i(Me),A=i(we),j=i(A),z=i(j);s(j),ba(),s(A);var K=d(A,2),X=i(K),ne=i(X);s(X);var U=d(X,4),de=i(U);s(U);var E=d(U,4),G=i(E);s(E);var F=d(E,4),B=i(F);s(F),s(K),s(we);var J=d(we,2),ve=i(J);ve.__click=()=>y(De,!e(De));var fe=i(ve,!0);s(ve);var Fe=d(ve,2);{var ke=re=>{var Le=$i();Le.__click=()=>y(ye,!e(ye));var Ae=i(Le);s(Le),Y(()=>{he(Le,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(ye)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),Ut(Le,"title",`${e(M),l(()=>e(M).length)??""} coverage suggestions`),$(Ae,`ð¡ Suggestions (${e(M),l(()=>e(M).length)??""})`)}),h(re,Le)};P(Fe,re=>{e(M),l(()=>e(M).length>0)&&re(ke)})}s(J),s(Me),Y(re=>{$(z,`${re??""}%`),$(ne,`â ${e(b),l(()=>e(b).coveredTeams)??""}`),$(de,`â ${e(b),l(()=>e(b).partiallyCoveredTeams)??""}`),$(G,`ð ${e(b),l(()=>e(b).plannedTeams)??""}`),$(B,`â ${e(b),l(()=>e(b).uncoveredTeams)??""}`),he(ve,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(De)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),$(fe,e(De)?"ðï¸ Scanning":"Scanning Mode")},[()=>(e(b),l(()=>e(b).coveragePercentage.toFixed(0)))]),h(Se,Me)};P(oe,Se=>{o(),e(b),l(()=>o()&&e(b).totalTeams>0)&&Se(le)})}var pe=d(oe,2);{var $e=Se=>{var Me=Pi(),we=i(Me),A=d(i(we),2);A.__click=()=>y(ye,!1),s(we);var j=d(we,2);mt(j,5,()=>(e(M),l(()=>e(M).slice(0,5))),ft,(z,K)=>{var X=Ii(),ne=i(X),U=i(ne),de=i(U);s(U);var E=d(U,2),G=i(E,!0);s(E),s(ne);var F=d(ne,2);F.__click=B=>{B.stopPropagation(),vt.selectMatch(e(K).match.MatchId)},s(X),Y(B=>{$(de,`${B??""} - ${e(K),l(()=>e(K).match.CourtName)??""} - Team ${e(K),l(()=>e(K).teamId)??""}`),$(G,(e(K),l(()=>e(K).reason)))},[()=>(_(Ye),e(K),l(()=>Ye(e(K).match.ScheduledStartDateTime)))]),h(z,X)}),s(j),s(Me),h(Se,Me)};P(pe,Se=>{o(),e(ye),e(M),l(()=>o()&&e(ye)&&e(M).length>0)&&Se($e)})}var rt=d(pe,2);{var xt=Se=>{var Me=Ei();h(Se,Me)};P(rt,Se=>{o()&&Se(xt)})}var wt=d(rt,2),Tt=i(wt),Xe=d(i(Tt),2),qe=i(Xe);qe.__click=()=>y(L,"team");var ct=d(qe,2);ct.__click=()=>y(L,"court");var D=d(ct,2);D.__click=()=>y(L,"time"),s(Xe),s(Tt);var ae=d(Tt,2),H=d(i(ae),2),Q=i(H);Q.__click=()=>Lt("wave","all");var ue=d(Q,2);ue.__click=()=>Lt("wave","morning");var me=d(ue,2);me.__click=()=>Lt("wave","afternoon"),s(H),s(ae),s(wt);var xe=d(wt,2),Te=i(xe);{var He=Se=>{var Me=Oi();h(Se,Me)},at=Se=>{var Me=Ot(),we=st(Me);mt(we,1,()=>e(w),ft,(A,j)=>{const z=Z(()=>(e(W),e(j),l(()=>e(W)[e(j)]))),K=Z(()=>(_(e(z)),e(v),l(()=>e(z).filter(ke=>e(v).has(ke.MatchId)).length))),X=Z(()=>e(K)>0),ne=Z(()=>(_(e(K)),_(e(z)),l(()=>e(K)===e(z).length)));var U=Bi(),de=i(U),E=i(de),G=i(E),F=i(G,!0);s(G);var B=d(G,2),J=i(B);s(B),s(E);var ve=d(E,2);{var fe=ke=>{var re=Ni(),Le=i(re);s(re),Y(()=>{he(re,1,`text-xs font-medium ${e(ne)?"text-[#808593]":"text-red-400"}`),$(Le,`${e(K)??""} conflict${e(K)!==1?"s":""}`)}),h(ke,re)};P(ve,ke=>{e(X)&&ke(fe)})}s(de);var Fe=d(de,2);mt(Fe,1,()=>e(z),ft,(ke,re)=>{const Le=Z(()=>(e(v),e(re),l(()=>e(v).has(e(re).MatchId)))),Ae=Z(()=>(_(Ie),e(re),l(()=>Ie(e(re))))),Qe=Z(()=>(e(re),l(()=>Ge(e(re))))),ge=Z(()=>(e(ce),e(re),l(()=>e(ce)===e(re).MatchId))),Ee=Z(()=>(_(jt),e(re),l(()=>jt.getPriority(e(re).MatchId)))),V=Z(()=>(e(f),e(re),l(()=>e(f).has(e(re).MatchId)))),be=Z(()=>(_(e(Ae)),_(Ue),l(()=>e(Ae)?Ue.getTeamStatus(e(Ae)):"not-covered"))),ze=Z(()=>e(be)==="covered"||e(be)==="partially-covered"),Pe=Z(()=>e(be)==="planned"),lt=Z(()=>e(be)==="not-covered"),Ct=Z(()=>e(De)&&e(ze)),ot=Z(()=>(_(Gt),_(vt),l(()=>Gt(vt)))),je=Z(()=>(_(e(ot)),e(re),l(()=>e(ot).has(e(re).MatchId)))),Oe=Z(()=>e(Le)&&!e(ne));var dt=Yi(),Re=i(dt);Re.__click=()=>y(ce,e(ge)?null:e(re).MatchId);var nt=i(Re);{var Ke=St=>{var pt=Fi();pt.__click=Ht=>{Ht.stopPropagation(),vt.toggleMatch(e(re).MatchId)};var $t=i(pt);{var qt=Ht=>{var er=Ai();h(Ht,er)};P($t,Ht=>{e(je)&&Ht(qt)})}s(pt),Y(()=>{he(pt,1,`absolute top-2 right-2 sm:relative sm:top-0 sm:right-0 flex-shrink-0 w-5 h-5 rounded border-2 ${e(je)?"border-[#eab308] bg-[#eab308]/20":"border-[#525463] bg-transparent"} flex items-center justify-center hover:bg-[#454654] transition-colors`),Ut(pt,"aria-label",e(je)?"Remove from plan":"Add to plan")}),h(St,pt)};P(nt,St=>{o()&&St(Ke)})}var Ze=d(nt,2),Mt=i(Ze),Zt=i(Mt,!0);s(Mt);var Bt=d(Mt,2),Dt=i(Bt);s(Bt),s(Ze);var bt=d(Ze,2);{var Pt=St=>{var pt=Li(),$t=i(pt);$t.__click=At=>{At.stopPropagation(),y(_e,e(_e)===e(re).MatchId?null:e(re).MatchId)};var qt=i($t),Ht=d(qt);{var er=At=>{var or=Ri();h(At,or)};P(Ht,At=>{e(Ee)||At(er)})}s($t);var tr=d($t,2);{var nr=At=>{var or=Wi(),Jr=i(or);vn(Jr,{get matchId(){return e(re),l(()=>e(re).MatchId)},get currentPriority(){return e(Ee)},get onPriorityChange(){return _(jt),l(()=>jt.setPriority)},onClose:()=>y(_e,null)}),s(or),h(At,or)};P(tr,At=>{e(_e),e(re),l(()=>e(_e)===e(re).MatchId)&&At(nr)})}s(pt),Y(()=>{he($t,1,`flex-shrink-0 w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-[#454654] ${e(Ee)==="must-cover"?"text-[#eab308]":e(Ee)==="priority"?"text-[#f59e0b]":e(Ee)==="optional"?"text-[#9fa2ab]":"text-[#808593]"}`),Ut($t,"title",e(Ee)?`Priority: ${e(Ee)}`:"Set priority"),$(qt,`${e(Ee)==="must-cover"&&"â­"}
												${e(Ee)==="priority"&&"ð¸"}
												${e(Ee)==="optional"&&"â"} `)}),h(St,pt)};P(bt,St=>{o()&&St(Pt)})}var Et=d(bt,2);{var fr=St=>{var pt=Ui(),$t=i(pt);$t.__click=tr=>{tr.stopPropagation(),y(ee,e(ee)===e(Ae)?null:e(Ae))};var qt=i($t);s($t);var Ht=d($t,2);{var er=tr=>{var nr=ji(),At=i(nr);Ma(At,{get teamId(){return e(Ae)},get currentStatus(){return e(be)},get onStatusChange(){return _(Ue),l(()=>Ue.setTeamStatus)},onClose:()=>y(ee,null)}),s(nr),h(tr,nr)};P(Ht,tr=>{e(ee)===e(Ae)&&tr(er)})}s(pt),Y(()=>{he($t,1,`flex-shrink-0 w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-[#454654] ${e(be)==="covered"?"text-green-500":e(be)==="partially-covered"?"text-[#f59e0b]":e(be)==="planned"?"text-[#eab308]":"text-[#808593]"}`),Ut($t,"title",`Coverage: ${e(be)??""}`),$(qt,`${e(be)==="covered"&&"â"}
												${e(be)==="partially-covered"&&"â"}
												${e(be)==="planned"&&"ð"}
												${e(be)==="not-covered"&&"â"}`)}),h(St,pt)};P(Et,St=>{o()&&e(Ae)&&St(fr)})}var mr=d(Et,2),xr=i(mr);s(mr),s(Re);var Gr=d(Re,2);{var Or=St=>{un(St,{get match(){return e(re)},get eventId(){return q()},get clubId(){return se()},onClose:()=>y(ce,null),get matches(){return N()}})};P(Gr,St=>{e(ge)&&St(Or)})}s(dt),Y(St=>{he(Re,1,`group relative rounded transition-all flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 px-3 py-2.5 sm:py-2 cursor-pointer match-card min-h-[44px] sm:min-h-0 ${e(Oe)?"border border-red-800/50 bg-red-950/10":e(Ee)==="must-cover"?"border-2 border-[#eab308] bg-[#eab308]/10":e(Ee)==="priority"?"border border-[#f59e0b] bg-[#f59e0b]/10":e(lt)&&!e(je)?"border border-[#eab308] bg-[#eab308]/5":e(Pe)?"border border-[#eab308]/50 bg-[#eab308]/10":e(ze)?"border border-green-500/30 bg-green-950/5":e(V)&&!e(je)?"border border-green-500/50 bg-green-950/10":e(je)?"border border-[#eab308]/50 bg-[#eab308]/10":"border border-[#454654] bg-[#3b3c48]"} ${e(Ct)?"opacity-30":""} hover:border-[#525463] hover:bg-[#3b3c48]/80`),$(Zt,St),$(Dt,`${e(re),l(()=>e(re).CourtName)??""} â¢ ${_(e(Ae)),e(re),l(()=>e(Ae)||e(re).Division.CodeAlias)??""} vs ${e(Qe)??""}`),he(xr,0,`w-4 h-4 text-[#9fa2ab] transition-transform ${e(ge)?"rotate-180":""}`)},[()=>(_(Ye),e(re),l(()=>Ye(e(re).ScheduledStartDateTime)))]),h(ke,dt)}),s(U),Y(()=>{$(F,e(j)),$(J,`${_(e(z)),l(()=>e(z).length)??""} match${_(e(z)),l(()=>e(z).length!==1?"es":"")??""}`)}),h(A,U)}),h(Se,Me)};P(Te,Se=>{e(w),l(()=>e(w).length===0)?Se(He):Se(at,!1)})}s(xe);var ut=d(xe,2);{var ht=Se=>{var Me=Hi();h(Se,Me)};P(ut,Se=>{e(We)&&Se(ht)})}s(te),Y(()=>{he(qe,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(L)==="team"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(ct,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(L)==="court"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(D,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(L)==="time"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(Q,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="all"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(ue,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="morning"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(me,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="afternoon"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`)}),h(O,te)};P(_t,O=>{e(k),l(()=>e(k).length===0)?O(yt):O(Ne,!1)})}h(t,it),Qt(),u()}ar(["click"]);var Ji=S('<div class="text-xs text-[#808593] py-4 text-center">No conflicts found</div>'),qi=S('<span class="text-[#9fa2ab]">â¢</span> <span class="text-[#808593]"> </span>',1),zi=S('<div class="px-3 py-2.5 rounded border border-[#525463] bg-[#454654]/30"><div class="flex items-center gap-2 mb-1"><span class="text-sm font-bold text-[#f8f8f9]"> </span> <span class="text-xs text-[#808593]">vs</span> <span class="text-sm text-[#c0c2c8] truncate"> </span></div> <div class="flex items-center gap-3 mt-1 text-xs flex-wrap"><span class="text-[#facc15] font-medium"> </span> <span class="text-[#9fa2ab]"> </span> <span class="text-[#9fa2ab]">â¢</span> <span class="text-[#9fa2ab]"> </span> <!></div></div>'),Xi=S('<div class="space-y-2"></div>'),Qi=S(`<div class="mt-2 border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="p-3 sm:p-4"><div class="flex items-center justify-between mb-3 sm:mb-4"><h4 class="text-xs sm:text-sm font-semibold text-[#f8f8f9] truncate pr-2">Conflict Details</h4> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="mb-4 pb-4 border-b border-[#454654]"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-2">Selected Match</div> <div class="px-3 py-2 rounded border border-[#eab308]/50 bg-[#eab308]/5"><div class="flex items-center gap-2 mb-1"><span class="text-sm font-bold text-[#facc15]"> </span> <span class="text-xs text-[#808593]">vs</span> <span class="text-sm text-[#c0c2c8] truncate"> </span></div> <div class="flex items-center gap-3 mt-1 text-xs"><span class="text-[#facc15] font-medium"> </span> <span class="text-[#9fa2ab]"> </span> <span class="text-[#9fa2ab]">â¢</span> <span class="text-[#9fa2ab]"> </span></div></div></div> <div><div class="flex items-center justify-between mb-2"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider"> </div> <span class="text-xs text-red-400 font-medium">Cannot cover simultaneously</span></div> <!></div> <div class="mt-4 pt-4 border-t border-[#454654]"><p class="text-xs text-[#808593]">These matches overlap in time and are on different courts. You'll need to choose which match to cover.</p></div></div></div>`);function Ki(t,r){Xt(r,!1);const n=R();let a=Je(r,"match",8),o=Je(r,"conflictingMatches",8),c=Je(r,"onClose",8);function u(Ne){return Ne.InvolvedTeam==="first"?Ne.SecondTeamText:Ne.InvolvedTeam==="second"?Ne.FirstTeamText:`${Ne.FirstTeamText} vs ${Ne.SecondTeamText}`}function v(Ne,O){return Ne!==O?5:0}const x=Ie(a()),p=u(a());ie(()=>_(o()),()=>{y(n,[...o()].sort((Ne,O)=>Ne.ScheduledStartDateTime-O.ScheduledStartDateTime))}),cr(),Kt();var g=Qi(),M=i(g),k=i(M),C=d(i(k),2);C.__click=function(...Ne){var O;(O=c())==null||O.apply(this,Ne)},s(k);var f=d(k,2),b=d(i(f),2),T=i(b),W=i(T),w=i(W,!0);s(W);var N=d(W,4),q=i(N,!0);s(N),s(T);var se=d(T,2),L=i(se),ce=i(L,!0);s(L);var _e=d(L,2),ee=i(_e,!0);s(_e);var De=d(_e,4),ye=i(De,!0);s(De),s(se),s(b),s(f);var We=d(f,2),Be=i(We),Ce=i(Be),Ge=i(Ce);s(Ce),ba(2),s(Be);var it=d(Be,2);{var _t=Ne=>{var O=Ji();h(Ne,O)},yt=Ne=>{var O=Xi();mt(O,5,()=>e(n),ft,(te,m)=>{const I=Z(()=>(_(Ie),e(m),l(()=>Ie(e(m))))),oe=Z(()=>(e(m),l(()=>u(e(m))))),le=Z(()=>(_(a()),e(m),l(()=>v(a().CourtName,e(m).CourtName))));var pe=zi(),$e=i(pe),rt=i($e),xt=i(rt,!0);s(rt);var wt=d(rt,4),Tt=i(wt,!0);s(wt),s($e);var Xe=d($e,2),qe=i(Xe),ct=i(qe,!0);s(qe);var D=d(qe,2),ae=i(D,!0);s(D);var H=d(D,4),Q=i(H,!0);s(H);var ue=d(H,2);{var me=xe=>{var Te=qi(),He=d(st(Te),2),at=i(He);s(He),Y(()=>$(at,`~${e(le)??""} min travel from ${_(a()),l(()=>a().CourtName)??""}`)),h(xe,Te)};P(ue,xe=>{e(le)>0&&xe(me)})}s(Xe),s(pe),Y(xe=>{$(xt,(_(e(I)),e(m),l(()=>e(I)||e(m).Division.CodeAlias))),$(Tt,e(oe)),$(ct,(e(m),l(()=>e(m).CourtName))),$(ae,xe),$(Q,(e(m),l(()=>e(m).Division.CodeAlias)))},[()=>(_(Ye),e(m),l(()=>Ye(e(m).ScheduledStartDateTime)))]),h(te,pe)}),s(O),h(Ne,O)};P(it,Ne=>{e(n),l(()=>e(n).length===0)?Ne(_t):Ne(yt,!1)})}s(We),ba(2),s(M),s(g),Y(Ne=>{$(w,(_(a()),l(()=>x||a().Division.CodeAlias))),$(q,p),$(ce,(_(a()),l(()=>a().CourtName))),$(ee,Ne),$(ye,(_(a()),l(()=>a().Division.CodeAlias))),$(Ge,`Conflicting Matches (${_(o()),l(()=>o().length)??""})`)},[()=>(_(Ye),_(a()),l(()=>Ye(a().ScheduledStartDateTime)))]),h(t,g),Qt()}ar(["click"]);var Zi=S('<div class="text-center py-12 text-[#9fa2ab] text-sm"> </div>'),ec=S("<option> </option>"),tc=S('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Division:</span> <select class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"><option> </option><!></select></div>'),rc=S("<option> </option>"),ac=S('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Team:</span> <select multiple class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0 min-w-[120px]"></select></div>'),nc=S('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Priority:</span> <select class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"><option>All Priorities</option><option>Must Cover</option><option>Priority</option><option>Optional</option></select></div>'),oc=S('<button class="px-3 py-2 sm:py-1 text-xs font-medium rounded-lg transition-colors text-[#9fa2ab] hover:text-[#f8f8f9] hover:bg-[#454654] border border-[#525463] min-h-[44px] sm:min-h-0">Clear</button>'),sc=S('<span class="ml-2"> </span>'),ic=S('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab]">Showing:</span> <span class="px-2 py-1 text-xs font-semibold rounded bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50"> </span> <button class="text-xs text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors" aria-label="Clear highlight">â</button></div>'),cc=S("<div> </div>"),lc=S('<div class="absolute top-0 bottom-0 flex items-center justify-center"><!></div>'),dc=S('<div class="absolute top-0 left-0 text-[10px]"> </div>'),uc=S('<div class="absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full border border-white" title="Easy coverage opportunity"></div>'),vc=S('<div class="absolute top-0 right-0 w-4 h-4 flex items-center justify-center"><svg class="w-3 h-3 text-[#facc15]" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),fc=S('<div class="text-[8px] text-[#9fa2ab]"> </div>'),mc=S('<div class="text-[8px] text-green-400">â</div>'),xc=S('<div class="flex items-center gap-1 mt-0.5"><!> <div class="text-[9px] font-semibold text-white"> </div> <!></div>'),bc=ga('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>'),hc=S('<div class="absolute left-full top-0 ml-2 z-50"><!></div>'),pc=S('<div class="relative"><button aria-label="Set priority"> <!></button> <!></div>'),gc=S('<div class="absolute left-full top-0 ml-2 z-50"><!></div>'),_c=S('<div class="relative"><button aria-label="Set coverage status"> </button> <!></div>'),yc=S('<div><!> <!> <!> <div> </div> <div class="text-[9px] sm:text-[10px] opacity-90 truncate mt-0.5 leading-tight"> </div> <div class="text-[9px] sm:text-[10px] opacity-75 mt-0.5"> </div> <!> <!> <!></div>'),Sc=S('<div class="border-b border-[#454654] pb-4 last:border-b-0 last:pb-0 min-w-[600px] sm:min-w-0"><div class="flex items-center justify-between mb-2"><div class="text-base font-semibold text-[#f8f8f9]"> </div> <div class="text-xs text-[#808593]"> </div></div> <div class="relative h-20 sm:h-20 rounded-lg border overflow-hidden bg-[#3b3c48] border-[#454654]"><!> <!></div></div>'),wc=S('<div class="text-[#9fa2ab]">Scorekeeper - To be migrated</div>'),Tc=S('<div class="fixed inset-0 z-40"></div>'),Mc=S('<div class="fixed inset-0 z-40"></div>'),Cc=S('<div class="space-y-4"><div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4"><div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Wave:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <!> <!> <div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Time:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <!> <!></div> <div class="flex items-center justify-between"><div class="text-xs text-[#9fa2ab]"> <!></div> <!></div> <div class="overflow-x-auto -mx-3 sm:mx-0 px-3 sm:px-0"><div class="space-y-4 min-w-max sm:min-w-0"></div></div> <!> <!> <!> <!></div>');function Dc(t,r){Xt(r,!1);const n=()=>Vt(wa,"$isSpectator",c),a=()=>Vt(Er,"$filters",c),o=()=>Vt(Sa,"$isMedia",c),[c,u]=ya(),v=R(),x=R(),p=R(),g=R(),M=R(),k=R(),C=R(),f=R(),b=R(),T=R(),W=R(),w=R(),N=R();let q=Je(r,"matches",8),se=Je(r,"eventId",8),L=R(null),ce=R(null),_e=R(null),ee=R(null),De=null,ye=R();function We(m){return m.InvolvedTeam==="first"?m.SecondTeamText:m.InvolvedTeam==="second"?m.FirstTeamText:`${m.FirstTeamText} vs ${m.SecondTeamText}`}function Be(m){return e(b)===0?0:(m-e(C))/e(b)*100}function Ce(m,I){return e(b)===0?0:(I-m)/e(b)*100}function Ge(m){const I=[],oe=[...m].sort((le,pe)=>le.ScheduledStartDateTime-pe.ScheduledStartDateTime);for(let le=0;le<oe.length-1;le++){const pe=oe[le],$e=oe[le+1],rt=Math.floor(($e.ScheduledStartDateTime-pe.ScheduledEndDateTime)/6e4);rt>0&&I.push({before:pe,after:$e,gapMinutes:rt})}return I}function it(m){e(v).has(m.MatchId)?y(L,m):o()?vt.toggleMatch(m.MatchId):y(L,m)}function _t(m,I){I.stopPropagation(),y(ce,e(ce)===m?null:m)}ie(()=>(n(),_(se())),()=>{const m=n();y(ye,dn({eventId:se(),userId:m?"spectator":"anonymous"}))}),ie(()=>_(q()),()=>{y(v,jr(q()))}),ie(()=>(a(),_(q()),Ye),()=>{y(x,(()=>{if(a().wave!=="all"){const m=a().wave==="morning"?"08:00":"14:30",I=a().wave==="morning"?"14:30":"23:59";return Yr(q()).filter(oe=>q().some(le=>{const pe=Ye(le.ScheduledStartDateTime),$e=pe.split(" ")[1]||pe;return $e>=m&&$e<I&&le.Division.CodeAlias===oe}))}return Yr(q())})())}),ie(()=>_(q()),()=>{y(p,Ta(q()))}),ie(()=>(_(q()),a(),Ue),()=>{y(g,(()=>{let m=ln(q());return a().priority&&a().priority!=="all"&&(m=m.filter(I=>jt.getPriority(I.MatchId)===a().priority)),a().coverageStatus&&a().coverageStatus!=="all"&&(m=m.filter(I=>{const oe=Ie(I);if(!oe)return!0;const le=Ue.getTeamStatus(oe);return a().coverageStatus==="uncovered"?le==="not-covered":a().coverageStatus==="covered"?le==="covered"||le==="partially-covered":a().coverageStatus==="planned"?le==="planned":!0})),m})())}),ie(()=>(_(q()),e(v)),()=>{y(M,(()=>{const m=Gt(vt);return cn(q(),m,e(v),{excludeSelected:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:50})})())}),ie(()=>e(M),()=>{y(k,new Set(e(M).map(m=>m.match.MatchId)))}),ie(()=>e(g),()=>{y(C,e(g).length>0?Math.min(...e(g).map(m=>m.ScheduledStartDateTime)):0)}),ie(()=>e(g),()=>{y(f,e(g).length>0?Math.max(...e(g).map(m=>m.ScheduledEndDateTime)):0)}),ie(()=>(e(f),e(C)),()=>{y(b,e(f)-e(C))}),ie(()=>e(g),()=>{y(T,(()=>{const m={};return e(g).forEach(I=>{m[I.CourtName]||(m[I.CourtName]=[]),m[I.CourtName].push(I)}),m})())}),ie(()=>e(T),()=>{y(W,Object.keys(e(T)).sort())}),ie(()=>(e(ce),e(g),Ie),()=>{y(w,(()=>{if(!e(ce))return new Set;const m=new Set;return e(g).forEach(I=>{Ie(I)===e(ce)&&m.add(I.MatchId)}),m})())}),ie(()=>(e(L),e(v),e(g)),()=>{y(N,(()=>{if(!e(L))return[];const m=e(v).get(e(L).MatchId);return m?m.map(I=>e(g).find(oe=>oe.MatchId===I)).filter(Boolean):[]})())}),cr(),Kt();var yt=Ot(),Ne=st(yt);{var O=m=>{var I=Zi(),oe=i(I,!0);s(I),Y(()=>$(oe,(a(),l(()=>a().division||a().wave!=="all"||a().teams.length>0||a().timeRange.start||a().timeRange.end?"No matches found for selected filters":"No matches found")))),h(m,I)},te=m=>{var I=Cc(),oe=i(I),le=i(oe),pe=d(i(le),2),$e=i(pe);$e.__click=()=>Lt("wave","all");var rt=d($e,2);rt.__click=()=>Lt("wave","morning");var xt=d(rt,2);xt.__click=()=>Lt("wave","afternoon"),s(pe),s(le);var wt=d(le,2);{var Tt=F=>{var B=tc(),J=d(i(B),2);J.__change=re=>Lt("division",re.target.value||null);var ve=i(J),fe=i(ve);s(ve),ve.value=ve.__value="";var Fe=d(ve);mt(Fe,1,()=>e(x),ft,(re,Le)=>{var Ae=ec(),Qe=i(Ae,!0);s(Ae);var ge={};Y(()=>{$(Qe,e(Le)),ge!==(ge=e(Le))&&(Ae.value=(Ae.__value=e(Le))??"")}),h(re,Ae)}),s(J);var ke;_r(J),s(B),Y(()=>{$(fe,`All Divisions${a(),l(()=>a().wave!=="all"?` (${a().wave})`:"")??""}`),ke!==(ke=(a(),l(()=>a().division||"")))&&(J.value=(J.__value=(a(),l(()=>a().division||"")))??"",vr(J,(a(),l(()=>a().division||""))))}),h(F,B)};P(wt,F=>{e(x),l(()=>e(x).length>1)&&F(Tt)})}var Xe=d(wt,2);{var qe=F=>{var B=ac(),J=d(i(B),2);J.__change=fe=>{const Fe=Array.from(fe.target.selectedOptions,ke=>ke.value);Lt("teams",Fe)},mt(J,5,()=>e(p),ft,(fe,Fe)=>{var ke=rc(),re=i(ke,!0);s(ke);var Le={};Y(()=>{$(re,e(Fe)),Le!==(Le=e(Fe))&&(ke.value=(ke.__value=e(Fe))??"")}),h(fe,ke)}),s(J);var ve;_r(J),s(B),Y(fe=>{Ut(J,"size",fe),ve!==(ve=(a(),l(()=>a().teams)))&&(J.value=(J.__value=(a(),l(()=>a().teams)))??"",vr(J,(a(),l(()=>a().teams))))},[()=>(e(p),l(()=>Math.min(e(p).length,4)))]),h(F,B)};P(Xe,F=>{e(p),l(()=>e(p).length>0)&&F(qe)})}var ct=d(Xe,2),D=d(i(ct),2),ae=i(D);ae.__click=()=>Lt("timeRange",{start:null,end:null});var H=d(ae,2);H.__click=()=>Lt("timeRange",{start:"08:00",end:"14:30"});var Q=d(H,2);Q.__click=()=>Lt("timeRange",{start:"14:30",end:"23:59"}),s(D),s(ct);var ue=d(ct,2);{var me=F=>{var B=nc(),J=d(i(B),2);J.__change=Le=>Lt("priority",Le.target.value==="all"?"all":Le.target.value);var ve=i(J);ve.value=ve.__value="all";var fe=d(ve);fe.value=fe.__value="must-cover";var Fe=d(fe);Fe.value=Fe.__value="priority";var ke=d(Fe);ke.value=ke.__value="optional",s(J);var re;_r(J),s(B),Y(()=>{re!==(re=(a(),l(()=>a().priority||"all")))&&(J.value=(J.__value=(a(),l(()=>a().priority||"all")))??"",vr(J,(a(),l(()=>a().priority||"all"))))}),h(F,B)};P(ue,F=>{o()&&F(me)})}var xe=d(ue,2);{var Te=F=>{var B=oc();B.__click=function(...J){ca==null||ca.apply(this,J)},h(F,B)};P(xe,F=>{a(),l(()=>a().division||a().wave!=="all"||a().teams.length>0||a().timeRange.start||a().timeRange.end||a().priority&&a().priority!=="all"||a().coverageStatus&&a().coverageStatus!=="all")&&F(Te)})}s(oe);var He=d(oe,2),at=i(He),ut=i(at),ht=d(ut);{var Se=F=>{var B=sc(),J=i(B);s(B),Y(()=>$(J,`(${e(g),l(()=>e(g).length)??""} of ${_(q()),l(()=>q().length)??""})`)),h(F,B)};P(ht,F=>{e(g),_(q()),l(()=>e(g).length!==q().length)&&F(Se)})}s(at);var Me=d(at,2);{var we=F=>{var B=ic(),J=d(i(B),2),ve=i(J);s(J);var fe=d(J,2);fe.__click=()=>y(ce,null),s(B),Y(()=>$(ve,`Team ${e(ce)??""}`)),h(F,B)};P(Me,F=>{e(ce)&&F(we)})}s(He);var A=d(He,2),j=i(A);mt(j,5,()=>e(W),ft,(F,B)=>{const J=Z(()=>(e(T),e(B),l(()=>e(T)[e(B)])));var ve=Sc(),fe=i(ve),Fe=i(fe),ke=i(Fe,!0);s(Fe);var re=d(Fe,2),Le=i(re);s(re),s(fe);var Ae=d(fe,2),Qe=i(Ae);mt(Qe,1,()=>(_(e(J)),l(()=>Ge(e(J)))),ft,(Ee,V)=>{const be=Z(()=>(e(V),l(()=>Be(e(V).before.ScheduledEndDateTime)))),ze=Z(()=>(e(V),l(()=>Be(e(V).after.ScheduledStartDateTime)))),Pe=Z(()=>e(ze)-e(be)),lt=Z(()=>(e(V),l(()=>e(V).gapMinutes>=30))),Ct=Z(()=>(e(V),l(()=>e(V).gapMinutes>=15&&e(V).gapMinutes<30)));var ot=Ot(),je=st(ot);{var Oe=dt=>{var Re=lc(),nt=i(Re);{var Ke=Ze=>{var Mt=cc(),Zt=i(Mt);s(Mt),Y(()=>{he(Mt,1,`text-[9px] font-medium px-1 py-0.5 rounded ${e(lt)?"bg-green-500/20 text-green-400":e(Ct)?"bg-yellow-500/20 text-yellow-400":"bg-orange-500/20 text-orange-400"}`),$(Zt,`${e(V),l(()=>e(V).gapMinutes)??""}m`)}),h(Ze,Mt)};P(nt,Ze=>{e(Pe)>3&&Ze(Ke)})}s(Re),Y(()=>{rr(Re,`left: ${e(be)??""}%; width: ${e(Pe)??""}%; z-index: 0;`),Ut(Re,"title",`${e(V),l(()=>e(V).gapMinutes)??""} min gap between matches`)}),h(dt,Re)};P(je,dt=>{e(Pe)>=1&&dt(Oe)})}h(Ee,ot)});var ge=d(Qe,2);mt(ge,1,()=>e(J),ft,(Ee,V)=>{const be=Z(()=>(e(v),e(V),l(()=>e(v).has(e(V).MatchId)))),ze=Z(()=>(e(L),e(V),l(()=>{var Ve;return((Ve=e(L))==null?void 0:Ve.MatchId)===e(V).MatchId}))),Pe=Z(()=>(_(Ie),e(V),l(()=>Ie(e(V))))),lt=Z(()=>(e(ce),e(w),e(V),l(()=>e(ce)!==null&&e(w).has(e(V).MatchId)))),Ct=Z(()=>e(ce)!==null&&!e(lt)),ot=Z(()=>(_(Gt),_(vt),l(()=>Gt(vt)))),je=Z(()=>(_(e(ot)),e(V),l(()=>e(ot).has(e(V).MatchId)))),Oe=Z(()=>(_(jt),e(V),l(()=>jt.getPriority(e(V).MatchId)))),dt=Z(()=>(e(k),e(V),l(()=>e(k).has(e(V).MatchId)))),Re=Z(()=>(_(e(Pe)),_(Ue),l(()=>e(Pe)?Ue.getTeamStatus(e(Pe)):"not-covered"))),nt=Z(()=>e(Re)==="covered"||e(Re)==="partially-covered"),Ke=Z(()=>e(Re)==="planned"),Ze=Z(()=>e(Re)==="not-covered"),Mt=Z(()=>(e(V),l(()=>Be(e(V).ScheduledStartDateTime)))),Zt=Z(()=>(e(V),l(()=>Math.max(Ce(e(V).ScheduledStartDateTime,e(V).ScheduledEndDateTime),2)))),Bt=Z(()=>(e(V),l(()=>We(e(V))))),Dt=Z(()=>(_(e(Oe)),_(e(Ze)),_(e(je)),_(e(Ke)),_(e(lt)),_(e(be)),_(e(nt)),_(e(dt)),e(V),l(()=>e(Oe)==="must-cover"?"#eab308":e(Oe)==="priority"?"#f59e0b":e(Ze)&&!e(je)||e(Ke)||e(lt)||e(je)&&!e(be)?"#eab308":e(nt)||e(dt)&&!e(je)?"#10b981":e(be)?"#dc2626":e(V).Division.ColorHex))),bt=Z(()=>e(Oe)==="must-cover"?"#facc15":e(Oe)==="priority"?"#fbbf24":e(Ze)&&!e(je)||e(Ke)?"#facc15":e(ze)?"#eab308":e(lt)||e(je)?"#facc15":e(be)?"#ef4444":"rgba(255, 255, 255, 0.2)"),Pt=Z(()=>e(ze)?30:e(lt)?20:e(Oe)==="must-cover"?18:e(je)?15:e(be)?10:1);var Et=yc();Et.__click=Ve=>{Ve.target instanceof HTMLElement&&Ve.target.closest(".priority-button")||it(e(V))};var fr=i(Et);{var mr=Ve=>{var et=dc(),gt=i(et);s(et),Y(()=>$(gt,`${e(Oe)==="must-cover"&&"â­"}
											${e(Oe)==="priority"&&"ð¸"}
											${e(Oe)==="optional"&&"â"}`)),h(Ve,et)};P(fr,Ve=>{o()&&e(Oe)&&Ve(mr)})}var xr=d(fr,2);{var Gr=Ve=>{var et=uc();h(Ve,et)};P(xr,Ve=>{o()&&e(dt)&&!e(je)&&Ve(Gr)})}var Or=d(xr,2);{var St=Ve=>{var et=vc();h(Ve,et)};P(Or,Ve=>{o()&&e(je)&&Ve(St)})}var pt=d(Or,2);pt.__click=Ve=>e(Pe)&&_t(e(Pe),Ve);var $t=i(pt,!0);s(pt);var qt=d(pt,2),Ht=i(qt);s(qt);var er=d(qt,2),tr=i(er,!0);s(er);var nr=d(er,2);{var At=Ve=>{const et=Z(()=>(e(ye),e(V),l(()=>e(ye).getScore(e(V).MatchId))));var gt=Ot(),br=st(gt);{var yr=lr=>{const Rt=Z(()=>(_(e(et)),l(()=>e(et).sets.find(kt=>kt.completedAt===0)||e(et).sets[e(et).sets.length-1]))),Wt=Z(()=>(_(e(et)),l(()=>e(et).sets.filter(kt=>kt.completedAt>0)))),Ft=Z(()=>(_(e(Wt)),l(()=>e(Wt).filter(kt=>kt.team1Score>kt.team2Score).length))),dr=Z(()=>(_(e(Wt)),l(()=>e(Wt).filter(kt=>kt.team2Score>kt.team1Score).length)));var Sr=xc(),Ca=i(Sr);{var xn=kt=>{var wr=fc(),gn=i(wr);s(wr),Y(()=>$(gn,`(${e(Ft)??""}-${e(dr)??""})`)),h(kt,wr)};P(Ca,kt=>{_(e(Wt)),l(()=>e(Wt).length>0)&&kt(xn)})}var qr=d(Ca,2),bn=i(qr);s(qr);var hn=d(qr,2);{var pn=kt=>{var wr=mc();h(kt,wr)};P(hn,kt=>{_(e(et)),l(()=>e(et).status==="in-progress")&&kt(pn)})}s(Sr),Y(()=>$(bn,`${_(e(Rt)),l(()=>e(Rt).team1Score)??""}-${_(e(Rt)),l(()=>e(Rt).team2Score)??""}`)),h(lr,Sr)};P(br,lr=>{_(e(et)),l(()=>e(et)&&e(et).status!=="not-started")&&lr(yr)})}h(Ve,gt)};P(nr,Ve=>{e(ye)&&Ve(At)})}var or=d(nr,2);{var Jr=Ve=>{var et=pc(),gt=i(et);gt.__click=Ft=>{Ft.stopPropagation(),y(_e,e(_e)===e(V).MatchId?null:e(V).MatchId)};var br=i(gt),yr=d(br);{var lr=Ft=>{var dr=bc();h(Ft,dr)};P(yr,Ft=>{e(Oe)||Ft(lr)})}s(gt);var Rt=d(gt,2);{var Wt=Ft=>{var dr=hc(),Sr=i(dr);vn(Sr,{get matchId(){return e(V),l(()=>e(V).MatchId)},get currentPriority(){return e(Oe)},get onPriorityChange(){return _(jt),l(()=>jt.setPriority)},onClose:()=>y(_e,null)}),s(dr),h(Ft,dr)};P(Rt,Ft=>{e(_e),e(V),l(()=>e(_e)===e(V).MatchId)&&Ft(Wt)})}s(et),Y(()=>{he(gt,1,`priority-button flex-shrink-0 w-5 h-5 rounded flex items-center justify-center transition-colors hover:bg-black/20 ${e(Oe)==="must-cover"?"text-[#facc15]":e(Oe)==="priority"?"text-[#fbbf24]":e(Oe)==="optional"?"text-white/60":"text-white/40"}`),Ut(gt,"title",e(Oe)?`Priority: ${e(Oe)}`:"Set priority"),$(br,`${e(Oe)==="must-cover"&&"â­"}
												${e(Oe)==="priority"&&"ð¸"}
												${e(Oe)==="optional"&&"â"} `)}),h(Ve,et)};P(or,Ve=>{o()&&Ve(Jr)})}var fn=d(or,2);{var mn=Ve=>{var et=_c(),gt=i(et);gt.__click=Rt=>{Rt.stopPropagation(),y(ee,e(ee)===e(Pe)?null:e(Pe))};var br=i(gt);s(gt);var yr=d(gt,2);{var lr=Rt=>{var Wt=gc(),Ft=i(Wt);Ma(Ft,{get teamId(){return e(Pe)},get currentStatus(){return e(Re)},get onStatusChange(){return _(Ue),l(()=>Ue.setTeamStatus)},onClose:()=>y(ee,null)}),s(Wt),h(Rt,Wt)};P(yr,Rt=>{e(ee)===e(Pe)&&Rt(lr)})}s(et),Y(()=>{he(gt,1,`flex-shrink-0 w-5 h-5 rounded flex items-center justify-center transition-colors hover:bg-black/20 ${e(Re)==="covered"?"text-green-400":e(Re)==="partially-covered"?"text-[#fbbf24]":e(Re)==="planned"?"text-[#facc15]":"text-white/40"}`),Ut(gt,"title",`Coverage: ${e(Re)??""}`),$(br,`${e(Re)==="covered"&&"â"}
												${e(Re)==="partially-covered"&&"â"}
												${e(Re)==="planned"&&"ð"}
												${e(Re)==="not-covered"&&"â"}`)}),h(Ve,et)};P(fn,Ve=>{o()&&e(Pe)&&Ve(mn)})}s(Et),Y((Ve,et,gt)=>{he(Et,1,`group absolute h-16 rounded-md px-2 py-1.5 text-white shadow-sm border-2 flex flex-col justify-center transition-all active:scale-95 sm:hover:z-20 sm:hover:shadow-lg touch-manipulation cursor-pointer ${e(ze)?"ring-2 ring-[#eab308] ring-offset-2 ring-offset-[#3b3c48]":""} ${e(lt)?"ring-2 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""} ${e(Ct)?"opacity-30":""} ${e(je)?"ring-1 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""} ${e(nt)?"opacity-60":""}`),rr(Et,`left: ${e(Mt)??""}%; width: ${e(Zt)??""}%; background-color: ${e(Dt)??""}; border-color: ${e(bt)??""}; min-width: 100px; z-index: ${e(Pt)??""};`),Ut(Et,"title",`${e(V),l(()=>e(V).CompleteShortName)??""}: ${e(V),l(()=>e(V).FirstTeamText)??""} vs ${e(V),l(()=>e(V).SecondTeamText)??""} - ${Ve??""}${e(be)?" (Click to see conflicts)":" (Click to add to plan)"}${e(Oe)?` [Priority: ${e(Oe)}]`:""}${e(dt)&&!e(je)?" [Easy opportunity]":""}${e(Re)!=="not-covered"?` [Coverage: ${e(Re)}]`:""}`),he(pt,1,`text-xs sm:text-sm font-bold truncate leading-tight ${e(Pe)?"cursor-pointer hover:underline":""}`),$($t,(_(e(Pe)),e(V),l(()=>e(Pe)||e(V).Division.CodeAlias))),$(Ht,`vs ${et??""}`),$(tr,gt)},[()=>(_(Ye),e(V),l(()=>Ye(e(V).ScheduledStartDateTime))),()=>(_(e(Bt)),l(()=>e(Bt).length>20?e(Bt).substring(0,17)+"...":e(Bt))),()=>(_(Ye),e(V),l(()=>Ye(e(V).ScheduledStartDateTime)))]),h(Ee,Et)}),s(Ae),s(ve),Y(()=>{$(ke,e(B)),$(Le,`${_(e(J)),l(()=>e(J).length)??""} match${_(e(J)),l(()=>e(J).length!==1?"es":"")??""}`)}),h(F,ve)}),s(j),s(A);var z=d(A,2);{var K=F=>{Ki(F,{get match(){return e(L)},get conflictingMatches(){return e(N)},onClose:()=>y(L,null)})};P(z,F=>{e(L)&&F(K)})}var X=d(z,2);{var ne=F=>{var B=wc();h(F,B)};P(X,F=>{e(ye),l(()=>De&&e(ye)&&e(ye).isClaimOwner(De.MatchId))&&F(ne)})}var U=d(X,2);{var de=F=>{var B=Tc();B.__click=()=>y(_e,null),h(F,B)};P(U,F=>{e(_e)!==null&&F(de)})}var E=d(U,2);{var G=F=>{var B=Mc();B.__click=()=>y(ee,null),h(F,B)};P(E,F=>{e(ee)!==null&&F(G)})}s(I),Y((F,B)=>{he($e,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="all"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(rt,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="morning"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(xt,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="afternoon"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(ae,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().timeRange.start===null&&a().timeRange.end===null?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(H,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().timeRange.start==="08:00"&&a().timeRange.end==="14:30"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(Q,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().timeRange.start==="14:30"&&a().timeRange.end==="23:59"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),$(ut,`Timeline: ${F??""} - ${B??""} `)},[()=>(_(Ye),e(C),l(()=>Ye(e(C)))),()=>(_(Ye),e(f),l(()=>Ye(e(f))))]),h(m,I)};P(Ne,m=>{e(g),l(()=>e(g).length===0)?m(O):m(te,!1)})}h(t,yt),Qt(),u()}ar(["click","change"]);function pr(t){return t.replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n")}function ma(t){const r=new Date(t),n=r.getUTCFullYear(),a=String(r.getUTCMonth()+1).padStart(2,"0"),o=String(r.getUTCDate()).padStart(2,"0"),c=String(r.getUTCHours()).padStart(2,"0"),u=String(r.getUTCMinutes()).padStart(2,"0"),v=String(r.getUTCSeconds()).padStart(2,"0");return`${n}${a}${o}T${c}${u}${v}Z`}function $c(t,r){return`match-${t}-${r}@coursync.local`}function kc(t,r,n,a){const o=Date.now();let c=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//CourtSync//Coverage Plan//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH",`X-WR-CALNAME:${pr(a)}`,`X-WR-CALDESC:${pr("Volleyball Match Coverage Plan")}`,"X-WR-TIMEZONE:UTC"].join(`\r
`)+`\r
`;return t.forEach(u=>{const v=r(u),x=n(u),p=v?`${v} vs ${x}`:`${u.FirstTeamText} vs ${u.SecondTeamText}`,g=[`Court: ${u.CourtName}`,`Division: ${u.Division.CodeAlias}`,`First Team: ${u.FirstTeamText}`,`Second Team: ${u.SecondTeamText}`].join("\\n"),M=pr(u.CourtName),k=pr(p),C=pr(g),f=u.ScheduledStartDateTime,b=u.ScheduledEndDateTime,W=f-5*60*1e3,w=ma(W),N=ma(b),q=ma(o),se=$c(u.MatchId,f);c+=["BEGIN:VEVENT",`UID:${se}`,`DTSTAMP:${q}`,`DTSTART:${w}`,`DTEND:${N}`,`SUMMARY:${k}`,`DESCRIPTION:${C}`,`LOCATION:${M}`,"SEQUENCE:0","STATUS:CONFIRMED","TRANSP:OPAQUE"].join(`\r
`)+`\r
`,c+=["BEGIN:VALARM","TRIGGER:-PT15M","ACTION:DISPLAY",`DESCRIPTION:${pr(`Match starts in 15 minutes: ${p}`)}`,"END:VALARM"].join(`\r
`)+`\r
`,c+=`END:VEVENT\r
`}),c+=`END:VCALENDAR\r
`,c}var Ic=S('<span class="ml-2 text-red-400"> </span>'),Pc=S('<div class="flex items-center gap-1 bg-[#3b3c48] rounded-lg p-1 border border-[#454654] mx-4"><button>Plan</button> <button>Analytics</button> <button>Stats</button> <button>Team</button></div>'),Ec=S('<div class="text-center py-12 text-[#9fa2ab] text-sm"><p>No matches selected yet</p> <p class="text-xs text-[#808593] mt-2">Click matches in the timeline or list to add them to your coverage plan</p></div>'),Oc=S('<span class="ml-2 text-[#eab308]"> </span>'),Nc=S('<button class="px-2 py-1 text-xs font-medium rounded-lg bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors border border-[#525463]" title="Previous conflict">â Prev</button> <button class="px-2 py-1 text-xs font-medium rounded-lg bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors border border-[#525463]" title="Next conflict">Next â</button>',1),Ac=S('<div class="text-[10px] font-semibold text-[#eab308] px-1.5 py-0.5 rounded bg-[#eab308]/20">ACTIVE</div>'),Fc=S('<div class="flex-shrink-0 text-[10px] font-semibold text-[#eab308] px-1.5 py-0.5 rounded bg-[#eab308]/20">KEEP</div>'),Rc=S('<div class="text-[10px] text-[#808593] mt-0.5"> </div>'),Wc=S('<button class="px-2 py-1 text-[10px] font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Remove</button>'),Lc=S('<div><!> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="text-xs font-semibold text-[#f8f8f9]"> </span> <span class="text-xs text-[#facc15] font-medium"> </span> <span class="text-xs text-[#c0c2c8]"> </span></div> <!></div> <!></div>'),jc=S('<div><div class="flex items-center gap-2 mb-2"><div class="text-xs font-medium text-red-400"> </div> <!></div> <div class="space-y-2"></div></div>'),Uc=S('<div class="border border-red-800/50 rounded-lg bg-red-950/10 p-4"><div class="flex items-center justify-between mb-3"><div><h4 class="text-sm font-semibold text-red-400">â ï¸ Conflicts Detected</h4> <p class="text-xs text-[#9fa2ab] mt-0.5"> <!></p></div> <div class="flex items-center gap-2"><!> <button class="px-3 py-1.5 text-xs font-medium rounded-lg bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Auto-Resolve</button></div></div> <div class="space-y-3"></div></div>'),Yc=S('<span class="text-[10px] px-1.5 py-0.5 rounded bg-[#eab308]/20 text-[#eab308] border border-[#eab308]/50">Uncovered</span>'),Bc=S('<div class="flex items-center gap-2 px-2 py-1.5 rounded bg-green-950/20 border border-green-500/30"><div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="text-xs font-semibold text-[#f8f8f9]"> </span> <span class="text-xs text-green-400 font-medium"> </span> <span class="text-xs text-[#c0c2c8]"> </span> <!></div> <div class="text-[10px] text-[#808593] mt-0.5"> </div></div> <button class="px-2 py-1 text-xs font-medium rounded transition-colors bg-green-500/20 text-green-400 border border-green-500/50 hover:bg-green-500/30">Add</button></div>'),Hc=S('<div class="border border-green-500/50 rounded-lg bg-green-950/10 p-4"><div class="flex items-center justify-between mb-3"><div><h4 class="text-sm font-semibold text-green-400">ð¡ Coverage Opportunities</h4> <p class="text-xs text-[#9fa2ab] mt-0.5"> </p></div></div> <div class="space-y-2"></div></div>'),Vc=S('<div class="flex-shrink-0 text-[10px] font-semibold text-red-400 px-1.5 py-0.5 rounded bg-red-950/50">CONFLICT</div>'),Gc=S("<div></div>"),Jc=S('<div class="fixed inset-0 z-40"></div> <div class="absolute right-0 top-full mt-1 z-50"><!></div>',1),qc=S('<div class="relative flex-shrink-0"><button title="Set coverage status"> </button> <!></div>'),zc=S('<div><button aria-label="Remove from plan"><svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></button> <!> <div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <div class="flex-shrink-0 w-24 text-sm font-bold text-[#facc15]"> </div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><div class="text-sm font-bold text-[#f8f8f9]"> </div> <!></div> <div class="text-xs text-[#c0c2c8] truncate"> </div></div> <!> <div class="flex-shrink-0"><span class="px-2 py-0.5 text-[10px] font-semibold rounded"> </span></div></div>'),Xc=S('<div class="space-y-2"><div class="flex items-center gap-2 pb-2 border-b border-[#454654]"><h4 class="text-sm font-semibold text-[#f8f8f9]"> </h4> <span class="text-xs text-[#808593]"> </span></div> <!></div>'),Qc=S('<div class="space-y-4"><!> <!> <div class="space-y-4"></div></div>'),Kc=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">CoverageAnalytics - To be migrated</div>'),Zc=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">CoverageStats - To be migrated</div>'),el=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">TeamMemberSelector and TeamCoverageView - To be migrated</div>'),tl=S('<div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 p-4 border-t border-[#454654] bg-[#454654]/50"><div class="flex items-center gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]">Mark All as Planned</button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]">Mark All as Covered</button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors text-[#9fa2ab] hover:text-[#f8f8f9] hover:bg-[#454654]">Clear Plan</button></div> <div class="flex items-center gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]" title="Copy plan to clipboard">Copy</button> <div class="flex items-center gap-1 bg-[#3b3c48] rounded-lg p-1 border border-[#454654]"><button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as JSON">JSON</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as CSV">CSV</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as Text">TXT</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as Calendar (ICS)">ð ICS</button></div></div></div>'),rl=S('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"><div class="relative w-full max-w-3xl max-h-[90vh] border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden flex flex-col"><div class="flex items-center justify-between p-4 border-b border-[#454654] bg-[#454654]/50"><div class="flex-1"><h3 class="text-base sm:text-lg font-semibold text-[#f8f8f9]">My Coverage Plan</h3> <div class="flex items-center gap-3 mt-1 flex-wrap"><p class="text-xs text-[#9fa2ab]"> <!> <!></p> <select class="px-2 py-1 text-xs rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none"><option>All Status</option><option>Uncovered</option><option>Planned</option><option>Covered</option></select></div></div> <!> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-4"><!></div> <!></div></div>');function al(t,r){Xt(r,!1);const n=R(),a=R(),o=R(),c=R(),u=R(),v=R(),x=R();let p=Je(r,"matches",8),g=Je(r,"onClose",8),M=R("plan"),k=R("all"),C=R(null),f=R(0),b=R([]);function T(D){return(e(a).get(D)||[]).map(H=>e(n).find(Q=>Q.MatchId===H)).filter(Boolean)}function W(){e(c).length>0&&y(f,(e(f)+1)%e(c).length)}function w(){e(c).length>0&&y(f,(e(f)-1+e(c).length)%e(c).length)}function N(D){return D.InvolvedTeam==="first"?D.SecondTeamText:D.InvolvedTeam==="second"?D.FirstTeamText:`${D.FirstTeamText} vs ${D.SecondTeamText}`}function q(){var me;const D={plan:{createdAt:new Date().toISOString(),totalMatches:e(n).length,totalCoverageTime:e(u),conflicts:e(c).length},matches:e(n).map(xe=>({MatchId:xe.MatchId,Date:It(xe.ScheduledStartDateTime),Time:Ye(xe.ScheduledStartDateTime),Court:xe.CourtName,Team:Ie(xe)||xe.Division.CodeAlias,Opponent:N(xe),Division:xe.Division.CodeAlias,FirstTeam:xe.FirstTeamText,SecondTeam:xe.SecondTeamText,StartTime:new Date(xe.ScheduledStartDateTime).toISOString(),EndTime:new Date(xe.ScheduledEndDateTime).toISOString()}))},ae=JSON.stringify(D,null,2),H=new Blob([ae],{type:"application/json"}),Q=URL.createObjectURL(H),ue=document.createElement("a");ue.href=Q,ue.download=`coverage-plan-${It(((me=e(n)[0])==null?void 0:me.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.json`,ue.click(),URL.revokeObjectURL(Q)}function se(){var xe;const D=["Date","Time","Court","Team","Opponent","Division","First Team","Second Team","Start Time","End Time"],ae=e(n).map(Te=>[It(Te.ScheduledStartDateTime),Ye(Te.ScheduledStartDateTime),Te.CourtName,Ie(Te)||Te.Division.CodeAlias,N(Te),Te.Division.CodeAlias,Te.FirstTeamText,Te.SecondTeamText,new Date(Te.ScheduledStartDateTime).toISOString(),new Date(Te.ScheduledEndDateTime).toISOString()]),H=[D.join(","),...ae.map(Te=>Te.map(He=>`"${He}"`).join(","))].join(`
`),Q=new Blob([H],{type:"text/csv"}),ue=URL.createObjectURL(Q),me=document.createElement("a");me.href=ue,me.download=`coverage-plan-${It(((xe=e(n)[0])==null?void 0:xe.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.csv`,me.click(),URL.revokeObjectURL(ue)}function L(){var ue;let D=`COVERAGE PLAN
`;D+=`${"=".repeat(50)}

`,D+=`Total Matches: ${e(n).length}
`,D+=`Total Coverage Time: ${Math.floor(e(u)/60)}h ${e(u)%60}m
`,e(c).length>0&&(D+=`Conflicts: ${e(c).length}
`),D+=`
`,e(x).forEach(me=>{const xe=e(v)[me];D+=`${me}
`,D+=`${"-".repeat(50)}
`,xe.forEach(Te=>{const He=Ie(Te),at=N(Te);D+=`${Ye(Te.ScheduledStartDateTime)} | ${Te.CourtName} | ${He||Te.Division.CodeAlias} vs ${at}
`}),D+=`
`});const ae=new Blob([D],{type:"text/plain"}),H=URL.createObjectURL(ae),Q=document.createElement("a");Q.href=H,Q.download=`coverage-plan-${It(((ue=e(n)[0])==null?void 0:ue.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.txt`,Q.click(),URL.revokeObjectURL(H)}function ce(){var ue;const D=kc(e(n),Ie,N,"Coverage Plan"),ae=new Blob([D],{type:"text/calendar;charset=utf-8"}),H=URL.createObjectURL(ae),Q=document.createElement("a");Q.href=H,Q.download=`coverage-plan-${It(((ue=e(n)[0])==null?void 0:ue.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.ics`,Q.click(),URL.revokeObjectURL(H)}async function _e(){let D=`COVERAGE PLAN
`;D+=`${"=".repeat(50)}

`,D+=`Total Matches: ${e(n).length}
`,D+=`Total Coverage Time: ${Math.floor(e(u)/60)}h ${e(u)%60}m
`,e(c).length>0&&(D+=`Conflicts: ${e(c).length}
`),D+=`
`,e(x).forEach(ae=>{const H=e(v)[ae];D+=`${ae}
`,D+=`${"-".repeat(50)}
`,H.forEach(Q=>{const ue=Ie(Q),me=N(Q);D+=`${Ye(Q.ScheduledStartDateTime)} | ${Q.CourtName} | ${ue||Q.Division.CodeAlias} vs ${me}
`}),D+=`
`});try{await navigator.clipboard.writeText(D),alert("Coverage plan copied to clipboard!")}catch(ae){console.error("Failed to copy to clipboard:",ae),alert("Failed to copy to clipboard. Please try exporting instead.")}}ie(()=>(_(p()),Ue),()=>{if(p().length>0){const D=new Map,ae=Gt(vt);p().forEach(H=>{const Q=Ie(H);if(!Q)return;const ue=D.get(Q)||{total:0,inPlan:0};ue.total++,ae.has(H.MatchId)&&ue.inPlan++,D.set(Q,ue)}),D.forEach((H,Q)=>{Ue.updateFromPlan(Q,H.inPlan,H.total)})}}),ie(()=>(_(p()),e(k),Ue),()=>{y(n,(()=>{const D=Gt(vt);let ae=p().filter(H=>D.has(H.MatchId)).sort((H,Q)=>H.ScheduledStartDateTime-Q.ScheduledStartDateTime);return e(k)!=="all"&&(ae=ae.filter(H=>{const Q=Ie(H);return Q?Ue.getTeamStatus(Q)===e(k):!1})),ae})())}),ie(()=>e(n),()=>{y(a,jr(e(n)))}),ie(()=>(_(p()),pa),()=>{y(o,(()=>{const D=jr(p()),H=Gt(vt),Q=new Map;return p().forEach(ue=>{const me=Ie(ue);me&&Q.set(me,Ue.getTeamStatus(me))}),pa(p(),H,D,Q,Ie,{preferUncovered:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:5})})())}),ie(()=>(e(a),e(n)),()=>{y(c,(()=>{if(e(a).size===0)return[];const D=[],ae=new Set;return e(n).forEach(H=>{if(ae.has(H.MatchId))return;const Q=e(a).get(H.MatchId);if(!Q||Q.length===0)return;const ue=[H,...Q.map(me=>e(n).find(xe=>xe.MatchId===me)).filter(Boolean)];ue.forEach(me=>ae.add(me.MatchId)),D.push({matches:ue.sort((me,xe)=>me.ScheduledStartDateTime-xe.ScheduledStartDateTime),conflictCount:ue.length})}),D})())}),ie(()=>(e(c),e(f)),()=>{e(c).length>0&&e(f)>=e(c).length?y(f,0):e(c).length===0&&y(f,0)}),ie(()=>(e(c),e(b),e(f)),()=>{e(c).length>0&&e(b)[e(f)]&&setTimeout(()=>{var D;(D=e(b)[e(f)])==null||D.scrollIntoView({behavior:"smooth",block:"center"})},100)}),ie(()=>e(n),()=>{y(u,(()=>{if(e(n).length===0)return 0;const D=Math.min(...e(n).map(H=>H.ScheduledStartDateTime)),ae=Math.max(...e(n).map(H=>H.ScheduledEndDateTime));return Math.floor((ae-D)/6e4)})())}),ie(()=>(e(n),It),()=>{y(v,(()=>{const D={};return e(n).forEach(ae=>{const H=It(ae.ScheduledStartDateTime);D[H]||(D[H]=[]),D[H].push(ae)}),D})())}),ie(()=>e(v),()=>{y(x,Object.keys(e(v)).sort((D,ae)=>{const H=new Date(D).getTime(),Q=new Date(ae).getTime();return H-Q}))}),cr(),Kt();var ee=rl(),De=i(ee),ye=i(De),We=i(ye),Be=d(i(We),2),Ce=i(Be),Ge=i(Ce),it=d(Ge);{var _t=D=>{var ae=_n();Y(H=>$(ae,`â¢ ${H??""}h ${e(u)%60}m coverage`),[()=>(e(u),l(()=>Math.floor(e(u)/60)))]),h(D,ae)};P(it,D=>{e(u)>0&&D(_t)})}var yt=d(it,2);{var Ne=D=>{var ae=Ic(),H=i(ae);s(ae),Y(()=>$(H,`â¢ ${e(c),l(()=>e(c).length)??""} conflict${e(c),l(()=>e(c).length!==1?"s":"")??""}`)),h(D,ae)};P(yt,D=>{e(c),l(()=>e(c).length>0)&&D(Ne)})}s(Ce);var O=d(Ce,2);O.__change=D=>y(k,D.target.value);var te=i(O);te.value=te.__value="all";var m=d(te);m.value=m.__value="not-covered";var I=d(m);I.value=I.__value="planned";var oe=d(I);oe.value=oe.__value="covered",s(O);var le;_r(O),s(Be),s(We);var pe=d(We,2);{var $e=D=>{var ae=Pc(),H=i(ae);H.__click=()=>y(M,"plan");var Q=d(H,2);Q.__click=()=>y(M,"analytics");var ue=d(Q,2);ue.__click=()=>y(M,"stats");var me=d(ue,2);me.__click=()=>y(M,"coordination"),s(ae),Y(()=>{he(H,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(M)==="plan"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(Q,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(M)==="analytics"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(ue,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(M)==="stats"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(me,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(M)==="coordination"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),h(D,ae)};P(pe,D=>{e(n),l(()=>e(n).length>0)&&D($e)})}var rt=d(pe,2);rt.__click=function(...D){var ae;(ae=g())==null||ae.apply(this,D)},s(ye);var xt=d(ye,2),wt=i(xt);{var Tt=D=>{var ae=Ot(),H=st(ae);{var Q=me=>{var xe=Ec();h(me,xe)},ue=me=>{var xe=Qc(),Te=i(xe);{var He=Se=>{var Me=Uc(),we=i(Me),A=i(we),j=d(i(A),2),z=i(j),K=d(z);{var X=F=>{var B=Oc(),J=i(B);s(B),Y(()=>$(J,`â¢ Conflict ${e(f)+1} of ${e(c),l(()=>e(c).length)??""}`)),h(F,B)};P(K,F=>{e(c),l(()=>e(c).length>0)&&F(X)})}s(j),s(A);var ne=d(A,2),U=i(ne);{var de=F=>{var B=Nc(),J=st(B);J.__click=w;var ve=d(J,2);ve.__click=W,h(F,B)};P(U,F=>{e(c),l(()=>e(c).length>1)&&F(de)})}var E=d(U,2);E.__click=()=>{e(c).forEach(F=>{F.matches.slice(1).forEach(B=>{vt.deselectMatch(B.MatchId)})})},s(ne),s(we);var G=d(we,2);mt(G,5,()=>e(c),ft,(F,B,J)=>{var ve=jc(),fe=i(ve),Fe=i(fe),ke=i(Fe);s(Fe);var re=d(Fe,2);{var Le=Qe=>{var ge=Ac();h(Qe,ge)};P(re,Qe=>{J===e(f)&&Qe(Le)})}s(fe);var Ae=d(fe,2);mt(Ae,5,()=>(e(B),l(()=>e(B).matches)),ft,(Qe,ge,Ee)=>{const V=Z(()=>(_(Ie),e(ge),l(()=>Ie(e(ge))))),be=Z(()=>(e(ge),l(()=>T(e(ge).MatchId)))),ze=Z(()=>Ee===0);var Pe=Lc(),lt=i(Pe);{var Ct=bt=>{var Pt=Fc();h(bt,Pt)};P(lt,bt=>{e(ze)&&bt(Ct)})}var ot=d(lt,2),je=i(ot),Oe=i(je),dt=i(Oe,!0);s(Oe);var Re=d(Oe,2),nt=i(Re,!0);s(Re);var Ke=d(Re,2),Ze=i(Ke,!0);s(Ke),s(je);var Mt=d(je,2);{var Zt=bt=>{var Pt=Rc(),Et=i(Pt);s(Pt),Y(()=>$(Et,`Conflicts with ${_(e(be)),l(()=>e(be).length)??""} other match${_(e(be)),l(()=>e(be).length!==1?"es":"")??""}`)),h(bt,Pt)};P(Mt,bt=>{_(e(be)),l(()=>e(be).length>0)&&bt(Zt)})}s(ot);var Bt=d(ot,2);{var Dt=bt=>{var Pt=Wc();Pt.__click=()=>vt.deselectMatch(e(ge).MatchId),h(bt,Pt)};P(Bt,bt=>{e(ze)||bt(Dt)})}s(Pe),Y(bt=>{he(Pe,1,`flex items-center gap-2 px-2 py-1.5 rounded ${e(ze)?"bg-[#eab308]/10 border border-[#eab308]/30":"bg-[#454654]/50"}`),$(dt,bt),$(nt,(e(ge),l(()=>e(ge).CourtName))),$(Ze,(_(e(V)),e(ge),l(()=>e(V)||e(ge).Division.CodeAlias)))},[()=>(_(Ye),e(ge),l(()=>Ye(e(ge).ScheduledStartDateTime)))]),h(Qe,Pe)}),s(Ae),s(ve),Qn(ve,(Qe,ge)=>Xn(b,e(b)[ge]=Qe),Qe=>{var ge;return(ge=e(b))==null?void 0:ge[Qe]},()=>[J]),Y(()=>{he(ve,1,`border rounded p-3 transition-all ${J===e(f)?"border-[#eab308] bg-[#eab308]/5":"border-red-800/30 bg-[#3b3c48]/50"}`),$(ke,`Conflict Group ${J+1}: ${e(B),l(()=>e(B).conflictCount)??""} overlapping match${e(B),l(()=>e(B).conflictCount!==1?"es":"")??""}`)}),h(F,ve)}),s(G),s(Me),Y(()=>$(z,`${e(c),l(()=>e(c).length)??""} conflict group${e(c),l(()=>e(c).length!==1?"s":"")??""} in your plan `)),h(Se,Me)};P(Te,Se=>{e(c),l(()=>e(c).length>0)&&Se(He)})}var at=d(Te,2);{var ut=Se=>{var Me=Hc(),we=i(Me),A=i(we),j=d(i(A),2),z=i(j);s(j),s(A),s(we);var K=d(we,2);mt(K,5,()=>e(o),ft,(X,ne)=>{const U=Z(()=>(e(ne),l(()=>e(ne).match))),de=Z(()=>(_(Ie),_(e(U)),l(()=>Ie(e(U))))),E=Z(()=>(_(e(de)),_(Ue),l(()=>e(de)?Ue.getTeamStatus(e(de)):"not-covered")));var G=Bc(),F=i(G),B=i(F),J=i(B),ve=i(J,!0);s(J);var fe=d(J,2),Fe=i(fe,!0);s(fe);var ke=d(fe,2),re=i(ke,!0);s(ke);var Le=d(ke,2);{var Ae=V=>{var be=Yc();h(V,be)};P(Le,V=>{e(E)==="not-covered"&&V(Ae)})}s(B);var Qe=d(B,2),ge=i(Qe,!0);s(Qe),s(F);var Ee=d(F,2);Ee.__click=()=>vt.selectMatch(e(U).MatchId),s(G),Y(V=>{$(ve,V),$(Fe,(_(e(U)),l(()=>e(U).CourtName))),$(re,(_(e(de)),_(e(U)),l(()=>e(de)||e(U).Division.CodeAlias))),$(ge,(e(ne),l(()=>e(ne).reason)))},[()=>(_(Ye),_(e(U)),l(()=>Ye(e(U).ScheduledStartDateTime)))]),h(X,G)}),s(K),s(Me),Y(()=>$(z,`${e(o),l(()=>e(o).length)??""} suggestion${e(o),l(()=>e(o).length!==1?"s":"")??""} (prioritizing uncovered teams)`)),h(Se,Me)};P(at,Se=>{e(o),l(()=>e(o).length>0)&&Se(ut)})}var ht=d(at,2);mt(ht,5,()=>e(x),ft,(Se,Me)=>{const we=Z(()=>(e(v),e(Me),l(()=>e(v)[e(Me)])));var A=Xc(),j=i(A),z=i(j),K=i(z,!0);s(z);var X=d(z,2),ne=i(X);s(X),s(j);var U=d(j,2);mt(U,1,()=>e(we),ft,(de,E)=>{const G=Z(()=>(_(Ie),e(E),l(()=>Ie(e(E))))),F=Z(()=>(e(E),l(()=>N(e(E))))),B=Z(()=>(e(a),e(E),l(()=>e(a).has(e(E).MatchId))));var J=zc(),ve=i(J);ve.__click=()=>vt.toggleMatch(e(E).MatchId);var fe=i(ve);s(ve);var Fe=d(ve,2);{var ke=nt=>{var Ke=Vc();h(nt,Ke)};P(Fe,nt=>{e(B)&&nt(ke)})}var re=d(Fe,2),Le=i(re,!0);s(re);var Ae=d(re,2),Qe=i(Ae,!0);s(Ae);var ge=d(Ae,2),Ee=i(ge),V=i(Ee),be=i(V,!0);s(V);var ze=d(V,2);{var Pe=nt=>{const Ke=Z(()=>(_(Ue),_(e(G)),l(()=>Ue.getTeamStatus(e(G)))));var Ze=Gc();Y(()=>{he(Ze,1,`w-2 h-2 rounded ${e(Ke)==="covered"?"bg-green-500":e(Ke)==="partially-covered"?"bg-[#f59e0b]":e(Ke)==="planned"?"bg-[#eab308]":"bg-[#808593]"}`),Ut(Ze,"title",`Status: ${e(Ke)??""}`)}),h(nt,Ze)};P(ze,nt=>{e(G)&&nt(Pe)})}s(Ee);var lt=d(Ee,2),Ct=i(lt);s(lt),s(ge);var ot=d(ge,2);{var je=nt=>{var Ke=qc(),Ze=i(Ke);Ze.__click=Dt=>{Dt.stopPropagation(),y(C,e(C)===e(G)?null:e(G))};var Mt=i(Ze,!0);s(Ze);var Zt=d(Ze,2);{var Bt=Dt=>{var bt=Jc(),Pt=st(bt);Pt.__click=()=>y(C,null);var Et=d(Pt,2),fr=i(Et);{let mr=Z(()=>(_(Ue),_(e(G)),l(()=>Ue.getTeamStatus(e(G)))));Ma(fr,{get teamId(){return e(G)},get currentStatus(){return e(mr)},onStatusChange:xr=>{Ue.setTeamStatus(e(G),xr),y(C,null)},onClose:()=>y(C,null)})}s(Et),h(Dt,bt)};P(Zt,Dt=>{e(C)===e(G)&&Dt(Bt)})}s(Ke),Y(Dt=>{he(Ze,1,`px-2 py-1 text-xs rounded transition-colors ${e(C)===e(G)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]"}`),$(Mt,Dt)},[()=>(_(Ue),_(e(G)),l(()=>(()=>{const Dt=Ue.getTeamStatus(e(G));return Dt==="covered"?"â":Dt==="partially-covered"?"â":Dt==="planned"?"ð":"â"})()))]),h(nt,Ke)};P(ot,nt=>{e(G)&&nt(je)})}var Oe=d(ot,2),dt=i(Oe),Re=i(dt,!0);s(dt),s(Oe),s(J),Y(nt=>{he(J,1,`flex items-center gap-3 px-3 py-2.5 rounded border ${e(B)?"border-red-800/50 bg-red-950/10":"border-[#eab308]/50 bg-[#eab308]/5"}`),he(ve,1,`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center hover:opacity-80 transition-colors ${e(B)?"border-red-800/50 bg-red-950/20":"border-[#eab308] bg-[#eab308]/20"}`),he(fe,0,`w-3 h-3 ${e(B)?"text-red-400":"text-[#facc15]"}`),$(Le,nt),$(Qe,(e(E),l(()=>e(E).CourtName))),$(be,(_(e(G)),e(E),l(()=>e(G)||e(E).Division.CodeAlias))),$(Ct,`vs ${e(F)??""}`),rr(dt,`background-color: ${e(E),l(()=>e(E).Division.ColorHex)??""}20; color: ${e(E),l(()=>e(E).Division.ColorHex)??""}; border: 1px solid ${e(E),l(()=>e(E).Division.ColorHex)??""}40;`),$(Re,(e(E),l(()=>e(E).Division.CodeAlias)))},[()=>(_(Ye),e(E),l(()=>Ye(e(E).ScheduledStartDateTime)))]),h(de,J)}),s(A),Y(()=>{$(K,e(Me)),$(ne,`(${_(e(we)),l(()=>e(we).length)??""} match${_(e(we)),l(()=>e(we).length!==1?"es":"")??""})`)}),h(Se,A)}),s(ht),s(xe),h(me,xe)};P(H,me=>{e(n),l(()=>e(n).length===0)?me(Q):me(ue,!1)})}h(D,ae)},Xe=D=>{var ae=Ot(),H=st(ae);{var Q=me=>{var xe=Kc();h(me,xe)},ue=me=>{var xe=Ot(),Te=st(xe);{var He=ut=>{var ht=Zc();h(ut,ht)},at=ut=>{var ht=el();h(ut,ht)};P(Te,ut=>{e(M)==="stats"?ut(He):ut(at,!1)},!0)}h(me,xe)};P(H,me=>{e(M)==="analytics"?me(Q):me(ue,!1)},!0)}h(D,ae)};P(wt,D=>{e(M)==="plan"?D(Tt):D(Xe,!1)})}s(xt);var qe=d(xt,2);{var ct=D=>{var ae=tl(),H=i(ae),Q=i(H);Q.__click=()=>{e(n).forEach(Me=>{const we=Ie(Me);we&&Ue.setTeamStatus(we,"planned")}),alert("All matches marked as Planned")};var ue=d(Q,2);ue.__click=()=>{e(n).forEach(Me=>{const we=Ie(Me);we&&Ue.setTeamStatus(we,"covered")}),alert("All matches marked as Covered")};var me=d(ue,2);me.__click=()=>vt.clearPlan(),s(H);var xe=d(H,2),Te=i(xe);Te.__click=_e;var He=d(Te,2),at=i(He);at.__click=q;var ut=d(at,2);ut.__click=se;var ht=d(ut,2);ht.__click=L;var Se=d(ht,2);Se.__click=ce,s(He),s(xe),s(ae),h(D,ae)};P(qe,D=>{e(n),e(M),l(()=>e(n).length>0&&e(M)==="plan")&&D(ct)})}s(De),s(ee),Y(()=>{$(Ge,`${e(n),l(()=>e(n).length)??""} match${e(n),l(()=>e(n).length!==1?"es":"")??""} selected `),le!==(le=e(k))&&(O.value=(O.__value=e(k))??"",vr(O,e(k)))}),h(t,ee),Qt()}ar(["change","click"]);var nl=S('<span class="ml-2 text-[10px] opacity-75"> </span>'),ol=S("<button> <!></button>"),sl=S('<div class="border-b border-[#454654] pb-4"><div class="flex items-center gap-2 flex-wrap"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Select Team:</span> <!></div></div>'),il=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">TeamMatchView - To be migrated <br/> <small class="text-xs text-[#808593] mt-2"> </small></div>'),cl=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">WorkAssignmentView - To be migrated</div>'),ll=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">Select a team to view matches and work assignments</div>'),dl=S('<div class="space-y-4"><div class="flex items-center justify-between flex-wrap gap-4"><div><h1 class="text-xl font-bold text-[#f8f8f9]">Coach View</h1> <p class="text-sm text-[#9fa2ab] mt-1">View matches and work assignments by team</p></div> <div class="flex items-center gap-2 bg-[#454654] rounded-lg p-1"><button>Matches</button> <button>Work Assignments</button></div></div> <!> <!> <!></div>');function ul(t,r){Xt(r,!1);const n=R(),a=R(),o=R(),c=R();let u=Je(r,"matches",8),v=Je(r,"eventId",8),x=Je(r,"clubId",8),p=R(null),g=R(null),M=R("matches");function k(ee){var ye;y(p,ee);const De=(ye=e(a)[ee])==null?void 0:ye[0];De&&y(g,De)}ie(()=>_(u()),()=>{y(n,Ta(u()))}),ie(()=>(_(u()),Ie),()=>{y(a,(()=>{const ee={};return u().forEach(De=>{const ye=Ie(De);ye&&(ee[ye]||(ee[ye]=[]),ee[ye].push(De))}),ee})())}),ie(()=>(e(p),e(a)),()=>{y(o,e(p)?e(a)[e(p)]||[]:[])}),ie(()=>(e(n),e(a)),()=>{y(c,[...e(n)].sort((ee,De)=>{var Be,Ce;const ye=((Be=e(a)[ee])==null?void 0:Be.length)||0;return(((Ce=e(a)[De])==null?void 0:Ce.length)||0)-ye}))}),cr(),Kt();var C=dl(),f=i(C),b=d(i(f),2),T=i(b);T.__click=()=>y(M,"matches");var W=d(T,2);W.__click=()=>y(M,"work"),s(b),s(f);var w=d(f,2);{var N=ee=>{var De=sl(),ye=i(De),We=d(i(ye),2);mt(We,1,()=>e(c),ft,(Be,Ce)=>{var Ge=ol();Ge.__click=()=>k(e(Ce));var it=i(Ge),_t=d(it);{var yt=Ne=>{var O=nl(),te=i(O);s(O),Y(()=>$(te,`(${e(a),e(Ce),l(()=>e(a)[e(Ce)].length)??""})`)),h(Ne,O)};P(_t,Ne=>{e(a),e(Ce),l(()=>e(a)[e(Ce)])&&Ne(yt)})}s(Ge),Y(()=>{he(Ge,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(p)===e(Ce)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),$(it,`${e(Ce)??""} `)}),h(Be,Ge)}),s(ye),s(De),h(ee,De)};P(w,ee=>{e(n),l(()=>e(n).length>0)&&ee(N)})}var q=d(w,2);{var se=ee=>{var De=Ot(),ye=st(De);{var We=Ce=>{var Ge=il(),it=d(i(Ge),3),_t=i(it);s(it),s(Ge),Y(()=>$(_t,`Team ${e(p)??""} has ${e(o),l(()=>e(o).length)??""} match${e(o),l(()=>e(o).length!==1?"es":"")??""}`)),h(Ce,Ge)},Be=Ce=>{var Ge=cl();h(Ce,Ge)};P(ye,Ce=>{e(M)==="matches"?Ce(We):Ce(Be,!1)})}h(ee,De)},L=ee=>{var De=ll();h(ee,De)};P(q,ee=>{e(p)?ee(se):ee(L,!1)})}var ce=d(q,2);{var _e=ee=>{un(ee,{get match(){return e(g)},get eventId(){return v()},get clubId(){return x()},onClose:()=>y(g,null),get matches(){return u()}})};P(ce,ee=>{e(g)&&ee(_e)})}s(C),Y(()=>{he(T,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(M)==="matches"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(W,1,`px-3 py-2 text-xs font-medium rounded transition-colors min-h-[44px] ${e(M)==="work"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),h(t,C),Qt()}ar(["click"]);var vl=S('<span class="ml-2" style="color: #ef4444;"> </span>'),fl=S('<span class="text-xs whitespace-nowrap hidden sm:inline" style="color: #9fa2ab;"> <!></span>'),ml=S('<span class="font-medium truncate max-w-[200px] sm:max-w-none"> </span>'),xl=S('<span class="hidden sm:inline"> </span>'),bl=S('<div class="flex items-center gap-2 text-xs" style="color: #9fa2ab;"><!> <!></div>'),hl=S('<span class="ml-2" style="color: #ef4444;"> </span>'),pl=S('<span class="text-xs sm:hidden" style="color: #9fa2ab;"> <!></span>'),gl=S('<div class="flex items-center gap-1 rounded-lg p-1" style="background-color: #454654;"><button>List</button> <button>Timeline</button></div>'),_l=S("<button> </button>"),yl=S('<!> <!> <button class="px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors hover:text-[#f8f8f9] min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8;" title="Export JSON">JSON</button> <button class="px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors hover:text-[#f8f8f9] min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8;" title="Export CSV">CSV</button>',1),Sl=S('<div class="border-b" style="border-color: #454654; background-color: rgba(59, 60, 72, 0.3);"><div class="container mx-auto px-3 sm:px-4 py-4"><!></div></div>'),wl=S('<div class="text-center py-12"><div class="inline-block animate-pulse" style="color: #9fa2ab;">Loading matches...</div></div>'),Tl=S('<div class="rounded-lg mb-6 px-4 py-3 border" style="background-color: rgba(127, 29, 29, 0.5); border-color: #991b1b; color: #fca5a5;"><div class="text-xs font-medium mb-1">Error</div> <div class="text-sm"> </div></div>'),Ml=S('<div class="text-center py-12" style="color: #9fa2ab;"><div class="text-sm">No matches found for 630 Volleyball</div> <div class="text-xs mt-2" style="color: #808593;">Click "Config" to change event parameters</div></div>'),Cl=S('<div class="min-h-screen" style="background-color: #18181b;"><header class="border-b sticky top-0 z-10" style="border-color: #454654; background-color: rgba(59, 60, 72, 0.5);"><div class="container mx-auto px-3 sm:px-4 py-2 sm:py-3"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4"><div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 sm:gap-4 min-w-0 flex-1"><div class="flex items-center gap-2 min-w-0"><h1 class="text-base sm:text-lg font-semibold truncate" style="color: #f8f8f9;">630 Volleyball Coverage</h1> <!></div> <!> <!></div> <div class="flex items-center gap-1.5 sm:gap-2 flex-wrap"><div class="flex items-center gap-1"><label class="text-xs hidden sm:inline" style="color: #9fa2ab;">Role:</label> <select class="px-2 py-2 sm:py-1.5 text-xs rounded-lg transition-colors min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8; border: 1px solid #525463;" title="Select your role"><option>Media</option><option>Spectator</option><option>Coach</option></select></div> <!> <button> </button></div></div></div></header> <!> <main class="container mx-auto px-3 sm:px-4 py-4 sm:py-6"><!> <!> <!> <!> <!></main></div>');function Al(t,r){Xt(r,!1);const n=()=>Vt(Ds,"$selectedCount",v),a=()=>Vt(Sa,"$isMedia",v),o=()=>Vt(wa,"$isSpectator",v),c=()=>Vt(Is,"$isCoach",v),u=()=>Vt(kr,"$userRole",v),[v,x]=ya(),p=R(),g=R(),M=R(),k=R(),C=R(),f=R();let b=R("PTAwMDAwNDEzMTQ90"),T=R("2025-11-01"),W=R(300),w=R([]),N=R(!1),q=R(null),se=R("list"),L=R(!1),ce=R(24426),_e=R(!1),ee=R(null);_a(()=>{De(e(b),e(T),e(W))});async function De(A,j,z){var K;y(N,!0),y(q,null),y(b,A),y(T,j),y(W,z);try{const X=await fo(A),ne=(K=X.Clubs)==null?void 0:K.find(E=>E.Name==="630 Volleyball");ne&&y(ce,ne.ClubId),y(ee,{name:X.Name||X.EventName||X.FullName||X.Title||"Event",startDate:X.StartDate||X.StartDateTime||X.Start||X.StartTime,endDate:X.EndDate||X.EndDateTime||X.End||X.EndTime});const U=await vo(A,j,z),de=go(U.CourtSchedules);y(w,de)}catch(X){console.error("Error loading schedule:",X),y(q,X instanceof Error?X.message:"Failed to load schedule"),y(w,[])}finally{y(N,!1)}}function ye(){const A=JSON.stringify(e(w),null,2),j=new Blob([A],{type:"application/json"}),z=URL.createObjectURL(j),K=document.createElement("a");K.href=z,K.download=`630-volleyball-matches-${e(T)}.json`,K.click(),URL.revokeObjectURL(z)}function We(){const A=["Match ID","Division","Short Name","First Team","Second Team","Work Team","Court","Start Time","End Time","Duration","Involved Team"],j=e(w).map(U=>[U.MatchId.toString(),U.Division.Name,U.CompleteShortName,U.FirstTeamText,U.SecondTeamText,U.WorkTeamText,U.CourtName,new Date(U.ScheduledStartDateTime).toISOString(),new Date(U.ScheduledEndDateTime).toISOString(),((U.ScheduledEndDateTime-U.ScheduledStartDateTime)/6e4).toString(),U.InvolvedTeam]),z=[A.join(","),...j.map(U=>U.map(de=>`"${de}"`).join(","))].join(`
`),K=new Blob([z],{type:"text/csv"}),X=URL.createObjectURL(K),ne=document.createElement("a");ne.href=X,ne.download=`630-volleyball-matches-${e(T)}.csv`,ne.click(),URL.revokeObjectURL(X)}ie(()=>(e(w),Ue),()=>{if(e(w).length>0){const A=new Map;e(w).forEach(j=>{const K=(j.InvolvedTeam==="first"?j.FirstTeamText:j.SecondTeamText).match(/(\d+-\d+)/),X=K?K[1]:"";if(!X)return;const ne=A.get(X)||{total:0,inPlan:0};ne.total++;let U=!1;vt.subscribe(de=>{U=de.has(j.MatchId)})(),U&&ne.inPlan++,A.set(X,ne)}),A.forEach((j,z)=>{Ue.updateFromPlan(z,j.inPlan,j.total)})}}),ie(()=>e(w),()=>{y(p,(()=>{const A=new Map;return e(w).forEach((j,z)=>{e(w).slice(z+1).forEach(K=>{j.ScheduledStartDateTime<K.ScheduledEndDateTime&&j.ScheduledEndDateTime>K.ScheduledStartDateTime&&(A.has(j.MatchId)||A.set(j.MatchId,[]),A.get(j.MatchId).push(K.MatchId))})}),e(w).filter(j=>A.has(j.MatchId)).length})())}),ie(()=>n(),()=>{y(g,n())}),ie(()=>a(),()=>{y(M,a())}),ie(()=>o(),()=>{y(k,o())}),ie(()=>c(),()=>{y(C,c())}),ie(()=>u(),()=>{y(f,u())}),ie(()=>(e(w),e(g),Ue),()=>{if(e(w).length>0&&e(g)!==void 0){const A=new Map,j=Gt(vt);e(w).forEach(z=>{const X=(z.InvolvedTeam==="first"?z.FirstTeamText:z.SecondTeamText).match(/(\d+-\d+)/),ne=X?X[1]:"";if(!ne)return;const U=A.get(ne)||{total:0,inPlan:0};U.total++,j.has(z.MatchId)&&U.inPlan++,A.set(ne,U)}),A.forEach((z,K)=>{Ue.updateFromPlan(K,z.inPlan,z.total)})}}),cr(),Kt();var Be=Cl(),Ce=i(Be),Ge=i(Ce),it=i(Ge),_t=i(it),yt=i(_t),Ne=d(i(yt),2);{var O=A=>{var j=fl(),z=i(j),K=d(z);{var X=ne=>{var U=vl(),de=i(U);s(U),Y(()=>$(de,`â¢ ${e(p)??""} conflicts`)),h(ne,U)};P(K,ne=>{e(p)>0&&ne(X)})}s(j),Y(()=>$(z,`${e(w),l(()=>e(w).length)??""} matches `)),h(A,j)};P(Ne,A=>{e(w),l(()=>e(w).length>0)&&A(O)})}s(yt);var te=d(yt,2);{var m=A=>{var j=bl(),z=i(j);{var K=U=>{var de=ml(),E=i(de,!0);s(de),Y(()=>$(E,(e(ee),l(()=>e(ee).name)))),h(U,de)};P(z,U=>{e(ee),l(()=>e(ee).name)&&U(K)})}var X=d(z,2);{var ne=U=>{var de=xl(),E=i(de,!0);s(de),Y(G=>$(E,G),[()=>(e(ee),_(It),l(()=>(()=>{try{const G=e(ee).startDate?new Date(e(ee).startDate).getTime():null,F=e(ee).endDate?new Date(e(ee).endDate).getTime():null;return G&&F&&Math.abs(G-F)>864e5?`${It(G)} - ${It(F)}`:G?It(G):F?It(F):null}catch{return null}})()))]),h(U,de)};P(X,U=>{e(ee),l(()=>(e(ee).startDate||e(ee).endDate)&&(()=>{try{const de=e(ee).startDate?new Date(e(ee).startDate).getTime():null,E=e(ee).endDate?new Date(e(ee).endDate).getTime():null;return de&&E&&Math.abs(de-E)>864e5}catch{return!1}})())&&U(ne)})}s(j),h(A,j)};P(te,A=>{e(ee),l(()=>e(ee)&&(e(ee).name||e(ee).startDate))&&A(m)})}var I=d(te,2);{var oe=A=>{var j=pl(),z=i(j),K=d(z);{var X=ne=>{var U=hl(),de=i(U);s(U),Y(()=>$(de,`â¢ ${e(p)??""} conflicts`)),h(ne,U)};P(K,ne=>{e(p)>0&&ne(X)})}s(j),Y(()=>$(z,`${e(w),l(()=>e(w).length)??""} matches `)),h(A,j)};P(I,A=>{e(w),l(()=>e(w).length>0)&&A(oe)})}s(_t);var le=d(_t,2),pe=i(le),$e=d(i(pe),2);$e.__change=A=>kr.setRole(A.target.value);var rt=i($e);rt.value=rt.__value="media";var xt=d(rt);xt.value=xt.__value="spectator";var wt=d(xt);wt.value=wt.__value="coach",s($e);var Tt;_r($e),s(pe);var Xe=d(pe,2);{var qe=A=>{var j=yl(),z=st(j);{var K=E=>{var G=gl(),F=i(G);F.__click=()=>y(se,"list");let B;var J=d(F,2);J.__click=()=>y(se,"timeline");let ve;s(G),Y(()=>{B=he(F,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,B,{"bg-gold-500":e(se)==="list","text-charcoal-950":e(se)==="list","text-charcoal-300":e(se)!=="list","hover:text-charcoal-50":e(se)!=="list"}),rr(F,e(se)==="list"?"background-color: #eab308; color: #18181b;":"color: #c0c2c8;"),ve=he(J,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,ve,{"bg-gold-500":e(se)==="timeline","text-charcoal-950":e(se)==="timeline","text-charcoal-300":e(se)!=="timeline","hover:text-charcoal-50":e(se)!=="timeline"}),rr(J,e(se)==="timeline"?"background-color: #eab308; color: #18181b;":"color: #c0c2c8;")}),h(E,G)};P(z,E=>{e(C)||E(K)})}var X=d(z,2);{var ne=E=>{var G=_l();G.__click=()=>y(_e,!e(_e));let F;var B=i(G);s(G),Y(()=>{F=he(G,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0",null,F,{"text-charcoal-950":e(_e)}),rr(G,e(_e)?"background-color: #eab308; color: #18181b;":"background-color: #454654; color: #c0c2c8;"),$(B,`Plan (${e(g)??""})`)}),h(E,G)};P(X,E=>{e(M)&&e(g)>0&&E(ne)})}var U=d(X,2);U.__click=ye;var de=d(U,2);de.__click=We,h(A,j)};P(Xe,A=>{e(w),l(()=>e(w).length>0)&&A(qe)})}var ct=d(Xe,2);ct.__click=()=>y(L,!e(L));let D;var ae=i(ct,!0);s(ct),s(le),s(it),s(Ge),s(Ce);var H=d(Ce,2);{var Q=A=>{var j=Sl(),z=i(j),K=i(z);Es(K,{get eventId(){return e(b)},get date(){return e(T)},get timeWindow(){return e(W)},onLoad:De,get loading(){return e(N)}}),s(z),s(j),h(A,j)};P(H,A=>{e(L)&&A(Q)})}var ue=d(H,2),me=i(ue);{var xe=A=>{var j=wl();h(A,j)};P(me,A=>{e(N)&&A(xe)})}var Te=d(me,2);{var He=A=>{var j=Tl(),z=d(i(j),2),K=i(z,!0);s(z),s(j),Y(()=>$(K,e(q))),h(A,j)};P(Te,A=>{e(q)&&A(He)})}var at=d(Te,2);{var ut=A=>{var j=Ml();h(A,j)};P(at,A=>{e(N),e(w),e(q),l(()=>!e(N)&&e(w).length===0&&!e(q))&&A(ut)})}var ht=d(at,2);{var Se=A=>{var j=Ot(),z=st(j);{var K=ne=>{ul(ne,{get matches(){return e(w)},get eventId(){return e(b)},get clubId(){return e(ce)}})},X=ne=>{var U=Ot(),de=st(U);{var E=F=>{Gi(F,{get matches(){return e(w)},get eventId(){return e(b)},get clubId(){return e(ce)}})},G=F=>{Dc(F,{get matches(){return e(w)},get eventId(){return e(b)}})};P(de,F=>{e(se)==="list"?F(E):F(G,!1)},!0)}h(ne,U)};P(z,ne=>{e(C)?ne(K):ne(X,!1)})}h(A,j)};P(ht,A=>{e(w),l(()=>e(w).length>0)&&A(Se)})}var Me=d(ht,2);{var we=A=>{al(A,{get matches(){return e(w)},onClose:()=>y(_e,!1)})};P(Me,A=>{e(_e)&&A(we)})}s(ue),s(Be),Y(()=>{Tt!==(Tt=e(f))&&($e.value=($e.__value=e(f))??"",vr($e,e(f))),D=he(ct,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0",null,D,{"text-charcoal-950":e(L)}),rr(ct,e(L)?"background-color: #eab308; color: #18181b;":"background-color: #454654; color: #c0c2c8;"),$(ae,e(L)?"Hide":"Config")}),h(t,Be),Qt(),x()}ar(["change","click"]);export{Al as component,Nl as universal};
