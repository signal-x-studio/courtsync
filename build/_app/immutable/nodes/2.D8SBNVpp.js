import{f as S,a as p,c as Nt,d as ga,t as gn}from"../chunks/C4ilCsHB.js";import"../chunks/DatUqRBN.js";import{d as Ir,w as Yt,o as _a,a as _n,g as Gt}from"../chunks/DOd7VXKj.js";import{D as zr,y as Ot,q as yn,B as Ja,A as Sn,L as Tn,g as e,a1 as K,N as wn,O as Mn,P as Ca,Q as Xr,z as wr,ad as Cn,aA as Dn,I as xa,K as $n,E as gr,ay as qa,aG as za,Y as j,ab as Da,ak as $a,F as Xa,H as kn,aH as Br,aI as Qr,G as Qa,aJ as Hr,aK as In,au as Pn,aL as En,ax as On,aM as Nn,x as An,aN as Ka,U as Za,aO as Fn,W as Rn,aP as Ln,aQ as Wn,aR as jn,aS as Un,aT as Yn,aU as Bn,aV as Hn,aW as Vn,aE as Gn,b as l,S as Jn,aX as qn,p as er,aY as le,Z as y,e as h,aZ as vr,k as c,s as d,l as s,t as G,j as tr,i as ot,al as ba,a_ as zn}from"../chunks/DVX6VRk5.js";import{s as P,e as Dr,d as ir}from"../chunks/BA7jJIuj.js";import{p as et,i as E,s as Vt,a as ya,b as Xn}from"../chunks/DQzpnLv7.js";import{i as rr}from"../chunks/39mQBiRJ.js";const Qn=!0;function ft(t,r){return r}function Kn(t,r,n){for(var a=t.items,o=[],i=r.length,u=0;u<i;u++)En(r[u].e,o,!0);var v=i>0&&o.length===0&&n!==null;if(v){var x=n.parentNode;On(x),x.append(n),a.clear(),zt(t,r[0].prev,r[i-1].next)}Nn(o,()=>{for(var g=0;g<i;g++){var _=r[g];v||(a.delete(_.k),zt(t,_.prev,_.next)),Qa(_.e,!v)}})}function mt(t,r,n,a,o,i=null){var u=t,v={flags:r,items:new Map,first:null},x=(r&Ka)!==0;if(x){var g=t;u=Ot?zr(yn(g)):g.appendChild(Ja())}Ot&&Sn();var _=null,C=!1,I=new Map,M=K(()=>{var W=n();return za(W)?W:W==null?[]:qa(W)}),f,b;function w(){Zn(b,f,v,I,u,o,r,a,n),i!==null&&(f.length===0?_?Xa(_):_=xa(()=>i(u)):_!==null&&kn(_,()=>{_=null}))}Tn(()=>{b??(b=An),f=e(M);var W=f.length;if(C&&W===0)return;C=W===0;let T=!1;if(Ot){var A=wn(u)===Mn;A!==(W===0)&&(u=Ca(),zr(u),Xr(!1),T=!0)}if(Ot){for(var Z=null,oe,L=0;L<W;L++){if(wr.nodeType===Cn&&wr.data===Dn){u=wr,T=!0,Xr(!1);break}var ce=f[L],_e=a(ce,L);oe=ha(wr,v,Z,null,ce,_e,L,o,r,n),v.items.set(_e,oe),Z=oe}W>0&&zr(Ca())}if(Ot)W===0&&i&&(_=xa(()=>i(u)));else if($n()){var ye=new Set,at=gr;for(L=0;L<W;L+=1){ce=f[L],_e=a(ce,L);var We=v.items.get(_e)??I.get(_e);We?(r&(Hr|Br))!==0&&en(We,ce,L,r):(oe=ha(null,v,null,null,ce,_e,L,o,r,n,!0),I.set(_e,oe)),ye.add(_e)}for(const[Ye,tt]of v.items)ye.has(Ye)||at.skipped_effects.add(tt.e);at.oncommit(w)}else w();T&&Xr(!0),e(M)}),Ot&&(u=wr)}function Zn(t,r,n,a,o,i,u,v,x){var Le,F,re,m;var g=(u&Fn)!==0,_=(u&(Hr|Br))!==0,C=r.length,I=n.items,M=n.first,f=M,b,w=null,W,T=[],A=[],Z,oe,L,ce;if(g)for(ce=0;ce<C;ce+=1)Z=r[ce],oe=v(Z,ce),L=I.get(oe),L!==void 0&&((Le=L.a)==null||Le.measure(),(W??(W=new Set)).add(L));for(ce=0;ce<C;ce+=1){if(Z=r[ce],oe=v(Z,ce),L=I.get(oe),L===void 0){var _e=a.get(oe);if(_e!==void 0){a.delete(oe),I.set(oe,_e);var ye=w?w.next:f;zt(n,w,_e),zt(n,_e,ye),Kr(_e,ye,o),w=_e}else{var at=f?f.e.nodes_start:o;w=ha(at,n,w,w===null?n.first:w.next,Z,oe,ce,i,u,x)}I.set(oe,w),T=[],A=[],f=w.next;continue}if(_&&en(L,Z,ce,u),(L.e.f&Qr)!==0&&(Xa(L.e),g&&((F=L.a)==null||F.unfix(),(W??(W=new Set)).delete(L))),L!==f){if(b!==void 0&&b.has(L)){if(T.length<A.length){var We=A[0],Ye;w=We.prev;var tt=T[0],nt=T[T.length-1];for(Ye=0;Ye<T.length;Ye+=1)Kr(T[Ye],We,o);for(Ye=0;Ye<A.length;Ye+=1)b.delete(A[Ye]);zt(n,tt.prev,nt.next),zt(n,w,tt),zt(n,nt,We),f=We,w=nt,ce-=1,T=[],A=[]}else b.delete(L),Kr(L,f,o),zt(n,L.prev,L.next),zt(n,L,w===null?n.first:w.next),zt(n,w,L),w=L;continue}for(T=[],A=[];f!==null&&f.k!==oe;)(f.e.f&Qr)===0&&(b??(b=new Set)).add(f),A.push(f),f=f.next;if(f===null)continue;L=f}T.push(L),w=L,f=L.next}if(f!==null||b!==void 0){for(var pt=b===void 0?[]:qa(b);f!==null;)(f.e.f&Qr)===0&&pt.push(f),f=f.next;var gt=pt.length;if(gt>0){var It=(u&Ka)!==0&&C===0?o:null;if(g){for(ce=0;ce<gt;ce+=1)(re=pt[ce].a)==null||re.measure();for(ce=0;ce<gt;ce+=1)(m=pt[ce].a)==null||m.fix()}Kn(n,pt,It)}}g&&Za(()=>{var k;if(W!==void 0)for(L of W)(k=L.a)==null||k.apply()}),t.first=n.first&&n.first.e,t.last=w&&w.e;for(var wt of a.values())Qa(wt.e);a.clear()}function en(t,r,n,a){(a&Hr)!==0&&$a(t.v,r),(a&Br)!==0?$a(t.i,n):t.i=n}function ha(t,r,n,a,o,i,u,v,x,g,_){var C=(x&Hr)!==0,I=(x&In)===0,M=C?I?j(o,!1,!1):Da(o):o,f=(x&Br)===0?u:Da(u),b={i:f,v:M,k:i,a:null,e:null,prev:n,next:a};try{if(t===null){var w=document.createDocumentFragment();w.append(t=Ja())}return b.e=xa(()=>v(t,M,f,g),Ot),b.e.prev=n&&n.e,b.e.next=a&&a.e,n===null?_||(r.first=b):(n.next=b,n.e.next=b.e),a!==null&&(a.prev=b,a.e.prev=b.e),b}finally{}}function Kr(t,r,n){for(var a=t.next?t.next.e.nodes_start:n,o=r?r.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==a;){var u=Pn(i);o.before(i),i=u}}function zt(t,r,n){r===null?t.first=n:(r.next=n,r.e.next=n&&n.e),n!==null&&(n.prev=r,n.e.prev=r&&r.e)}const ka=[...` 	
\r\fÂ \v\uFEFF`];function eo(t,r,n){var a=t==null?"":""+t;if(r&&(a=a?a+" "+r:r),n){for(var o in n)if(n[o])a=a?a+" "+o:o;else if(a.length)for(var i=o.length,u=0;(u=a.indexOf(o,u))>=0;){var v=u+i;(u===0||ka.includes(a[u-1]))&&(v===a.length||ka.includes(a[v]))?a=(u===0?"":a.substring(0,u))+a.substring(v+1):u=v}}return a===""?null:a}function to(t,r){return t==null?null:String(t)}function he(t,r,n,a,o,i){var u=t.__className;if(Ot||u!==n||u===void 0){var v=eo(n,a,i);(!Ot||v!==t.getAttribute("class"))&&(v==null?t.removeAttribute("class"):r?t.className=v:t.setAttribute("class",v)),t.__className=n}else if(i&&o!==i)for(var x in i){var g=!!i[x];(o==null||g!==!!o[x])&&t.classList.toggle(x,g)}return i}function Zt(t,r,n,a){var o=t.__style;if(Ot||o!==r){var i=to(r);(!Ot||i!==t.getAttribute("style"))&&(i==null?t.removeAttribute("style"):t.style.cssText=i),t.__style=r}return a}function ur(t,r,n=!1){if(t.multiple){if(r==null)return;if(!za(r))return Ln();for(var a of t.options)a.selected=r.includes(Ia(a));return}for(a of t.options){var o=Ia(a);if(Wn(o,r)){a.selected=!0;return}}(!n||r!==void 0)&&(t.selectedIndex=-1)}function _r(t){var r=new MutationObserver(()=>{ur(t,t.__value)});r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Rn(()=>{r.disconnect()})}function Ia(t){return"__value"in t?t.__value:t.value}const ro=Symbol("is custom element"),ao=Symbol("is html");function Zr(t){if(Ot){var r=!1,n=()=>{if(!r){if(r=!0,t.hasAttribute("value")){var a=t.value;Ut(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var o=t.checked;Ut(t,"checked",null),t.checked=o}}};t.__on_r=n,Za(n),jn()}}function Ut(t,r,n,a){var o=no(t);Ot&&(o[r]=t.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&t.nodeName==="LINK")||o[r]!==(o[r]=n)&&(r==="loading"&&(t[Un]=n),n==null?t.removeAttribute(r):typeof n!="string"&&oo(t).includes(r)?t[r]=n:t.setAttribute(r,n))}function no(t){return t.__attributes??(t.__attributes={[ro]:t.nodeName.includes("-"),[ao]:t.namespaceURI===Yn})}var Pa=new Map;function oo(t){var r=t.getAttribute("is")||t.nodeName,n=Pa.get(r);if(n)return n;Pa.set(r,n=[]);for(var a,o=t,i=Element.prototype;i!==o;){a=Hn(o);for(var u in a)a[u].set&&n.push(u);o=Bn(o)}return n}function ea(t,r,n=r){var a=new WeakSet;Vn(t,"input",async o=>{var i=o?t.defaultValue:t.value;if(i=ta(t)?ra(i):i,n(i),gr!==null&&a.add(gr),await Gn(),i!==(i=r())){var u=t.selectionStart,v=t.selectionEnd,x=t.value.length;if(t.value=i??"",v!==null){var g=t.value.length;u===v&&v===x&&g>x?(t.selectionStart=g,t.selectionEnd=g):(t.selectionStart=u,t.selectionEnd=Math.min(v,g))}}}),(Ot&&t.defaultValue!==t.value||l(r)==null&&t.value)&&(n(ta(t)?ra(t.value):t.value),gr!==null&&a.add(gr)),Jn(()=>{var o=r();if(t===document.activeElement){var i=qn??gr;if(a.has(i))return}ta(t)&&o===ra(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function ta(t){var r=t.type;return r==="number"||r==="range"}function ra(t){return t===""?null:+t}const so=Qn,io=!1,co=(async()=>({})),Dl=Object.freeze(Object.defineProperty({__proto__:null,load:co,ssr:io},Symbol.toStringTag,{value:"Module"})),Pr="https://results.advancedeventsystems.com/api",lo="https://results.advancedeventsystems.com/odata",uo=async(t,r,n)=>{const a=`${Pr}/event/${t}/courts/${r}/${n}`,o=await fetch(a);if(!o.ok)throw new Error(`Failed to fetch court schedule: ${o.statusText}`);return o.json()},vo=async t=>{const r=`${Pr}/event/${t}`,n=await fetch(r);if(!n.ok)throw new Error(`Failed to fetch event info: ${n.statusText}`);return n.json()},fo=async(t,r)=>{const n=`${lo}/${t}/nextassignments(dId=null,cId=${r},tIds=[])?$skip=0&$orderby=TeamName,TeamCode`,a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch team assignments: ${a.statusText}`);return a.json()},aa=async(t,r,n,a)=>{const o=`${Pr}/event/${t}/division/${r}/team/${n}/schedule/${a}`,i=await fetch(o);if(!i.ok)throw new Error(`Failed to fetch team schedule: ${i.statusText}`);return i.json()},mo=async(t,r)=>{const n=`${Pr}/event/${t}/division/${r}/plays`,a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch division plays: ${a.statusText}`);return a.json()},xo=async(t,r)=>{const n=`${Pr}/event/${t}/poolsheet/${r}`,a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch pool sheet: ${a.statusText}`);return a.json()},Rr="630 Volleyball",Lr="630",bo=t=>[t.FirstTeamText,t.SecondTeamText,t.WorkTeamText].some(n=>n&&(n.includes(Rr)||n.includes(Lr))),ho=t=>t.FirstTeamText&&(t.FirstTeamText.includes(Rr)||t.FirstTeamText.includes(Lr))?"first":t.SecondTeamText&&(t.SecondTeamText.includes(Rr)||t.SecondTeamText.includes(Lr))?"second":t.WorkTeamText&&(t.WorkTeamText.includes(Rr)||t.WorkTeamText.includes(Lr))?"work":null,po=t=>{const r=[];return t.forEach(n=>{n.CourtMatches.forEach(a=>{if(bo(a)){const o=ho(a);o&&o!=="work"&&r.push({...a,CourtName:n.Name,CourtId:n.CourtId,InvolvedTeam:o})}})}),r.sort((n,a)=>n.ScheduledStartDateTime-a.ScheduledStartDateTime)},jr=t=>{const r=new Map;for(let n=0;n<t.length;n++){const a=t[n],o=[];for(let i=0;i<t.length;i++){if(n===i)continue;const u=t[i],v=a.ScheduledStartDateTime<u.ScheduledEndDateTime&&a.ScheduledEndDateTime>u.ScheduledStartDateTime,x=a.CourtId!==u.CourtId;v&&x&&o.push(u.MatchId)}o.length>0&&r.set(a.MatchId,o)}return r},tn=6048e5,go=864e5,Ea=Symbol.for("constructDateFrom");function sr(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&Ea in t?t[Ea](r):t instanceof Date?new t.constructor(r):new Date(r)}function Jt(t,r){return sr(r||t,t)}let _o={};function Vr(){return _o}function $r(t,r){var v,x,g,_;const n=Vr(),a=(r==null?void 0:r.weekStartsOn)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((_=(g=n.locale)==null?void 0:g.options)==null?void 0:_.weekStartsOn)??0,o=Jt(t,r==null?void 0:r.in),i=o.getDay(),u=(i<a?7:0)+i-a;return o.setDate(o.getDate()-u),o.setHours(0,0,0,0),o}function Ur(t,r){return $r(t,{...r,weekStartsOn:1})}function rn(t,r){const n=Jt(t,r==null?void 0:r.in),a=n.getFullYear(),o=sr(n,0);o.setFullYear(a+1,0,4),o.setHours(0,0,0,0);const i=Ur(o),u=sr(n,0);u.setFullYear(a,0,4),u.setHours(0,0,0,0);const v=Ur(u);return n.getTime()>=i.getTime()?a+1:n.getTime()>=v.getTime()?a:a-1}function Oa(t){const r=Jt(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function yo(t,...r){const n=sr.bind(null,r.find(a=>typeof a=="object"));return r.map(n)}function Na(t,r){const n=Jt(t,r==null?void 0:r.in);return n.setHours(0,0,0,0),n}function So(t,r,n){const[a,o]=yo(n==null?void 0:n.in,t,r),i=Na(a),u=Na(o),v=+i-Oa(i),x=+u-Oa(u);return Math.round((v-x)/go)}function To(t,r){const n=rn(t,r),a=sr(t,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),Ur(a)}function wo(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Mo(t){return!(!wo(t)&&typeof t!="number"||isNaN(+Jt(t)))}function Co(t,r){const n=Jt(t,r==null?void 0:r.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Do={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$o=(t,r,n)=>{let a;const o=Do[t];return typeof o=="string"?a=o:r===1?a=o.one:a=o.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function na(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const ko={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Io={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Po={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Eo={date:na({formats:ko,defaultWidth:"full"}),time:na({formats:Io,defaultWidth:"full"}),dateTime:na({formats:Po,defaultWidth:"full"})},Oo={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},No=(t,r,n,a)=>Oo[t];function Mr(t){return(r,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let o;if(a==="formatting"&&t.formattingValues){const u=t.defaultFormattingWidth||t.defaultWidth,v=n!=null&&n.width?String(n.width):u;o=t.formattingValues[v]||t.formattingValues[u]}else{const u=t.defaultWidth,v=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[v]||t.values[u]}const i=t.argumentCallback?t.argumentCallback(r):r;return o[i]}}const Ao={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fo={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ro={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Lo={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Wo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Uo=(t,r)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Yo={ordinalNumber:Uo,era:Mr({values:Ao,defaultWidth:"wide"}),quarter:Mr({values:Fo,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Mr({values:Ro,defaultWidth:"wide"}),day:Mr({values:Lo,defaultWidth:"wide"}),dayPeriod:Mr({values:Wo,defaultWidth:"wide",formattingValues:jo,defaultFormattingWidth:"wide"})};function Cr(t){return(r,n={})=>{const a=n.width,o=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],i=r.match(o);if(!i)return null;const u=i[0],v=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],x=Array.isArray(v)?Ho(v,C=>C.test(u)):Bo(v,C=>C.test(u));let g;g=t.valueCallback?t.valueCallback(x):x,g=n.valueCallback?n.valueCallback(g):g;const _=r.slice(u.length);return{value:g,rest:_}}}function Bo(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function Ho(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function Vo(t){return(r,n={})=>{const a=r.match(t.matchPattern);if(!a)return null;const o=a[0],i=r.match(t.parsePattern);if(!i)return null;let u=t.valueCallback?t.valueCallback(i[0]):i[0];u=n.valueCallback?n.valueCallback(u):u;const v=r.slice(o.length);return{value:u,rest:v}}}const Go=/^(\d+)(th|st|nd|rd)?/i,Jo=/\d+/i,qo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zo={any:[/^b/i,/^(a|c)/i]},Xo={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qo={any:[/1/i,/2/i,/3/i,/4/i]},Ko={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zo={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},es={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ts={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rs={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},as={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ns={ordinalNumber:Vo({matchPattern:Go,parsePattern:Jo,valueCallback:t=>parseInt(t,10)}),era:Cr({matchPatterns:qo,defaultMatchWidth:"wide",parsePatterns:zo,defaultParseWidth:"any"}),quarter:Cr({matchPatterns:Xo,defaultMatchWidth:"wide",parsePatterns:Qo,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Cr({matchPatterns:Ko,defaultMatchWidth:"wide",parsePatterns:Zo,defaultParseWidth:"any"}),day:Cr({matchPatterns:es,defaultMatchWidth:"wide",parsePatterns:ts,defaultParseWidth:"any"}),dayPeriod:Cr({matchPatterns:rs,defaultMatchWidth:"any",parsePatterns:as,defaultParseWidth:"any"})},os={code:"en-US",formatDistance:$o,formatLong:Eo,formatRelative:No,localize:Yo,match:ns,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ss(t,r){const n=Jt(t,r==null?void 0:r.in);return So(n,Co(n))+1}function is(t,r){const n=Jt(t,r==null?void 0:r.in),a=+Ur(n)-+To(n);return Math.round(a/tn)+1}function an(t,r){var _,C,I,M;const n=Jt(t,r==null?void 0:r.in),a=n.getFullYear(),o=Vr(),i=(r==null?void 0:r.firstWeekContainsDate)??((C=(_=r==null?void 0:r.locale)==null?void 0:_.options)==null?void 0:C.firstWeekContainsDate)??o.firstWeekContainsDate??((M=(I=o.locale)==null?void 0:I.options)==null?void 0:M.firstWeekContainsDate)??1,u=sr((r==null?void 0:r.in)||t,0);u.setFullYear(a+1,0,i),u.setHours(0,0,0,0);const v=$r(u,r),x=sr((r==null?void 0:r.in)||t,0);x.setFullYear(a,0,i),x.setHours(0,0,0,0);const g=$r(x,r);return+n>=+v?a+1:+n>=+g?a:a-1}function cs(t,r){var v,x,g,_;const n=Vr(),a=(r==null?void 0:r.firstWeekContainsDate)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??n.firstWeekContainsDate??((_=(g=n.locale)==null?void 0:g.options)==null?void 0:_.firstWeekContainsDate)??1,o=an(t,r),i=sr((r==null?void 0:r.in)||t,0);return i.setFullYear(o,0,a),i.setHours(0,0,0,0),$r(i,r)}function ls(t,r){const n=Jt(t,r==null?void 0:r.in),a=+$r(n,r)-+cs(n,r);return Math.round(a/tn)+1}function Xe(t,r){const n=t<0?"-":"",a=Math.abs(t).toString().padStart(r,"0");return n+a}const or={y(t,r){const n=t.getFullYear(),a=n>0?n:1-n;return Xe(r==="yy"?a%100:a,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):Xe(n+1,2)},d(t,r){return Xe(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return Xe(t.getHours()%12||12,r.length)},H(t,r){return Xe(t.getHours(),r.length)},m(t,r){return Xe(t.getMinutes(),r.length)},s(t,r){return Xe(t.getSeconds(),r.length)},S(t,r){const n=r.length,a=t.getMilliseconds(),o=Math.trunc(a*Math.pow(10,n-3));return Xe(o,r.length)}},hr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Aa={G:function(t,r,n){const a=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const a=t.getFullYear(),o=a>0?a:1-a;return n.ordinalNumber(o,{unit:"year"})}return or.y(t,r)},Y:function(t,r,n,a){const o=an(t,a),i=o>0?o:1-o;if(r==="YY"){const u=i%100;return Xe(u,2)}return r==="Yo"?n.ordinalNumber(i,{unit:"year"}):Xe(i,r.length)},R:function(t,r){const n=rn(t);return Xe(n,r.length)},u:function(t,r){const n=t.getFullYear();return Xe(n,r.length)},Q:function(t,r,n){const a=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return Xe(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,n){const a=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return Xe(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,n){const a=t.getMonth();switch(r){case"M":case"MM":return or.M(t,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,n){const a=t.getMonth();switch(r){case"L":return String(a+1);case"LL":return Xe(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,n,a){const o=ls(t,a);return r==="wo"?n.ordinalNumber(o,{unit:"week"}):Xe(o,r.length)},I:function(t,r,n){const a=is(t);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):Xe(a,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):or.d(t,r)},D:function(t,r,n){const a=ss(t);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):Xe(a,r.length)},E:function(t,r,n){const a=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,n,a){const o=t.getDay(),i=(o-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(i);case"ee":return Xe(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,r,n,a){const o=t.getDay(),i=(o-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(i);case"cc":return Xe(i,r.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,r,n){const a=t.getDay(),o=a===0?7:a;switch(r){case"i":return String(o);case"ii":return Xe(o,r.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,n){const o=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,r,n){const a=t.getHours();let o;switch(a===12?o=hr.noon:a===0?o=hr.midnight:o=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,r,n){const a=t.getHours();let o;switch(a>=17?o=hr.evening:a>=12?o=hr.afternoon:a>=4?o=hr.morning:o=hr.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return or.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):or.H(t,r)},K:function(t,r,n){const a=t.getHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):Xe(a,r.length)},k:function(t,r,n){let a=t.getHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):Xe(a,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):or.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):or.s(t,r)},S:function(t,r){return or.S(t,r)},X:function(t,r,n){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(r){case"X":return Ra(a);case"XXXX":case"XX":return dr(a);case"XXXXX":case"XXX":default:return dr(a,":")}},x:function(t,r,n){const a=t.getTimezoneOffset();switch(r){case"x":return Ra(a);case"xxxx":case"xx":return dr(a);case"xxxxx":case"xxx":default:return dr(a,":")}},O:function(t,r,n){const a=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Fa(a,":");case"OOOO":default:return"GMT"+dr(a,":")}},z:function(t,r,n){const a=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Fa(a,":");case"zzzz":default:return"GMT"+dr(a,":")}},t:function(t,r,n){const a=Math.trunc(+t/1e3);return Xe(a,r.length)},T:function(t,r,n){return Xe(+t,r.length)}};function Fa(t,r=""){const n=t>0?"-":"+",a=Math.abs(t),o=Math.trunc(a/60),i=a%60;return i===0?n+String(o):n+String(o)+r+Xe(i,2)}function Ra(t,r){return t%60===0?(t>0?"-":"+")+Xe(Math.abs(t)/60,2):dr(t,r)}function dr(t,r=""){const n=t>0?"-":"+",a=Math.abs(t),o=Xe(Math.trunc(a/60),2),i=Xe(a%60,2);return n+o+r+i}const La=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},nn=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},ds=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],o=n[2];if(!o)return La(t,r);let i;switch(a){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;case"PPPP":default:i=r.dateTime({width:"full"});break}return i.replace("{{date}}",La(a,r)).replace("{{time}}",nn(o,r))},us={p:nn,P:ds},vs=/^D+$/,fs=/^Y+$/,ms=["D","DD","YY","YYYY"];function xs(t){return vs.test(t)}function bs(t){return fs.test(t)}function hs(t,r,n){const a=ps(t,r,n);if(console.warn(a),ms.includes(t))throw new RangeError(a)}function ps(t,r,n){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gs=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_s=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ys=/^'([^]*?)'?$/,Ss=/''/g,Ts=/[a-zA-Z]/;function on(t,r,n){var _,C,I,M;const a=Vr(),o=a.locale??os,i=a.firstWeekContainsDate??((C=(_=a.locale)==null?void 0:_.options)==null?void 0:C.firstWeekContainsDate)??1,u=a.weekStartsOn??((M=(I=a.locale)==null?void 0:I.options)==null?void 0:M.weekStartsOn)??0,v=Jt(t,n==null?void 0:n.in);if(!Mo(v))throw new RangeError("Invalid time value");let x=r.match(_s).map(f=>{const b=f[0];if(b==="p"||b==="P"){const w=us[b];return w(f,o.formatLong)}return f}).join("").match(gs).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const b=f[0];if(b==="'")return{isToken:!1,value:ws(f)};if(Aa[b])return{isToken:!0,value:f};if(b.match(Ts))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:f}});o.localize.preprocessor&&(x=o.localize.preprocessor(v,x));const g={firstWeekContainsDate:i,weekStartsOn:u,locale:o};return x.map(f=>{if(!f.isToken)return f.value;const b=f.value;(bs(b)||xs(b))&&hs(b,r,String(t));const w=Aa[b[0]];return w(v,b,o.localize,g)}).join("")}function ws(t){const r=t.match(ys);return r?r[1].replace(Ss,"'"):t}const Re=t=>on(new Date(t),"h:mm a"),kt=t=>on(new Date(t),"MMM d, yyyy"),oa="coveragePlan";function Ms(){const{subscribe:t,set:r,update:n}=Yt(new Set);try{const o=localStorage.getItem(oa);if(o){const i=JSON.parse(o);r(new Set(i.selectedMatches))}}catch(o){console.error("Failed to load coverage plan:",o)}const a=o=>{try{const i={selectedMatches:Array.from(o),createdAt:Date.now(),updatedAt:Date.now()};localStorage.setItem(oa,JSON.stringify(i))}catch(i){console.error("Failed to save coverage plan:",i)}};return{subscribe:t,toggleMatch:o=>{n(i=>{const u=new Set(i);return u.has(o)?u.delete(o):u.add(o),a(u),u})},selectMatch:o=>{n(i=>{const u=new Set(i);return u.add(o),a(u),u})},deselectMatch:o=>{n(i=>{const u=new Set(i);return u.delete(o),a(u),u})},clearPlan:()=>{r(new Set),localStorage.removeItem(oa)}}}const dt=Ms();Ir(dt,t=>t);const Cs=Ir(dt,t=>t.size),sa="teamCoverageStatus";function Ds(){const{subscribe:t,set:r,update:n}=Yt({});try{const o=localStorage.getItem(sa);if(o){const i=JSON.parse(o);r(i)}}catch(o){console.error("Failed to load coverage status:",o)}const a=o=>{if(Object.keys(o).length!==0)try{localStorage.setItem(sa,JSON.stringify(o))}catch(i){console.error("Failed to save coverage status:",i)}};return{subscribe:t,setTeamStatus:(o,i)=>{n(u=>{const v={...u};return i==="not-covered"?delete v[o]:v[o]=i,a(v),v})},getTeamStatus:o=>{let i="not-covered";return t(u=>{i=u[o]||"not-covered"})(),i},clearAllStatus:()=>{r({}),localStorage.removeItem(sa)},updateFromPlan:(o,i,u)=>{u!==0&&n(v=>{let x;if(i===0?x="not-covered":i===u?x="covered":x="partially-covered",(v[o]||"not-covered")===x)return v;const _={...v};return x==="not-covered"?delete _[o]:_[o]=x,a(_),_})},importStatuses:o=>{r(o),a(o)}}}const Fe=Ds(),Wa="userRole";function $s(){const{subscribe:t,set:r}=Yt("media");try{const a=localStorage.getItem(Wa);a&&["media","spectator","coach"].includes(a)&&r(a)}catch(a){console.error("Failed to load user role:",a)}const n=a=>{try{localStorage.setItem(Wa,a)}catch(o){console.error("Failed to save user role:",o)}};return{subscribe:t,setRole:a=>{r(a),n(a)}}}const kr=$s(),Sa=Ir(kr,t=>t==="media"),Ta=Ir(kr,t=>t==="spectator"),ks=Ir(kr,t=>t==="coach");var Is=S('<form class="space-y-4"><div class="flex flex-col sm:flex-row gap-3 sm:gap-4"><div class="flex-1"><label for="eventId" class="block text-xs text-[#9fa2ab] mb-1.5">Event ID</label> <input id="eventId" type="text" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;" placeholder="Enter Event ID"/></div> <div class="flex-1 sm:min-w-[160px]"><label for="date" class="block text-xs text-[#9fa2ab] mb-1.5">Date</label> <input id="date" type="date" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;"/></div> <div class="flex-1 sm:min-w-[120px]"><label for="timeWindow" class="block text-xs text-[#9fa2ab] mb-1.5">Window (min)</label> <input id="timeWindow" type="number" min="1" class="w-full px-3 py-2 sm:py-2 text-sm rounded-lg transition-colors min-h-[44px] sm:min-h-0 focus:border-[#eab308] focus:outline-none" style="background-color: #454654; color: #f8f8f9; border: 1px solid #525463;"/></div> <div class="flex items-end"><button type="submit" class="px-4 py-2 sm:py-2 text-sm font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0 disabled:opacity-50 disabled:cursor-not-allowed"> </button></div></div></form>');function Ps(t,r){er(r,!1);let n=et(r,"eventId",8),a=et(r,"date",8),o=et(r,"timeWindow",8),i=et(r,"onLoad",8),u=et(r,"loading",8,!1),v=j(n()),x=j(a()),g=j(o());async function _(L){L.preventDefault(),await i()(e(v),e(x),e(g))}le(()=>(h(n()),e(v),h(a()),e(x),h(o()),e(g)),()=>{n()!==e(v)&&y(v,n()),a()!==e(x)&&y(x,a()),o()!==e(g)&&y(g,o())}),vr(),rr();var C=Is(),I=c(C),M=c(I),f=d(c(M),2);Zr(f),s(M);var b=d(M,2),w=d(c(b),2);Zr(w),s(b);var W=d(b,2),T=d(c(W),2);Zr(T),s(W);var A=d(W,2),Z=c(A),oe=c(Z,!0);s(Z),s(A),s(I),s(C),G(()=>{f.disabled=u(),w.disabled=u(),T.disabled=u(),Z.disabled=u(),Zt(Z,`background-color: ${u()?"#ca8a04":"#eab308"}; color: #18181b;`),P(oe,u()?"Loading...":"Load")}),ea(f,()=>e(v),L=>y(v,L)),ea(w,()=>e(x),L=>y(x,L)),ea(T,()=>e(g),L=>y(g,L)),Dr("submit",C,_),p(t,C),tr()}const sn=(t,r,n,a={})=>{const{excludeSelected:o=!0,preferNoConflicts:i=!0,preferNearSelected:u=!0,maxResults:v=10}=a;return(o?t.filter(_=>!r.has(_.MatchId)):t).map(_=>{const C=[];let I=0;const M=n.has(_.MatchId);if(!M&&i?(I+=50,C.push("No conflicts")):M&&(I-=20,C.push("Has conflicts")),u&&r.size>0){const b=_.ScheduledStartDateTime,w=_.ScheduledEndDateTime,W=t.filter(A=>r.has(A.MatchId));let T=1/0;W.forEach(A=>{const Z=A.ScheduledStartDateTime,oe=A.ScheduledEndDateTime,L=Math.abs(b-oe),ce=Math.abs(Z-w),_e=Math.min(L,ce);_e<T&&(T=_e)}),T<7200*1e3?(I+=20,C.push("Near selected matches")):T>14400*1e3&&(I-=10,C.push("Far from selected matches"))}u&&r.size>0&&t.filter(W=>r.has(W.MatchId)).filter(W=>W.CourtName===_.CourtName).length>0&&(I+=15,C.push("Same court as selected matches"));const f=new Date(_.ScheduledStartDateTime).getHours();return f>=8&&f<12&&(I+=5,C.push("Morning match")),{match:_,score:I,reasons:C}}).sort((_,C)=>C.score-_.score).slice(0,v).filter(_=>_.score>0)},pa=(t,r,n,a,o,i={})=>{const{excludeSelected:u=!0,preferUncovered:v=!0,preferNoConflicts:x=!0,preferNearSelected:g=!0,maxResults:_=10}=i,C=[];return t.forEach(I=>{if(u&&r.has(I.MatchId))return;const M=o(I);if(!M)return;const f=a.get(M)||"not-covered",b=n.has(I.MatchId);let w=0;const W=[];if(v&&f==="not-covered"&&(w+=10,W.push("Uncovered team")),x&&!b&&(w+=5,W.push("No conflicts")),g&&r.size>0){const T=I.ScheduledStartDateTime;let A=!1;t.forEach(Z=>{if(r.has(Z.MatchId)){const L=Math.abs(T-Z.ScheduledStartDateTime)/6e4;L<=30&&L>0&&(A=!0)}}),A&&(w+=3,W.push("Near selected match"))}w>0&&W.length>0&&C.push({match:I,teamId:M,reason:W.join(", "),score:w})}),C.sort((I,M)=>M.score-I.score).slice(0,_)},Es=()=>{try{const t=window.location.hash;if(!t||!t.startsWith("#scores="))return null;const r=t.substring(8),n=decodeURIComponent(escape(atob(r))),a=JSON.parse(n);return!a.scores||!Array.isArray(a.scores)?null:{eventId:a.eventId||"",scores:a.scores}}catch(t){return console.error("Failed to extract scores from URL:",t),null}},Os=()=>{const t=window.location.hash;return t!==null&&t.startsWith("#scores=")},Wr={division:null,wave:"all",teams:[],timeRange:{start:null,end:null},conflictsOnly:!1,coverageStatus:"all",priority:"all"},ia="matchFilters";function Ns(){const{subscribe:t,set:r,update:n}=Yt(Wr);try{const o=localStorage.getItem(ia);if(o){const i=JSON.parse(o);r({...Wr,...i})}}catch(o){console.error("Failed to load filters:",o)}const a=o=>{try{localStorage.setItem(ia,JSON.stringify(o))}catch(i){console.error("Failed to save filters:",i)}};return{subscribe:t,updateFilter:(o,i)=>{n(u=>{const v={...u,[o]:i};return a(v),v})},resetFilters:()=>{r(Wr),localStorage.removeItem(ia)},setTimeRangePreset:o=>{n(i=>{let u;return o==="morning"?u={...i,timeRange:{start:"00:00",end:"14:29"}}:o==="afternoon"?u={...i,timeRange:{start:"14:30",end:"23:59"}}:u={...i,timeRange:{start:null,end:null}},a(u),u})},getTeamIdentifier:o=>{const u=(o.InvolvedTeam==="first"?o.FirstTeamText:o.SecondTeamText).match(/(\d+-\d+)/);return u?u[1]:""}}}const Er=Ns();function $e(t){const n=(t.InvolvedTeam==="first"?t.FirstTeamText:t.SecondTeamText).match(/(\d+-\d+)/);return n?n[1]:""}function Yr(t){const r=new Set(t.map(n=>n.Division.CodeAlias));return Array.from(r).sort()}function cn(t){const r=new Set;return t.forEach(n=>{const a=$e(n);a&&r.add(a)}),Array.from(r).sort()}function ln(t){let r=Wr;return Er.subscribe(n=>{r=n})(),t.filter(n=>{if(r.division&&n.Division.CodeAlias!==r.division)return!1;if(r.wave!=="all"){const a=new Date(n.ScheduledStartDateTime).getTime(),o=new Date(a),i=o.getHours(),u=o.getMinutes(),v=i*60+u,x=870;if(r.wave==="morning"&&v>=x||r.wave==="afternoon"&&v<x)return!1}if(r.teams.length>0){const a=$e(n);if(!a||!r.teams.includes(a))return!1}if(r.timeRange.start||r.timeRange.end){const a=new Date(n.ScheduledStartDateTime).getTime(),o=new Date(a),i=o.getHours(),u=o.getMinutes(),v=i*60+u;if(r.timeRange.start){const[x,g]=r.timeRange.start.split(":").map(Number),_=x*60+g;if(v<_)return!1}if(r.timeRange.end){const[x,g]=r.timeRange.end.split(":").map(Number),_=x*60+g;if(v>_)return!1}}return!0})}function Wt(t,r){Er.updateFilter(t,r)}function ca(){Er.resetFilters()}const la="matchPriorities";function As(){const{subscribe:t,set:r,update:n}=Yt({});try{const o=localStorage.getItem(la);if(o){const i=JSON.parse(o);r(i)}}catch(o){console.error("Failed to load priorities:",o)}const a=o=>{try{localStorage.setItem(la,JSON.stringify(o))}catch(i){console.error("Failed to save priorities:",i)}};return{subscribe:t,setPriority:(o,i)=>{n(u=>{const v={...u};return i===null?delete v[o]:v[o]=i,a(v),v})},getPriority:o=>{let i=null;return t(u=>{i=u[o]||null})(),i},clearAllPriorities:()=>{r({}),localStorage.removeItem(la)}}}const jt=As(),ja="followedTeams",Ua="teamColors";function Fs(){const{subscribe:t,set:r,update:n}=Yt([]),{subscribe:a,set:o,update:i}=Yt(new Map);{try{const x=localStorage.getItem(ja);x&&r(JSON.parse(x))}catch(x){console.error("Failed to load followed teams:",x)}try{const x=localStorage.getItem(Ua);if(x){const g=JSON.parse(x);o(new Map(Object.entries(g)))}}catch(x){console.error("Failed to load team colors:",x)}}const u=x=>{try{localStorage.setItem(ja,JSON.stringify(x))}catch(g){console.error("Failed to save followed teams:",g)}},v=x=>{try{const g={};x.forEach((_,C)=>{g[C]=_}),localStorage.setItem(Ua,JSON.stringify(g))}catch(g){console.error("Failed to save team colors:",g)}};return{subscribe:t,followTeam:(x,g)=>{n(_=>{if(_.some(I=>I.teamId===x))return _;const C=[..._,{teamId:x,teamName:g,followedAt:Date.now()}];return u(C),C})},unfollowTeam:x=>{n(g=>{const _=g.filter(C=>C.teamId!==x);return u(_),_}),i(g=>{const _=new Map(g);return _.delete(x),v(_),_})},isFollowing:x=>{let g=!1;return t(_=>{g=_.some(C=>C.teamId===x)})(),g},setTeamColor:(x,g)=>{i(_=>{const C=new Map(_);return C.set(x,g),v(C),C})},getTeamColor:x=>{let g=null;return a(_=>{g=_.get(x)||null})(),g},reorderTeams:(x,g)=>{n(_=>{const C=_.findIndex(f=>f.teamId===x);if(C===-1)return _;const I=[..._],M=I[C];return g==="top"?(I.splice(C,1),I.unshift(M)):g==="up"&&C>0?[I[C-1],I[C]]=[I[C],I[C-1]]:g==="down"&&C<I.length-1&&([I[C],I[C+1]]=[I[C+1],I[C]]),u(I),I})}}}const Nr=Fs(),Ya="notificationPreferences",Ar={upcomingMatchReminder:!0,reminderMinutes:5,scoreUpdateNotification:!0,browserNotifications:!1};function Rs(){const{subscribe:t,set:r,update:n}=Yt(Ar),{subscribe:a,set:o}=Yt("default");{try{const v=localStorage.getItem(Ya);if(v){const x=JSON.parse(v);r({...Ar,...x})}}catch(v){console.error("Failed to load notification preferences:",v)}"Notification"in window&&o(Notification.permission)}const i=v=>{try{localStorage.setItem(Ya,JSON.stringify(v))}catch(x){console.error("Failed to save notification preferences:",x)}},u=(v,x,g=!1)=>{let _="default";a(C=>{_=C})(),g&&_==="granted"&&"Notification"in window?new Notification(v,{body:x,icon:"/favicon.ico",tag:"courtsync-notification"}):console.log(`[Notification] ${v}: ${x}`)};return{preferences:{subscribe:t},notificationPermission:{subscribe:a},requestPermission:async()=>{if("Notification"in window){let v="default";if(a(x=>{v=x})(),v==="default"){const x=await Notification.requestPermission();return o(x),x==="granted"}return v==="granted"}return!1},checkUpcomingMatches:(v,x)=>{let g=Ar;if(t(I=>{g=I})(),!g.upcomingMatchReminder)return;const _=Date.now(),C=g.reminderMinutes*60*1e3;v.forEach(I=>{const M=I.ScheduledStartDateTime,f=M-_,b=I.FirstTeamText||I.SecondTeamText;if(x.includes(b)&&f>0&&f<=C){const w=`reminder-${I.MatchId}`,W=localStorage.getItem(w);if(!W||Date.now()-parseInt(W)>C){const T=Math.floor(f/6e4);u(`Match starting in ${T} minute${T!==1?"s":""}`,`${I.FirstTeamText} vs ${I.SecondTeamText}
${new Date(M).toLocaleTimeString()} - ${I.CourtName}`,g.browserNotifications),localStorage.setItem(w,Date.now().toString())}}})},notifyScoreUpdate:(v,x)=>{let g=Ar;if(t(b=>{g=b})(),!g.scoreUpdateNotification)return;const _=x.sets.find(b=>b.completedAt===0)||x.sets[x.sets.length-1],C=x.sets.filter(b=>b.completedAt>0),I=C.filter(b=>b.team1Score>b.team2Score).length,M=C.filter(b=>b.team2Score>b.team1Score).length;let f=`Score: ${_.team1Score}-${_.team2Score}`;C.length>0&&(f=`Sets: ${I}-${M} | ${f}`),u(`${v.FirstTeamText} vs ${v.SecondTeamText}`,f,g.browserNotifications)},updatePreferences:v=>{n(x=>{const g={...x,...v};return i(g),g})}}}const da=Rs(),Ls="courtsync-score-updates";let Fr=null;const Ws=()=>{if(!Fr)try{Fr=new BroadcastChannel(Ls)}catch(t){console.error("BroadcastChannel not supported:",t),Fr={postMessage:()=>{},close:()=>{},onmessage:null}}return Fr},js=(t,r,n)=>{const a=Ws(),o={type:n?"score-update":"score-delete",eventId:t,matchId:r,score:n||void 0,timestamp:Date.now()};try{a.postMessage(o)}catch(i){console.error("Failed to broadcast score update:",i)}},Ba="scoreHistory",Us=(t,r,n)=>{try{const a=localStorage.getItem(Ba),o=a?JSON.parse(a):{};o[t.toString()]||(o[t.toString()]=[]);const i={matchId:t,timestamp:Date.now(),sets:[...r.sets],status:r.status,updatedBy:n};o[t.toString()].push(i),o[t.toString()].length>100&&(o[t.toString()]=o[t.toString()].slice(-100)),localStorage.setItem(Ba,JSON.stringify(o))}catch(a){console.error("Failed to save score history:",a)}},Ha="claimHistory",Va=1e3;function ua(t){try{const r=localStorage.getItem(Ha),n=r?JSON.parse(r):[];n.unshift(t),n.length>Va&&n.splice(Va),localStorage.setItem(Ha,JSON.stringify(n))}catch(r){console.error("Failed to save claim history:",r)}}const Ga="matchClaims",va="matchScores",Ys=1800*1e3;function dn({eventId:t,userId:r="anonymous"}){const{subscribe:n,set:a,update:o}=Yt(new Map),{subscribe:i,set:u,update:v}=Yt(new Map);{try{const M=localStorage.getItem(Ga);if(M){const f=JSON.parse(M),b=new Map;Object.values(f).forEach(w=>{w.eventId===t&&w.expiresAt>Date.now()&&b.set(w.matchId,w)}),a(b)}}catch(M){console.error("Failed to load claims:",M)}try{const M=localStorage.getItem(va);if(M){const f=JSON.parse(M),b=new Map;Object.values(f).forEach(w=>{w.eventId===t&&b.set(w.matchId,w)}),u(b)}}catch(M){console.error("Failed to load scores:",M)}}const x=M=>{try{const f={};M.forEach(b=>{f[b.matchId.toString()]=b}),localStorage.setItem(Ga,JSON.stringify(f))}catch(f){console.error("Failed to save claims:",f)}},g=M=>{try{const f={};M.forEach(b=>{f[b.matchId.toString()]=b}),localStorage.setItem(va,JSON.stringify(f))}catch(f){console.error("Failed to save scores:",f)}};let _=null;return{claims:{subscribe:n},scores:{subscribe:i},claimMatch:(M,f)=>{const b=Date.now(),w=f+Ys,W={matchId:M,claimedBy:r,claimedAt:b,expiresAt:w,eventId:t};o(T=>{const A=new Map(T);return A.set(M,W),x(A),A}),ua({matchId:M,eventId:t,action:"claimed",userId:r,timestamp:b})},releaseClaim:M=>{o(f=>{const b=f.get(M),w=new Map(f);return w.delete(M),x(w),b&&so&&ua({matchId:M,eventId:t,action:"released",userId:b.claimedBy,timestamp:Date.now()}),w})},transferClaim:(M,f)=>{let b=!1;if(n(W=>{const T=W.get(M);b=(T==null?void 0:T.claimedBy)===r&&T.expiresAt>Date.now()})(),!b)return!1;const w=Date.now();return o(W=>{const T=W.get(M);if(!T)return W;const A={...T,claimedBy:f,claimedAt:w},Z=new Map(W);return Z.set(M,A),x(Z),ua({matchId:M,eventId:t,action:"transferred",userId:r,timestamp:w,transferredTo:f}),Z}),!0},isClaimed:M=>{let f=!1;return n(b=>{const w=b.get(M);f=w?w.expiresAt>Date.now():!1})(),f},getClaimStatus:M=>{let f="available";return n(b=>{const w=b.get(M);!w||w.expiresAt<Date.now()?f="available":w.claimedBy===r?f="claimed":f="locked"})(),f},getClaimer:M=>{let f=null;return n(b=>{const w=b.get(M);f=w&&w.expiresAt>Date.now()?w.claimedBy:null})(),f},isClaimOwner:M=>{let f=!1;return n(b=>{const w=b.get(M);f=(w==null?void 0:w.claimedBy)===r&&w.expiresAt>Date.now()})(),f},updateScore:(M,f,b)=>{const w={matchId:M,eventId:t,sets:f,status:b,lastUpdated:Date.now(),lastUpdatedBy:r};v(W=>{const T=new Map(W);return T.set(M,w),g(T),T}),js(t,M,w),Us(M,w,r)},getScore:M=>{let f=null;return i(b=>{f=b.get(M)||null})(),f},clearEventData:()=>{o(M=>{const f=new Map(M);return f.forEach((b,w)=>{b.eventId===t&&f.delete(w)}),x(f),f}),v(M=>{const f=new Map(M);return f.forEach((b,w)=>{b.eventId===t&&f.delete(w)}),g(f),f})},startPolling:()=>{_||(_=setInterval(()=>{try{const M=localStorage.getItem(va);if(!M)return;const f=JSON.parse(M),b=new Map;let w=!1;i(W=>{Object.values(f).forEach(T=>{if(T.eventId===t){b.set(T.matchId,T);const A=W.get(T.matchId);(!A||T.lastUpdated&&T.lastUpdated>A.lastUpdated)&&(w=!0)}}),w&&v(T=>{const A=new Map(T);return b.forEach((Z,oe)=>{const L=T.get(oe);(!L||Z.lastUpdated&&Z.lastUpdated>L.lastUpdated)&&A.set(oe,Z)}),A})})()}catch(M){console.error("Failed to poll scores:",M)}},3e3))},stopPolling:()=>{_&&(clearInterval(_),_=null)}}}const fa="matchNotes";function Bs(t){const{subscribe:r,set:n,update:a}=Yt(new Map);try{const i=localStorage.getItem(fa);if(i){const u=JSON.parse(i),v=new Map;Object.values(u).forEach(x=>{x.eventId===t&&v.set(x.matchId,x)}),n(v)}}catch(i){console.error("Failed to load match notes:",i)}const o=i=>{try{const u=localStorage.getItem(fa),v=u?JSON.parse(u):{};i.forEach(x=>{v[`${t}-${x.matchId}`]=x}),Object.keys(v).forEach(x=>{if(x.startsWith(`${t}-`)){const g=parseInt(x.split("-").pop()||"0");i.has(g)||delete v[x]}}),localStorage.setItem(fa,JSON.stringify(v))}catch(u){console.error("Failed to save match notes:",u)}};return{subscribe:r,setNote:(i,u)=>{const v=Date.now();a(x=>{const g=new Map(x),_=g.get(i);return u.trim()?g.set(i,{matchId:i,eventId:t,note:u.trim(),createdAt:(_==null?void 0:_.createdAt)||v,updatedAt:v}):g.delete(i),o(g),g})},getNote:i=>{let u="";return r(v=>{var x;u=((x=v.get(i))==null?void 0:x.note)||""})(),u},deleteNote:i=>{a(u=>{const v=new Map(u);return v.delete(i),o(v),v})},hasNote:i=>{let u=!1;return r(v=>{const x=v.get(i);u=x!==void 0&&x.note.trim().length>0})(),u}}}function Hs(t){return Bs(t)}var Vs=S('<div class="text-center py-8 text-[#9fa2ab] text-sm">Loading schedule...</div>'),Gs=S('<div class="text-center py-4 text-red-400 text-sm"> </div>'),Js=S("<button>Statistics</button>"),qs=S('<div class="text-[#9fa2ab]">TeamStatsView - To be migrated</div>'),zs=S('<div class="text-xs text-[#808593] py-4 text-center">No schedule data available</div>'),Xs=S('<div class="flex-shrink-0 w-20 text-xs text-[#facc15] font-medium"> </div>'),Qs=S('<span class="text-[#808593] font-medium">WORK</span> <span class="text-[#808593] ml-2"> </span>',1),Ks=S('<span class="text-[#808593] mx-1">vs</span> ',1),Zs=S('<span class="text-[#eab308] font-semibold">PLAY</span> <span class="text-[#c0c2c8] ml-2"> <!></span>',1),ei=S('<span class="mx-1">vs</span> ',1),ti=S('<span class="text-[#808593] font-medium">WATCH</span> <span class="text-[#808593] ml-2"> <!></span>',1),ri=S('<div class="flex-shrink-0"><span class="px-2 py-0.5 text-[10px] font-semibold rounded"> </span></div>'),ai=S('<div><div></div> <div class="flex-shrink-0 w-16 text-xs font-medium text-[#9fa2ab]"> </div> <div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <!> <div class="flex-1 min-w-0"><div class="text-xs"><!></div></div> <!></div>'),ni=S('<div class="space-y-1"><div class="flex items-center gap-2 mb-2 pb-1 border-b border-[#454654]"><h6 class="text-xs font-semibold text-[#f8f8f9]"> </h6> <span class="text-[10px] text-[#808593]"> </span></div> <!></div>'),oi=S('<div><h5 class="text-xs font-semibold text-[#9fa2ab] uppercase tracking-wider mb-2">Complete Schedule</h5> <div class="space-y-4"><!></div></div>'),si=S('<div class="text-xs text-[#808593] py-4 text-center">No pool data available for this team</div>'),ii=S("<option> </option>"),ci=S('<div class="mb-4"><label class="text-xs text-[#9fa2ab] mb-1 block">Pool:</label> <select class="w-full px-3 py-2.5 sm:py-2 text-sm font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"></select></div>'),li=S('<tr><td class="px-2 sm:px-3 py-2 text-[#f8f8f9] font-medium"> </td><td class="px-2 sm:px-3 py-2"><div> </div></td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td><td class="px-2 sm:px-3 py-2 text-center text-[#c0c2c8]"> </td></tr>'),di=S('<div class="border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="px-3 sm:px-4 py-2 bg-[#454654] border-b border-[#525463]"><h6 class="text-xs sm:text-sm font-semibold text-[#f8f8f9]"> </h6></div> <div class="overflow-x-auto"><table class="w-full text-xs min-w-[500px]"><thead><tr class="border-b border-[#454654] bg-[#454654]/50"><th class="px-2 sm:px-3 py-2 text-left text-[#9fa2ab] font-semibold">Rank</th><th class="px-2 sm:px-3 py-2 text-left text-[#9fa2ab] font-semibold">Team</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">W</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">L</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">Sets</th><th class="px-2 sm:px-3 py-2 text-center text-[#9fa2ab] font-semibold">Points</th></tr></thead><tbody></tbody></table></div></div>'),ui=S('<div class="flex-shrink-0 w-20 text-xs text-[#facc15] font-medium"> </div>'),vi=S('<span class="text-[#808593] mx-1">vs</span> ',1),fi=S('<div><div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <!> <div class="flex-1 min-w-0 text-xs text-[#c0c2c8]"> <!></div></div>'),mi=S('<div class="border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="px-3 sm:px-4 py-2 bg-[#454654] border-b border-[#525463]"><h6 class="text-xs sm:text-sm font-semibold text-[#f8f8f9]">Pool Schedule</h6></div> <div class="p-3 sm:p-4 space-y-2"></div></div>'),xi=S('<div class="space-y-4"><!> <!></div>'),bi=S('<div class="text-xs text-[#808593] py-4 text-center">Loading pool sheet...</div>'),hi=S("<!> <!>",1),pi=S('<div><h5 class="text-xs font-semibold text-[#9fa2ab] uppercase tracking-wider mb-2">Pool Standings</h5> <!></div>'),gi=S('<div class="space-y-4"><div class="flex items-center gap-2 border-b border-[#454654] pb-2"><button>Schedule</button> <button>Pool Sheet</button> <!></div> <!></div>'),_i=S('<div class="mt-2 border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="p-3 sm:p-4"><div class="flex items-center justify-between mb-3 sm:mb-4"><h4 class="text-xs sm:text-sm font-semibold text-[#f8f8f9] truncate pr-2"> </h4> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <!> <!> <!></div></div>');function yi(t,r){er(r,!1);const n=j(),a=j(),o=j(),i=j(),u=j();let v=et(r,"match",8),x=et(r,"eventId",8),g=et(r,"clubId",8),_=et(r,"onClose",8),C=et(r,"matches",24,()=>[]),I=j(null),M=j([]),f=j([]),b=j([]),w=j([]),W=j(null),T=j(null),A=j("schedule"),Z=j(!0),oe=j(null);function L(){return v().InvolvedTeam==="first"?v().FirstTeamText:v().InvolvedTeam==="second"?v().SecondTeamText:""}const ce=$e(v()),_e=L();_a(async()=>{y(Z,!0),y(oe,null);try{const k=(await fo(x(),g())).value||[],ne=L();if(!ne){y(oe,"Could not extract team name from match"),y(Z,!1);return}const se=k.find(Be=>{if(Be.TeamText===ne||Be.TeamName===ne)return!0;const st=ne.match(/(\d+-\d+)/);if(st){const D=st[1];return Be.TeamName.includes(D)||Be.TeamText.includes(D)}return!1});if(!se){y(oe,`Team not found: ${ne}`),y(Z,!1);return}const xe=se.TeamId,we=se.TeamDivision.DivisionId;y(I,{TeamId:xe,DivisionId:we,TeamName:se.TeamName,TeamText:se.TeamText});const[Qe,ut,yt]=await Promise.all([aa(x(),we,xe,"current").catch(()=>[]),aa(x(),we,xe,"work").catch(()=>[]),aa(x(),we,xe,"future").catch(()=>[])]),St=(Be,st=!1)=>Array.isArray(Be)?Be.flatMap(D=>{var te,Y;return st?D.Match?[{...D.Match,Court:D.Match.Court||null,Division:{...D.Play,PlayId:(te=D.Play)==null?void 0:te.PlayId},FirstTeamText:((Y=D.Play)==null?void 0:Y.CompleteShortName)||"Work Assignment",SecondTeamText:void 0}]:[]:!D.Matches||!Array.isArray(D.Matches)?[]:D.Matches.map(Q=>{var de;return{...Q,Court:Q.Court||null,Division:{...D.Play,PlayId:(de=D.Play)==null?void 0:de.PlayId}}})}):[];y(M,St(Qe,!1)),y(f,St(ut,!0)),y(b,St(yt,!1));const Ve=await mo(x(),we).catch(()=>null);Ve!=null&&Ve.Plays&&y(w,Ve.Plays)}catch(m){y(oe,m instanceof Error?m.message:"Failed to load team data")}finally{y(Z,!1)}});function ye(m,k=!1){var Qe,ut;const ne=typeof m.ScheduledStartDateTime=="string"?new Date(m.ScheduledStartDateTime).getTime():m.ScheduledStartDateTime,se=((Qe=m.FirstTeamText)==null?void 0:Qe.includes("630"))||((ut=m.SecondTeamText)==null?void 0:ut.includes("630")),xe=kt(ne),we=Re(ne);return{matchDate:xe,startTimeDisplay:we,isPlaying:se,isWork:k,scheduleMatch:m}}le(()=>e(A),()=>{e(A)==="poolsheet"&&y(T,null)}),le(()=>(e(M),e(f),e(b)),()=>{y(n,[...e(M).map(k=>({...k,type:"current"})),...e(f).map(k=>({...k,type:"work"})),...e(b).map(k=>({...k,type:"future"}))].filter((k,ne,se)=>se.findIndex(xe=>xe.MatchId===k.MatchId)===ne).sort((k,ne)=>{const se=typeof k.ScheduledStartDateTime=="string"?new Date(k.ScheduledStartDateTime).getTime():k.ScheduledStartDateTime||0,xe=typeof ne.ScheduledStartDateTime=="string"?new Date(ne.ScheduledStartDateTime).getTime():ne.ScheduledStartDateTime||0;return se-xe}))}),le(()=>e(n),()=>{y(a,(()=>{const m=new Set;return e(n).forEach(k=>{if(k.Division&&k.Division.PlayId){const ne=Math.abs(k.Division.PlayId);m.add(ne)}}),Array.from(m)})())}),le(()=>(e(w),e(a)),()=>{y(o,e(w).filter(m=>{const k=Math.abs(m.PlayId);return e(a).includes(k)}))}),le(()=>(e(o),e(W)),()=>{e(o).length>0&&!e(W)&&y(W,e(o)[0].PlayId)}),le(()=>(e(W),e(A),h(x())),()=>{e(W)&&e(A)==="poolsheet"&&xo(x(),e(W)).then(m=>{y(T,m)}).catch(m=>{console.error("Failed to fetch pool sheet:",m),y(T,null)})}),le(()=>(e(n),kt),()=>{y(i,(()=>{const m={};return e(n).forEach(k=>{const ne=typeof k.ScheduledStartDateTime=="string"?new Date(k.ScheduledStartDateTime).getTime():k.ScheduledStartDateTime||0,se=kt(ne);m[se]||(m[se]=[]),m[se].push(k)}),m})())}),le(()=>e(i),()=>{y(u,Object.keys(e(i)).sort((m,k)=>{const ne=new Date(m).getTime(),se=new Date(k).getTime();return ne-se}))}),vr(),rr();var at=_i(),We=c(at),Ye=c(We),tt=c(Ye),nt=c(tt);s(tt);var pt=d(tt,2);pt.__click=function(...m){var k;(k=_())==null||k.apply(this,m)},s(Ye);var gt=d(Ye,2);{var It=m=>{var k=Vs();p(m,k)};E(gt,m=>{e(Z)&&m(It)})}var wt=d(gt,2);{var Le=m=>{var k=Gs(),ne=c(k,!0);s(k),G(()=>P(ne,e(oe))),p(m,k)};E(wt,m=>{e(oe)&&m(Le)})}var F=d(wt,2);{var re=m=>{var k=gi(),ne=c(k),se=c(ne);se.__click=()=>y(A,"schedule");var xe=d(se,2);xe.__click=()=>y(A,"poolsheet");var we=d(xe,2);{var Qe=Ve=>{var Be=Js();Be.__click=()=>y(A,"stats"),G(()=>he(Be,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(A)==="stats"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)),p(Ve,Be)};E(we,Ve=>{h(C()),l(()=>C().length>0&&ce)&&Ve(Qe)})}s(ne);var ut=d(ne,2);{var yt=Ve=>{var Be=qs();p(Ve,Be)},St=Ve=>{var Be=Nt(),st=ot(Be);{var D=Y=>{var Q=oi(),de=d(c(Q),2),ve=c(de);{var fe=je=>{var Ke=zs();p(je,Ke)},Te=je=>{var Ke=Nt(),lt=ot(Ke);mt(lt,1,()=>e(u),ft,(xt,pe)=>{const Se=K(()=>(e(i),e(pe),l(()=>e(i)[e(pe)])));var ge=ni(),ke=c(ge),O=c(ke),U=c(O,!0);s(O);var B=d(O,2),ae=c(B);s(B),s(ke);var z=d(ke,2);mt(z,1,()=>e(Se),ft,(X,H)=>{const $=K(()=>(e(H),l(()=>ye(e(H),e(H).type==="work"))));var q=ai(),R=c(q),N=d(R,2),J=c(N,!0);s(N);var ue=d(N,2),ie=c(ue,!0);s(ue);var Ee=d(ue,2);{var Me=me=>{var He=Xs(),Ce=c(He,!0);s(He),G(()=>P(Ce,(h(e($)),l(()=>e($).scheduleMatch.Court.Name)))),p(me,He)};E(Ee,me=>{h(e($)),l(()=>e($).scheduleMatch.Court)&&me(Me)})}var ee=d(Ee,2),Ne=c(ee),Pe=c(Ne);{var Ge=me=>{var He=Qs(),Ce=d(ot(He),2),it=c(Ce,!0);s(Ce),G(()=>P(it,(h(e($)),l(()=>{var Mt,rt;return((Mt=e($).scheduleMatch.Division)==null?void 0:Mt.CompleteShortName)||((rt=e($).scheduleMatch.Division)==null?void 0:rt.FullName)||e($).scheduleMatch.FirstTeamText})))),p(me,He)},be=me=>{var He=Nt(),Ce=ot(He);{var it=rt=>{var Ae=Zs(),Ie=d(ot(Ae),2),ct=c(Ie),Oe=d(ct);{var Ze=Je=>{var qe=Ks(),Tt=d(ot(qe));G(()=>P(Tt,` ${h(e($)),l(()=>e($).scheduleMatch.SecondTeamText)??""}`)),p(Je,qe)};E(Oe,Je=>{h(e($)),l(()=>e($).scheduleMatch.SecondTeamText)&&Je(Ze)})}s(Ie),G(()=>P(ct,`${h(e($)),l(()=>e($).scheduleMatch.FirstTeamText)??""} `)),p(rt,Ae)},Mt=rt=>{var Ae=ti(),Ie=d(ot(Ae),2),ct=c(Ie),Oe=d(ct);{var Ze=Je=>{var qe=ei(),Tt=d(ot(qe));G(()=>P(Tt,` ${h(e($)),l(()=>e($).scheduleMatch.SecondTeamText)??""}`)),p(Je,qe)};E(Oe,Je=>{h(e($)),l(()=>e($).scheduleMatch.SecondTeamText)&&Je(Ze)})}s(Ie),G(()=>P(ct,`${h(e($)),l(()=>e($).scheduleMatch.FirstTeamText)??""} `)),p(rt,Ae)};E(Ce,rt=>{h(e($)),l(()=>e($).isPlaying)?rt(it):rt(Mt,!1)},!0)}p(me,He)};E(Pe,me=>{h(e($)),l(()=>e($).isWork)?me(Ge):me(be,!1)})}s(Ne),s(ee);var De=d(ee,2);{var V=me=>{var He=ri(),Ce=c(He),it=c(Ce,!0);s(Ce),s(He),G(()=>{Zt(Ce,`background-color: ${h(e($)),l(()=>e($).scheduleMatch.Division.ColorHex)??""}20; color: ${h(e($)),l(()=>e($).scheduleMatch.Division.ColorHex)??""}; border: 1px solid ${h(e($)),l(()=>e($).scheduleMatch.Division.ColorHex)??""}40;`),P(it,(h(e($)),l(()=>e($).scheduleMatch.Division.CodeAlias)))}),p(me,He)};E(De,me=>{h(e($)),l(()=>e($).scheduleMatch.Division)&&me(V)})}s(q),G(()=>{he(q,1,`flex items-center gap-3 px-3 py-2 rounded border ${h(e($)),l(()=>e($).isWork?"border-[#525463] bg-[#454654]/30":e($).isPlaying?"border-[#eab308]/50 bg-[#eab308]/5":"border-[#454654] bg-[#3b3c48]/30")??""}`),he(R,1,`flex-shrink-0 w-1 h-full rounded-full ${h(e($)),l(()=>e($).isWork?"bg-[#808593]":e($).isPlaying?"bg-[#eab308]":"bg-[#525463]")??""}`),P(J,(h(e($)),l(()=>e($).matchDate))),P(ie,(h(e($)),l(()=>e($).startTimeDisplay)))}),p(X,q)}),s(ge),G(()=>{P(U,e(pe)),P(ae,`(${h(e(Se)),l(()=>e(Se).length)??""} match${h(e(Se)),l(()=>e(Se).length!==1?"es":"")??""})`)}),p(xt,ge)}),p(je,Ke)};E(ve,je=>{e(u),l(()=>e(u).length===0)?je(fe):je(Te,!1)})}s(de),s(Q),p(Y,Q)},te=Y=>{var Q=pi(),de=d(c(Q),2);{var ve=Te=>{var je=si();p(Te,je)},fe=Te=>{var je=hi(),Ke=ot(je);{var lt=ge=>{var ke=ci(),O=d(c(ke),2);O.__change=B=>y(W,Number(B.target.value)),mt(O,5,()=>e(o),ft,(B,ae)=>{var z=ii(),X=c(z,!0);s(z);var H={};G(()=>{P(X,(e(ae),l(()=>e(ae).CompleteFullName||e(ae).FullName||`Pool ${e(ae).PlayId}`))),H!==(H=(e(ae),l(()=>e(ae).PlayId)))&&(z.value=(z.__value=(e(ae),l(()=>e(ae).PlayId)))??"")}),p(B,z)}),s(O);var U;_r(O),s(ke),G(()=>{U!==(U=e(W)||"")&&(O.value=(O.__value=e(W)||"")??"",ur(O,e(W)||""))}),p(ge,ke)};E(Ke,ge=>{e(o),l(()=>e(o).length>1)&&ge(lt)})}var xt=d(Ke,2);{var pe=ge=>{var ke=xi(),O=c(ke);{var U=z=>{var X=di(),H=c(X),$=c(H),q=c($);s($),s(H);var R=d(H,2),N=c(R),J=d(c(N));mt(J,5,()=>(e(T),l(()=>e(T).Pool.Teams)),ft,(ue,ie)=>{const Ee=K(()=>(e(ie),l(()=>{var Ae;return(Ae=e(ie).TeamText)==null?void 0:Ae.includes("630")})));var Me=li(),ee=c(Me),Ne=c(ee,!0);s(ee);var Pe=d(ee),Ge=c(Pe),be=c(Ge,!0);s(Ge),s(Pe);var De=d(Pe),V=c(De,!0);s(De);var me=d(De),He=c(me,!0);s(me);var Ce=d(me),it=c(Ce);s(Ce);var Mt=d(Ce),rt=c(Mt,!0);s(Mt),s(Me),G(()=>{he(Me,1,`border-b border-[#454654] ${e(Ee)?"bg-[#eab308]/10":""}`),P(Ne,(e(ie),l(()=>e(ie).FinishRank||e(ie).OverallRank||"-"))),he(Ge,1,e(Ee)?"text-[#facc15] font-semibold":"text-[#c0c2c8]"),P(be,(e(ie),l(()=>e(ie).TeamText))),P(V,(e(ie),l(()=>e(ie).MatchesWon??"-"))),P(He,(e(ie),l(()=>e(ie).MatchesLost??"-"))),P(it,`${e(ie),l(()=>e(ie).SetsWon??"-")??""}-${e(ie),l(()=>e(ie).SetsLost??"-")??""}`),P(rt,(e(ie),l(()=>e(ie).PointRatio&&e(ie).PointRatio!=="NaN"?e(ie).PointRatio:"-")))}),p(ue,Me)}),s(J),s(N),s(R),s(X),G(()=>P(q,`${e(T),l(()=>e(T).Pool.CompleteFullName||e(T).Pool.FullName)??""} - Standings`)),p(z,X)};E(O,z=>{e(T),l(()=>e(T).Pool&&e(T).Pool.Teams&&e(T).Pool.Teams.length>0)&&z(U)})}var B=d(O,2);{var ae=z=>{var X=mi(),H=d(c(X),2);mt(H,5,()=>(e(T),l(()=>e(T).Pool.Matches)),ft,($,q)=>{const R=K(()=>(e(q),l(()=>typeof e(q).ScheduledStartDateTime=="string"?new Date(e(q).ScheduledStartDateTime).getTime():e(q).ScheduledStartDateTime))),N=K(()=>(e(q),l(()=>{var be,De;return((be=e(q).FirstTeamText)==null?void 0:be.includes("630"))||((De=e(q).SecondTeamText)==null?void 0:De.includes("630"))})));var J=fi(),ue=c(J),ie=c(ue,!0);s(ue);var Ee=d(ue,2);{var Me=be=>{var De=ui(),V=c(De,!0);s(De),G(()=>P(V,(e(q),l(()=>e(q).Court.Name)))),p(be,De)};E(Ee,be=>{e(q),l(()=>e(q).Court)&&be(Me)})}var ee=d(Ee,2),Ne=c(ee),Pe=d(Ne);{var Ge=be=>{var De=vi(),V=d(ot(De));G(()=>P(V,` ${e(q),l(()=>e(q).SecondTeamText)??""}`)),p(be,De)};E(Pe,be=>{e(q),l(()=>e(q).SecondTeamText)&&be(Ge)})}s(ee),s(J),G(be=>{he(J,1,`flex items-center gap-3 px-3 py-2 rounded border ${e(N)?"border-[#eab308]/50 bg-[#eab308]/5":"border-[#454654] bg-[#3b3c48]/30"}`),P(ie,be),P(Ne,`${e(q),l(()=>e(q).FirstTeamText)??""} `)},[()=>(h(Re),h(e(R)),l(()=>Re(e(R))))]),p($,J)}),s(H),s(X),p(z,X)};E(B,z=>{e(T),l(()=>e(T).Pool&&e(T).Pool.Matches&&e(T).Pool.Matches.length>0)&&z(ae)})}s(ke),p(ge,ke)},Se=ge=>{var ke=Nt(),O=ot(ke);{var U=B=>{var ae=bi();p(B,ae)};E(O,B=>{e(W)&&B(U)},!0)}p(ge,ke)};E(xt,ge=>{e(W)&&e(T)?ge(pe):ge(Se,!1)})}p(Te,je)};E(de,Te=>{e(o),l(()=>e(o).length===0)?Te(ve):Te(fe,!1)})}s(Q),p(Y,Q)};E(st,Y=>{e(A)==="schedule"?Y(D):Y(te,!1)},!0)}p(Ve,Be)};E(ut,Ve=>{e(A)==="stats"&&ce?Ve(yt):Ve(St,!1)})}s(k),G(()=>{he(se,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(A)==="schedule"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(xe,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(A)==="poolsheet"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),p(m,k)};E(F,m=>{!e(Z)&&e(I)&&m(re)})}s(We),s(at),G(()=>P(nt,`${e(I),l(()=>{var m;return((m=e(I))==null?void 0:m.TeamText)||_e})??""} - Full Schedule`)),p(t,at),tr()}ir(["click","change"]);var Si=S("<button><span> </span> <span> </span></button>"),Ti=S('<div class="bg-[#3b3c48] border border-[#454654] rounded-lg p-2 shadow-lg min-w-[160px]"><div class="text-xs font-medium text-[#9fa2ab] uppercase tracking-wider mb-2 px-1">Set Priority</div> <div class="space-y-1"></div></div>');function un(t,r){er(r,!1);let n=et(r,"matchId",8),a=et(r,"currentPriority",8),o=et(r,"onPriorityChange",8),i=et(r,"onClose",8,void 0),u=j(null);const v=[{value:"must-cover",label:"Must Cover",color:"#eab308",icon:"â­"},{value:"priority",label:"Priority",color:"#f59e0b",icon:"ð¸"},{value:"optional",label:"Optional",color:"#9fa2ab",icon:"â"},{value:null,label:"Clear",color:"#9fa2ab",icon:"â"}];function x(C){o()(n(),C),i()&&i()()}rr();var g=Ti(),_=d(c(g),2);mt(_,5,()=>v,ft,(C,I)=>{const M=K(()=>(h(a()),e(I),l(()=>a()===e(I).value))),f=K(()=>(e(u),e(I),l(()=>e(u)===e(I).value)));var b=Si();b.__click=()=>x(e(I).value);var w=c(b),W=c(w,!0);s(w);var T=d(w,2),A=c(T,!0);s(T),s(b),G(()=>{he(b,1,`w-full text-left px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-2 ${e(M)?"bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50":e(f)?"bg-[#454654] text-[#f8f8f9]":"text-[#c0c2c8] hover:bg-[#454654]"}`),P(W,(e(I),l(()=>e(I).icon))),P(A,(e(I),l(()=>e(I).label)))}),Dr("mouseenter",b,()=>y(u,e(I).value)),Dr("mouseleave",b,()=>y(u,null)),p(C,b)}),s(_),s(g),p(t,g),tr()}ir(["click"]);var wi=S("<button><span> </span> <span> </span></button>"),Mi=S('<div class="bg-[#3b3c48] border border-[#454654] rounded-lg p-2 shadow-lg min-w-[180px]"><div class="text-xs font-medium text-[#9fa2ab] uppercase tracking-wider mb-2 px-1">Coverage Status</div> <div class="text-xs text-[#c0c2c8] mb-2 px-1"> </div> <div class="space-y-1"></div></div>');function wa(t,r){er(r,!1);let n=et(r,"teamId",8),a=et(r,"currentStatus",8),o=et(r,"onStatusChange",8),i=et(r,"onClose",8,void 0),u=j(null);const v=[{value:"not-covered",label:"Not Covered",color:"#9fa2ab",icon:"â"},{value:"covered",label:"Covered",color:"#10b981",icon:"â"},{value:"partially-covered",label:"Partially Covered",color:"#f59e0b",icon:"â"},{value:"planned",label:"Planned",color:"#eab308",icon:"ð"}];function x(M){o()(n(),M),i()&&i()()}rr();var g=Mi(),_=d(c(g),2),C=c(_);s(_);var I=d(_,2);mt(I,5,()=>v,ft,(M,f)=>{const b=K(()=>(h(a()),e(f),l(()=>a()===e(f).value))),w=K(()=>(e(u),e(f),l(()=>e(u)===e(f).value)));var W=wi();W.__click=()=>x(e(f).value);var T=c(W),A=c(T,!0);s(T);var Z=d(T,2),oe=c(Z,!0);s(Z),s(W),G(()=>{he(W,1,`w-full text-left px-2 py-1.5 rounded text-xs font-medium transition-colors flex items-center gap-2 ${h(e(b)),e(f),h(e(w)),l(()=>e(b)?e(f).value==="covered"?"bg-green-500/20 text-green-400 border border-green-500/50":e(f).value==="planned"?"bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50":e(f).value==="partially-covered"?"bg-[#f59e0b]/20 text-[#fbbf24] border border-[#f59e0b]/50":"bg-[#454654] text-[#9fa2ab] border border-[#525463]":e(w)?"bg-[#454654] text-[#f8f8f9]":"text-[#c0c2c8] hover:bg-[#454654]")??""}`),P(A,(e(f),l(()=>e(f).icon))),P(oe,(e(f),l(()=>e(f).label)))}),Dr("mouseenter",W,()=>y(u,e(f).value)),Dr("mouseleave",W,()=>y(u,null)),p(M,W)}),s(I),s(g),G(()=>P(C,`Team ${n()??""}`)),p(t,g),tr()}ir(["click"]);var Ci=S('<div class="text-center py-12 text-[#9fa2ab] text-sm"> </div>'),Di=S('<div class="text-[#9fa2ab] mb-4">LiveMatchDashboard - To be migrated</div>'),$i=S("<button> </button>"),ki=S('<div class="mb-4 px-4 py-2 rounded-lg border border-[#454654] bg-[#3b3c48] flex items-center justify-between flex-wrap gap-2"><div class="flex items-center gap-4 flex-wrap"><div class="text-xs text-[#9fa2ab]"><span class="font-semibold text-[#f8f8f9]"> </span> Coverage</div> <div class="flex items-center gap-2 text-xs"><span class="text-green-400"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#f59e0b]"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#eab308]"> </span> <span class="text-[#9fa2ab]">/</span> <span class="text-[#808593]"> </span></div></div> <div class="flex items-center gap-2 flex-wrap"><button title="Dim covered teams to focus on uncovered"> </button> <!></div></div>'),Ii=S('<div class="flex items-center justify-between px-3 py-2 rounded bg-[#454654] border border-[#525463] hover:border-[#eab308]/50 transition-colors"><div class="flex-1 min-w-0"><div class="text-xs font-medium text-[#f8f8f9] truncate"> </div> <div class="text-[10px] text-[#9fa2ab] mt-0.5"> </div></div> <button class="ml-3 px-3 py-1 text-xs font-medium rounded bg-[#eab308] text-[#18181b] hover:bg-[#facc15] transition-colors flex-shrink-0">Add</button></div>'),Pi=S('<div class="mb-4 rounded-lg border border-[#454654] bg-[#3b3c48] p-4"><div class="flex items-center justify-between mb-3"><h3 class="text-sm font-semibold text-[#f8f8f9]">Coverage Suggestions</h3> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors" aria-label="Close suggestions">â</button></div> <div class="space-y-2"></div></div>'),Ei=S('<div class="mb-4 px-3 py-2 rounded-lg border border-[#454654] bg-[#3b3c48] text-xs"><div class="font-medium text-[#9fa2ab] uppercase tracking-wider mb-2">Coverage Status Legend</div> <div class="flex flex-wrap gap-4 text-[#c0c2c8]"><div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-[#eab308] bg-[#eab308]/5"></div> <span>Uncovered</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-[#eab308]/50 bg-[#eab308]/10"></div> <span>Planned</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-green-500/30 bg-green-950/5"></div> <span>Covered</span></div> <div class="flex items-center gap-1.5"><div class="w-4 h-4 rounded border border-red-800/50 bg-red-950/10"></div> <span>Conflict</span></div></div></div>'),Oi=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">No matches found</div>'),Ni=S("<span> </span>"),Ai=ga('<svg class="w-3 h-3 text-[#facc15]" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Fi=S("<button><!></button>"),Ri=ga('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>'),Li=S('<div class="absolute left-0 top-8 z-50"><!></div>'),Wi=S('<div class="relative"><button aria-label="Set priority"> <!></button> <!></div>'),ji=S('<div class="absolute left-0 top-8 z-50"><!></div>'),Ui=S('<div class="relative"><button aria-label="Set coverage status"> </button> <!></div>'),Yi=S('<div><div><!> <div class="flex-1 min-w-0"><div class="text-sm font-semibold text-[#f8f8f9]"> </div> <div class="text-xs text-[#9fa2ab]"> </div></div> <!> <!> <div class="flex-shrink-0 w-4"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div></div> <!></div>'),Bi=S('<div class="space-y-1.5"><div class="flex items-center justify-between mb-2 pb-1 border-b border-[#454654]"><div class="flex items-center gap-2"><h3 class="text-base font-semibold text-[#f8f8f9]"> </h3> <span class="text-xs text-[#9fa2ab]"> </span></div> <!></div> <!></div>'),Hi=S('<div class="text-[#9fa2ab]">Scorekeeper - To be migrated</div>'),Vi=S('<div><!> <!> <!> <!> <div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4"><div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Sort:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>Team</button> <button>Court</button> <button>Time</button></div></div> <div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Wave:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div></div> <div class="space-y-4"><!></div> <!></div>');function Gi(t,r){er(r,!1);const n=()=>Vt(Ta,"$isSpectator",i),a=()=>Vt(Er,"$filters",i),o=()=>Vt(Sa,"$isMedia",i),[i,u]=ya(),v=j(),x=j(),g=j(),_=j(),C=j(),I=j(),M=j(),f=j(),b=j(),w=j(),W=j(),T=j();let A=et(r,"matches",8),Z=et(r,"eventId",8),oe=et(r,"clubId",8),L=j("team"),ce=j(null),_e=j(null),ye=j(null),at=j(!1),We=j(!1),Ye=j(null),tt=j(new Set),nt=j();Hs(Z());function pt(F){return F.InvolvedTeam==="first"?F.SecondTeamText:F.InvolvedTeam==="second"?F.FirstTeamText:`${F.FirstTeamText} vs ${F.SecondTeamText}`}_a(()=>{if(Os()){const F=Es();F&&F.scores.length>0&&JSON.stringify({eventId:F.eventId,scores:F.scores},null,2)}if(e(nt).startPolling(),n()){let F=[];if(Nr.subscribe(re=>{F=re.map(m=>m.teamId)})(),F.length>0){const re=setInterval(()=>{da.checkUpcomingMatches(A(),F)},6e4);return()=>clearInterval(re)}}}),_n(()=>{e(nt).stopPolling()}),le(()=>(n(),h(Z())),()=>{const F=n();y(nt,dn({eventId:Z(),userId:F?"spectator":"anonymous"}))}),le(()=>h(A()),()=>{y(v,jr(A()))}),le(()=>(a(),h(A()),Re),()=>{y(x,(()=>{if(a().wave!=="all"){const F=a().wave==="morning"?"08:00":"14:30",re=a().wave==="morning"?"14:30":"23:59";return Yr(A()).filter(m=>A().some(k=>{const ne=Re(k.ScheduledStartDateTime),se=ne.split(" ")[1]||ne;return se>=F&&se<re&&k.Division.Name===m}))}return Yr(A())})())}),le(()=>h(A()),()=>{y(g,cn(A()))}),le(()=>(h(A()),Fe),()=>{y(_,(()=>{const F=new Map;return A().forEach(re=>{const m=$e(re);m&&F.set(m,Fe.getTeamStatus(m))}),F})())}),le(()=>(h(A()),e(v),e(_),$e),()=>{y(C,(()=>{const F=Gt(dt);return pa(A(),F,e(v),e(_),$e,{excludeSelected:!0,preferUncovered:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:10})})())}),le(()=>(h(A()),a(),n(),Nr),()=>{y(I,(()=>{let F=ln(A());if(a().priority&&a().priority!=="all"&&(F=F.filter(re=>jt.getPriority(re.MatchId)===a().priority)),a().coverageStatus&&a().coverageStatus!=="all"&&(F=F.filter(re=>{const m=$e(re);if(!m)return!0;const k=Fe.getTeamStatus(m);return a().coverageStatus==="uncovered"?k==="not-covered":a().coverageStatus==="covered"?k==="covered"||k==="partially-covered":a().coverageStatus==="planned"?k==="planned":!0})),n()){let re=[];Nr.subscribe(m=>{re=m.map(k=>k.teamId)})(),re.length>0&&(F=F.filter(m=>{const k=$e(m);return k&&re.includes(k)}))}return F})())}),le(()=>(h(A()),e(v)),()=>{y(M,(()=>{const F=Gt(dt);return sn(A(),F,e(v),{excludeSelected:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:50})})())}),le(()=>e(M),()=>{y(f,new Set(e(M).map(F=>F.match.MatchId)))}),le(()=>(h(A()),Fe),()=>{y(b,(()=>{const F=new Map;A().forEach(xe=>{const we=$e(xe);if(we){const Qe=Fe.getTeamStatus(we);F.set(we,Qe)}});const re=F.size,m=Array.from(F.values()).filter(xe=>xe==="covered").length,k=Array.from(F.values()).filter(xe=>xe==="partially-covered").length,ne=Array.from(F.values()).filter(xe=>xe==="planned").length,se=Array.from(F.values()).filter(xe=>xe==="not-covered").length;return{totalTeams:re,coveredTeams:m,partiallyCoveredTeams:k,plannedTeams:ne,uncoveredTeams:se,coveragePercentage:re>0?(m+k)/re*100:0}})())}),le(()=>(e(I),e(L),$e),()=>{y(w,(()=>{let F=[...e(I)];return e(L)==="priority"?F.sort((re,m)=>{const k=jt.getPriority(re.MatchId),ne=jt.getPriority(m.MatchId),se={"must-cover":3,priority:2,optional:1,null:0},xe=se[k||"null"],we=se[ne||"null"];return xe!==we?we-xe:re.ScheduledStartDateTime-m.ScheduledStartDateTime}):e(L)==="team"?F.sort((re,m)=>{const k=$e(re),ne=$e(m);return k.localeCompare(ne)}):e(L)==="court"?F.sort((re,m)=>re.CourtName.localeCompare(m.CourtName)):F.sort((re,m)=>re.ScheduledStartDateTime-m.ScheduledStartDateTime),F})())}),le(()=>(e(w),Re),()=>{y(W,(()=>{const F={};return e(w).forEach(re=>{const m=Re(re.ScheduledStartDateTime);F[m]||(F[m]=[]),F[m].push(re)}),F})())}),le(()=>e(W),()=>{y(T,Object.keys(e(W)).sort((F,re)=>{const m=new Date(`2000-01-01 ${F}`).getTime(),k=new Date(`2000-01-01 ${re}`).getTime();return m-k}))}),le(()=>(n(),h(A()),e(nt),e(tt),e(Ye)),()=>{if(n()&&A().length>0){const F=new Set;A().forEach(re=>{e(nt).isClaimOwner(re.MatchId)&&(F.add(re.MatchId),!e(tt).has(re.MatchId)&&(!e(Ye)||e(Ye).MatchId!==re.MatchId)&&setTimeout(()=>{y(Ye,re)},200))}),y(tt,F)}}),le(()=>(n(),h(A()),e(nt),da),()=>{if(n()&&A().length>0){let F=[];Nr.subscribe(re=>{F=re.map(m=>m.teamId)})(),A().forEach(re=>{const m=$e(re);if(m&&F.includes(m)){const k=e(nt).getScore(re.MatchId);k&&k.status==="in-progress"&&da.notifyScoreUpdate(re,k)}})}}),vr(),rr();var gt=Nt(),It=ot(gt);{var wt=F=>{var re=Ci(),m=c(re,!0);s(re),G(()=>P(m,(a(),l(()=>a().division||a().wave!=="all"||a().teams.length>0||a().timeRange.start||a().timeRange.end?"No matches found for selected filters":"No matches found")))),p(F,re)},Le=F=>{var re=Vi(),m=c(re);{var k=pe=>{var Se=Di();p(pe,Se)};E(m,pe=>{n()&&pe(k)})}var ne=d(m,2);{var se=pe=>{var Se=ki(),ge=c(Se),ke=c(ge),O=c(ke),U=c(O);s(O),ba(),s(ke);var B=d(ke,2),ae=c(B),z=c(ae);s(ae);var X=d(ae,4),H=c(X);s(X);var $=d(X,4),q=c($);s($);var R=d($,4),N=c(R);s(R),s(B),s(ge);var J=d(ge,2),ue=c(J);ue.__click=()=>y(at,!e(at));var ie=c(ue,!0);s(ue);var Ee=d(ue,2);{var Me=ee=>{var Ne=$i();Ne.__click=()=>y(We,!e(We));var Pe=c(Ne);s(Ne),G(()=>{he(Ne,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(We)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),Ut(Ne,"title",`${e(C),l(()=>e(C).length)??""} coverage suggestions`),P(Pe,`ð¡ Suggestions (${e(C),l(()=>e(C).length)??""})`)}),p(ee,Ne)};E(Ee,ee=>{e(C),l(()=>e(C).length>0)&&ee(Me)})}s(J),s(Se),G(ee=>{P(U,`${ee??""}%`),P(z,`â ${e(b),l(()=>e(b).coveredTeams)??""}`),P(H,`â ${e(b),l(()=>e(b).partiallyCoveredTeams)??""}`),P(q,`ð ${e(b),l(()=>e(b).plannedTeams)??""}`),P(N,`â ${e(b),l(()=>e(b).uncoveredTeams)??""}`),he(ue,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(at)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] border border-[#525463]"}`),P(ie,e(at)?"ðï¸ Scanning":"Scanning Mode")},[()=>(e(b),l(()=>e(b).coveragePercentage.toFixed(0)))]),p(pe,Se)};E(ne,pe=>{o(),e(b),l(()=>o()&&e(b).totalTeams>0)&&pe(se)})}var xe=d(ne,2);{var we=pe=>{var Se=Pi(),ge=c(Se),ke=d(c(ge),2);ke.__click=()=>y(We,!1),s(ge);var O=d(ge,2);mt(O,5,()=>(e(C),l(()=>e(C).slice(0,5))),ft,(U,B)=>{var ae=Ii(),z=c(ae),X=c(z),H=c(X);s(X);var $=d(X,2),q=c($,!0);s($),s(z);var R=d(z,2);R.__click=N=>{N.stopPropagation(),dt.selectMatch(e(B).match.MatchId)},s(ae),G(N=>{P(H,`${N??""} - ${e(B),l(()=>e(B).match.CourtName)??""} - Team ${e(B),l(()=>e(B).teamId)??""}`),P(q,(e(B),l(()=>e(B).reason)))},[()=>(h(Re),e(B),l(()=>Re(e(B).match.ScheduledStartDateTime)))]),p(U,ae)}),s(O),s(Se),p(pe,Se)};E(xe,pe=>{o(),e(We),e(C),l(()=>o()&&e(We)&&e(C).length>0)&&pe(we)})}var Qe=d(xe,2);{var ut=pe=>{var Se=Ei();p(pe,Se)};E(Qe,pe=>{o()&&pe(ut)})}var yt=d(Qe,2),St=c(yt),Ve=d(c(St),2),Be=c(Ve);Be.__click=()=>y(L,"team");var st=d(Be,2);st.__click=()=>y(L,"court");var D=d(st,2);D.__click=()=>y(L,"time"),s(Ve),s(St);var te=d(St,2),Y=d(c(te),2),Q=c(Y);Q.__click=()=>Wt("wave","all");var de=d(Q,2);de.__click=()=>Wt("wave","morning");var ve=d(de,2);ve.__click=()=>Wt("wave","afternoon"),s(Y),s(te),s(yt);var fe=d(yt,2),Te=c(fe);{var je=pe=>{var Se=Oi();p(pe,Se)},Ke=pe=>{var Se=Nt(),ge=ot(Se);mt(ge,1,()=>e(T),ft,(ke,O)=>{const U=K(()=>(e(W),e(O),l(()=>e(W)[e(O)]))),B=K(()=>(h(e(U)),e(v),l(()=>e(U).filter(Me=>e(v).has(Me.MatchId)).length))),ae=K(()=>e(B)>0),z=K(()=>(h(e(B)),h(e(U)),l(()=>e(B)===e(U).length)));var X=Bi(),H=c(X),$=c(H),q=c($),R=c(q,!0);s(q);var N=d(q,2),J=c(N);s(N),s($);var ue=d($,2);{var ie=Me=>{var ee=Ni(),Ne=c(ee);s(ee),G(()=>{he(ee,1,`text-xs font-medium ${e(z)?"text-[#808593]":"text-red-400"}`),P(Ne,`${e(B)??""} conflict${e(B)!==1?"s":""}`)}),p(Me,ee)};E(ue,Me=>{e(ae)&&Me(ie)})}s(H);var Ee=d(H,2);mt(Ee,1,()=>e(U),ft,(Me,ee)=>{const Ne=K(()=>(e(v),e(ee),l(()=>e(v).has(e(ee).MatchId)))),Pe=K(()=>(h($e),e(ee),l(()=>$e(e(ee))))),Ge=K(()=>(e(ee),l(()=>pt(e(ee))))),be=K(()=>(e(ce),e(ee),l(()=>e(ce)===e(ee).MatchId))),De=K(()=>(h(jt),e(ee),l(()=>jt.getPriority(e(ee).MatchId)))),V=K(()=>(e(f),e(ee),l(()=>e(f).has(e(ee).MatchId)))),me=K(()=>(h(e(Pe)),h(Fe),l(()=>e(Pe)?Fe.getTeamStatus(e(Pe)):"not-covered"))),He=K(()=>e(me)==="covered"||e(me)==="partially-covered"),Ce=K(()=>e(me)==="planned"),it=K(()=>e(me)==="not-covered"),Mt=K(()=>e(at)&&e(He)),rt=K(()=>(h(Gt),h(dt),l(()=>Gt(dt)))),Ae=K(()=>(h(e(rt)),e(ee),l(()=>e(rt).has(e(ee).MatchId)))),Ie=K(()=>e(Ne)&&!e(z));var ct=Yi(),Oe=c(ct);Oe.__click=()=>y(ce,e(be)?null:e(ee).MatchId);var Ze=c(Oe);{var Je=_t=>{var bt=Fi();bt.__click=Ht=>{Ht.stopPropagation(),dt.toggleMatch(e(ee).MatchId)};var Dt=c(bt);{var qt=Ht=>{var Qt=Ai();p(Ht,Qt)};E(Dt,Ht=>{e(Ae)&&Ht(qt)})}s(bt),G(()=>{he(bt,1,`absolute top-2 right-2 sm:relative sm:top-0 sm:right-0 flex-shrink-0 w-5 h-5 rounded border-2 ${e(Ae)?"border-[#eab308] bg-[#eab308]/20":"border-[#525463] bg-transparent"} flex items-center justify-center hover:bg-[#454654] transition-colors`),Ut(bt,"aria-label",e(Ae)?"Remove from plan":"Add to plan")}),p(_t,bt)};E(Ze,_t=>{o()&&_t(Je)})}var qe=d(Ze,2),Tt=c(qe),Xt=c(Tt,!0);s(Tt);var Bt=d(Tt,2),Ct=c(Bt);s(Bt),s(qe);var vt=d(qe,2);{var Pt=_t=>{var bt=Wi(),Dt=c(bt);Dt.__click=At=>{At.stopPropagation(),y(_e,e(_e)===e(ee).MatchId?null:e(ee).MatchId)};var qt=c(Dt),Ht=d(qt);{var Qt=At=>{var nr=Ri();p(At,nr)};E(Ht,At=>{e(De)||At(Qt)})}s(Dt);var Kt=d(Dt,2);{var ar=At=>{var nr=Li(),Jr=c(nr);un(Jr,{get matchId(){return e(ee),l(()=>e(ee).MatchId)},get currentPriority(){return e(De)},get onPriorityChange(){return h(jt),l(()=>jt.setPriority)},onClose:()=>y(_e,null)}),s(nr),p(At,nr)};E(Kt,At=>{e(_e),e(ee),l(()=>e(_e)===e(ee).MatchId)&&At(ar)})}s(bt),G(()=>{he(Dt,1,`flex-shrink-0 w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-[#454654] ${e(De)==="must-cover"?"text-[#eab308]":e(De)==="priority"?"text-[#f59e0b]":e(De)==="optional"?"text-[#9fa2ab]":"text-[#808593]"}`),Ut(Dt,"title",e(De)?`Priority: ${e(De)}`:"Set priority"),P(qt,`${e(De)==="must-cover"&&"â­"}
												${e(De)==="priority"&&"ð¸"}
												${e(De)==="optional"&&"â"} `)}),p(_t,bt)};E(vt,_t=>{o()&&_t(Pt)})}var Et=d(vt,2);{var fr=_t=>{var bt=Ui(),Dt=c(bt);Dt.__click=Kt=>{Kt.stopPropagation(),y(ye,e(ye)===e(Pe)?null:e(Pe))};var qt=c(Dt);s(Dt);var Ht=d(Dt,2);{var Qt=Kt=>{var ar=ji(),At=c(ar);wa(At,{get teamId(){return e(Pe)},get currentStatus(){return e(me)},get onStatusChange(){return h(Fe),l(()=>Fe.setTeamStatus)},onClose:()=>y(ye,null)}),s(ar),p(Kt,ar)};E(Ht,Kt=>{e(ye)===e(Pe)&&Kt(Qt)})}s(bt),G(()=>{he(Dt,1,`flex-shrink-0 w-6 h-6 rounded flex items-center justify-center transition-colors hover:bg-[#454654] ${e(me)==="covered"?"text-green-500":e(me)==="partially-covered"?"text-[#f59e0b]":e(me)==="planned"?"text-[#eab308]":"text-[#808593]"}`),Ut(Dt,"title",`Coverage: ${e(me)??""}`),P(qt,`${e(me)==="covered"&&"â"}
												${e(me)==="partially-covered"&&"â"}
												${e(me)==="planned"&&"ð"}
												${e(me)==="not-covered"&&"â"}`)}),p(_t,bt)};E(Et,_t=>{o()&&e(Pe)&&_t(fr)})}var mr=d(Et,2),xr=c(mr);s(mr),s(Oe);var Gr=d(Oe,2);{var Or=_t=>{yi(_t,{get match(){return e(ee)},get eventId(){return Z()},get clubId(){return oe()},onClose:()=>y(ce,null),get matches(){return A()}})};E(Gr,_t=>{e(be)&&_t(Or)})}s(ct),G(_t=>{he(Oe,1,`group relative rounded transition-all flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 px-3 py-2.5 sm:py-2 cursor-pointer match-card min-h-[44px] sm:min-h-0 ${e(Ie)?"border border-red-800/50 bg-red-950/10":e(De)==="must-cover"?"border-2 border-[#eab308] bg-[#eab308]/10":e(De)==="priority"?"border border-[#f59e0b] bg-[#f59e0b]/10":e(it)&&!e(Ae)?"border border-[#eab308] bg-[#eab308]/5":e(Ce)?"border border-[#eab308]/50 bg-[#eab308]/10":e(He)?"border border-green-500/30 bg-green-950/5":e(V)&&!e(Ae)?"border border-green-500/50 bg-green-950/10":e(Ae)?"border border-[#eab308]/50 bg-[#eab308]/10":"border border-[#454654] bg-[#3b3c48]"} ${e(Mt)?"opacity-30":""} hover:border-[#525463] hover:bg-[#3b3c48]/80`),P(Xt,_t),P(Ct,`${e(ee),l(()=>e(ee).CourtName)??""} â¢ ${h(e(Pe)),e(ee),l(()=>e(Pe)||e(ee).Division.CodeAlias)??""} vs ${e(Ge)??""}`),he(xr,0,`w-4 h-4 text-[#9fa2ab] transition-transform ${e(be)?"rotate-180":""}`)},[()=>(h(Re),e(ee),l(()=>Re(e(ee).ScheduledStartDateTime)))]),p(Me,ct)}),s(X),G(()=>{P(R,e(O)),P(J,`${h(e(U)),l(()=>e(U).length)??""} match${h(e(U)),l(()=>e(U).length!==1?"es":"")??""}`)}),p(ke,X)}),p(pe,Se)};E(Te,pe=>{e(T),l(()=>e(T).length===0)?pe(je):pe(Ke,!1)})}s(fe);var lt=d(fe,2);{var xt=pe=>{var Se=Hi();p(pe,Se)};E(lt,pe=>{e(Ye)&&pe(xt)})}s(re),G(()=>{he(Be,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(L)==="team"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(st,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(L)==="court"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(D,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${e(L)==="time"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(Q,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="all"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(de,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="morning"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(ve,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="afternoon"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`)}),p(F,re)};E(It,F=>{e(I),l(()=>e(I).length===0)?F(wt):F(Le,!1)})}p(t,gt),tr(),u()}ir(["click"]);var Ji=S('<div class="text-xs text-[#808593] py-4 text-center">No conflicts found</div>'),qi=S('<span class="text-[#9fa2ab]">â¢</span> <span class="text-[#808593]"> </span>',1),zi=S('<div class="px-3 py-2.5 rounded border border-[#525463] bg-[#454654]/30"><div class="flex items-center gap-2 mb-1"><span class="text-sm font-bold text-[#f8f8f9]"> </span> <span class="text-xs text-[#808593]">vs</span> <span class="text-sm text-[#c0c2c8] truncate"> </span></div> <div class="flex items-center gap-3 mt-1 text-xs flex-wrap"><span class="text-[#facc15] font-medium"> </span> <span class="text-[#9fa2ab]"> </span> <span class="text-[#9fa2ab]">â¢</span> <span class="text-[#9fa2ab]"> </span> <!></div></div>'),Xi=S('<div class="space-y-2"></div>'),Qi=S(`<div class="mt-2 border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden"><div class="p-3 sm:p-4"><div class="flex items-center justify-between mb-3 sm:mb-4"><h4 class="text-xs sm:text-sm font-semibold text-[#f8f8f9] truncate pr-2">Conflict Details</h4> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="mb-4 pb-4 border-b border-[#454654]"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider mb-2">Selected Match</div> <div class="px-3 py-2 rounded border border-[#eab308]/50 bg-[#eab308]/5"><div class="flex items-center gap-2 mb-1"><span class="text-sm font-bold text-[#facc15]"> </span> <span class="text-xs text-[#808593]">vs</span> <span class="text-sm text-[#c0c2c8] truncate"> </span></div> <div class="flex items-center gap-3 mt-1 text-xs"><span class="text-[#facc15] font-medium"> </span> <span class="text-[#9fa2ab]"> </span> <span class="text-[#9fa2ab]">â¢</span> <span class="text-[#9fa2ab]"> </span></div></div></div> <div><div class="flex items-center justify-between mb-2"><div class="text-xs text-[#9fa2ab] uppercase tracking-wider"> </div> <span class="text-xs text-red-400 font-medium">Cannot cover simultaneously</span></div> <!></div> <div class="mt-4 pt-4 border-t border-[#454654]"><p class="text-xs text-[#808593]">These matches overlap in time and are on different courts. You'll need to choose which match to cover.</p></div></div></div>`);function Ki(t,r){er(r,!1);const n=j();let a=et(r,"match",8),o=et(r,"conflictingMatches",8),i=et(r,"onClose",8);function u(Le){return Le.InvolvedTeam==="first"?Le.SecondTeamText:Le.InvolvedTeam==="second"?Le.FirstTeamText:`${Le.FirstTeamText} vs ${Le.SecondTeamText}`}function v(Le,F){return Le!==F?5:0}const x=$e(a()),g=u(a());le(()=>h(o()),()=>{y(n,[...o()].sort((Le,F)=>Le.ScheduledStartDateTime-F.ScheduledStartDateTime))}),vr(),rr();var _=Qi(),C=c(_),I=c(C),M=d(c(I),2);M.__click=function(...Le){var F;(F=i())==null||F.apply(this,Le)},s(I);var f=d(I,2),b=d(c(f),2),w=c(b),W=c(w),T=c(W,!0);s(W);var A=d(W,4),Z=c(A,!0);s(A),s(w);var oe=d(w,2),L=c(oe),ce=c(L,!0);s(L);var _e=d(L,2),ye=c(_e,!0);s(_e);var at=d(_e,4),We=c(at,!0);s(at),s(oe),s(b),s(f);var Ye=d(f,2),tt=c(Ye),nt=c(tt),pt=c(nt);s(nt),ba(2),s(tt);var gt=d(tt,2);{var It=Le=>{var F=Ji();p(Le,F)},wt=Le=>{var F=Xi();mt(F,5,()=>e(n),ft,(re,m)=>{const k=K(()=>(h($e),e(m),l(()=>$e(e(m))))),ne=K(()=>(e(m),l(()=>u(e(m))))),se=K(()=>(h(a()),e(m),l(()=>v(a().CourtName,e(m).CourtName))));var xe=zi(),we=c(xe),Qe=c(we),ut=c(Qe,!0);s(Qe);var yt=d(Qe,4),St=c(yt,!0);s(yt),s(we);var Ve=d(we,2),Be=c(Ve),st=c(Be,!0);s(Be);var D=d(Be,2),te=c(D,!0);s(D);var Y=d(D,4),Q=c(Y,!0);s(Y);var de=d(Y,2);{var ve=fe=>{var Te=qi(),je=d(ot(Te),2),Ke=c(je);s(je),G(()=>P(Ke,`~${e(se)??""} min travel from ${h(a()),l(()=>a().CourtName)??""}`)),p(fe,Te)};E(de,fe=>{e(se)>0&&fe(ve)})}s(Ve),s(xe),G(fe=>{P(ut,(h(e(k)),e(m),l(()=>e(k)||e(m).Division.CodeAlias))),P(St,e(ne)),P(st,(e(m),l(()=>e(m).CourtName))),P(te,fe),P(Q,(e(m),l(()=>e(m).Division.CodeAlias)))},[()=>(h(Re),e(m),l(()=>Re(e(m).ScheduledStartDateTime)))]),p(re,xe)}),s(F),p(Le,F)};E(gt,Le=>{e(n),l(()=>e(n).length===0)?Le(It):Le(wt,!1)})}s(Ye),ba(2),s(C),s(_),G(Le=>{P(T,(h(a()),l(()=>x||a().Division.CodeAlias))),P(Z,g),P(ce,(h(a()),l(()=>a().CourtName))),P(ye,Le),P(We,(h(a()),l(()=>a().Division.CodeAlias))),P(pt,`Conflicting Matches (${h(o()),l(()=>o().length)??""})`)},[()=>(h(Re),h(a()),l(()=>Re(a().ScheduledStartDateTime)))]),p(t,_),tr()}ir(["click"]);var Zi=S('<div class="text-center py-12 text-[#9fa2ab] text-sm"> </div>'),ec=S("<option> </option>"),tc=S('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Division:</span> <select class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"><option> </option><!></select></div>'),rc=S("<option> </option>"),ac=S('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Team:</span> <select multiple class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0 min-w-[120px]"></select></div>'),nc=S('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Priority:</span> <select class="px-3 py-2 sm:py-1 text-xs font-medium rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none min-h-[44px] sm:min-h-0"><option>All Priorities</option><option>Must Cover</option><option>Priority</option><option>Optional</option></select></div>'),oc=S('<button class="px-3 py-2 sm:py-1 text-xs font-medium rounded-lg transition-colors text-[#9fa2ab] hover:text-[#f8f8f9] hover:bg-[#454654] border border-[#525463] min-h-[44px] sm:min-h-0">Clear</button>'),sc=S('<span class="ml-2"> </span>'),ic=S('<div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab]">Showing:</span> <span class="px-2 py-1 text-xs font-semibold rounded bg-[#eab308]/20 text-[#facc15] border border-[#eab308]/50"> </span> <button class="text-xs text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors" aria-label="Clear highlight">â</button></div>'),cc=S("<div> </div>"),lc=S('<div class="absolute top-0 bottom-0 flex items-center justify-center"><!></div>'),dc=S('<div class="absolute top-0 left-0 text-[10px]"> </div>'),uc=S('<div class="absolute top-0 right-0 w-2 h-2 bg-green-500 rounded-full border border-white" title="Easy coverage opportunity"></div>'),vc=S('<div class="absolute top-0 right-0 w-4 h-4 flex items-center justify-center"><svg class="w-3 h-3 text-[#facc15]" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),fc=S('<div class="text-[8px] text-[#9fa2ab]"> </div>'),mc=S('<div class="text-[8px] text-green-400">â</div>'),xc=S('<div class="flex items-center gap-1 mt-0.5"><!> <div class="text-[9px] font-semibold text-white"> </div> <!></div>'),bc=ga('<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path></svg>'),hc=S('<div class="absolute left-full top-0 ml-2 z-50"><!></div>'),pc=S('<div class="relative"><button aria-label="Set priority"> <!></button> <!></div>'),gc=S('<div class="absolute left-full top-0 ml-2 z-50"><!></div>'),_c=S('<div class="relative"><button aria-label="Set coverage status"> </button> <!></div>'),yc=S('<div><!> <!> <!> <div> </div> <div class="text-[9px] sm:text-[10px] opacity-90 truncate mt-0.5 leading-tight"> </div> <div class="text-[9px] sm:text-[10px] opacity-75 mt-0.5"> </div> <!> <!> <!></div>'),Sc=S('<div class="border-b border-[#454654] pb-4 last:border-b-0 last:pb-0 min-w-[600px] sm:min-w-0"><div class="flex items-center justify-between mb-2"><div class="text-base font-semibold text-[#f8f8f9]"> </div> <div class="text-xs text-[#808593]"> </div></div> <div class="relative h-20 sm:h-20 rounded-lg border overflow-hidden bg-[#3b3c48] border-[#454654]"><!> <!></div></div>'),Tc=S('<div class="text-[#9fa2ab]">Scorekeeper - To be migrated</div>'),wc=S('<div class="fixed inset-0 z-40"></div>'),Mc=S('<div class="fixed inset-0 z-40"></div>'),Cc=S('<div class="space-y-4"><div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4"><div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Wave:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <!> <!> <div class="flex items-center gap-2"><span class="text-xs text-[#9fa2ab] uppercase tracking-wider">Time:</span> <div class="flex gap-1 bg-[#454654] rounded-lg p-1"><button>All</button> <button>Morning</button> <button>Afternoon</button></div></div> <!> <!></div> <div class="flex items-center justify-between"><div class="text-xs text-[#9fa2ab]"> <!></div> <!></div> <div class="overflow-x-auto -mx-3 sm:mx-0 px-3 sm:px-0"><div class="space-y-4 min-w-max sm:min-w-0"></div></div> <!> <!> <!> <!></div>');function Dc(t,r){er(r,!1);const n=()=>Vt(Ta,"$isSpectator",i),a=()=>Vt(Er,"$filters",i),o=()=>Vt(Sa,"$isMedia",i),[i,u]=ya(),v=j(),x=j(),g=j(),_=j(),C=j(),I=j(),M=j(),f=j(),b=j(),w=j(),W=j(),T=j(),A=j();let Z=et(r,"matches",8),oe=et(r,"eventId",8),L=j(null),ce=j(null),_e=j(null),ye=j(null),at=null,We=j();function Ye(m){return m.InvolvedTeam==="first"?m.SecondTeamText:m.InvolvedTeam==="second"?m.FirstTeamText:`${m.FirstTeamText} vs ${m.SecondTeamText}`}function tt(m){return e(b)===0?0:(m-e(M))/e(b)*100}function nt(m,k){return e(b)===0?0:(k-m)/e(b)*100}function pt(m){const k=[],ne=[...m].sort((se,xe)=>se.ScheduledStartDateTime-xe.ScheduledStartDateTime);for(let se=0;se<ne.length-1;se++){const xe=ne[se],we=ne[se+1],Qe=Math.floor((we.ScheduledStartDateTime-xe.ScheduledEndDateTime)/6e4);Qe>0&&k.push({before:xe,after:we,gapMinutes:Qe})}return k}function gt(m){e(v).has(m.MatchId)?y(L,m):o()?dt.toggleMatch(m.MatchId):y(L,m)}function It(m,k){k.stopPropagation(),y(ce,e(ce)===m?null:m)}le(()=>(n(),h(oe())),()=>{const m=n();y(We,dn({eventId:oe(),userId:m?"spectator":"anonymous"}))}),le(()=>h(Z()),()=>{y(v,jr(Z()))}),le(()=>(a(),h(Z()),Re),()=>{y(x,(()=>{if(a().wave!=="all"){const m=a().wave==="morning"?"08:00":"14:30",k=a().wave==="morning"?"14:30":"23:59";return Yr(Z()).filter(ne=>Z().some(se=>{const xe=Re(se.ScheduledStartDateTime),we=xe.split(" ")[1]||xe;return we>=m&&we<k&&se.Division.CodeAlias===ne}))}return Yr(Z())})())}),le(()=>h(Z()),()=>{y(g,cn(Z()))}),le(()=>(h(Z()),a(),Fe),()=>{y(_,(()=>{let m=ln(Z());return a().priority&&a().priority!=="all"&&(m=m.filter(k=>jt.getPriority(k.MatchId)===a().priority)),a().coverageStatus&&a().coverageStatus!=="all"&&(m=m.filter(k=>{const ne=$e(k);if(!ne)return!0;const se=Fe.getTeamStatus(ne);return a().coverageStatus==="uncovered"?se==="not-covered":a().coverageStatus==="covered"?se==="covered"||se==="partially-covered":a().coverageStatus==="planned"?se==="planned":!0})),m})())}),le(()=>(h(Z()),e(v)),()=>{y(C,(()=>{const m=Gt(dt);return sn(Z(),m,e(v),{excludeSelected:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:50})})())}),le(()=>e(C),()=>{y(I,new Set(e(C).map(m=>m.match.MatchId)))}),le(()=>e(_),()=>{y(M,e(_).length>0?Math.min(...e(_).map(m=>m.ScheduledStartDateTime)):0)}),le(()=>e(_),()=>{y(f,e(_).length>0?Math.max(...e(_).map(m=>m.ScheduledEndDateTime)):0)}),le(()=>(e(f),e(M)),()=>{y(b,e(f)-e(M))}),le(()=>e(_),()=>{y(w,(()=>{const m={};return e(_).forEach(k=>{m[k.CourtName]||(m[k.CourtName]=[]),m[k.CourtName].push(k)}),m})())}),le(()=>e(w),()=>{y(W,Object.keys(e(w)).sort())}),le(()=>(e(ce),e(_),$e),()=>{y(T,(()=>{if(!e(ce))return new Set;const m=new Set;return e(_).forEach(k=>{$e(k)===e(ce)&&m.add(k.MatchId)}),m})())}),le(()=>(e(L),e(v),e(_)),()=>{y(A,(()=>{if(!e(L))return[];const m=e(v).get(e(L).MatchId);return m?m.map(k=>e(_).find(ne=>ne.MatchId===k)).filter(Boolean):[]})())}),vr(),rr();var wt=Nt(),Le=ot(wt);{var F=m=>{var k=Zi(),ne=c(k,!0);s(k),G(()=>P(ne,(a(),l(()=>a().division||a().wave!=="all"||a().teams.length>0||a().timeRange.start||a().timeRange.end?"No matches found for selected filters":"No matches found")))),p(m,k)},re=m=>{var k=Cc(),ne=c(k),se=c(ne),xe=d(c(se),2),we=c(xe);we.__click=()=>Wt("wave","all");var Qe=d(we,2);Qe.__click=()=>Wt("wave","morning");var ut=d(Qe,2);ut.__click=()=>Wt("wave","afternoon"),s(xe),s(se);var yt=d(se,2);{var St=R=>{var N=tc(),J=d(c(N),2);J.__change=ee=>Wt("division",ee.target.value||null);var ue=c(J),ie=c(ue);s(ue),ue.value=ue.__value="";var Ee=d(ue);mt(Ee,1,()=>e(x),ft,(ee,Ne)=>{var Pe=ec(),Ge=c(Pe,!0);s(Pe);var be={};G(()=>{P(Ge,e(Ne)),be!==(be=e(Ne))&&(Pe.value=(Pe.__value=e(Ne))??"")}),p(ee,Pe)}),s(J);var Me;_r(J),s(N),G(()=>{P(ie,`All Divisions${a(),l(()=>a().wave!=="all"?` (${a().wave})`:"")??""}`),Me!==(Me=(a(),l(()=>a().division||"")))&&(J.value=(J.__value=(a(),l(()=>a().division||"")))??"",ur(J,(a(),l(()=>a().division||""))))}),p(R,N)};E(yt,R=>{e(x),l(()=>e(x).length>1)&&R(St)})}var Ve=d(yt,2);{var Be=R=>{var N=ac(),J=d(c(N),2);J.__change=ie=>{const Ee=Array.from(ie.target.selectedOptions,Me=>Me.value);Wt("teams",Ee)},mt(J,5,()=>e(g),ft,(ie,Ee)=>{var Me=rc(),ee=c(Me,!0);s(Me);var Ne={};G(()=>{P(ee,e(Ee)),Ne!==(Ne=e(Ee))&&(Me.value=(Me.__value=e(Ee))??"")}),p(ie,Me)}),s(J);var ue;_r(J),s(N),G(ie=>{Ut(J,"size",ie),ue!==(ue=(a(),l(()=>a().teams)))&&(J.value=(J.__value=(a(),l(()=>a().teams)))??"",ur(J,(a(),l(()=>a().teams))))},[()=>(e(g),l(()=>Math.min(e(g).length,4)))]),p(R,N)};E(Ve,R=>{e(g),l(()=>e(g).length>0)&&R(Be)})}var st=d(Ve,2),D=d(c(st),2),te=c(D);te.__click=()=>Wt("timeRange",{start:null,end:null});var Y=d(te,2);Y.__click=()=>Wt("timeRange",{start:"08:00",end:"14:30"});var Q=d(Y,2);Q.__click=()=>Wt("timeRange",{start:"14:30",end:"23:59"}),s(D),s(st);var de=d(st,2);{var ve=R=>{var N=nc(),J=d(c(N),2);J.__change=Ne=>Wt("priority",Ne.target.value==="all"?"all":Ne.target.value);var ue=c(J);ue.value=ue.__value="all";var ie=d(ue);ie.value=ie.__value="must-cover";var Ee=d(ie);Ee.value=Ee.__value="priority";var Me=d(Ee);Me.value=Me.__value="optional",s(J);var ee;_r(J),s(N),G(()=>{ee!==(ee=(a(),l(()=>a().priority||"all")))&&(J.value=(J.__value=(a(),l(()=>a().priority||"all")))??"",ur(J,(a(),l(()=>a().priority||"all"))))}),p(R,N)};E(de,R=>{o()&&R(ve)})}var fe=d(de,2);{var Te=R=>{var N=oc();N.__click=function(...J){ca==null||ca.apply(this,J)},p(R,N)};E(fe,R=>{a(),l(()=>a().division||a().wave!=="all"||a().teams.length>0||a().timeRange.start||a().timeRange.end||a().priority&&a().priority!=="all"||a().coverageStatus&&a().coverageStatus!=="all")&&R(Te)})}s(ne);var je=d(ne,2),Ke=c(je),lt=c(Ke),xt=d(lt);{var pe=R=>{var N=sc(),J=c(N);s(N),G(()=>P(J,`(${e(_),l(()=>e(_).length)??""} of ${h(Z()),l(()=>Z().length)??""})`)),p(R,N)};E(xt,R=>{e(_),h(Z()),l(()=>e(_).length!==Z().length)&&R(pe)})}s(Ke);var Se=d(Ke,2);{var ge=R=>{var N=ic(),J=d(c(N),2),ue=c(J);s(J);var ie=d(J,2);ie.__click=()=>y(ce,null),s(N),G(()=>P(ue,`Team ${e(ce)??""}`)),p(R,N)};E(Se,R=>{e(ce)&&R(ge)})}s(je);var ke=d(je,2),O=c(ke);mt(O,5,()=>e(W),ft,(R,N)=>{const J=K(()=>(e(w),e(N),l(()=>e(w)[e(N)])));var ue=Sc(),ie=c(ue),Ee=c(ie),Me=c(Ee,!0);s(Ee);var ee=d(Ee,2),Ne=c(ee);s(ee),s(ie);var Pe=d(ie,2),Ge=c(Pe);mt(Ge,1,()=>(h(e(J)),l(()=>pt(e(J)))),ft,(De,V)=>{const me=K(()=>(e(V),l(()=>tt(e(V).before.ScheduledEndDateTime)))),He=K(()=>(e(V),l(()=>tt(e(V).after.ScheduledStartDateTime)))),Ce=K(()=>e(He)-e(me)),it=K(()=>(e(V),l(()=>e(V).gapMinutes>=30))),Mt=K(()=>(e(V),l(()=>e(V).gapMinutes>=15&&e(V).gapMinutes<30)));var rt=Nt(),Ae=ot(rt);{var Ie=ct=>{var Oe=lc(),Ze=c(Oe);{var Je=qe=>{var Tt=cc(),Xt=c(Tt);s(Tt),G(()=>{he(Tt,1,`text-[9px] font-medium px-1 py-0.5 rounded ${e(it)?"bg-green-500/20 text-green-400":e(Mt)?"bg-yellow-500/20 text-yellow-400":"bg-orange-500/20 text-orange-400"}`),P(Xt,`${e(V),l(()=>e(V).gapMinutes)??""}m`)}),p(qe,Tt)};E(Ze,qe=>{e(Ce)>3&&qe(Je)})}s(Oe),G(()=>{Zt(Oe,`left: ${e(me)??""}%; width: ${e(Ce)??""}%; z-index: 0;`),Ut(Oe,"title",`${e(V),l(()=>e(V).gapMinutes)??""} min gap between matches`)}),p(ct,Oe)};E(Ae,ct=>{e(Ce)>=1&&ct(Ie)})}p(De,rt)});var be=d(Ge,2);mt(be,1,()=>e(J),ft,(De,V)=>{const me=K(()=>(e(v),e(V),l(()=>e(v).has(e(V).MatchId)))),He=K(()=>(e(L),e(V),l(()=>{var Ue;return((Ue=e(L))==null?void 0:Ue.MatchId)===e(V).MatchId}))),Ce=K(()=>(h($e),e(V),l(()=>$e(e(V))))),it=K(()=>(e(ce),e(T),e(V),l(()=>e(ce)!==null&&e(T).has(e(V).MatchId)))),Mt=K(()=>e(ce)!==null&&!e(it)),rt=K(()=>(h(Gt),h(dt),l(()=>Gt(dt)))),Ae=K(()=>(h(e(rt)),e(V),l(()=>e(rt).has(e(V).MatchId)))),Ie=K(()=>(h(jt),e(V),l(()=>jt.getPriority(e(V).MatchId)))),ct=K(()=>(e(I),e(V),l(()=>e(I).has(e(V).MatchId)))),Oe=K(()=>(h(e(Ce)),h(Fe),l(()=>e(Ce)?Fe.getTeamStatus(e(Ce)):"not-covered"))),Ze=K(()=>e(Oe)==="covered"||e(Oe)==="partially-covered"),Je=K(()=>e(Oe)==="planned"),qe=K(()=>e(Oe)==="not-covered"),Tt=K(()=>(e(V),l(()=>tt(e(V).ScheduledStartDateTime)))),Xt=K(()=>(e(V),l(()=>Math.max(nt(e(V).ScheduledStartDateTime,e(V).ScheduledEndDateTime),2)))),Bt=K(()=>(e(V),l(()=>Ye(e(V))))),Ct=K(()=>(h(e(Ie)),h(e(qe)),h(e(Ae)),h(e(Je)),h(e(it)),h(e(me)),h(e(Ze)),h(e(ct)),e(V),l(()=>e(Ie)==="must-cover"?"#eab308":e(Ie)==="priority"?"#f59e0b":e(qe)&&!e(Ae)||e(Je)||e(it)||e(Ae)&&!e(me)?"#eab308":e(Ze)||e(ct)&&!e(Ae)?"#10b981":e(me)?"#dc2626":e(V).Division.ColorHex))),vt=K(()=>e(Ie)==="must-cover"?"#facc15":e(Ie)==="priority"?"#fbbf24":e(qe)&&!e(Ae)||e(Je)?"#facc15":e(He)?"#eab308":e(it)||e(Ae)?"#facc15":e(me)?"#ef4444":"rgba(255, 255, 255, 0.2)"),Pt=K(()=>e(He)?30:e(it)?20:e(Ie)==="must-cover"?18:e(Ae)?15:e(me)?10:1);var Et=yc();Et.__click=Ue=>{Ue.target instanceof HTMLElement&&Ue.target.closest(".priority-button")||gt(e(V))};var fr=c(Et);{var mr=Ue=>{var ze=dc(),ht=c(ze);s(ze),G(()=>P(ht,`${e(Ie)==="must-cover"&&"â­"}
											${e(Ie)==="priority"&&"ð¸"}
											${e(Ie)==="optional"&&"â"}`)),p(Ue,ze)};E(fr,Ue=>{o()&&e(Ie)&&Ue(mr)})}var xr=d(fr,2);{var Gr=Ue=>{var ze=uc();p(Ue,ze)};E(xr,Ue=>{o()&&e(ct)&&!e(Ae)&&Ue(Gr)})}var Or=d(xr,2);{var _t=Ue=>{var ze=vc();p(Ue,ze)};E(Or,Ue=>{o()&&e(Ae)&&Ue(_t)})}var bt=d(Or,2);bt.__click=Ue=>e(Ce)&&It(e(Ce),Ue);var Dt=c(bt,!0);s(bt);var qt=d(bt,2),Ht=c(qt);s(qt);var Qt=d(qt,2),Kt=c(Qt,!0);s(Qt);var ar=d(Qt,2);{var At=Ue=>{const ze=K(()=>(e(We),e(V),l(()=>e(We).getScore(e(V).MatchId))));var ht=Nt(),br=ot(ht);{var yr=cr=>{const Rt=K(()=>(h(e(ze)),l(()=>e(ze).sets.find($t=>$t.completedAt===0)||e(ze).sets[e(ze).sets.length-1]))),Lt=K(()=>(h(e(ze)),l(()=>e(ze).sets.filter($t=>$t.completedAt>0)))),Ft=K(()=>(h(e(Lt)),l(()=>e(Lt).filter($t=>$t.team1Score>$t.team2Score).length))),lr=K(()=>(h(e(Lt)),l(()=>e(Lt).filter($t=>$t.team2Score>$t.team1Score).length)));var Sr=xc(),Ma=c(Sr);{var mn=$t=>{var Tr=fc(),pn=c(Tr);s(Tr),G(()=>P(pn,`(${e(Ft)??""}-${e(lr)??""})`)),p($t,Tr)};E(Ma,$t=>{h(e(Lt)),l(()=>e(Lt).length>0)&&$t(mn)})}var qr=d(Ma,2),xn=c(qr);s(qr);var bn=d(qr,2);{var hn=$t=>{var Tr=mc();p($t,Tr)};E(bn,$t=>{h(e(ze)),l(()=>e(ze).status==="in-progress")&&$t(hn)})}s(Sr),G(()=>P(xn,`${h(e(Rt)),l(()=>e(Rt).team1Score)??""}-${h(e(Rt)),l(()=>e(Rt).team2Score)??""}`)),p(cr,Sr)};E(br,cr=>{h(e(ze)),l(()=>e(ze)&&e(ze).status!=="not-started")&&cr(yr)})}p(Ue,ht)};E(ar,Ue=>{e(We)&&Ue(At)})}var nr=d(ar,2);{var Jr=Ue=>{var ze=pc(),ht=c(ze);ht.__click=Ft=>{Ft.stopPropagation(),y(_e,e(_e)===e(V).MatchId?null:e(V).MatchId)};var br=c(ht),yr=d(br);{var cr=Ft=>{var lr=bc();p(Ft,lr)};E(yr,Ft=>{e(Ie)||Ft(cr)})}s(ht);var Rt=d(ht,2);{var Lt=Ft=>{var lr=hc(),Sr=c(lr);un(Sr,{get matchId(){return e(V),l(()=>e(V).MatchId)},get currentPriority(){return e(Ie)},get onPriorityChange(){return h(jt),l(()=>jt.setPriority)},onClose:()=>y(_e,null)}),s(lr),p(Ft,lr)};E(Rt,Ft=>{e(_e),e(V),l(()=>e(_e)===e(V).MatchId)&&Ft(Lt)})}s(ze),G(()=>{he(ht,1,`priority-button flex-shrink-0 w-5 h-5 rounded flex items-center justify-center transition-colors hover:bg-black/20 ${e(Ie)==="must-cover"?"text-[#facc15]":e(Ie)==="priority"?"text-[#fbbf24]":e(Ie)==="optional"?"text-white/60":"text-white/40"}`),Ut(ht,"title",e(Ie)?`Priority: ${e(Ie)}`:"Set priority"),P(br,`${e(Ie)==="must-cover"&&"â­"}
												${e(Ie)==="priority"&&"ð¸"}
												${e(Ie)==="optional"&&"â"} `)}),p(Ue,ze)};E(nr,Ue=>{o()&&Ue(Jr)})}var vn=d(nr,2);{var fn=Ue=>{var ze=_c(),ht=c(ze);ht.__click=Rt=>{Rt.stopPropagation(),y(ye,e(ye)===e(Ce)?null:e(Ce))};var br=c(ht);s(ht);var yr=d(ht,2);{var cr=Rt=>{var Lt=gc(),Ft=c(Lt);wa(Ft,{get teamId(){return e(Ce)},get currentStatus(){return e(Oe)},get onStatusChange(){return h(Fe),l(()=>Fe.setTeamStatus)},onClose:()=>y(ye,null)}),s(Lt),p(Rt,Lt)};E(yr,Rt=>{e(ye)===e(Ce)&&Rt(cr)})}s(ze),G(()=>{he(ht,1,`flex-shrink-0 w-5 h-5 rounded flex items-center justify-center transition-colors hover:bg-black/20 ${e(Oe)==="covered"?"text-green-400":e(Oe)==="partially-covered"?"text-[#fbbf24]":e(Oe)==="planned"?"text-[#facc15]":"text-white/40"}`),Ut(ht,"title",`Coverage: ${e(Oe)??""}`),P(br,`${e(Oe)==="covered"&&"â"}
												${e(Oe)==="partially-covered"&&"â"}
												${e(Oe)==="planned"&&"ð"}
												${e(Oe)==="not-covered"&&"â"}`)}),p(Ue,ze)};E(vn,Ue=>{o()&&e(Ce)&&Ue(fn)})}s(Et),G((Ue,ze,ht)=>{he(Et,1,`group absolute h-16 rounded-md px-2 py-1.5 text-white shadow-sm border-2 flex flex-col justify-center transition-all active:scale-95 sm:hover:z-20 sm:hover:shadow-lg touch-manipulation cursor-pointer ${e(He)?"ring-2 ring-[#eab308] ring-offset-2 ring-offset-[#3b3c48]":""} ${e(it)?"ring-2 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""} ${e(Mt)?"opacity-30":""} ${e(Ae)?"ring-1 ring-[#eab308] ring-offset-1 ring-offset-[#3b3c48]":""} ${e(Ze)?"opacity-60":""}`),Zt(Et,`left: ${e(Tt)??""}%; width: ${e(Xt)??""}%; background-color: ${e(Ct)??""}; border-color: ${e(vt)??""}; min-width: 100px; z-index: ${e(Pt)??""};`),Ut(Et,"title",`${e(V),l(()=>e(V).CompleteShortName)??""}: ${e(V),l(()=>e(V).FirstTeamText)??""} vs ${e(V),l(()=>e(V).SecondTeamText)??""} - ${Ue??""}${e(me)?" (Click to see conflicts)":" (Click to add to plan)"}${e(Ie)?` [Priority: ${e(Ie)}]`:""}${e(ct)&&!e(Ae)?" [Easy opportunity]":""}${e(Oe)!=="not-covered"?` [Coverage: ${e(Oe)}]`:""}`),he(bt,1,`text-xs sm:text-sm font-bold truncate leading-tight ${e(Ce)?"cursor-pointer hover:underline":""}`),P(Dt,(h(e(Ce)),e(V),l(()=>e(Ce)||e(V).Division.CodeAlias))),P(Ht,`vs ${ze??""}`),P(Kt,ht)},[()=>(h(Re),e(V),l(()=>Re(e(V).ScheduledStartDateTime))),()=>(h(e(Bt)),l(()=>e(Bt).length>20?e(Bt).substring(0,17)+"...":e(Bt))),()=>(h(Re),e(V),l(()=>Re(e(V).ScheduledStartDateTime)))]),p(De,Et)}),s(Pe),s(ue),G(()=>{P(Me,e(N)),P(Ne,`${h(e(J)),l(()=>e(J).length)??""} match${h(e(J)),l(()=>e(J).length!==1?"es":"")??""}`)}),p(R,ue)}),s(O),s(ke);var U=d(ke,2);{var B=R=>{Ki(R,{get match(){return e(L)},get conflictingMatches(){return e(A)},onClose:()=>y(L,null)})};E(U,R=>{e(L)&&R(B)})}var ae=d(U,2);{var z=R=>{var N=Tc();p(R,N)};E(ae,R=>{e(We),l(()=>at&&e(We)&&e(We).isClaimOwner(at.MatchId))&&R(z)})}var X=d(ae,2);{var H=R=>{var N=wc();N.__click=()=>y(_e,null),p(R,N)};E(X,R=>{e(_e)!==null&&R(H)})}var $=d(X,2);{var q=R=>{var N=Mc();N.__click=()=>y(ye,null),p(R,N)};E($,R=>{e(ye)!==null&&R(q)})}s(k),G((R,N)=>{he(we,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="all"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(Qe,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="morning"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(ut,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().wave==="afternoon"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(te,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().timeRange.start===null&&a().timeRange.end===null?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(Y,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().timeRange.start==="08:00"&&a().timeRange.end==="14:30"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),he(Q,1,`px-3 py-2 sm:py-1 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0 ${a(),l(()=>a().timeRange.start==="14:30"&&a().timeRange.end==="23:59"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]")??""}`),P(lt,`Timeline: ${R??""} - ${N??""} `)},[()=>(h(Re),e(M),l(()=>Re(e(M)))),()=>(h(Re),e(f),l(()=>Re(e(f))))]),p(m,k)};E(Le,m=>{e(_),l(()=>e(_).length===0)?m(F):m(re,!1)})}p(t,wt),tr(),u()}ir(["click","change"]);function pr(t){return t.replace(/\\/g,"\\\\").replace(/;/g,"\\;").replace(/,/g,"\\,").replace(/\n/g,"\\n")}function ma(t){const r=new Date(t),n=r.getUTCFullYear(),a=String(r.getUTCMonth()+1).padStart(2,"0"),o=String(r.getUTCDate()).padStart(2,"0"),i=String(r.getUTCHours()).padStart(2,"0"),u=String(r.getUTCMinutes()).padStart(2,"0"),v=String(r.getUTCSeconds()).padStart(2,"0");return`${n}${a}${o}T${i}${u}${v}Z`}function $c(t,r){return`match-${t}-${r}@coursync.local`}function kc(t,r,n,a){const o=Date.now();let i=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//CourtSync//Coverage Plan//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH",`X-WR-CALNAME:${pr(a)}`,`X-WR-CALDESC:${pr("Volleyball Match Coverage Plan")}`,"X-WR-TIMEZONE:UTC"].join(`\r
`)+`\r
`;return t.forEach(u=>{const v=r(u),x=n(u),g=v?`${v} vs ${x}`:`${u.FirstTeamText} vs ${u.SecondTeamText}`,_=[`Court: ${u.CourtName}`,`Division: ${u.Division.CodeAlias}`,`First Team: ${u.FirstTeamText}`,`Second Team: ${u.SecondTeamText}`].join("\\n"),C=pr(u.CourtName),I=pr(g),M=pr(_),f=u.ScheduledStartDateTime,b=u.ScheduledEndDateTime,W=f-5*60*1e3,T=ma(W),A=ma(b),Z=ma(o),oe=$c(u.MatchId,f);i+=["BEGIN:VEVENT",`UID:${oe}`,`DTSTAMP:${Z}`,`DTSTART:${T}`,`DTEND:${A}`,`SUMMARY:${I}`,`DESCRIPTION:${M}`,`LOCATION:${C}`,"SEQUENCE:0","STATUS:CONFIRMED","TRANSP:OPAQUE"].join(`\r
`)+`\r
`,i+=["BEGIN:VALARM","TRIGGER:-PT15M","ACTION:DISPLAY",`DESCRIPTION:${pr(`Match starts in 15 minutes: ${g}`)}`,"END:VALARM"].join(`\r
`)+`\r
`,i+=`END:VEVENT\r
`}),i+=`END:VCALENDAR\r
`,i}var Ic=S('<span class="ml-2 text-red-400"> </span>'),Pc=S('<div class="flex items-center gap-1 bg-[#3b3c48] rounded-lg p-1 border border-[#454654] mx-4"><button>Plan</button> <button>Analytics</button> <button>Stats</button> <button>Team</button></div>'),Ec=S('<div class="text-center py-12 text-[#9fa2ab] text-sm"><p>No matches selected yet</p> <p class="text-xs text-[#808593] mt-2">Click matches in the timeline or list to add them to your coverage plan</p></div>'),Oc=S('<span class="ml-2 text-[#eab308]"> </span>'),Nc=S('<button class="px-2 py-1 text-xs font-medium rounded-lg bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors border border-[#525463]" title="Previous conflict">â Prev</button> <button class="px-2 py-1 text-xs font-medium rounded-lg bg-[#454654] text-[#c0c2c8] hover:bg-[#525463] transition-colors border border-[#525463]" title="Next conflict">Next â</button>',1),Ac=S('<div class="text-[10px] font-semibold text-[#eab308] px-1.5 py-0.5 rounded bg-[#eab308]/20">ACTIVE</div>'),Fc=S('<div class="flex-shrink-0 text-[10px] font-semibold text-[#eab308] px-1.5 py-0.5 rounded bg-[#eab308]/20">KEEP</div>'),Rc=S('<div class="text-[10px] text-[#808593] mt-0.5"> </div>'),Lc=S('<button class="px-2 py-1 text-[10px] font-medium rounded bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Remove</button>'),Wc=S('<div><!> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="text-xs font-semibold text-[#f8f8f9]"> </span> <span class="text-xs text-[#facc15] font-medium"> </span> <span class="text-xs text-[#c0c2c8]"> </span></div> <!></div> <!></div>'),jc=S('<div><div class="flex items-center gap-2 mb-2"><div class="text-xs font-medium text-red-400"> </div> <!></div> <div class="space-y-2"></div></div>'),Uc=S('<div class="border border-red-800/50 rounded-lg bg-red-950/10 p-4"><div class="flex items-center justify-between mb-3"><div><h4 class="text-sm font-semibold text-red-400">â ï¸ Conflicts Detected</h4> <p class="text-xs text-[#9fa2ab] mt-0.5"> <!></p></div> <div class="flex items-center gap-2"><!> <button class="px-3 py-1.5 text-xs font-medium rounded-lg bg-red-950/50 text-red-400 border border-red-800/50 hover:bg-red-950/70 transition-colors">Auto-Resolve</button></div></div> <div class="space-y-3"></div></div>'),Yc=S('<span class="text-[10px] px-1.5 py-0.5 rounded bg-[#eab308]/20 text-[#eab308] border border-[#eab308]/50">Uncovered</span>'),Bc=S('<div class="flex items-center gap-2 px-2 py-1.5 rounded bg-green-950/20 border border-green-500/30"><div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="text-xs font-semibold text-[#f8f8f9]"> </span> <span class="text-xs text-green-400 font-medium"> </span> <span class="text-xs text-[#c0c2c8]"> </span> <!></div> <div class="text-[10px] text-[#808593] mt-0.5"> </div></div> <button class="px-2 py-1 text-xs font-medium rounded transition-colors bg-green-500/20 text-green-400 border border-green-500/50 hover:bg-green-500/30">Add</button></div>'),Hc=S('<div class="border border-green-500/50 rounded-lg bg-green-950/10 p-4"><div class="flex items-center justify-between mb-3"><div><h4 class="text-sm font-semibold text-green-400">ð¡ Coverage Opportunities</h4> <p class="text-xs text-[#9fa2ab] mt-0.5"> </p></div></div> <div class="space-y-2"></div></div>'),Vc=S('<div class="flex-shrink-0 text-[10px] font-semibold text-red-400 px-1.5 py-0.5 rounded bg-red-950/50">CONFLICT</div>'),Gc=S("<div></div>"),Jc=S('<div class="fixed inset-0 z-40"></div> <div class="absolute right-0 top-full mt-1 z-50"><!></div>',1),qc=S('<div class="relative flex-shrink-0"><button title="Set coverage status"> </button> <!></div>'),zc=S('<div><button aria-label="Remove from plan"><svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></button> <!> <div class="flex-shrink-0 w-20 text-sm font-semibold text-[#f8f8f9]"> </div> <div class="flex-shrink-0 w-24 text-sm font-bold text-[#facc15]"> </div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><div class="text-sm font-bold text-[#f8f8f9]"> </div> <!></div> <div class="text-xs text-[#c0c2c8] truncate"> </div></div> <!> <div class="flex-shrink-0"><span class="px-2 py-0.5 text-[10px] font-semibold rounded"> </span></div></div>'),Xc=S('<div class="space-y-2"><div class="flex items-center gap-2 pb-2 border-b border-[#454654]"><h4 class="text-sm font-semibold text-[#f8f8f9]"> </h4> <span class="text-xs text-[#808593]"> </span></div> <!></div>'),Qc=S('<div class="space-y-4"><!> <!> <div class="space-y-4"></div></div>'),Kc=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">CoverageAnalytics - To be migrated</div>'),Zc=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">CoverageStats - To be migrated</div>'),el=S('<div class="text-center py-12 text-[#9fa2ab] text-sm">TeamMemberSelector and TeamCoverageView - To be migrated</div>'),tl=S('<div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 p-4 border-t border-[#454654] bg-[#454654]/50"><div class="flex items-center gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]">Mark All as Planned</button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]">Mark All as Covered</button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors text-[#9fa2ab] hover:text-[#f8f8f9] hover:bg-[#454654]">Clear Plan</button></div> <div class="flex items-center gap-2 flex-wrap"><button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-colors bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]" title="Copy plan to clipboard">Copy</button> <div class="flex items-center gap-1 bg-[#3b3c48] rounded-lg p-1 border border-[#454654]"><button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as JSON">JSON</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as CSV">CSV</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as Text">TXT</button> <button class="px-2 py-1 text-xs font-medium rounded transition-colors text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#454654]" title="Export as Calendar (ICS)">ð ICS</button></div></div></div>'),rl=S('<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50"><div class="relative w-full max-w-3xl max-h-[90vh] border border-[#454654] rounded-lg bg-[#3b3c48] overflow-hidden flex flex-col"><div class="flex items-center justify-between p-4 border-b border-[#454654] bg-[#454654]/50"><div class="flex-1"><h3 class="text-base sm:text-lg font-semibold text-[#f8f8f9]">My Coverage Plan</h3> <div class="flex items-center gap-3 mt-1 flex-wrap"><p class="text-xs text-[#9fa2ab]"> <!> <!></p> <select class="px-2 py-1 text-xs rounded bg-[#454654] text-[#c0c2c8] border border-[#525463] focus:border-[#eab308] focus:outline-none"><option>All Status</option><option>Uncovered</option><option>Planned</option><option>Covered</option></select></div></div> <!> <button class="text-[#9fa2ab] hover:text-[#f8f8f9] transition-colors flex-shrink-0 min-w-[44px] min-h-[44px] sm:min-w-0 sm:min-h-0 flex items-center justify-center" aria-label="Close panel"><svg class="w-5 h-5 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="flex-1 overflow-y-auto p-4"><!></div> <!></div></div>');function al(t,r){er(r,!1);const n=j(),a=j(),o=j(),i=j(),u=j(),v=j(),x=j();let g=et(r,"matches",8),_=et(r,"onClose",8),C=j("plan"),I=j("all"),M=j(null),f=j(0),b=j([]);function w(D){return(e(a).get(D)||[]).map(Y=>e(n).find(Q=>Q.MatchId===Y)).filter(Boolean)}function W(){e(i).length>0&&y(f,(e(f)+1)%e(i).length)}function T(){e(i).length>0&&y(f,(e(f)-1+e(i).length)%e(i).length)}function A(D){return D.InvolvedTeam==="first"?D.SecondTeamText:D.InvolvedTeam==="second"?D.FirstTeamText:`${D.FirstTeamText} vs ${D.SecondTeamText}`}function Z(){var ve;const D={plan:{createdAt:new Date().toISOString(),totalMatches:e(n).length,totalCoverageTime:e(u),conflicts:e(i).length},matches:e(n).map(fe=>({MatchId:fe.MatchId,Date:kt(fe.ScheduledStartDateTime),Time:Re(fe.ScheduledStartDateTime),Court:fe.CourtName,Team:$e(fe)||fe.Division.CodeAlias,Opponent:A(fe),Division:fe.Division.CodeAlias,FirstTeam:fe.FirstTeamText,SecondTeam:fe.SecondTeamText,StartTime:new Date(fe.ScheduledStartDateTime).toISOString(),EndTime:new Date(fe.ScheduledEndDateTime).toISOString()}))},te=JSON.stringify(D,null,2),Y=new Blob([te],{type:"application/json"}),Q=URL.createObjectURL(Y),de=document.createElement("a");de.href=Q,de.download=`coverage-plan-${kt(((ve=e(n)[0])==null?void 0:ve.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.json`,de.click(),URL.revokeObjectURL(Q)}function oe(){var fe;const D=["Date","Time","Court","Team","Opponent","Division","First Team","Second Team","Start Time","End Time"],te=e(n).map(Te=>[kt(Te.ScheduledStartDateTime),Re(Te.ScheduledStartDateTime),Te.CourtName,$e(Te)||Te.Division.CodeAlias,A(Te),Te.Division.CodeAlias,Te.FirstTeamText,Te.SecondTeamText,new Date(Te.ScheduledStartDateTime).toISOString(),new Date(Te.ScheduledEndDateTime).toISOString()]),Y=[D.join(","),...te.map(Te=>Te.map(je=>`"${je}"`).join(","))].join(`
`),Q=new Blob([Y],{type:"text/csv"}),de=URL.createObjectURL(Q),ve=document.createElement("a");ve.href=de,ve.download=`coverage-plan-${kt(((fe=e(n)[0])==null?void 0:fe.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.csv`,ve.click(),URL.revokeObjectURL(de)}function L(){var de;let D=`COVERAGE PLAN
`;D+=`${"=".repeat(50)}

`,D+=`Total Matches: ${e(n).length}
`,D+=`Total Coverage Time: ${Math.floor(e(u)/60)}h ${e(u)%60}m
`,e(i).length>0&&(D+=`Conflicts: ${e(i).length}
`),D+=`
`,e(x).forEach(ve=>{const fe=e(v)[ve];D+=`${ve}
`,D+=`${"-".repeat(50)}
`,fe.forEach(Te=>{const je=$e(Te),Ke=A(Te);D+=`${Re(Te.ScheduledStartDateTime)} | ${Te.CourtName} | ${je||Te.Division.CodeAlias} vs ${Ke}
`}),D+=`
`});const te=new Blob([D],{type:"text/plain"}),Y=URL.createObjectURL(te),Q=document.createElement("a");Q.href=Y,Q.download=`coverage-plan-${kt(((de=e(n)[0])==null?void 0:de.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.txt`,Q.click(),URL.revokeObjectURL(Y)}function ce(){var de;const D=kc(e(n),$e,A,"Coverage Plan"),te=new Blob([D],{type:"text/calendar;charset=utf-8"}),Y=URL.createObjectURL(te),Q=document.createElement("a");Q.href=Y,Q.download=`coverage-plan-${kt(((de=e(n)[0])==null?void 0:de.ScheduledStartDateTime)||Date.now()).replace(/,/g,"")}.ics`,Q.click(),URL.revokeObjectURL(Y)}async function _e(){let D=`COVERAGE PLAN
`;D+=`${"=".repeat(50)}

`,D+=`Total Matches: ${e(n).length}
`,D+=`Total Coverage Time: ${Math.floor(e(u)/60)}h ${e(u)%60}m
`,e(i).length>0&&(D+=`Conflicts: ${e(i).length}
`),D+=`
`,e(x).forEach(te=>{const Y=e(v)[te];D+=`${te}
`,D+=`${"-".repeat(50)}
`,Y.forEach(Q=>{const de=$e(Q),ve=A(Q);D+=`${Re(Q.ScheduledStartDateTime)} | ${Q.CourtName} | ${de||Q.Division.CodeAlias} vs ${ve}
`}),D+=`
`});try{await navigator.clipboard.writeText(D),alert("Coverage plan copied to clipboard!")}catch(te){console.error("Failed to copy to clipboard:",te),alert("Failed to copy to clipboard. Please try exporting instead.")}}le(()=>(h(g()),Fe),()=>{if(g().length>0){const D=new Map,te=Gt(dt);g().forEach(Y=>{const Q=$e(Y);if(!Q)return;const de=D.get(Q)||{total:0,inPlan:0};de.total++,te.has(Y.MatchId)&&de.inPlan++,D.set(Q,de)}),D.forEach((Y,Q)=>{Fe.updateFromPlan(Q,Y.inPlan,Y.total)})}}),le(()=>(h(g()),e(I),Fe),()=>{y(n,(()=>{const D=Gt(dt);let te=g().filter(Y=>D.has(Y.MatchId)).sort((Y,Q)=>Y.ScheduledStartDateTime-Q.ScheduledStartDateTime);return e(I)!=="all"&&(te=te.filter(Y=>{const Q=$e(Y);return Q?Fe.getTeamStatus(Q)===e(I):!1})),te})())}),le(()=>e(n),()=>{y(a,jr(e(n)))}),le(()=>(h(g()),pa),()=>{y(o,(()=>{const D=jr(g()),Y=Gt(dt),Q=new Map;return g().forEach(de=>{const ve=$e(de);ve&&Q.set(ve,Fe.getTeamStatus(ve))}),pa(g(),Y,D,Q,$e,{preferUncovered:!0,preferNoConflicts:!0,preferNearSelected:!0,maxResults:5})})())}),le(()=>(e(a),e(n)),()=>{y(i,(()=>{if(e(a).size===0)return[];const D=[],te=new Set;return e(n).forEach(Y=>{if(te.has(Y.MatchId))return;const Q=e(a).get(Y.MatchId);if(!Q||Q.length===0)return;const de=[Y,...Q.map(ve=>e(n).find(fe=>fe.MatchId===ve)).filter(Boolean)];de.forEach(ve=>te.add(ve.MatchId)),D.push({matches:de.sort((ve,fe)=>ve.ScheduledStartDateTime-fe.ScheduledStartDateTime),conflictCount:de.length})}),D})())}),le(()=>(e(i),e(f)),()=>{e(i).length>0&&e(f)>=e(i).length?y(f,0):e(i).length===0&&y(f,0)}),le(()=>(e(i),e(b),e(f)),()=>{e(i).length>0&&e(b)[e(f)]&&setTimeout(()=>{var D;(D=e(b)[e(f)])==null||D.scrollIntoView({behavior:"smooth",block:"center"})},100)}),le(()=>e(n),()=>{y(u,(()=>{if(e(n).length===0)return 0;const D=Math.min(...e(n).map(Y=>Y.ScheduledStartDateTime)),te=Math.max(...e(n).map(Y=>Y.ScheduledEndDateTime));return Math.floor((te-D)/6e4)})())}),le(()=>(e(n),kt),()=>{y(v,(()=>{const D={};return e(n).forEach(te=>{const Y=kt(te.ScheduledStartDateTime);D[Y]||(D[Y]=[]),D[Y].push(te)}),D})())}),le(()=>e(v),()=>{y(x,Object.keys(e(v)).sort((D,te)=>{const Y=new Date(D).getTime(),Q=new Date(te).getTime();return Y-Q}))}),vr(),rr();var ye=rl(),at=c(ye),We=c(at),Ye=c(We),tt=d(c(Ye),2),nt=c(tt),pt=c(nt),gt=d(pt);{var It=D=>{var te=gn();G(Y=>P(te,`â¢ ${Y??""}h ${e(u)%60}m coverage`),[()=>(e(u),l(()=>Math.floor(e(u)/60)))]),p(D,te)};E(gt,D=>{e(u)>0&&D(It)})}var wt=d(gt,2);{var Le=D=>{var te=Ic(),Y=c(te);s(te),G(()=>P(Y,`â¢ ${e(i),l(()=>e(i).length)??""} conflict${e(i),l(()=>e(i).length!==1?"s":"")??""}`)),p(D,te)};E(wt,D=>{e(i),l(()=>e(i).length>0)&&D(Le)})}s(nt);var F=d(nt,2);F.__change=D=>y(I,D.target.value);var re=c(F);re.value=re.__value="all";var m=d(re);m.value=m.__value="not-covered";var k=d(m);k.value=k.__value="planned";var ne=d(k);ne.value=ne.__value="covered",s(F);var se;_r(F),s(tt),s(Ye);var xe=d(Ye,2);{var we=D=>{var te=Pc(),Y=c(te);Y.__click=()=>y(C,"plan");var Q=d(Y,2);Q.__click=()=>y(C,"analytics");var de=d(Q,2);de.__click=()=>y(C,"stats");var ve=d(de,2);ve.__click=()=>y(C,"coordination"),s(te),G(()=>{he(Y,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(C)==="plan"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(Q,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(C)==="analytics"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(de,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(C)==="stats"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`),he(ve,1,`px-3 py-1.5 text-xs font-medium rounded transition-colors ${e(C)==="coordination"?"bg-[#eab308] text-[#18181b]":"text-[#c0c2c8] hover:text-[#f8f8f9]"}`)}),p(D,te)};E(xe,D=>{e(n),l(()=>e(n).length>0)&&D(we)})}var Qe=d(xe,2);Qe.__click=function(...D){var te;(te=_())==null||te.apply(this,D)},s(We);var ut=d(We,2),yt=c(ut);{var St=D=>{var te=Nt(),Y=ot(te);{var Q=ve=>{var fe=Ec();p(ve,fe)},de=ve=>{var fe=Qc(),Te=c(fe);{var je=pe=>{var Se=Uc(),ge=c(Se),ke=c(ge),O=d(c(ke),2),U=c(O),B=d(U);{var ae=R=>{var N=Oc(),J=c(N);s(N),G(()=>P(J,`â¢ Conflict ${e(f)+1} of ${e(i),l(()=>e(i).length)??""}`)),p(R,N)};E(B,R=>{e(i),l(()=>e(i).length>0)&&R(ae)})}s(O),s(ke);var z=d(ke,2),X=c(z);{var H=R=>{var N=Nc(),J=ot(N);J.__click=T;var ue=d(J,2);ue.__click=W,p(R,N)};E(X,R=>{e(i),l(()=>e(i).length>1)&&R(H)})}var $=d(X,2);$.__click=()=>{e(i).forEach(R=>{R.matches.slice(1).forEach(N=>{dt.deselectMatch(N.MatchId)})})},s(z),s(ge);var q=d(ge,2);mt(q,5,()=>e(i),ft,(R,N,J)=>{var ue=jc(),ie=c(ue),Ee=c(ie),Me=c(Ee);s(Ee);var ee=d(Ee,2);{var Ne=Ge=>{var be=Ac();p(Ge,be)};E(ee,Ge=>{J===e(f)&&Ge(Ne)})}s(ie);var Pe=d(ie,2);mt(Pe,5,()=>(e(N),l(()=>e(N).matches)),ft,(Ge,be,De)=>{const V=K(()=>(h($e),e(be),l(()=>$e(e(be))))),me=K(()=>(e(be),l(()=>w(e(be).MatchId)))),He=K(()=>De===0);var Ce=Wc(),it=c(Ce);{var Mt=vt=>{var Pt=Fc();p(vt,Pt)};E(it,vt=>{e(He)&&vt(Mt)})}var rt=d(it,2),Ae=c(rt),Ie=c(Ae),ct=c(Ie,!0);s(Ie);var Oe=d(Ie,2),Ze=c(Oe,!0);s(Oe);var Je=d(Oe,2),qe=c(Je,!0);s(Je),s(Ae);var Tt=d(Ae,2);{var Xt=vt=>{var Pt=Rc(),Et=c(Pt);s(Pt),G(()=>P(Et,`Conflicts with ${h(e(me)),l(()=>e(me).length)??""} other match${h(e(me)),l(()=>e(me).length!==1?"es":"")??""}`)),p(vt,Pt)};E(Tt,vt=>{h(e(me)),l(()=>e(me).length>0)&&vt(Xt)})}s(rt);var Bt=d(rt,2);{var Ct=vt=>{var Pt=Lc();Pt.__click=()=>dt.deselectMatch(e(be).MatchId),p(vt,Pt)};E(Bt,vt=>{e(He)||vt(Ct)})}s(Ce),G(vt=>{he(Ce,1,`flex items-center gap-2 px-2 py-1.5 rounded ${e(He)?"bg-[#eab308]/10 border border-[#eab308]/30":"bg-[#454654]/50"}`),P(ct,vt),P(Ze,(e(be),l(()=>e(be).CourtName))),P(qe,(h(e(V)),e(be),l(()=>e(V)||e(be).Division.CodeAlias)))},[()=>(h(Re),e(be),l(()=>Re(e(be).ScheduledStartDateTime)))]),p(Ge,Ce)}),s(Pe),s(ue),Xn(ue,(Ge,be)=>zn(b,e(b)[be]=Ge),Ge=>{var be;return(be=e(b))==null?void 0:be[Ge]},()=>[J]),G(()=>{he(ue,1,`border rounded p-3 transition-all ${J===e(f)?"border-[#eab308] bg-[#eab308]/5":"border-red-800/30 bg-[#3b3c48]/50"}`),P(Me,`Conflict Group ${J+1}: ${e(N),l(()=>e(N).conflictCount)??""} overlapping match${e(N),l(()=>e(N).conflictCount!==1?"es":"")??""}`)}),p(R,ue)}),s(q),s(Se),G(()=>P(U,`${e(i),l(()=>e(i).length)??""} conflict group${e(i),l(()=>e(i).length!==1?"s":"")??""} in your plan `)),p(pe,Se)};E(Te,pe=>{e(i),l(()=>e(i).length>0)&&pe(je)})}var Ke=d(Te,2);{var lt=pe=>{var Se=Hc(),ge=c(Se),ke=c(ge),O=d(c(ke),2),U=c(O);s(O),s(ke),s(ge);var B=d(ge,2);mt(B,5,()=>e(o),ft,(ae,z)=>{const X=K(()=>(e(z),l(()=>e(z).match))),H=K(()=>(h($e),h(e(X)),l(()=>$e(e(X))))),$=K(()=>(h(e(H)),h(Fe),l(()=>e(H)?Fe.getTeamStatus(e(H)):"not-covered")));var q=Bc(),R=c(q),N=c(R),J=c(N),ue=c(J,!0);s(J);var ie=d(J,2),Ee=c(ie,!0);s(ie);var Me=d(ie,2),ee=c(Me,!0);s(Me);var Ne=d(Me,2);{var Pe=V=>{var me=Yc();p(V,me)};E(Ne,V=>{e($)==="not-covered"&&V(Pe)})}s(N);var Ge=d(N,2),be=c(Ge,!0);s(Ge),s(R);var De=d(R,2);De.__click=()=>dt.selectMatch(e(X).MatchId),s(q),G(V=>{P(ue,V),P(Ee,(h(e(X)),l(()=>e(X).CourtName))),P(ee,(h(e(H)),h(e(X)),l(()=>e(H)||e(X).Division.CodeAlias))),P(be,(e(z),l(()=>e(z).reason)))},[()=>(h(Re),h(e(X)),l(()=>Re(e(X).ScheduledStartDateTime)))]),p(ae,q)}),s(B),s(Se),G(()=>P(U,`${e(o),l(()=>e(o).length)??""} suggestion${e(o),l(()=>e(o).length!==1?"s":"")??""} (prioritizing uncovered teams)`)),p(pe,Se)};E(Ke,pe=>{e(o),l(()=>e(o).length>0)&&pe(lt)})}var xt=d(Ke,2);mt(xt,5,()=>e(x),ft,(pe,Se)=>{const ge=K(()=>(e(v),e(Se),l(()=>e(v)[e(Se)])));var ke=Xc(),O=c(ke),U=c(O),B=c(U,!0);s(U);var ae=d(U,2),z=c(ae);s(ae),s(O);var X=d(O,2);mt(X,1,()=>e(ge),ft,(H,$)=>{const q=K(()=>(h($e),e($),l(()=>$e(e($))))),R=K(()=>(e($),l(()=>A(e($))))),N=K(()=>(e(a),e($),l(()=>e(a).has(e($).MatchId))));var J=zc(),ue=c(J);ue.__click=()=>dt.toggleMatch(e($).MatchId);var ie=c(ue);s(ue);var Ee=d(ue,2);{var Me=Ze=>{var Je=Vc();p(Ze,Je)};E(Ee,Ze=>{e(N)&&Ze(Me)})}var ee=d(Ee,2),Ne=c(ee,!0);s(ee);var Pe=d(ee,2),Ge=c(Pe,!0);s(Pe);var be=d(Pe,2),De=c(be),V=c(De),me=c(V,!0);s(V);var He=d(V,2);{var Ce=Ze=>{const Je=K(()=>(h(Fe),h(e(q)),l(()=>Fe.getTeamStatus(e(q)))));var qe=Gc();G(()=>{he(qe,1,`w-2 h-2 rounded ${e(Je)==="covered"?"bg-green-500":e(Je)==="partially-covered"?"bg-[#f59e0b]":e(Je)==="planned"?"bg-[#eab308]":"bg-[#808593]"}`),Ut(qe,"title",`Status: ${e(Je)??""}`)}),p(Ze,qe)};E(He,Ze=>{e(q)&&Ze(Ce)})}s(De);var it=d(De,2),Mt=c(it);s(it),s(be);var rt=d(be,2);{var Ae=Ze=>{var Je=qc(),qe=c(Je);qe.__click=Ct=>{Ct.stopPropagation(),y(M,e(M)===e(q)?null:e(q))};var Tt=c(qe,!0);s(qe);var Xt=d(qe,2);{var Bt=Ct=>{var vt=Jc(),Pt=ot(vt);Pt.__click=()=>y(M,null);var Et=d(Pt,2),fr=c(Et);{let mr=K(()=>(h(Fe),h(e(q)),l(()=>Fe.getTeamStatus(e(q)))));wa(fr,{get teamId(){return e(q)},get currentStatus(){return e(mr)},onStatusChange:xr=>{Fe.setTeamStatus(e(q),xr),y(M,null)},onClose:()=>y(M,null)})}s(Et),p(Ct,vt)};E(Xt,Ct=>{e(M)===e(q)&&Ct(Bt)})}s(Je),G(Ct=>{he(qe,1,`px-2 py-1 text-xs rounded transition-colors ${e(M)===e(q)?"bg-[#eab308] text-[#18181b]":"bg-[#454654] text-[#c0c2c8] hover:text-[#f8f8f9] hover:bg-[#525463] border border-[#525463]"}`),P(Tt,Ct)},[()=>(h(Fe),h(e(q)),l(()=>(()=>{const Ct=Fe.getTeamStatus(e(q));return Ct==="covered"?"â":Ct==="partially-covered"?"â":Ct==="planned"?"ð":"â"})()))]),p(Ze,Je)};E(rt,Ze=>{e(q)&&Ze(Ae)})}var Ie=d(rt,2),ct=c(Ie),Oe=c(ct,!0);s(ct),s(Ie),s(J),G(Ze=>{he(J,1,`flex items-center gap-3 px-3 py-2.5 rounded border ${e(N)?"border-red-800/50 bg-red-950/10":"border-[#eab308]/50 bg-[#eab308]/5"}`),he(ue,1,`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center hover:opacity-80 transition-colors ${e(N)?"border-red-800/50 bg-red-950/20":"border-[#eab308] bg-[#eab308]/20"}`),he(ie,0,`w-3 h-3 ${e(N)?"text-red-400":"text-[#facc15]"}`),P(Ne,Ze),P(Ge,(e($),l(()=>e($).CourtName))),P(me,(h(e(q)),e($),l(()=>e(q)||e($).Division.CodeAlias))),P(Mt,`vs ${e(R)??""}`),Zt(ct,`background-color: ${e($),l(()=>e($).Division.ColorHex)??""}20; color: ${e($),l(()=>e($).Division.ColorHex)??""}; border: 1px solid ${e($),l(()=>e($).Division.ColorHex)??""}40;`),P(Oe,(e($),l(()=>e($).Division.CodeAlias)))},[()=>(h(Re),e($),l(()=>Re(e($).ScheduledStartDateTime)))]),p(H,J)}),s(ke),G(()=>{P(B,e(Se)),P(z,`(${h(e(ge)),l(()=>e(ge).length)??""} match${h(e(ge)),l(()=>e(ge).length!==1?"es":"")??""})`)}),p(pe,ke)}),s(xt),s(fe),p(ve,fe)};E(Y,ve=>{e(n),l(()=>e(n).length===0)?ve(Q):ve(de,!1)})}p(D,te)},Ve=D=>{var te=Nt(),Y=ot(te);{var Q=ve=>{var fe=Kc();p(ve,fe)},de=ve=>{var fe=Nt(),Te=ot(fe);{var je=lt=>{var xt=Zc();p(lt,xt)},Ke=lt=>{var xt=el();p(lt,xt)};E(Te,lt=>{e(C)==="stats"?lt(je):lt(Ke,!1)},!0)}p(ve,fe)};E(Y,ve=>{e(C)==="analytics"?ve(Q):ve(de,!1)},!0)}p(D,te)};E(yt,D=>{e(C)==="plan"?D(St):D(Ve,!1)})}s(ut);var Be=d(ut,2);{var st=D=>{var te=tl(),Y=c(te),Q=c(Y);Q.__click=()=>{e(n).forEach(Se=>{const ge=$e(Se);ge&&Fe.setTeamStatus(ge,"planned")}),alert("All matches marked as Planned")};var de=d(Q,2);de.__click=()=>{e(n).forEach(Se=>{const ge=$e(Se);ge&&Fe.setTeamStatus(ge,"covered")}),alert("All matches marked as Covered")};var ve=d(de,2);ve.__click=()=>dt.clearPlan(),s(Y);var fe=d(Y,2),Te=c(fe);Te.__click=_e;var je=d(Te,2),Ke=c(je);Ke.__click=Z;var lt=d(Ke,2);lt.__click=oe;var xt=d(lt,2);xt.__click=L;var pe=d(xt,2);pe.__click=ce,s(je),s(fe),s(te),p(D,te)};E(Be,D=>{e(n),e(C),l(()=>e(n).length>0&&e(C)==="plan")&&D(st)})}s(at),s(ye),G(()=>{P(pt,`${e(n),l(()=>e(n).length)??""} match${e(n),l(()=>e(n).length!==1?"es":"")??""} selected `),se!==(se=e(I))&&(F.value=(F.__value=e(I))??"",ur(F,e(I)))}),p(t,ye),tr()}ir(["change","click"]);var nl=S('<span class="ml-2" style="color: #ef4444;"> </span>'),ol=S('<span class="text-xs whitespace-nowrap hidden sm:inline" style="color: #9fa2ab;"> <!></span>'),sl=S('<span class="font-medium truncate max-w-[200px] sm:max-w-none"> </span>'),il=S('<span class="hidden sm:inline"> </span>'),cl=S('<div class="flex items-center gap-2 text-xs" style="color: #9fa2ab;"><!> <!></div>'),ll=S('<span class="ml-2" style="color: #ef4444;"> </span>'),dl=S('<span class="text-xs sm:hidden" style="color: #9fa2ab;"> <!></span>'),ul=S('<div class="flex items-center gap-1 rounded-lg p-1" style="background-color: #454654;"><button>List</button> <button>Timeline</button></div>'),vl=S("<button> </button>"),fl=S('<!> <!> <button class="px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors hover:text-[#f8f8f9] min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8;" title="Export JSON">JSON</button> <button class="px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors hover:text-[#f8f8f9] min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8;" title="Export CSV">CSV</button>',1),ml=S('<div class="border-b" style="border-color: #454654; background-color: rgba(59, 60, 72, 0.3);"><div class="container mx-auto px-3 sm:px-4 py-4"><!></div></div>'),xl=S('<div class="text-center py-12"><div class="inline-block animate-pulse" style="color: #9fa2ab;">Loading matches...</div></div>'),bl=S('<div class="rounded-lg mb-6 px-4 py-3 border" style="background-color: rgba(127, 29, 29, 0.5); border-color: #991b1b; color: #fca5a5;"><div class="text-xs font-medium mb-1">Error</div> <div class="text-sm"> </div></div>'),hl=S('<div class="text-center py-12" style="color: #9fa2ab;"><div class="text-sm">No matches found for 630 Volleyball</div> <div class="text-xs mt-2" style="color: #808593;">Click "Config" to change event parameters</div></div>'),pl=S('<div class="text-[#9fa2ab]">CoachView component - To be migrated</div>'),gl=S('<div class="min-h-screen" style="background-color: #18181b;"><header class="border-b sticky top-0 z-10" style="border-color: #454654; background-color: rgba(59, 60, 72, 0.5);"><div class="container mx-auto px-3 sm:px-4 py-2 sm:py-3"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4"><div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 sm:gap-4 min-w-0 flex-1"><div class="flex items-center gap-2 min-w-0"><h1 class="text-base sm:text-lg font-semibold truncate" style="color: #f8f8f9;">630 Volleyball Coverage</h1> <!></div> <!> <!></div> <div class="flex items-center gap-1.5 sm:gap-2 flex-wrap"><div class="flex items-center gap-1"><label class="text-xs hidden sm:inline" style="color: #9fa2ab;">Role:</label> <select class="px-2 py-2 sm:py-1.5 text-xs rounded-lg transition-colors min-h-[44px] sm:min-h-0" style="background-color: #454654; color: #c0c2c8; border: 1px solid #525463;" title="Select your role"><option>Media</option><option>Spectator</option><option>Coach</option></select></div> <!> <button> </button></div></div></div></header> <!> <main class="container mx-auto px-3 sm:px-4 py-4 sm:py-6"><!> <!> <!> <!> <!> <!></main></div>');function $l(t,r){er(r,!1);const n=()=>Vt(Cs,"$selectedCount",v),a=()=>Vt(Sa,"$isMedia",v),o=()=>Vt(Ta,"$isSpectator",v),i=()=>Vt(ks,"$isCoach",v),u=()=>Vt(kr,"$userRole",v),[v,x]=ya(),g=j(),_=j(),C=j(),I=j(),M=j(),f=j();let b=j("PTAwMDAwNDEzMTQ90"),w=j("2025-11-01"),W=j(300),T=j([]),A=j(!1),Z=j(null),oe=j("list"),L=j(!1),ce=j(24426),_e=j(!1),ye=j(null);_a(()=>{at(e(b),e(w),e(W))});async function at(O,U,B){var ae;y(A,!0),y(Z,null),y(b,O),y(w,U),y(W,B);try{const z=await vo(O),X=(ae=z.Clubs)==null?void 0:ae.find(q=>q.Name==="630 Volleyball");X&&y(ce,X.ClubId),y(ye,{name:z.Name||z.EventName||z.FullName||z.Title||"Event",startDate:z.StartDate||z.StartDateTime||z.Start||z.StartTime,endDate:z.EndDate||z.EndDateTime||z.End||z.EndTime});const H=await uo(O,U,B),$=po(H.CourtSchedules);y(T,$)}catch(z){console.error("Error loading schedule:",z),y(Z,z instanceof Error?z.message:"Failed to load schedule"),y(T,[])}finally{y(A,!1)}}function We(){const O=JSON.stringify(e(T),null,2),U=new Blob([O],{type:"application/json"}),B=URL.createObjectURL(U),ae=document.createElement("a");ae.href=B,ae.download=`630-volleyball-matches-${e(w)}.json`,ae.click(),URL.revokeObjectURL(B)}function Ye(){const O=["Match ID","Division","Short Name","First Team","Second Team","Work Team","Court","Start Time","End Time","Duration","Involved Team"],U=e(T).map(H=>[H.MatchId.toString(),H.Division.Name,H.CompleteShortName,H.FirstTeamText,H.SecondTeamText,H.WorkTeamText,H.CourtName,new Date(H.ScheduledStartDateTime).toISOString(),new Date(H.ScheduledEndDateTime).toISOString(),((H.ScheduledEndDateTime-H.ScheduledStartDateTime)/6e4).toString(),H.InvolvedTeam]),B=[O.join(","),...U.map(H=>H.map($=>`"${$}"`).join(","))].join(`
`),ae=new Blob([B],{type:"text/csv"}),z=URL.createObjectURL(ae),X=document.createElement("a");X.href=z,X.download=`630-volleyball-matches-${e(w)}.csv`,X.click(),URL.revokeObjectURL(z)}le(()=>(e(T),Fe),()=>{if(e(T).length>0){const O=new Map;e(T).forEach(U=>{const ae=(U.InvolvedTeam==="first"?U.FirstTeamText:U.SecondTeamText).match(/(\d+-\d+)/),z=ae?ae[1]:"";if(!z)return;const X=O.get(z)||{total:0,inPlan:0};X.total++;let H=!1;dt.subscribe($=>{H=$.has(U.MatchId)})(),H&&X.inPlan++,O.set(z,X)}),O.forEach((U,B)=>{Fe.updateFromPlan(B,U.inPlan,U.total)})}}),le(()=>e(T),()=>{y(g,(()=>{const O=new Map;return e(T).forEach((U,B)=>{e(T).slice(B+1).forEach(ae=>{U.ScheduledStartDateTime<ae.ScheduledEndDateTime&&U.ScheduledEndDateTime>ae.ScheduledStartDateTime&&(O.has(U.MatchId)||O.set(U.MatchId,[]),O.get(U.MatchId).push(ae.MatchId))})}),e(T).filter(U=>O.has(U.MatchId)).length})())}),le(()=>n(),()=>{y(_,n())}),le(()=>a(),()=>{y(C,a())}),le(()=>o(),()=>{y(I,o())}),le(()=>i(),()=>{y(M,i())}),le(()=>u(),()=>{y(f,u())}),le(()=>(e(T),e(_),Fe),()=>{if(e(T).length>0&&e(_)!==void 0){const O=new Map,U=Gt(dt);e(T).forEach(B=>{const z=(B.InvolvedTeam==="first"?B.FirstTeamText:B.SecondTeamText).match(/(\d+-\d+)/),X=z?z[1]:"";if(!X)return;const H=O.get(X)||{total:0,inPlan:0};H.total++,U.has(B.MatchId)&&H.inPlan++,O.set(X,H)}),O.forEach((B,ae)=>{Fe.updateFromPlan(ae,B.inPlan,B.total)})}}),vr(),rr();var tt=gl(),nt=c(tt),pt=c(nt),gt=c(pt),It=c(gt),wt=c(It),Le=d(c(wt),2);{var F=O=>{var U=ol(),B=c(U),ae=d(B);{var z=X=>{var H=nl(),$=c(H);s(H),G(()=>P($,`â¢ ${e(g)??""} conflicts`)),p(X,H)};E(ae,X=>{e(g)>0&&X(z)})}s(U),G(()=>P(B,`${e(T),l(()=>e(T).length)??""} matches `)),p(O,U)};E(Le,O=>{e(T),l(()=>e(T).length>0)&&O(F)})}s(wt);var re=d(wt,2);{var m=O=>{var U=cl(),B=c(U);{var ae=H=>{var $=sl(),q=c($,!0);s($),G(()=>P(q,(e(ye),l(()=>e(ye).name)))),p(H,$)};E(B,H=>{e(ye),l(()=>e(ye).name)&&H(ae)})}var z=d(B,2);{var X=H=>{var $=il(),q=c($,!0);s($),G(R=>P(q,R),[()=>(e(ye),h(kt),l(()=>(()=>{try{const R=e(ye).startDate?new Date(e(ye).startDate).getTime():null,N=e(ye).endDate?new Date(e(ye).endDate).getTime():null;return R&&N&&Math.abs(R-N)>864e5?`${kt(R)} - ${kt(N)}`:R?kt(R):N?kt(N):null}catch{return null}})()))]),p(H,$)};E(z,H=>{e(ye),l(()=>(e(ye).startDate||e(ye).endDate)&&(()=>{try{const $=e(ye).startDate?new Date(e(ye).startDate).getTime():null,q=e(ye).endDate?new Date(e(ye).endDate).getTime():null;return $&&q&&Math.abs($-q)>864e5}catch{return!1}})())&&H(X)})}s(U),p(O,U)};E(re,O=>{e(ye),l(()=>e(ye)&&(e(ye).name||e(ye).startDate))&&O(m)})}var k=d(re,2);{var ne=O=>{var U=dl(),B=c(U),ae=d(B);{var z=X=>{var H=ll(),$=c(H);s(H),G(()=>P($,`â¢ ${e(g)??""} conflicts`)),p(X,H)};E(ae,X=>{e(g)>0&&X(z)})}s(U),G(()=>P(B,`${e(T),l(()=>e(T).length)??""} matches `)),p(O,U)};E(k,O=>{e(T),l(()=>e(T).length>0)&&O(ne)})}s(It);var se=d(It,2),xe=c(se),we=d(c(xe),2);we.__change=O=>kr.setRole(O.target.value);var Qe=c(we);Qe.value=Qe.__value="media";var ut=d(Qe);ut.value=ut.__value="spectator";var yt=d(ut);yt.value=yt.__value="coach",s(we);var St;_r(we),s(xe);var Ve=d(xe,2);{var Be=O=>{var U=fl(),B=ot(U);{var ae=q=>{var R=ul(),N=c(R);N.__click=()=>y(oe,"list");let J;var ue=d(N,2);ue.__click=()=>y(oe,"timeline");let ie;s(R),G(()=>{J=he(N,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,J,{"bg-gold-500":e(oe)==="list","text-charcoal-950":e(oe)==="list","text-charcoal-300":e(oe)!=="list","hover:text-charcoal-50":e(oe)!=="list"}),Zt(N,e(oe)==="list"?"background-color: #eab308; color: #18181b;":"color: #c0c2c8;"),ie=he(ue,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded transition-colors min-h-[44px] sm:min-h-0",null,ie,{"bg-gold-500":e(oe)==="timeline","text-charcoal-950":e(oe)==="timeline","text-charcoal-300":e(oe)!=="timeline","hover:text-charcoal-50":e(oe)!=="timeline"}),Zt(ue,e(oe)==="timeline"?"background-color: #eab308; color: #18181b;":"color: #c0c2c8;")}),p(q,R)};E(B,q=>{e(M)||q(ae)})}var z=d(B,2);{var X=q=>{var R=vl();R.__click=()=>y(_e,!e(_e));let N;var J=c(R);s(R),G(()=>{N=he(R,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0",null,N,{"text-charcoal-950":e(_e)}),Zt(R,e(_e)?"background-color: #eab308; color: #18181b;":"background-color: #454654; color: #c0c2c8;"),P(J,`Plan (${e(_)??""})`)}),p(q,R)};E(z,q=>{e(C)&&e(_)>0&&q(X)})}var H=d(z,2);H.__click=We;var $=d(H,2);$.__click=Ye,p(O,U)};E(Ve,O=>{e(T),l(()=>e(T).length>0)&&O(Be)})}var st=d(Ve,2);st.__click=()=>y(L,!e(L));let D;var te=c(st,!0);s(st),s(se),s(gt),s(pt),s(nt);var Y=d(nt,2);{var Q=O=>{var U=ml(),B=c(U),ae=c(B);Ps(ae,{get eventId(){return e(b)},get date(){return e(w)},get timeWindow(){return e(W)},onLoad:at,get loading(){return e(A)}}),s(B),s(U),p(O,U)};E(Y,O=>{e(L)&&O(Q)})}var de=d(Y,2),ve=c(de);{var fe=O=>{var U=xl();p(O,U)};E(ve,O=>{e(A)&&O(fe)})}var Te=d(ve,2);{var je=O=>{var U=bl(),B=d(c(U),2),ae=c(B,!0);s(B),s(U),G(()=>P(ae,e(Z))),p(O,U)};E(Te,O=>{e(Z)&&O(je)})}var Ke=d(Te,2);{var lt=O=>{var U=hl();p(O,U)};E(Ke,O=>{e(A),e(T),e(Z),l(()=>!e(A)&&e(T).length===0&&!e(Z))&&O(lt)})}var xt=d(Ke,2);{var pe=O=>{var U=Nt(),B=ot(U);{var ae=X=>{var H=pl();p(X,H)},z=X=>{var H=Nt(),$=ot(H);{var q=N=>{Gi(N,{get matches(){return e(T)},get eventId(){return e(b)},get clubId(){return e(ce)}})},R=N=>{Dc(N,{get matches(){return e(T)},get eventId(){return e(b)}})};E($,N=>{e(oe)==="list"?N(q):N(R,!1)},!0)}p(X,H)};E(B,X=>{e(M)?X(ae):X(z,!1)})}p(O,U)};E(xt,O=>{e(T),l(()=>e(T).length>0)&&O(pe)})}var Se=d(xt,2);E(Se,O=>{});var ge=d(Se,2);{var ke=O=>{al(O,{get matches(){return e(T)},onClose:()=>y(_e,!1)})};E(ge,O=>{e(_e)&&O(ke)})}s(de),s(tt),G(()=>{St!==(St=e(f))&&(we.value=(we.__value=e(f))??"",ur(we,e(f))),D=he(st,1,"px-3 py-2 sm:py-1.5 text-xs font-medium rounded-lg transition-colors min-h-[44px] sm:min-h-0",null,D,{"text-charcoal-950":e(L)}),Zt(st,e(L)?"background-color: #eab308; color: #18181b;":"background-color: #454654; color: #c0c2c8;"),P(te,e(L)?"Hide":"Config")}),p(t,tt),tr(),x()}ir(["change","click"]);export{$l as component,Dl as universal};
